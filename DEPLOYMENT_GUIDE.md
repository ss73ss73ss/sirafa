# ๐ ุฏููู ุงููุดุฑ ุงูุดุงูู ูููุตุฉ ุงูุตุฑุงูุฉ ุนูู Hostinger

## ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ูุดุฑ ููุตุฉ ุงูุตุฑุงูุฉ ุนูู ุฎุงุฏู Hostinger ุจุดูู ุงุญุชุฑุงูู ูุขูู.

## ๐๏ธ ุงููููุงุช ุงููุชููุฑุฉ

### 1. **install.sh** - ุงูุณูุฑูุจุช ุงูุฑุฆูุณู ููุชุซุจูุช
ุงูุณูุฑูุจุช ุงูุดุงูู ูุชุซุจูุช ูุฅุนุฏุงุฏ ุงูููุตุฉ ุจุงููุงูู.

#### ุงูููุฒุงุช:
- โ ุชูุธูู npm cache ุจุดูู ูุงูู
- โ ุงุณุชุฎุฏุงู npm ci ููุชุซุจูุช ุงููุธูู
- โ ุงูุชุญูู ูู ุฌููุน ุงููุชุทูุจุงุช
- โ ุฅุนุฏุงุฏ PM2 ุชููุงุฆูุงู
- โ ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- โ ุญูุธ ุงูุณุฌูุงุช ุงูุชูุตูููุฉ

### 2. **pre-install.sh** - ูุญุต ุงูุจูุฆุฉ ูุจู ุงูุชุซุจูุช
ููุญุต ุฌููุน ุงููุชุทูุจุงุช ูุจู ุงูุจุฏุก ูู ุงูุชุซุจูุช.

#### ุงููุญูุตุงุช:
- ูุธุงู ุงูุชุดุบูู
- Node.js (ุงูุฅุตุฏุงุฑ 18+)
- npm (ุงูุฅุตุฏุงุฑ 9+)
- PostgreSQL (ุงุฎุชูุงุฑู)
- Git (ุงุฎุชูุงุฑู)
- PM2
- ุงููุณุงุญุฉ ุงููุชุงุญุฉ (5GB+)
- ุงูุฐุงูุฑุฉ ุงููุชุงุญุฉ (2GB+)
- ุงูููุงูุฐ ุงููุชุงุญุฉ
- ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช

### 3. **cleanup.sh** - ุชูุธูู ุงูุจูุฆุฉ
ููุธู ุงูุจูุฆุฉ ูู ุงููููุงุช ุงููุคูุชุฉ ูุงููุฏููุฉ.

#### ูููู ุจุญุฐู:
- node_modules
- package-lock.json
- dist (ูููุงุช ุงูุจูุงุก)
- npm cache
- PM2 logs
- ุงููููุงุช ุงููุคูุชุฉ

### 4. **ecosystem.config.js** - ุฅุนุฏุงุฏุงุช PM2
ููู ุชูููู PM2 ุงููุชูุฏู ููุฅูุชุงุฌ.

#### ุงูููุฒุงุช:
- Cluster mode ููุงุณุชูุงุฏุฉ ูู ุฌููุน ุงูููู
- ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุชููุงุฆู
- ูุฑุงูุจุฉ ุงุณุชููุงู ุงูุฐุงูุฑุฉ
- ุงูุณุฌูุงุช ุงูููุธูุฉ
- ุงูุฅููุงู ุงูุขูู
- ุชุญุณููุงุช ุงูุฃุฏุงุก

### 5. **health-check.js** - ูุญุต ุตุญุฉ ุงูุชุทุจูู
ุณูุฑูุจุช Node.js ููุญุต ุตุญุฉ ุงูุชุทุจูู ูุงููุธุงู.

#### ููุญุต:
- HTTP endpoints
- ุนูููุฉ PM2
- ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ููุงุฑุฏ ุงููุธุงู (CPU, RAM, Disk)

---

## ๐ ุฎุทูุงุช ุงููุดุฑ

### ุงูุฎุทูุฉ 1: ุงูุชุญุถูุฑ

```bash
# 1. ุงูุงุชุตุงู ุจุฎุงุฏู Hostinger ุนุจุฑ SSH
ssh username@your-server.hostinger.com

# 2. ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงููุดุฑูุน
cd /home/username/exchange-platform

# 3. ุฑูุน ูููุงุช ุงููุดุฑูุน (ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ)
git clone https://github.com/your-username/exchange-platform.git .
# ุฃู ุงุณุชุฎุฏู FTP/SFTP ูุฑูุน ุงููููุงุช
```

### ุงูุฎุทูุฉ 2: ุฅุนุทุงุก ุงูุตูุงุญูุงุช ููุณูุฑูุจุชุงุช

```bash
# ุฅุนุทุงุก ุตูุงุญูุงุช ุงูุชูููุฐ ูุฌููุน ุงูุณูุฑูุจุชุงุช
chmod +x install.sh
chmod +x pre-install.sh
chmod +x cleanup.sh
chmod +x health-check.js
```

### ุงูุฎุทูุฉ 3: ูุญุต ุงูุจูุฆุฉ

```bash
# ูุญุต ุงูุจูุฆุฉ ูุจู ุงูุชุซุจูุช
./pre-install.sh
```

ุฅุฐุง ุธูุฑุช ุฃู ูุดุงููุ ูู ุจุญููุง ูุจู ุงููุชุงุจุนุฉ.

### ุงูุฎุทูุฉ 4: ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ

```bash
# ูุณุฎ ููู ุงูุจูุฆุฉ
cp .env.example .env

# ุชุนุฏูู ููู ุงูุจูุฆุฉ
nano .env
```

#### ุงููุชุบูุฑุงุช ุงููุทููุจุฉ:
```env
# ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_URL=postgresql://user:password@host:5432/database

# ุงูุฃูุงู
JWT_SECRET=your-secret-key-here

# ุงูุฎุงุฏู
PORT=5000
HOST=0.0.0.0
NODE_ENV=production

# ุงูุนููู
CLIENT_ORIGIN=https://your-domain.com
VITE_API_URL=https://your-domain.com/api

# PM2 (ุงุฎุชูุงุฑู)
PM2_INSTANCES=max
PM2_MAX_MEMORY=2G
```

### ุงูุฎุทูุฉ 5: ุงูุชุซุจูุช

```bash
# ุชุดุบูู ุงูุชุซุจูุช ุงููุงูู
./install.sh
```

ุงูุณูุฑูุจุช ุณูููู ุจู:
1. ุงูุชุญูู ูู ุฌููุน ุงููุชุทูุจุงุช
2. ุชูุธูู npm cache
3. ุชุซุจูุช ุงูุชุจุนูุงุช ุจุงุณุชุฎุฏุงู npm ci
4. ุฅูุดุงุก ููู .env ุฅุฐุง ูู ููู ููุฌูุฏุงู
5. ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
6. ุจูุงุก ุงููุดุฑูุน ููุฅูุชุงุฌ
7. ุชุซุจูุช ูุฅุนุฏุงุฏ PM2
8. ุฅูุดุงุก ูููุงุช ุงูุชูููู

### ุงูุฎุทูุฉ 6: ุชุดุบูู ุงูุชุทุจูู

```bash
# ุชุดุบูู ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู PM2
pm2 start ecosystem.config.js

# ุฃู ููุชุดุบูู ูู ูุถุน ุงูุฅูุชุงุฌ
pm2 start ecosystem.config.js --env production

# ุญูุธ ูุงุฆูุฉ ุงูุนูููุงุช
pm2 save

# ุฅุนุฏุงุฏ ุงูุชุดุบูู ุงูุชููุงุฆู ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
pm2 startup
# ุงุชุจุน ุงูุชุนูููุงุช ุงููุนุฑูุถุฉ
```

### ุงูุฎุทูุฉ 7: ุงูุชุญูู ูู ุงูุชุดุบูู

```bash
# ุนุฑุถ ุญุงูุฉ ุงูุนูููุงุช
pm2 status

# ุนุฑุถ ุงูุณุฌูุงุช
pm2 logs exchange-platform

# ูุฑุงูุจุฉ ุงูุฃุฏุงุก
pm2 monit

# ูุญุต ุตุญุฉ ุงูุชุทุจูู
node health-check.js
```

---

## ๐ง ุฅุฏุงุฑุฉ ุงูุชุทุจูู

### ุฃูุงูุฑ PM2 ุงูุฃุณุงุณูุฉ

```bash
# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
pm2 restart exchange-platform

# ุฅููุงู ุงูุชุทุจูู
pm2 stop exchange-platform

# ุญุฐู ุงูุชุทุจูู ูู PM2
pm2 delete exchange-platform

# ุฅุนุงุฏุฉ ุชุญููู ุจุฏูู ุชููู (Zero-downtime)
pm2 reload exchange-platform

# ุนุฑุถ ูุนูููุงุช ุชูุตูููุฉ
pm2 describe exchange-platform

# ุนุฑุถ ุงูุณุฌูุงุช ุงููุจุงุดุฑุฉ
pm2 logs exchange-platform --lines 100
```

### ุงูุชุญุฏูุซุงุช

```bash
# 1. ุณุญุจ ุงูุชุญุฏูุซุงุช ูู Git
git pull origin main

# 2. ุชุซุจูุช ุงูุชุจุนูุงุช ุงูุฌุฏูุฏุฉ
npm ci --production

# 3. ุจูุงุก ุงููุดุฑูุน
npm run build

# 4. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run db:push

# 5. ุฅุนุงุฏุฉ ุชุดุบูู PM2
pm2 reload ecosystem.config.js
```

### ุงููุณุฎ ุงูุงุญุชูุงุทู

```bash
# ูุณุฎ ุงุญุชูุงุทู ููุงุนุฏุฉ ุงูุจูุงูุงุช
pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql

# ูุณุฎ ุงุญุชูุงุทู ูููููุงุช ุงููุฑููุนุฉ
tar -czf uploads_backup_$(date +%Y%m%d).tar.gz public/uploads

# ูุณุฎ ุงุญุชูุงุทู ูููู ุงูุจูุฆุฉ
cp .env .env.backup_$(date +%Y%m%d)
```

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### 1. ูุดููุฉ "npm ERR! EEXIST"
```bash
# ุงูุญู: ุชูุธูู npm cache
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### 2. ูุดููุฉ "EADDRINUSE: Port already in use"
```bash
# ุงูุญู: ุชุบููุฑ ุงููููุฐ ูู .env
PORT=5001  # ุฃู ุฃู ูููุฐ ุขุฎุฑ ูุชุงุญ
```

### 3. ูุดููุฉ ุงูุฐุงูุฑุฉ "JavaScript heap out of memory"
```bash
# ุงูุญู: ุฒูุงุฏุฉ ุญุฌู ุงูุฐุงูุฑุฉ
NODE_OPTIONS="--max-old-space-size=4096" npm run build
```

### 4. ูุดููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุชุญูู ูู ุงูุงุชุตุงู
psql $DATABASE_URL -c "SELECT 1"

# ุฅุนุงุฏุฉ ุฅูุดุงุก Schema
npm run db:push -- --force
```

### 5. ูุดููุฉ PM2 ูุง ูุนูู
```bash
# ุฅุนุงุฏุฉ ุชุซุจูุช PM2
npm uninstall -g pm2
npm install -g pm2@latest

# ุฃู ุงุณุชุฎุฏุงู PM2 ุงููุญูู
npx pm2 start ecosystem.config.js
```

---

## ๐ ุงููุฑุงูุจุฉ ูุงูุณุฌูุงุช

### ููุงูุน ุงูุณุฌูุงุช
- **PM2 Logs**: `./logs/pm2-*.log`
- **Install Logs**: `./install_*.log`
- **Health Check**: `./logs/health-check-*.json`

### ุฃูุงูุฑ ุงููุฑุงูุจุฉ
```bash
# ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
pm2 monit

# ุนุฑุถ ูุนูููุงุช ุงููุธุงู
pm2 info exchange-platform

# ูุญุต ุตุญุฉ ุงูุชุทุจูู
node health-check.js

# ูุฑุงูุจุฉ ุงูุณุฌูุงุช ุงููุจุงุดุฑุฉ
tail -f logs/pm2-out.log
```

---

## ๐ ุงูุฃูุงู

### ูุตุงุฆุญ ูููุฉ:
1. **ุชุฃููู ููู .env**
   ```bash
   chmod 600 .env
   ```

2. **ุชุญุฏูุซ ุงูุชุจุนูุงุช ุจุงูุชุธุงู**
   ```bash
   npm audit
   npm audit fix
   ```

3. **ุงุณุชุฎุฏุงู HTTPS**
   - ูู ุจุฅุนุฏุงุฏ SSL certificate
   - ุงุณุชุฎุฏู Cloudflare ุฃู Let's Encrypt

4. **ุชูููุฏ ุงููุตูู SSH**
   - ุงุณุชุฎุฏู SSH keys ุจุฏูุงู ูู ูููุงุช ุงููุฑูุฑ
   - ูู ุจุชุบููุฑ ุงููููุฐ ุงูุงูุชุฑุงุถู ูู SSH

5. **ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูููุชุธู**
   - ูู ุจุนูู ูุณุฎ ุงุญุชูุงุทูุฉ ููููุฉ
   - ุงุญุชูุธ ุจุงููุณุฎ ูู ููุงู ุขูู ุฎุงุฑุฌ ุงูุฎุงุฏู

---

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู:
1. ุฑุงุฌุน ูููุงุช ุงูุณุฌูุงุช ูู `./logs/`
2. ุชุฃูุฏ ูู ุงุชุจุงุน ุฌููุน ุงูุฎุทูุงุช ุจุงูุชุฑุชูุจ
3. ุชุญูู ูู ูุชุทูุจุงุช ุงููุธุงู ุจุงุณุชุฎุฏุงู `./pre-install.sh`
4. ุงุณุชุฎุฏู `./cleanup.sh` ูุชูุธูู ุงูุจูุฆุฉ ูุฅุนุงุฏุฉ ุงููุญุงููุฉ

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] Node.js 18+ ูุซุจุช
- [ ] npm 9+ ูุซุจุช
- [ ] PostgreSQL ูุชุงุญ (ุฃู DATABASE_URL ุตุญูุญ)
- [ ] ููู .env ูุญุฏูุซ ุจุงูููู ุงูุตุญูุญุฉ
- [ ] ุงููููุฐ 5000 ูุชุงุญ (ุฃู ุงููููุฐ ุงููุญุฏุฏ)
- [ ] ูุณุงุญุฉ ูุงููุฉ ุนูู ุงููุฑุต (5GB+)
- [ ] ุฐุงูุฑุฉ ูุงููุฉ (2GB+)
- [ ] PM2 ูุซุจุช ููุนูู
- [ ] ุงูุชุทุจูู ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] ุงููุณุฎ ุงูุงุญุชูุงุทู ููุนุฏ

---

**ุขุฎุฑ ุชุญุฏูุซ:** $(date)
**ุงูุฅุตุฏุงุฑ:** 2.0.0