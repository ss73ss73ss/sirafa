var X8=Object.defineProperty;var Qw=t=>{throw TypeError(t)};var eO=(t,s,n)=>s in t?X8(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var K=(t,s,n)=>eO(t,typeof s!="symbol"?s+"":s,n),lg=(t,s,n)=>s.has(t)||Qw("Cannot "+n);var Y=(t,s,n)=>(lg(t,s,"read from private field"),n?n.call(t):s.get(t)),Lt=(t,s,n)=>s.has(t)?Qw("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n),rt=(t,s,n,r)=>(lg(t,s,"write to private field"),r?r.call(t,n):s.set(t,n),n),Wt=(t,s,n)=>(lg(t,s,"access private method"),n);var uh=(t,s,n,r)=>({set _(a){rt(t,s,a,n)},get _(){return Y(t,s,r)}});function tO(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zk={exports:{}},Hp={},Fk={exports:{}},ts={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=Symbol.for("react.element"),sO=Symbol.for("react.portal"),nO=Symbol.for("react.fragment"),rO=Symbol.for("react.strict_mode"),aO=Symbol.for("react.profiler"),iO=Symbol.for("react.provider"),lO=Symbol.for("react.context"),oO=Symbol.for("react.forward_ref"),cO=Symbol.for("react.suspense"),dO=Symbol.for("react.memo"),uO=Symbol.for("react.lazy"),Hw=Symbol.iterator;function fO(t){return t===null||typeof t!="object"?null:(t=Hw&&t[Hw]||t["@@iterator"],typeof t=="function"?t:null)}var Uk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$k=Object.assign,Bk={};function du(t,s,n){this.props=t,this.context=s,this.refs=Bk,this.updater=n||Uk}du.prototype.isReactComponent={};du.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};du.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vk(){}Vk.prototype=du.prototype;function Iy(t,s,n){this.props=t,this.context=s,this.refs=Bk,this.updater=n||Uk}var Ay=Iy.prototype=new Vk;Ay.constructor=Iy;$k(Ay,du.prototype);Ay.isPureReactComponent=!0;var Ww=Array.isArray,Gk=Object.prototype.hasOwnProperty,Dy={current:null},Yk={key:!0,ref:!0,__self:!0,__source:!0};function Qk(t,s,n){var r,a={},i=null,l=null;if(s!=null)for(r in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)Gk.call(s,r)&&!Yk.hasOwnProperty(r)&&(a[r]=s[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Lm,type:t,key:i,ref:l,props:a,_owner:Dy.current}}function mO(t,s){return{$$typeof:Lm,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Py(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lm}function hO(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var Zw=/\/+/g;function og(t,s){return typeof t=="object"&&t!==null&&t.key!=null?hO(""+t.key):s.toString(36)}function Jh(t,s,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Lm:case sO:l=!0}}if(l)return l=t,a=a(l),t=r===""?"."+og(l,0):r,Ww(a)?(n="",t!=null&&(n=t.replace(Zw,"$&/")+"/"),Jh(a,s,n,"",function(d){return d})):a!=null&&(Py(a)&&(a=mO(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Zw,"$&/")+"/")+t)),s.push(a)),1;if(l=0,r=r===""?".":r+":",Ww(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+og(i,o);l+=Jh(i,s,n,c,a)}else if(c=fO(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+og(i,o++),l+=Jh(i,s,n,c,a);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function fh(t,s,n){if(t==null)return t;var r=[],a=0;return Jh(t,r,"","",function(i){return s.call(n,i,a++)}),r}function xO(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},qh={transition:null},pO={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:qh,ReactCurrentOwner:Dy};function Hk(){throw Error("act(...) is not supported in production builds of React.")}ts.Children={map:fh,forEach:function(t,s,n){fh(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return fh(t,function(){s++}),s},toArray:function(t){return fh(t,function(s){return s})||[]},only:function(t){if(!Py(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ts.Component=du;ts.Fragment=nO;ts.Profiler=aO;ts.PureComponent=Iy;ts.StrictMode=rO;ts.Suspense=cO;ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pO;ts.act=Hk;ts.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$k({},t.props),a=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=Dy.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Gk.call(s,c)&&!Yk.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Lm,type:t.type,key:a,ref:i,props:r,_owner:l}};ts.createContext=function(t){return t={$$typeof:lO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iO,_context:t},t.Consumer=t};ts.createElement=Qk;ts.createFactory=function(t){var s=Qk.bind(null,t);return s.type=t,s};ts.createRef=function(){return{current:null}};ts.forwardRef=function(t){return{$$typeof:oO,render:t}};ts.isValidElement=Py;ts.lazy=function(t){return{$$typeof:uO,_payload:{_status:-1,_result:t},_init:xO}};ts.memo=function(t,s){return{$$typeof:dO,type:t,compare:s===void 0?null:s}};ts.startTransition=function(t){var s=qh.transition;qh.transition={};try{t()}finally{qh.transition=s}};ts.unstable_act=Hk;ts.useCallback=function(t,s){return Lr.current.useCallback(t,s)};ts.useContext=function(t){return Lr.current.useContext(t)};ts.useDebugValue=function(){};ts.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};ts.useEffect=function(t,s){return Lr.current.useEffect(t,s)};ts.useId=function(){return Lr.current.useId()};ts.useImperativeHandle=function(t,s,n){return Lr.current.useImperativeHandle(t,s,n)};ts.useInsertionEffect=function(t,s){return Lr.current.useInsertionEffect(t,s)};ts.useLayoutEffect=function(t,s){return Lr.current.useLayoutEffect(t,s)};ts.useMemo=function(t,s){return Lr.current.useMemo(t,s)};ts.useReducer=function(t,s,n){return Lr.current.useReducer(t,s,n)};ts.useRef=function(t){return Lr.current.useRef(t)};ts.useState=function(t){return Lr.current.useState(t)};ts.useSyncExternalStore=function(t,s,n){return Lr.current.useSyncExternalStore(t,s,n)};ts.useTransition=function(){return Lr.current.useTransition()};ts.version="18.3.1";Fk.exports=ts;var u=Fk.exports;const gt=cu(u),Wk=tO({__proto__:null,default:gt},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gO=u,jO=Symbol.for("react.element"),yO=Symbol.for("react.fragment"),vO=Object.prototype.hasOwnProperty,bO=gO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wO={key:!0,ref:!0,__self:!0,__source:!0};function Zk(t,s,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)vO.call(s,r)&&!wO.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:jO,type:t,key:i,ref:l,props:a,_owner:bO.current}}Hp.Fragment=yO;Hp.jsx=Zk;Hp.jsxs=Zk;zk.exports=Hp;var e=zk.exports,Jk={exports:{}},oa={},qk={exports:{}},Kk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(U,W){var re=U.length;U.push(W);e:for(;0<re;){var we=re-1>>>1,be=U[we];if(0<a(be,W))U[we]=W,U[re]=be,re=we;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],re=U.pop();if(re!==W){U[0]=re;e:for(var we=0,be=U.length,J=be>>>1;we<J;){var Fe=2*(we+1)-1,Oe=U[Fe],Ve=Fe+1,Ne=U[Ve];if(0>a(Oe,re))Ve<be&&0>a(Ne,Oe)?(U[we]=Ne,U[Ve]=re,we=Ve):(U[we]=Oe,U[Fe]=re,we=Fe);else if(Ve<be&&0>a(Ne,re))U[we]=Ne,U[Ve]=re,we=Ve;else break e}}return W}function a(U,W){var re=U.sortIndex-W.sortIndex;return re!==0?re:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],f=1,x=null,h=3,j=!1,v=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=U)r(d),W.sortIndex=W.expirationTime,s(c,W);else break;W=n(d)}}function w(U){if(p=!1,g(U),!v)if(n(c)!==null)v=!0,B(N);else{var W=n(d);W!==null&&de(w,W.startTime-U)}}function N(U,W){v=!1,p&&(p=!1,y(S),S=-1),j=!0;var re=h;try{for(g(W),x=n(c);x!==null&&(!(x.expirationTime>W)||U&&!$());){var we=x.callback;if(typeof we=="function"){x.callback=null,h=x.priorityLevel;var be=we(x.expirationTime<=W);W=t.unstable_now(),typeof be=="function"?x.callback=be:x===n(c)&&r(c),g(W)}else r(c);x=n(c)}if(x!==null)var J=!0;else{var Fe=n(d);Fe!==null&&de(w,Fe.startTime-W),J=!1}return J}finally{x=null,h=re,j=!1}}var k=!1,L=null,S=-1,T=5,E=-1;function $(){return!(t.unstable_now()-E<T)}function F(){if(L!==null){var U=t.unstable_now();E=U;var W=!0;try{W=L(!0,U)}finally{W?Z():(k=!1,L=null)}}else k=!1}var Z;if(typeof m=="function")Z=function(){m(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,D=G.port2;G.port1.onmessage=F,Z=function(){D.postMessage(null)}}else Z=function(){b(F,0)};function B(U){L=U,k||(k=!0,Z())}function de(U,W){S=b(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||j||(v=!0,B(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var re=h;h=W;try{return U()}finally{h=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=h;h=U;try{return W()}finally{h=re}},t.unstable_scheduleCallback=function(U,W,re){var we=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,U){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=re+be,U={id:f++,callback:W,priorityLevel:U,startTime:re,expirationTime:be,sortIndex:-1},re>we?(U.sortIndex=re,s(d,U),n(c)===null&&U===n(d)&&(p?(y(S),S=-1):p=!0,de(w,re-we))):(U.sortIndex=be,s(c,U),v||j||(v=!0,B(N))),U},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(U){var W=h;return function(){var re=h;h=W;try{return U.apply(this,arguments)}finally{h=re}}}})(Kk);qk.exports=Kk;var NO=qk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO=u,ia=NO;function Be(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xk=new Set,Tf={};function Cc(t,s){$d(t,s),$d(t+"Capture",s)}function $d(t,s){for(Tf[t]=s,t=0;t<s.length;t++)Xk.add(s[t])}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C1=Object.prototype.hasOwnProperty,MO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jw={},qw={};function SO(t){return C1.call(qw,t)?!0:C1.call(Jw,t)?!1:MO.test(t)?qw[t]=!0:(Jw[t]=!0,!1)}function kO(t,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LO(t,s,n,r){if(s===null||typeof s>"u"||kO(t,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Tr(t,s,n,r,a,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kn[t]=new Tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Kn[s]=new Tr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kn[t]=new Tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kn[t]=new Tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kn[t]=new Tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kn[t]=new Tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kn[t]=new Tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kn[t]=new Tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kn[t]=new Tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var _y=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(_y,Ry);Kn[s]=new Tr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(_y,Ry);Kn[s]=new Tr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(_y,Ry);Kn[s]=new Tr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kn[t]=new Tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kn[t]=new Tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oy(t,s,n,r){var a=Kn.hasOwnProperty(s)?Kn[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(LO(s,n,a,r)&&(n=null),r||a===null?SO(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,s,n):t.setAttribute(s,n))))}var yl=CO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),Zc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),zy=Symbol.for("react.strict_mode"),M1=Symbol.for("react.profiler"),e6=Symbol.for("react.provider"),t6=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),k1=Symbol.for("react.suspense_list"),Uy=Symbol.for("react.memo"),Dl=Symbol.for("react.lazy"),s6=Symbol.for("react.offscreen"),Kw=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=Kw&&t[Kw]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,cg;function ef(t){if(cg===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);cg=s&&s[1]||""}return`
`+cg+t}var dg=!1;function ug(t,s){if(!t||dg)return"";dg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var r=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){r=d}t.call(s.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{dg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ef(t):""}function TO(t){switch(t.tag){case 5:return ef(t.type);case 16:return ef("Lazy");case 13:return ef("Suspense");case 19:return ef("SuspenseList");case 0:case 2:case 15:return t=ug(t.type,!1),t;case 11:return t=ug(t.type.render,!1),t;case 1:return t=ug(t.type,!0),t;default:return""}}function L1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jc:return"Fragment";case Zc:return"Portal";case M1:return"Profiler";case zy:return"StrictMode";case S1:return"Suspense";case k1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t6:return(t.displayName||"Context")+".Consumer";case e6:return(t._context.displayName||"Context")+".Provider";case Fy:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uy:return s=t.displayName||null,s!==null?s:L1(t.type)||"Memo";case Dl:s=t._payload,t=t._init;try{return L1(t(s))}catch{}}return null}function EO(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L1(s);case 8:return s===zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function oo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n6(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function IO(t){var s=n6(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function hh(t){t._valueTracker||(t._valueTracker=IO(t))}function r6(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=n6(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function Ex(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function T1(t,s){var n=s.checked;return ln({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xw(t,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=oo(s.value!=null?s.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function a6(t,s){s=s.checked,s!=null&&Oy(t,"checked",s,!1)}function E1(t,s){a6(t,s);var n=oo(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?I1(t,s.type,n):s.hasOwnProperty("defaultValue")&&I1(t,s.type,oo(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function eN(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function I1(t,s,n){(s!=="number"||Ex(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tf=Array.isArray;function od(t,s,n,r){if(t=t.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=s.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oo(n),s=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function A1(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Be(91));return ln({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tN(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(Be(92));if(tf(n)){if(1<n.length)throw Error(Be(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:oo(n)}}function i6(t,s){var n=oo(s.value),r=oo(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sN(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function l6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D1(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?l6(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xh,o6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(s,n,r,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(xh=xh||document.createElement("div"),xh.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=xh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ef(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AO=["Webkit","ms","Moz","O"];Object.keys(ff).forEach(function(t){AO.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),ff[s]=ff[t]})});function c6(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||ff.hasOwnProperty(t)&&ff[t]?(""+s).trim():s+"px"}function d6(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=c6(n,s[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var DO=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P1(t,s){if(s){if(DO[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Be(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Be(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Be(62))}}function _1(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R1=null;function $y(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var O1=null,cd=null,dd=null;function nN(t){if(t=Im(t)){if(typeof O1!="function")throw Error(Be(280));var s=t.stateNode;s&&(s=Kp(s),O1(t.stateNode,t.type,s))}}function u6(t){cd?dd?dd.push(t):dd=[t]:cd=t}function f6(){if(cd){var t=cd,s=dd;if(dd=cd=null,nN(t),s)for(t=0;t<s.length;t++)nN(s[t])}}function m6(t,s){return t(s)}function h6(){}var fg=!1;function x6(t,s,n){if(fg)return t(s,n);fg=!0;try{return m6(t,s,n)}finally{fg=!1,(cd!==null||dd!==null)&&(h6(),f6())}}function If(t,s){var n=t.stateNode;if(n===null)return null;var r=Kp(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Be(231,s,typeof n));return n}var z1=!1;if(dl)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){z1=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{z1=!1}function PO(t,s,n,r,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(n,d)}catch(f){this.onError(f)}}var mf=!1,Ix=null,Ax=!1,F1=null,_O={onError:function(t){mf=!0,Ix=t}};function RO(t,s,n,r,a,i,l,o,c){mf=!1,Ix=null,PO.apply(_O,arguments)}function OO(t,s,n,r,a,i,l,o,c){if(RO.apply(this,arguments),mf){if(mf){var d=Ix;mf=!1,Ix=null}else throw Error(Be(198));Ax||(Ax=!0,F1=d)}}function Mc(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function p6(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function rN(t){if(Mc(t)!==t)throw Error(Be(188))}function zO(t){var s=t.alternate;if(!s){if(s=Mc(t),s===null)throw Error(Be(188));return s!==t?null:t}for(var n=t,r=s;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return rN(a),t;if(i===r)return rN(a),s;i=i.sibling}throw Error(Be(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(Be(189))}}if(n.alternate!==r)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?t:s}function g6(t){return t=zO(t),t!==null?j6(t):null}function j6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=j6(t);if(s!==null)return s;t=t.sibling}return null}var y6=ia.unstable_scheduleCallback,aN=ia.unstable_cancelCallback,FO=ia.unstable_shouldYield,UO=ia.unstable_requestPaint,pn=ia.unstable_now,$O=ia.unstable_getCurrentPriorityLevel,By=ia.unstable_ImmediatePriority,v6=ia.unstable_UserBlockingPriority,Dx=ia.unstable_NormalPriority,BO=ia.unstable_LowPriority,b6=ia.unstable_IdlePriority,Wp=null,Si=null;function VO(t){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(Wp,t,void 0,(t.current.flags&128)===128)}catch{}}var Wa=Math.clz32?Math.clz32:QO,GO=Math.log,YO=Math.LN2;function QO(t){return t>>>=0,t===0?32:31-(GO(t)/YO|0)|0}var ph=64,gh=4194304;function sf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Px(t,s){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=sf(o):(i&=l,i!==0&&(r=sf(i)))}else l=n&~a,l!==0?r=sf(l):i!==0&&(r=sf(i));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(r&4&&(r|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)n=31-Wa(s),a=1<<n,r|=t[n],s&=~a;return r}function HO(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WO(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Wa(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=HO(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function U1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w6(){var t=ph;return ph<<=1,!(ph&4194240)&&(ph=64),t}function mg(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function Tm(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Wa(s),t[s]=n}function ZO(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Wa(n),i=1<<a;s[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function Vy(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-Wa(n),a=1<<r;a&s|t[r]&s&&(t[r]|=s),n&=~a}}var Ts=0;function N6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C6,Gy,M6,S6,k6,$1=!1,jh=[],Kl=null,Xl=null,eo=null,Af=new Map,Df=new Map,Ol=[],JO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iN(t,s){switch(t){case"focusin":case"focusout":Kl=null;break;case"dragenter":case"dragleave":Xl=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Af.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(s.pointerId)}}function Pu(t,s,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},s!==null&&(s=Im(s),s!==null&&Gy(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function qO(t,s,n,r,a){switch(s){case"focusin":return Kl=Pu(Kl,t,s,n,r,a),!0;case"dragenter":return Xl=Pu(Xl,t,s,n,r,a),!0;case"mouseover":return eo=Pu(eo,t,s,n,r,a),!0;case"pointerover":var i=a.pointerId;return Af.set(i,Pu(Af.get(i)||null,t,s,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Df.set(i,Pu(Df.get(i)||null,t,s,n,r,a)),!0}return!1}function L6(t){var s=Oo(t.target);if(s!==null){var n=Mc(s);if(n!==null){if(s=n.tag,s===13){if(s=p6(n),s!==null){t.blockedOn=s,k6(t.priority,function(){M6(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=B1(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);R1=r,n.target.dispatchEvent(r),R1=null}else return s=Im(n),s!==null&&Gy(s),t.blockedOn=n,!1;s.shift()}return!0}function lN(t,s,n){Kh(t)&&n.delete(s)}function KO(){$1=!1,Kl!==null&&Kh(Kl)&&(Kl=null),Xl!==null&&Kh(Xl)&&(Xl=null),eo!==null&&Kh(eo)&&(eo=null),Af.forEach(lN),Df.forEach(lN)}function _u(t,s){t.blockedOn===s&&(t.blockedOn=null,$1||($1=!0,ia.unstable_scheduleCallback(ia.unstable_NormalPriority,KO)))}function Pf(t){function s(a){return _u(a,t)}if(0<jh.length){_u(jh[0],t);for(var n=1;n<jh.length;n++){var r=jh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kl!==null&&_u(Kl,t),Xl!==null&&_u(Xl,t),eo!==null&&_u(eo,t),Af.forEach(s),Df.forEach(s),n=0;n<Ol.length;n++)r=Ol[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ol.length&&(n=Ol[0],n.blockedOn===null);)L6(n),n.blockedOn===null&&Ol.shift()}var ud=yl.ReactCurrentBatchConfig,_x=!0;function XO(t,s,n,r){var a=Ts,i=ud.transition;ud.transition=null;try{Ts=1,Yy(t,s,n,r)}finally{Ts=a,ud.transition=i}}function ez(t,s,n,r){var a=Ts,i=ud.transition;ud.transition=null;try{Ts=4,Yy(t,s,n,r)}finally{Ts=a,ud.transition=i}}function Yy(t,s,n,r){if(_x){var a=B1(t,s,n,r);if(a===null)Ng(t,s,r,Rx,n),iN(t,r);else if(qO(a,t,s,n,r))r.stopPropagation();else if(iN(t,r),s&4&&-1<JO.indexOf(t)){for(;a!==null;){var i=Im(a);if(i!==null&&C6(i),i=B1(t,s,n,r),i===null&&Ng(t,s,r,Rx,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Ng(t,s,r,null,n)}}var Rx=null;function B1(t,s,n,r){if(Rx=null,t=$y(r),t=Oo(t),t!==null)if(s=Mc(t),s===null)t=null;else if(n=s.tag,n===13){if(t=p6(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Rx=t,null}function T6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($O()){case By:return 1;case v6:return 4;case Dx:case BO:return 16;case b6:return 536870912;default:return 16}default:return 16}}var Jl=null,Qy=null,Xh=null;function E6(){if(Xh)return Xh;var t,s=Qy,n=s.length,r,a="value"in Jl?Jl.value:Jl.textContent,i=a.length;for(t=0;t<n&&s[t]===a[t];t++);var l=n-t;for(r=1;r<=l&&s[n-r]===a[i-r];r++);return Xh=a.slice(t,1<r?1-r:void 0)}function ex(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function yh(){return!0}function oN(){return!1}function ca(t){function s(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yh:oN,this.isPropagationStopped=oN,this}return ln(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yh)},persist:function(){},isPersistent:yh}),s}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hy=ca(uu),Em=ln({},uu,{view:0,detail:0}),tz=ca(Em),hg,xg,Ru,Zp=ln({},Em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ru&&(Ru&&t.type==="mousemove"?(hg=t.screenX-Ru.screenX,xg=t.screenY-Ru.screenY):xg=hg=0,Ru=t),hg)},movementY:function(t){return"movementY"in t?t.movementY:xg}}),cN=ca(Zp),sz=ln({},Zp,{dataTransfer:0}),nz=ca(sz),rz=ln({},Em,{relatedTarget:0}),pg=ca(rz),az=ln({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),iz=ca(az),lz=ln({},uu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oz=ca(lz),cz=ln({},uu,{data:0}),dN=ca(cz),dz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mz(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=fz[t])?!!s[t]:!1}function Wy(){return mz}var hz=ln({},Em,{key:function(t){if(t.key){var s=dz[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ex(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wy,charCode:function(t){return t.type==="keypress"?ex(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ex(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xz=ca(hz),pz=ln({},Zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uN=ca(pz),gz=ln({},Em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wy}),jz=ca(gz),yz=ln({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),vz=ca(yz),bz=ln({},Zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wz=ca(bz),Nz=[9,13,27,32],Zy=dl&&"CompositionEvent"in window,hf=null;dl&&"documentMode"in document&&(hf=document.documentMode);var Cz=dl&&"TextEvent"in window&&!hf,I6=dl&&(!Zy||hf&&8<hf&&11>=hf),fN=" ",mN=!1;function A6(t,s){switch(t){case"keyup":return Nz.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qc=!1;function Mz(t,s){switch(t){case"compositionend":return D6(s);case"keypress":return s.which!==32?null:(mN=!0,fN);case"textInput":return t=s.data,t===fN&&mN?null:t;default:return null}}function Sz(t,s){if(qc)return t==="compositionend"||!Zy&&A6(t,s)?(t=E6(),Xh=Qy=Jl=null,qc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return I6&&s.locale!=="ko"?null:s.data;default:return null}}var kz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hN(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!kz[t.type]:s==="textarea"}function P6(t,s,n,r){u6(r),s=Ox(s,"onChange"),0<s.length&&(n=new Hy("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var xf=null,_f=null;function Lz(t){Y6(t,0)}function Jp(t){var s=ed(t);if(r6(s))return t}function Tz(t,s){if(t==="change")return s}var _6=!1;if(dl){var gg;if(dl){var jg="oninput"in document;if(!jg){var xN=document.createElement("div");xN.setAttribute("oninput","return;"),jg=typeof xN.oninput=="function"}gg=jg}else gg=!1;_6=gg&&(!document.documentMode||9<document.documentMode)}function pN(){xf&&(xf.detachEvent("onpropertychange",R6),_f=xf=null)}function R6(t){if(t.propertyName==="value"&&Jp(_f)){var s=[];P6(s,_f,t,$y(t)),x6(Lz,s)}}function Ez(t,s,n){t==="focusin"?(pN(),xf=s,_f=n,xf.attachEvent("onpropertychange",R6)):t==="focusout"&&pN()}function Iz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jp(_f)}function Az(t,s){if(t==="click")return Jp(s)}function Dz(t,s){if(t==="input"||t==="change")return Jp(s)}function Pz(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ka=typeof Object.is=="function"?Object.is:Pz;function Rf(t,s){if(Ka(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!C1.call(s,a)||!Ka(t[a],s[a]))return!1}return!0}function gN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jN(t,s){var n=gN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gN(n)}}function O6(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?O6(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function z6(){for(var t=window,s=Ex();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=Ex(t.document)}return s}function Jy(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function _z(t){var s=z6(),n=t.focusedElem,r=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&O6(n.ownerDocument.documentElement,n)){if(r!==null&&Jy(n)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=jN(n,i);var l=jN(n,r);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rz=dl&&"documentMode"in document&&11>=document.documentMode,Kc=null,V1=null,pf=null,G1=!1;function yN(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;G1||Kc==null||Kc!==Ex(r)||(r=Kc,"selectionStart"in r&&Jy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pf&&Rf(pf,r)||(pf=r,r=Ox(V1,"onSelect"),0<r.length&&(s=new Hy("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=Kc)))}function vh(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var Xc={animationend:vh("Animation","AnimationEnd"),animationiteration:vh("Animation","AnimationIteration"),animationstart:vh("Animation","AnimationStart"),transitionend:vh("Transition","TransitionEnd")},yg={},F6={};dl&&(F6=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function qp(t){if(yg[t])return yg[t];if(!Xc[t])return t;var s=Xc[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in F6)return yg[t]=s[n];return t}var U6=qp("animationend"),$6=qp("animationiteration"),B6=qp("animationstart"),V6=qp("transitionend"),G6=new Map,vN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(t,s){G6.set(t,s),Cc(s,[t])}for(var vg=0;vg<vN.length;vg++){var bg=vN[vg],Oz=bg.toLowerCase(),zz=bg[0].toUpperCase()+bg.slice(1);bo(Oz,"on"+zz)}bo(U6,"onAnimationEnd");bo($6,"onAnimationIteration");bo(B6,"onAnimationStart");bo("dblclick","onDoubleClick");bo("focusin","onFocus");bo("focusout","onBlur");bo(V6,"onTransitionEnd");$d("onMouseEnter",["mouseout","mouseover"]);$d("onMouseLeave",["mouseout","mouseover"]);$d("onPointerEnter",["pointerout","pointerover"]);$d("onPointerLeave",["pointerout","pointerover"]);Cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fz=new Set("cancel close invalid load scroll toggle".split(" ").concat(nf));function bN(t,s,n){var r=t.type||"unknown-event";t.currentTarget=n,OO(r,s,void 0,t),t.currentTarget=null}function Y6(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(s)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;bN(a,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;bN(a,o,d),i=c}}}if(Ax)throw t=F1,Ax=!1,F1=null,t}function $s(t,s){var n=s[Z1];n===void 0&&(n=s[Z1]=new Set);var r=t+"__bubble";n.has(r)||(Q6(s,t,2,!1),n.add(r))}function wg(t,s,n){var r=0;s&&(r|=4),Q6(n,t,r,s)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[bh]){t[bh]=!0,Xk.forEach(function(n){n!=="selectionchange"&&(Fz.has(n)||wg(n,!1,t),wg(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[bh]||(s[bh]=!0,wg("selectionchange",!1,s))}}function Q6(t,s,n,r){switch(T6(s)){case 1:var a=XO;break;case 4:a=ez;break;default:a=Yy}n=a.bind(null,s,n,t),a=void 0,!z1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(s,n,{capture:!0,passive:a}):t.addEventListener(s,n,!0):a!==void 0?t.addEventListener(s,n,{passive:a}):t.addEventListener(s,n,!1)}function Ng(t,s,n,r,a){var i=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Oo(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}x6(function(){var d=i,f=$y(n),x=[];e:{var h=G6.get(t);if(h!==void 0){var j=Hy,v=t;switch(t){case"keypress":if(ex(n)===0)break e;case"keydown":case"keyup":j=xz;break;case"focusin":v="focus",j=pg;break;case"focusout":v="blur",j=pg;break;case"beforeblur":case"afterblur":j=pg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=cN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=nz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=jz;break;case U6:case $6:case B6:j=iz;break;case V6:j=vz;break;case"scroll":j=tz;break;case"wheel":j=wz;break;case"copy":case"cut":case"paste":j=oz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=uN}var p=(s&4)!==0,b=!p&&t==="scroll",y=p?h!==null?h+"Capture":null:h;p=[];for(var m=d,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,y!==null&&(w=If(m,y),w!=null&&p.push(zf(m,w,g)))),b)break;m=m.return}0<p.length&&(h=new j(h,v,null,n,f),x.push({event:h,listeners:p}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",h&&n!==R1&&(v=n.relatedTarget||n.fromElement)&&(Oo(v)||v[ul]))break e;if((j||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,j?(v=n.relatedTarget||n.toElement,j=d,v=v?Oo(v):null,v!==null&&(b=Mc(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(j=null,v=d),j!==v)){if(p=cN,w="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(p=uN,w="onPointerLeave",y="onPointerEnter",m="pointer"),b=j==null?h:ed(j),g=v==null?h:ed(v),h=new p(w,m+"leave",j,n,f),h.target=b,h.relatedTarget=g,w=null,Oo(f)===d&&(p=new p(y,m+"enter",v,n,f),p.target=g,p.relatedTarget=b,w=p),b=w,j&&v)t:{for(p=j,y=v,m=0,g=p;g;g=Rc(g))m++;for(g=0,w=y;w;w=Rc(w))g++;for(;0<m-g;)p=Rc(p),m--;for(;0<g-m;)y=Rc(y),g--;for(;m--;){if(p===y||y!==null&&p===y.alternate)break t;p=Rc(p),y=Rc(y)}p=null}else p=null;j!==null&&wN(x,h,j,p,!1),v!==null&&b!==null&&wN(x,b,v,p,!0)}}e:{if(h=d?ed(d):window,j=h.nodeName&&h.nodeName.toLowerCase(),j==="select"||j==="input"&&h.type==="file")var N=Tz;else if(hN(h))if(_6)N=Dz;else{N=Iz;var k=Ez}else(j=h.nodeName)&&j.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Az);if(N&&(N=N(t,d))){P6(x,N,n,f);break e}k&&k(t,h,d),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&I1(h,"number",h.value)}switch(k=d?ed(d):window,t){case"focusin":(hN(k)||k.contentEditable==="true")&&(Kc=k,V1=d,pf=null);break;case"focusout":pf=V1=Kc=null;break;case"mousedown":G1=!0;break;case"contextmenu":case"mouseup":case"dragend":G1=!1,yN(x,n,f);break;case"selectionchange":if(Rz)break;case"keydown":case"keyup":yN(x,n,f)}var L;if(Zy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else qc?A6(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(I6&&n.locale!=="ko"&&(qc||S!=="onCompositionStart"?S==="onCompositionEnd"&&qc&&(L=E6()):(Jl=f,Qy="value"in Jl?Jl.value:Jl.textContent,qc=!0)),k=Ox(d,S),0<k.length&&(S=new dN(S,t,null,n,f),x.push({event:S,listeners:k}),L?S.data=L:(L=D6(n),L!==null&&(S.data=L)))),(L=Cz?Mz(t,n):Sz(t,n))&&(d=Ox(d,"onBeforeInput"),0<d.length&&(f=new dN("onBeforeInput","beforeinput",null,n,f),x.push({event:f,listeners:d}),f.data=L))}Y6(x,s)})}function zf(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Ox(t,s){for(var n=s+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=If(t,n),i!=null&&r.unshift(zf(t,i,a)),i=If(t,s),i!=null&&r.push(zf(t,i,a))),t=t.return}return r}function Rc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wN(t,s,n,r,a){for(var i=s._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,a?(c=If(n,i),c!=null&&l.unshift(zf(n,c,o))):a||(c=If(n,i),c!=null&&l.push(zf(n,c,o)))),n=n.return}l.length!==0&&t.push({event:s,listeners:l})}var Uz=/\r\n?/g,$z=/\u0000|\uFFFD/g;function NN(t){return(typeof t=="string"?t:""+t).replace(Uz,`
`).replace($z,"")}function wh(t,s,n){if(s=NN(s),NN(t)!==s&&n)throw Error(Be(425))}function zx(){}var Y1=null,Q1=null;function H1(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var W1=typeof setTimeout=="function"?setTimeout:void 0,Bz=typeof clearTimeout=="function"?clearTimeout:void 0,CN=typeof Promise=="function"?Promise:void 0,Vz=typeof queueMicrotask=="function"?queueMicrotask:typeof CN<"u"?function(t){return CN.resolve(null).then(t).catch(Gz)}:W1;function Gz(t){setTimeout(function(){throw t})}function Cg(t,s){var n=s,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),Pf(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Pf(s)}function to(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function MN(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var fu=Math.random().toString(36).slice(2),hi="__reactFiber$"+fu,Ff="__reactProps$"+fu,ul="__reactContainer$"+fu,Z1="__reactEvents$"+fu,Yz="__reactListeners$"+fu,Qz="__reactHandles$"+fu;function Oo(t){var s=t[hi];if(s)return s;for(var n=t.parentNode;n;){if(s=n[ul]||n[hi]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=MN(t);t!==null;){if(n=t[hi])return n;t=MN(t)}return s}t=n,n=t.parentNode}return null}function Im(t){return t=t[hi]||t[ul],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function Kp(t){return t[Ff]||null}var J1=[],td=-1;function wo(t){return{current:t}}function Vs(t){0>td||(t.current=J1[td],J1[td]=null,td--)}function zs(t,s){td++,J1[td]=t.current,t.current=s}var co={},ir=wo(co),Fr=wo(!1),ac=co;function Bd(t,s){var n=t.type.contextTypes;if(!n)return co;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=s[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ur(t){return t=t.childContextTypes,t!=null}function Fx(){Vs(Fr),Vs(ir)}function SN(t,s,n){if(ir.current!==co)throw Error(Be(168));zs(ir,s),zs(Fr,n)}function H6(t,s,n){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(Be(108,EO(t)||"Unknown",a));return ln({},n,r)}function Ux(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||co,ac=ir.current,zs(ir,t),zs(Fr,Fr.current),!0}function kN(t,s,n){var r=t.stateNode;if(!r)throw Error(Be(169));n?(t=H6(t,s,ac),r.__reactInternalMemoizedMergedChildContext=t,Vs(Fr),Vs(ir),zs(ir,t)):Vs(Fr),zs(Fr,n)}var qi=null,Xp=!1,Mg=!1;function W6(t){qi===null?qi=[t]:qi.push(t)}function Hz(t){Xp=!0,W6(t)}function No(){if(!Mg&&qi!==null){Mg=!0;var t=0,s=Ts;try{var n=qi;for(Ts=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qi=null,Xp=!1}catch(a){throw qi!==null&&(qi=qi.slice(t+1)),y6(By,No),a}finally{Ts=s,Mg=!1}}return null}var sd=[],nd=0,$x=null,Bx=0,pa=[],ga=0,ic=null,sl=1,nl="";function Do(t,s){sd[nd++]=Bx,sd[nd++]=$x,$x=t,Bx=s}function Z6(t,s,n){pa[ga++]=sl,pa[ga++]=nl,pa[ga++]=ic,ic=t;var r=sl;t=nl;var a=32-Wa(r)-1;r&=~(1<<a),n+=1;var i=32-Wa(s)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,sl=1<<32-Wa(s)+a|n<<a|r,nl=i+t}else sl=1<<i|n<<a|r,nl=t}function qy(t){t.return!==null&&(Do(t,1),Z6(t,1,0))}function Ky(t){for(;t===$x;)$x=sd[--nd],sd[nd]=null,Bx=sd[--nd],sd[nd]=null;for(;t===ic;)ic=pa[--ga],pa[ga]=null,nl=pa[--ga],pa[ga]=null,sl=pa[--ga],pa[ga]=null}var sa=null,ea=null,qs=!1,Ua=null;function J6(t,s){var n=ya(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function LN(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,sa=t,ea=to(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,sa=t,ea=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=ic!==null?{id:sl,overflow:nl}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=ya(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,sa=t,ea=null,!0):!1;default:return!1}}function q1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function K1(t){if(qs){var s=ea;if(s){var n=s;if(!LN(t,s)){if(q1(t))throw Error(Be(418));s=to(n.nextSibling);var r=sa;s&&LN(t,s)?J6(r,n):(t.flags=t.flags&-4097|2,qs=!1,sa=t)}}else{if(q1(t))throw Error(Be(418));t.flags=t.flags&-4097|2,qs=!1,sa=t}}}function TN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sa=t}function Nh(t){if(t!==sa)return!1;if(!qs)return TN(t),qs=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!H1(t.type,t.memoizedProps)),s&&(s=ea)){if(q1(t))throw q6(),Error(Be(418));for(;s;)J6(t,s),s=to(s.nextSibling)}if(TN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){ea=to(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}ea=null}}else ea=sa?to(t.stateNode.nextSibling):null;return!0}function q6(){for(var t=ea;t;)t=to(t.nextSibling)}function Vd(){ea=sa=null,qs=!1}function Xy(t){Ua===null?Ua=[t]:Ua.push(t)}var Wz=yl.ReactCurrentBatchConfig;function Ou(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var r=n.stateNode}if(!r)throw Error(Be(147,t));var a=r,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,t))}return t}function Ch(t,s){throw t=Object.prototype.toString.call(s),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function EN(t){var s=t._init;return s(t._payload)}function K6(t){function s(y,m){if(t){var g=y.deletions;g===null?(y.deletions=[m],y.flags|=16):g.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)s(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function a(y,m){return y=ao(y,m),y.index=0,y.sibling=null,y}function i(y,m,g){return y.index=g,t?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags|=2,m):g):(y.flags|=2,m)):(y.flags|=1048576,m)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,m,g,w){return m===null||m.tag!==6?(m=Ag(g,y.mode,w),m.return=y,m):(m=a(m,g),m.return=y,m)}function c(y,m,g,w){var N=g.type;return N===Jc?f(y,m,g.props.children,w,g.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dl&&EN(N)===m.type)?(w=a(m,g.props),w.ref=Ou(y,m,g),w.return=y,w):(w=lx(g.type,g.key,g.props,null,y.mode,w),w.ref=Ou(y,m,g),w.return=y,w)}function d(y,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Dg(g,y.mode,w),m.return=y,m):(m=a(m,g.children||[]),m.return=y,m)}function f(y,m,g,w,N){return m===null||m.tag!==7?(m=Xo(g,y.mode,w,N),m.return=y,m):(m=a(m,g),m.return=y,m)}function x(y,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ag(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mh:return g=lx(m.type,m.key,m.props,null,y.mode,g),g.ref=Ou(y,null,m),g.return=y,g;case Zc:return m=Dg(m,y.mode,g),m.return=y,m;case Dl:var w=m._init;return x(y,w(m._payload),g)}if(tf(m)||Au(m))return m=Xo(m,y.mode,g,null),m.return=y,m;Ch(y,m)}return null}function h(y,m,g,w){var N=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:o(y,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case mh:return g.key===N?c(y,m,g,w):null;case Zc:return g.key===N?d(y,m,g,w):null;case Dl:return N=g._init,h(y,m,N(g._payload),w)}if(tf(g)||Au(g))return N!==null?null:f(y,m,g,w,null);Ch(y,g)}return null}function j(y,m,g,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(g)||null,o(m,y,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mh:return y=y.get(w.key===null?g:w.key)||null,c(m,y,w,N);case Zc:return y=y.get(w.key===null?g:w.key)||null,d(m,y,w,N);case Dl:var k=w._init;return j(y,m,g,k(w._payload),N)}if(tf(w)||Au(w))return y=y.get(g)||null,f(m,y,w,N,null);Ch(m,w)}return null}function v(y,m,g,w){for(var N=null,k=null,L=m,S=m=0,T=null;L!==null&&S<g.length;S++){L.index>S?(T=L,L=null):T=L.sibling;var E=h(y,L,g[S],w);if(E===null){L===null&&(L=T);break}t&&L&&E.alternate===null&&s(y,L),m=i(E,m,S),k===null?N=E:k.sibling=E,k=E,L=T}if(S===g.length)return n(y,L),qs&&Do(y,S),N;if(L===null){for(;S<g.length;S++)L=x(y,g[S],w),L!==null&&(m=i(L,m,S),k===null?N=L:k.sibling=L,k=L);return qs&&Do(y,S),N}for(L=r(y,L);S<g.length;S++)T=j(L,y,S,g[S],w),T!==null&&(t&&T.alternate!==null&&L.delete(T.key===null?S:T.key),m=i(T,m,S),k===null?N=T:k.sibling=T,k=T);return t&&L.forEach(function($){return s(y,$)}),qs&&Do(y,S),N}function p(y,m,g,w){var N=Au(g);if(typeof N!="function")throw Error(Be(150));if(g=N.call(g),g==null)throw Error(Be(151));for(var k=N=null,L=m,S=m=0,T=null,E=g.next();L!==null&&!E.done;S++,E=g.next()){L.index>S?(T=L,L=null):T=L.sibling;var $=h(y,L,E.value,w);if($===null){L===null&&(L=T);break}t&&L&&$.alternate===null&&s(y,L),m=i($,m,S),k===null?N=$:k.sibling=$,k=$,L=T}if(E.done)return n(y,L),qs&&Do(y,S),N;if(L===null){for(;!E.done;S++,E=g.next())E=x(y,E.value,w),E!==null&&(m=i(E,m,S),k===null?N=E:k.sibling=E,k=E);return qs&&Do(y,S),N}for(L=r(y,L);!E.done;S++,E=g.next())E=j(L,y,S,E.value,w),E!==null&&(t&&E.alternate!==null&&L.delete(E.key===null?S:E.key),m=i(E,m,S),k===null?N=E:k.sibling=E,k=E);return t&&L.forEach(function(F){return s(y,F)}),qs&&Do(y,S),N}function b(y,m,g,w){if(typeof g=="object"&&g!==null&&g.type===Jc&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case mh:e:{for(var N=g.key,k=m;k!==null;){if(k.key===N){if(N=g.type,N===Jc){if(k.tag===7){n(y,k.sibling),m=a(k,g.props.children),m.return=y,y=m;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dl&&EN(N)===k.type){n(y,k.sibling),m=a(k,g.props),m.ref=Ou(y,k,g),m.return=y,y=m;break e}n(y,k);break}else s(y,k);k=k.sibling}g.type===Jc?(m=Xo(g.props.children,y.mode,w,g.key),m.return=y,y=m):(w=lx(g.type,g.key,g.props,null,y.mode,w),w.ref=Ou(y,m,g),w.return=y,y=w)}return l(y);case Zc:e:{for(k=g.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(y,m.sibling),m=a(m,g.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else s(y,m);m=m.sibling}m=Dg(g,y.mode,w),m.return=y,y=m}return l(y);case Dl:return k=g._init,b(y,m,k(g._payload),w)}if(tf(g))return v(y,m,g,w);if(Au(g))return p(y,m,g,w);Ch(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(y,m.sibling),m=a(m,g),m.return=y,y=m):(n(y,m),m=Ag(g,y.mode,w),m.return=y,y=m),l(y)):n(y,m)}return b}var Gd=K6(!0),X6=K6(!1),Vx=wo(null),Gx=null,rd=null,ev=null;function tv(){ev=rd=Gx=null}function sv(t){var s=Vx.current;Vs(Vx),t._currentValue=s}function X1(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function fd(t,s){Gx=t,ev=rd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Or=!0),t.firstContext=null)}function Ca(t){var s=t._currentValue;if(ev!==t)if(t={context:t,memoizedValue:s,next:null},rd===null){if(Gx===null)throw Error(Be(308));rd=t,Gx.dependencies={lanes:0,firstContext:t}}else rd=rd.next=t;return s}var zo=null;function nv(t){zo===null?zo=[t]:zo.push(t)}function eL(t,s,n,r){var a=s.interleaved;return a===null?(n.next=n,nv(s)):(n.next=a.next,a.next=n),s.interleaved=n,fl(t,r)}function fl(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pl=!1;function rv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tL(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function al(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function so(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,hs&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,fl(t,n)}return a=r.interleaved,a===null?(s.next=s,nv(r)):(s.next=a.next,a.next=s),r.interleaved=s,fl(t,n)}function tx(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Vy(t,n)}}function IN(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=s:i=i.next=s}else a=i=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function Yx(t,s,n,r){var a=t.updateQueue;Pl=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=d:o.next=d,f.lastBaseUpdate=c))}if(i!==null){var x=a.baseState;l=0,f=d=c=null,o=i;do{var h=o.lane,j=o.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,p=o;switch(h=s,j=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){x=v.call(j,x,h);break e}x=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(j,x,h):v,h==null)break e;x=ln({},x,h);break e;case 2:Pl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else j={eventTime:j,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(d=f=j,c=x):f=f.next=j,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(c=x),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,s=a.shared.interleaved,s!==null){a=s;do l|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);oc|=l,t.lanes=l,t.memoizedState=x}}function AN(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Be(191,a));a.call(r)}}}var Am={},ki=wo(Am),Uf=wo(Am),$f=wo(Am);function Fo(t){if(t===Am)throw Error(Be(174));return t}function av(t,s){switch(zs($f,s),zs(Uf,t),zs(ki,Am),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:D1(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=D1(s,t)}Vs(ki),zs(ki,s)}function Yd(){Vs(ki),Vs(Uf),Vs($f)}function sL(t){Fo($f.current);var s=Fo(ki.current),n=D1(s,t.type);s!==n&&(zs(Uf,t),zs(ki,n))}function iv(t){Uf.current===t&&(Vs(ki),Vs(Uf))}var nn=wo(0);function Qx(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Sg=[];function lv(){for(var t=0;t<Sg.length;t++)Sg[t]._workInProgressVersionPrimary=null;Sg.length=0}var sx=yl.ReactCurrentDispatcher,kg=yl.ReactCurrentBatchConfig,lc=0,rn=null,An=null,Gn=null,Hx=!1,gf=!1,Bf=0,Zz=0;function sr(){throw Error(Be(321))}function ov(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Ka(t[n],s[n]))return!1;return!0}function cv(t,s,n,r,a,i){if(lc=i,rn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,sx.current=t===null||t.memoizedState===null?Xz:eF,t=n(r,a),gf){i=0;do{if(gf=!1,Bf=0,25<=i)throw Error(Be(301));i+=1,Gn=An=null,s.updateQueue=null,sx.current=tF,t=n(r,a)}while(gf)}if(sx.current=Wx,s=An!==null&&An.next!==null,lc=0,Gn=An=rn=null,Hx=!1,s)throw Error(Be(300));return t}function dv(){var t=Bf!==0;return Bf=0,t}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?rn.memoizedState=Gn=t:Gn=Gn.next=t,Gn}function Ma(){if(An===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var s=Gn===null?rn.memoizedState:Gn.next;if(s!==null)Gn=s,An=t;else{if(t===null)throw Error(Be(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Gn===null?rn.memoizedState=Gn=t:Gn=Gn.next=t}return Gn}function Vf(t,s){return typeof s=="function"?s(t):s}function Lg(t){var s=Ma(),n=s.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=An,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var f=d.lane;if((lc&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var x={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=x,l=r):c=c.next=x,rn.lanes|=f,oc|=f}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,Ka(r,s.memoizedState)||(Or=!0),s.memoizedState=r,s.baseState=l,s.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,rn.lanes|=i,oc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function Tg(t){var s=Ma(),n=s.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=s.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);Ka(i,s.memoizedState)||(Or=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),n.lastRenderedState=i}return[i,r]}function nL(){}function rL(t,s){var n=rn,r=Ma(),a=s(),i=!Ka(r.memoizedState,a);if(i&&(r.memoizedState=a,Or=!0),r=r.queue,uv(lL.bind(null,n,r,t),[t]),r.getSnapshot!==s||i||Gn!==null&&Gn.memoizedState.tag&1){if(n.flags|=2048,Gf(9,iL.bind(null,n,r,a,s),void 0,null),Yn===null)throw Error(Be(349));lc&30||aL(n,s,a)}return a}function aL(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=rn.updateQueue,s===null?(s={lastEffect:null,stores:null},rn.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function iL(t,s,n,r){s.value=n,s.getSnapshot=r,oL(s)&&cL(t)}function lL(t,s,n){return n(function(){oL(s)&&cL(t)})}function oL(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Ka(t,n)}catch{return!0}}function cL(t){var s=fl(t,1);s!==null&&Za(s,t,1,-1)}function DN(t){var s=ci();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:t},s.queue=t,t=t.dispatch=Kz.bind(null,rn,t),[s.memoizedState,t]}function Gf(t,s,n,r){return t={tag:t,create:s,destroy:n,deps:r,next:null},s=rn.updateQueue,s===null?(s={lastEffect:null,stores:null},rn.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t)),t}function dL(){return Ma().memoizedState}function nx(t,s,n,r){var a=ci();rn.flags|=t,a.memoizedState=Gf(1|s,n,void 0,r===void 0?null:r)}function e0(t,s,n,r){var a=Ma();r=r===void 0?null:r;var i=void 0;if(An!==null){var l=An.memoizedState;if(i=l.destroy,r!==null&&ov(r,l.deps)){a.memoizedState=Gf(s,n,i,r);return}}rn.flags|=t,a.memoizedState=Gf(1|s,n,i,r)}function PN(t,s){return nx(8390656,8,t,s)}function uv(t,s){return e0(2048,8,t,s)}function uL(t,s){return e0(4,2,t,s)}function fL(t,s){return e0(4,4,t,s)}function mL(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function hL(t,s,n){return n=n!=null?n.concat([t]):null,e0(4,4,mL.bind(null,s,t),n)}function fv(){}function xL(t,s){var n=Ma();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&ov(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function pL(t,s){var n=Ma();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&ov(s,r[1])?r[0]:(t=t(),n.memoizedState=[t,s],t)}function gL(t,s,n){return lc&21?(Ka(n,s)||(n=w6(),rn.lanes|=n,oc|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Or=!0),t.memoizedState=n)}function Jz(t,s){var n=Ts;Ts=n!==0&&4>n?n:4,t(!0);var r=kg.transition;kg.transition={};try{t(!1),s()}finally{Ts=n,kg.transition=r}}function jL(){return Ma().memoizedState}function qz(t,s,n){var r=ro(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yL(t))vL(s,n);else if(n=eL(t,s,n,r),n!==null){var a=Nr();Za(n,t,r,a),bL(n,s,r)}}function Kz(t,s,n){var r=ro(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yL(t))vL(s,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,Ka(o,l)){var c=s.interleaved;c===null?(a.next=a,nv(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=eL(t,s,a,r),n!==null&&(a=Nr(),Za(n,t,r,a),bL(n,s,r))}}function yL(t){var s=t.alternate;return t===rn||s!==null&&s===rn}function vL(t,s){gf=Hx=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function bL(t,s,n){if(n&4194240){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Vy(t,n)}}var Wx={readContext:Ca,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},Xz={readContext:Ca,useCallback:function(t,s){return ci().memoizedState=[t,s===void 0?null:s],t},useContext:Ca,useEffect:PN,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,nx(4194308,4,mL.bind(null,s,t),n)},useLayoutEffect:function(t,s){return nx(4194308,4,t,s)},useInsertionEffect:function(t,s){return nx(4,2,t,s)},useMemo:function(t,s){var n=ci();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var r=ci();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=qz.bind(null,rn,t),[r.memoizedState,t]},useRef:function(t){var s=ci();return t={current:t},s.memoizedState=t},useState:DN,useDebugValue:fv,useDeferredValue:function(t){return ci().memoizedState=t},useTransition:function(){var t=DN(!1),s=t[0];return t=Jz.bind(null,t[1]),ci().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var r=rn,a=ci();if(qs){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=s(),Yn===null)throw Error(Be(349));lc&30||aL(r,s,n)}a.memoizedState=n;var i={value:n,getSnapshot:s};return a.queue=i,PN(lL.bind(null,r,i,t),[t]),r.flags|=2048,Gf(9,iL.bind(null,r,i,n,s),void 0,null),n},useId:function(){var t=ci(),s=Yn.identifierPrefix;if(qs){var n=nl,r=sl;n=(r&~(1<<32-Wa(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=Bf++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Zz++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},eF={readContext:Ca,useCallback:xL,useContext:Ca,useEffect:uv,useImperativeHandle:hL,useInsertionEffect:uL,useLayoutEffect:fL,useMemo:pL,useReducer:Lg,useRef:dL,useState:function(){return Lg(Vf)},useDebugValue:fv,useDeferredValue:function(t){var s=Ma();return gL(s,An.memoizedState,t)},useTransition:function(){var t=Lg(Vf)[0],s=Ma().memoizedState;return[t,s]},useMutableSource:nL,useSyncExternalStore:rL,useId:jL,unstable_isNewReconciler:!1},tF={readContext:Ca,useCallback:xL,useContext:Ca,useEffect:uv,useImperativeHandle:hL,useInsertionEffect:uL,useLayoutEffect:fL,useMemo:pL,useReducer:Tg,useRef:dL,useState:function(){return Tg(Vf)},useDebugValue:fv,useDeferredValue:function(t){var s=Ma();return An===null?s.memoizedState=t:gL(s,An.memoizedState,t)},useTransition:function(){var t=Tg(Vf)[0],s=Ma().memoizedState;return[t,s]},useMutableSource:nL,useSyncExternalStore:rL,useId:jL,unstable_isNewReconciler:!1};function Pa(t,s){if(t&&t.defaultProps){s=ln({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function ej(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:ln({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var t0={isMounted:function(t){return(t=t._reactInternals)?Mc(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var r=Nr(),a=ro(t),i=al(r,a);i.payload=s,n!=null&&(i.callback=n),s=so(t,i,a),s!==null&&(Za(s,t,a,r),tx(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=Nr(),a=ro(t),i=al(r,a);i.tag=1,i.payload=s,n!=null&&(i.callback=n),s=so(t,i,a),s!==null&&(Za(s,t,a,r),tx(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=Nr(),r=ro(t),a=al(n,r);a.tag=2,s!=null&&(a.callback=s),s=so(t,a,r),s!==null&&(Za(s,t,r,n),tx(s,t,r))}};function _N(t,s,n,r,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):s.prototype&&s.prototype.isPureReactComponent?!Rf(n,r)||!Rf(a,i):!0}function wL(t,s,n){var r=!1,a=co,i=s.contextType;return typeof i=="object"&&i!==null?i=Ca(i):(a=Ur(s)?ac:ir.current,r=s.contextTypes,i=(r=r!=null)?Bd(t,a):co),s=new s(n,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=t0,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),s}function RN(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&t0.enqueueReplaceState(s,s.state,null)}function tj(t,s,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},rv(t);var i=s.contextType;typeof i=="object"&&i!==null?a.context=Ca(i):(i=Ur(s)?ac:ir.current,a.context=Bd(t,i)),a.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(ej(t,s,i,n),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&t0.enqueueReplaceState(a,a.state,null),Yx(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Qd(t,s){try{var n="",r=s;do n+=TO(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:a,digest:null}}function Eg(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function sj(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var sF=typeof WeakMap=="function"?WeakMap:Map;function NL(t,s,n){n=al(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Jx||(Jx=!0,fj=r),sj(t,s)},n}function CL(t,s,n){n=al(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){sj(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sj(t,s),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),n}function ON(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sF;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),t=pF.bind(null,t,s,n),s.then(t,t))}function zN(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function FN(t,s,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=al(-1,1),s.tag=2,so(n,s,1))),n.lanes|=1),t)}var nF=yl.ReactCurrentOwner,Or=!1;function pr(t,s,n,r){s.child=t===null?X6(s,null,n,r):Gd(s,t.child,n,r)}function UN(t,s,n,r,a){n=n.render;var i=s.ref;return fd(s,a),r=cv(t,s,n,r,i,a),n=dv(),t!==null&&!Or?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ml(t,s,a)):(qs&&n&&qy(s),s.flags|=1,pr(t,s,r,a),s.child)}function $N(t,s,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!vv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=i,ML(t,s,i,r,a)):(t=lx(n.type,null,r,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rf,n(l,r)&&t.ref===s.ref)return ml(t,s,a)}return s.flags|=1,t=ao(i,r),t.ref=s.ref,t.return=s,s.child=t}function ML(t,s,n,r,a){if(t!==null){var i=t.memoizedProps;if(Rf(i,r)&&t.ref===s.ref)if(Or=!1,s.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(Or=!0);else return s.lanes=t.lanes,ml(t,s,a)}return nj(t,s,n,r,a)}function SL(t,s,n){var r=s.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},zs(id,Wr),Wr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,zs(id,Wr),Wr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,zs(id,Wr),Wr|=r}else i!==null?(r=i.baseLanes|n,s.memoizedState=null):r=n,zs(id,Wr),Wr|=r;return pr(t,s,a,n),s.child}function kL(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function nj(t,s,n,r,a){var i=Ur(n)?ac:ir.current;return i=Bd(s,i),fd(s,a),n=cv(t,s,n,r,i,a),r=dv(),t!==null&&!Or?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ml(t,s,a)):(qs&&r&&qy(s),s.flags|=1,pr(t,s,n,a),s.child)}function BN(t,s,n,r,a){if(Ur(n)){var i=!0;Ux(s)}else i=!1;if(fd(s,a),s.stateNode===null)rx(t,s),wL(s,n,r),tj(s,n,r,a),r=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ca(d):(d=Ur(n)?ac:ir.current,d=Bd(s,d));var f=n.getDerivedStateFromProps,x=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&RN(s,l,r,d),Pl=!1;var h=s.memoizedState;l.state=h,Yx(s,r,l,a),c=s.memoizedState,o!==r||h!==c||Fr.current||Pl?(typeof f=="function"&&(ej(s,n,f,r),c=s.memoizedState),(o=Pl||_N(s,n,o,r,h,c,d))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{l=s.stateNode,tL(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:Pa(s.type,o),l.props=d,x=s.pendingProps,h=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ca(c):(c=Ur(n)?ac:ir.current,c=Bd(s,c));var j=n.getDerivedStateFromProps;(f=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==x||h!==c)&&RN(s,l,r,c),Pl=!1,h=s.memoizedState,l.state=h,Yx(s,r,l,a);var v=s.memoizedState;o!==x||h!==v||Fr.current||Pl?(typeof j=="function"&&(ej(s,n,j,r),v=s.memoizedState),(d=Pl||_N(s,n,d,r,h,v,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=v),l.props=r,l.state=v,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),r=!1)}return rj(t,s,n,r,i,a)}function rj(t,s,n,r,a,i){kL(t,s);var l=(s.flags&128)!==0;if(!r&&!l)return a&&kN(s,n,!1),ml(t,s,i);r=s.stateNode,nF.current=s;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&l?(s.child=Gd(s,t.child,null,i),s.child=Gd(s,null,o,i)):pr(t,s,o,i),s.memoizedState=r.state,a&&kN(s,n,!0),s.child}function LL(t){var s=t.stateNode;s.pendingContext?SN(t,s.pendingContext,s.pendingContext!==s.context):s.context&&SN(t,s.context,!1),av(t,s.containerInfo)}function VN(t,s,n,r,a){return Vd(),Xy(a),s.flags|=256,pr(t,s,n,r),s.child}var aj={dehydrated:null,treeContext:null,retryLane:0};function ij(t){return{baseLanes:t,cachePool:null,transitions:null}}function TL(t,s,n){var r=s.pendingProps,a=nn.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),zs(nn,a&1),t===null)return K1(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=r.children,t=r.fallback,i?(r=s.mode,i=s.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=r0(l,r,0,null),t=Xo(t,r,n,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=ij(n),s.memoizedState=aj,t):mv(s,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return rF(t,s,l,r,o,a,n);if(i){i=r.fallback,l=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=ao(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=ao(o,i):(i=Xo(i,l,n,null),i.flags|=2),i.return=s,r.return=s,r.sibling=i,s.child=r,r=i,i=s.child,l=t.child.memoizedState,l=l===null?ij(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,s.memoizedState=aj,r}return i=t.child,t=i.sibling,r=ao(i,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=r,s.memoizedState=null,r}function mv(t,s){return s=r0({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Mh(t,s,n,r){return r!==null&&Xy(r),Gd(s,t.child,null,n),t=mv(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function rF(t,s,n,r,a,i,l){if(n)return s.flags&256?(s.flags&=-257,r=Eg(Error(Be(422))),Mh(t,s,l,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=r.fallback,a=s.mode,r=r0({mode:"visible",children:r.children},a,0,null),i=Xo(i,a,l,null),i.flags|=2,r.return=s,i.return=s,r.sibling=i,s.child=r,s.mode&1&&Gd(s,t.child,null,l),s.child.memoizedState=ij(l),s.memoizedState=aj,i);if(!(s.mode&1))return Mh(t,s,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Be(419)),r=Eg(i,r,void 0),Mh(t,s,l,r)}if(o=(l&t.childLanes)!==0,Or||o){if(r=Yn,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,fl(t,a),Za(r,t,a,-1))}return yv(),r=Eg(Error(Be(421))),Mh(t,s,l,r)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=gF.bind(null,t),a._reactRetry=s,null):(t=i.treeContext,ea=to(a.nextSibling),sa=s,qs=!0,Ua=null,t!==null&&(pa[ga++]=sl,pa[ga++]=nl,pa[ga++]=ic,sl=t.id,nl=t.overflow,ic=s),s=mv(s,r.children),s.flags|=4096,s)}function GN(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),X1(t.return,s,n)}function Ig(t,s,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function EL(t,s,n){var r=s.pendingProps,a=r.revealOrder,i=r.tail;if(pr(t,s,r.children,n),r=nn.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GN(t,n,s);else if(t.tag===19)GN(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zs(nn,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)t=n.alternate,t!==null&&Qx(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),Ig(s,!1,a,n,i);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Qx(t)===null){s.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Ig(s,!0,n,null,i);break;case"together":Ig(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function rx(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ml(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),oc|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Be(153));if(s.child!==null){for(t=s.child,n=ao(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=ao(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function aF(t,s,n){switch(s.tag){case 3:LL(s),Vd();break;case 5:sL(s);break;case 1:Ur(s.type)&&Ux(s);break;case 4:av(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;zs(Vx,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(zs(nn,nn.current&1),s.flags|=128,null):n&s.child.childLanes?TL(t,s,n):(zs(nn,nn.current&1),t=ml(t,s,n),t!==null?t.sibling:null);zs(nn,nn.current&1);break;case 19:if(r=(n&s.childLanes)!==0,t.flags&128){if(r)return EL(t,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),zs(nn,nn.current),r)break;return null;case 22:case 23:return s.lanes=0,SL(t,s,n)}return ml(t,s,n)}var IL,lj,AL,DL;IL=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lj=function(){};AL=function(t,s,n,r){var a=t.memoizedProps;if(a!==r){t=s.stateNode,Fo(ki.current);var i=null;switch(n){case"input":a=T1(t,a),r=T1(t,r),i=[];break;case"select":a=ln({},a,{value:void 0}),r=ln({},r,{value:void 0}),i=[];break;case"textarea":a=A1(t,a),r=A1(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zx)}P1(n,r);var l;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Tf.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Tf.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$s("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};DL=function(t,s,n,r){n!==r&&(s.flags|=4)};function zu(t,s){if(!qs)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nr(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function iF(t,s,n){var r=s.pendingProps;switch(Ky(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(s),null;case 1:return Ur(s.type)&&Fx(),nr(s),null;case 3:return r=s.stateNode,Yd(),Vs(Fr),Vs(ir),lv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nh(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ua!==null&&(xj(Ua),Ua=null))),lj(t,s),nr(s),null;case 5:iv(s);var a=Fo($f.current);if(n=s.type,t!==null&&s.stateNode!=null)AL(t,s,n,r,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(Be(166));return nr(s),null}if(t=Fo(ki.current),Nh(s)){r=s.stateNode,n=s.type;var i=s.memoizedProps;switch(r[hi]=s,r[Ff]=i,t=(s.mode&1)!==0,n){case"dialog":$s("cancel",r),$s("close",r);break;case"iframe":case"object":case"embed":$s("load",r);break;case"video":case"audio":for(a=0;a<nf.length;a++)$s(nf[a],r);break;case"source":$s("error",r);break;case"img":case"image":case"link":$s("error",r),$s("load",r);break;case"details":$s("toggle",r);break;case"input":Xw(r,i),$s("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$s("invalid",r);break;case"textarea":tN(r,i),$s("invalid",r)}P1(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&wh(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&wh(r.textContent,o,t),a=["children",""+o]):Tf.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&$s("scroll",r)}switch(n){case"input":hh(r),eN(r,i,!0);break;case"textarea":hh(r),sN(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zx)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l6(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[hi]=s,t[Ff]=r,IL(t,s,!1,!1),s.stateNode=t;e:{switch(l=_1(n,r),n){case"dialog":$s("cancel",t),$s("close",t),a=r;break;case"iframe":case"object":case"embed":$s("load",t),a=r;break;case"video":case"audio":for(a=0;a<nf.length;a++)$s(nf[a],t);a=r;break;case"source":$s("error",t),a=r;break;case"img":case"image":case"link":$s("error",t),$s("load",t),a=r;break;case"details":$s("toggle",t),a=r;break;case"input":Xw(t,r),a=T1(t,r),$s("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=ln({},r,{value:void 0}),$s("invalid",t);break;case"textarea":tN(t,r),a=A1(t,r),$s("invalid",t);break;default:a=r}P1(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?d6(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&o6(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ef(t,c):typeof c=="number"&&Ef(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tf.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$s("scroll",t):c!=null&&Oy(t,i,c,l))}switch(n){case"input":hh(t),eN(t,r,!1);break;case"textarea":hh(t),sN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?od(t,!!r.multiple,i,!1):r.defaultValue!=null&&od(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=zx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nr(s),null;case 6:if(t&&s.stateNode!=null)DL(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(Be(166));if(n=Fo($f.current),Fo(ki.current),Nh(s)){if(r=s.stateNode,n=s.memoizedProps,r[hi]=s,(i=r.nodeValue!==n)&&(t=sa,t!==null))switch(t.tag){case 3:wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wh(r.nodeValue,n,(t.mode&1)!==0)}i&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=s,s.stateNode=r}return nr(s),null;case 13:if(Vs(nn),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qs&&ea!==null&&s.mode&1&&!(s.flags&128))q6(),Vd(),s.flags|=98560,i=!1;else if(i=Nh(s),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Be(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Be(317));i[hi]=s}else Vd(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;nr(s),i=!1}else Ua!==null&&(xj(Ua),Ua=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||nn.current&1?Rn===0&&(Rn=3):yv())),s.updateQueue!==null&&(s.flags|=4),nr(s),null);case 4:return Yd(),lj(t,s),t===null&&Of(s.stateNode.containerInfo),nr(s),null;case 10:return sv(s.type._context),nr(s),null;case 17:return Ur(s.type)&&Fx(),nr(s),null;case 19:if(Vs(nn),i=s.memoizedState,i===null)return nr(s),null;if(r=(s.flags&128)!==0,l=i.rendering,l===null)if(r)zu(i,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=Qx(t),l!==null){for(s.flags|=128,zu(i,!1),r=l.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return zs(nn,nn.current&1|2),s.child}t=t.sibling}i.tail!==null&&pn()>Hd&&(s.flags|=128,r=!0,zu(i,!1),s.lanes=4194304)}else{if(!r)if(t=Qx(l),t!==null){if(s.flags|=128,r=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),zu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!qs)return nr(s),null}else 2*pn()-i.renderingStartTime>Hd&&n!==1073741824&&(s.flags|=128,r=!0,zu(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(n=i.last,n!==null?n.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=pn(),s.sibling=null,n=nn.current,zs(nn,r?n&1|2:n&1),s):(nr(s),null);case 22:case 23:return jv(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?Wr&1073741824&&(nr(s),s.subtreeFlags&6&&(s.flags|=8192)):nr(s),null;case 24:return null;case 25:return null}throw Error(Be(156,s.tag))}function lF(t,s){switch(Ky(s),s.tag){case 1:return Ur(s.type)&&Fx(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Yd(),Vs(Fr),Vs(ir),lv(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return iv(s),null;case 13:if(Vs(nn),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Be(340));Vd()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Vs(nn),null;case 4:return Yd(),null;case 10:return sv(s.type._context),null;case 22:case 23:return jv(),null;case 24:return null;default:return null}}var Sh=!1,ar=!1,oF=typeof WeakSet=="function"?WeakSet:Set,dt=null;function ad(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(t,s,r)}else n.current=null}function oj(t,s,n){try{n()}catch(r){dn(t,s,r)}}var YN=!1;function cF(t,s){if(Y1=_x,t=z6(),Jy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,f=0,x=t,h=null;t:for(;;){for(var j;x!==n||a!==0&&x.nodeType!==3||(o=l+a),x!==i||r!==0&&x.nodeType!==3||(c=l+r),x.nodeType===3&&(l+=x.nodeValue.length),(j=x.firstChild)!==null;)h=x,x=j;for(;;){if(x===t)break t;if(h===n&&++d===a&&(o=l),h===i&&++f===r&&(c=l),(j=x.nextSibling)!==null)break;x=h,h=x.parentNode}x=j}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Q1={focusedElem:t,selectionRange:n},_x=!1,dt=s;dt!==null;)if(s=dt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,dt=t;else for(;dt!==null;){s=dt;try{var v=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,b=v.memoizedState,y=s.stateNode,m=y.getSnapshotBeforeUpdate(s.elementType===s.type?p:Pa(s.type,p),b);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=s.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(w){dn(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,dt=t;break}dt=s.return}return v=YN,YN=!1,v}function jf(t,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&oj(s,n,i)}a=a.next}while(a!==r)}}function s0(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function cj(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function PL(t){var s=t.alternate;s!==null&&(t.alternate=null,PL(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[hi],delete s[Ff],delete s[Z1],delete s[Yz],delete s[Qz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _L(t){return t.tag===5||t.tag===3||t.tag===4}function QN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_L(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dj(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=zx));else if(r!==4&&(t=t.child,t!==null))for(dj(t,s,n),t=t.sibling;t!==null;)dj(t,s,n),t=t.sibling}function uj(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uj(t,s,n),t=t.sibling;t!==null;)uj(t,s,n),t=t.sibling}var Zn=null,za=!1;function Cl(t,s,n){for(n=n.child;n!==null;)RL(t,s,n),n=n.sibling}function RL(t,s,n){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(Wp,n)}catch{}switch(n.tag){case 5:ar||ad(n,s);case 6:var r=Zn,a=za;Zn=null,Cl(t,s,n),Zn=r,za=a,Zn!==null&&(za?(t=Zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zn.removeChild(n.stateNode));break;case 18:Zn!==null&&(za?(t=Zn,n=n.stateNode,t.nodeType===8?Cg(t.parentNode,n):t.nodeType===1&&Cg(t,n),Pf(t)):Cg(Zn,n.stateNode));break;case 4:r=Zn,a=za,Zn=n.stateNode.containerInfo,za=!0,Cl(t,s,n),Zn=r,za=a;break;case 0:case 11:case 14:case 15:if(!ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&oj(n,s,l),a=a.next}while(a!==r)}Cl(t,s,n);break;case 1:if(!ar&&(ad(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){dn(n,s,o)}Cl(t,s,n);break;case 21:Cl(t,s,n);break;case 22:n.mode&1?(ar=(r=ar)||n.memoizedState!==null,Cl(t,s,n),ar=r):Cl(t,s,n);break;default:Cl(t,s,n)}}function HN(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oF),s.forEach(function(r){var a=jF.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Aa(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:Zn=o.stateNode,za=!1;break e;case 3:Zn=o.stateNode.containerInfo,za=!0;break e;case 4:Zn=o.stateNode.containerInfo,za=!0;break e}o=o.return}if(Zn===null)throw Error(Be(160));RL(i,l,a),Zn=null,za=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){dn(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)OL(s,t),s=s.sibling}function OL(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Aa(s,t),ii(t),r&4){try{jf(3,t,t.return),s0(3,t)}catch(p){dn(t,t.return,p)}try{jf(5,t,t.return)}catch(p){dn(t,t.return,p)}}break;case 1:Aa(s,t),ii(t),r&512&&n!==null&&ad(n,n.return);break;case 5:if(Aa(s,t),ii(t),r&512&&n!==null&&ad(n,n.return),t.flags&32){var a=t.stateNode;try{Ef(a,"")}catch(p){dn(t,t.return,p)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&a6(a,i),_1(o,l);var d=_1(o,i);for(l=0;l<c.length;l+=2){var f=c[l],x=c[l+1];f==="style"?d6(a,x):f==="dangerouslySetInnerHTML"?o6(a,x):f==="children"?Ef(a,x):Oy(a,f,x,d)}switch(o){case"input":E1(a,i);break;case"textarea":i6(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?od(a,!!i.multiple,j,!1):h!==!!i.multiple&&(i.defaultValue!=null?od(a,!!i.multiple,i.defaultValue,!0):od(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ff]=i}catch(p){dn(t,t.return,p)}}break;case 6:if(Aa(s,t),ii(t),r&4){if(t.stateNode===null)throw Error(Be(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(p){dn(t,t.return,p)}}break;case 3:if(Aa(s,t),ii(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pf(s.containerInfo)}catch(p){dn(t,t.return,p)}break;case 4:Aa(s,t),ii(t);break;case 13:Aa(s,t),ii(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(pv=pn())),r&4&&HN(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ar=(d=ar)||f,Aa(s,t),ar=d):Aa(s,t),ii(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(dt=t,f=t.child;f!==null;){for(x=dt=f;dt!==null;){switch(h=dt,j=h.child,h.tag){case 0:case 11:case 14:case 15:jf(4,h,h.return);break;case 1:ad(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{s=r,v.props=s.memoizedProps,v.state=s.memoizedState,v.componentWillUnmount()}catch(p){dn(r,n,p)}}break;case 5:ad(h,h.return);break;case 22:if(h.memoizedState!==null){ZN(x);continue}}j!==null?(j.return=h,dt=j):ZN(x)}f=f.sibling}e:for(f=null,x=t;;){if(x.tag===5){if(f===null){f=x;try{a=x.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=x.stateNode,c=x.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=c6("display",l))}catch(p){dn(t,t.return,p)}}}else if(x.tag===6){if(f===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(p){dn(t,t.return,p)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;f===x&&(f=null),x=x.return}f===x&&(f=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Aa(s,t),ii(t),r&4&&HN(t);break;case 21:break;default:Aa(s,t),ii(t)}}function ii(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(_L(n)){var r=n;break e}n=n.return}throw Error(Be(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ef(a,""),r.flags&=-33);var i=QN(t);uj(t,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=QN(t);dj(t,o,l);break;default:throw Error(Be(161))}}catch(c){dn(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function dF(t,s,n){dt=t,zL(t)}function zL(t,s,n){for(var r=(t.mode&1)!==0;dt!==null;){var a=dt,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||Sh;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ar;o=Sh;var d=ar;if(Sh=l,(ar=c)&&!d)for(dt=a;dt!==null;)l=dt,c=l.child,l.tag===22&&l.memoizedState!==null?JN(a):c!==null?(c.return=l,dt=c):JN(a);for(;i!==null;)dt=i,zL(i),i=i.sibling;dt=a,Sh=o,ar=d}WN(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,dt=i):WN(t)}}function WN(t){for(;dt!==null;){var s=dt;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ar||s0(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!ar)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Pa(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&AN(s,i,r);break;case 3:var l=s.updateQueue;if(l!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}AN(s,l,n)}break;case 5:var o=s.stateNode;if(n===null&&s.flags&4){n=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var x=f.dehydrated;x!==null&&Pf(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}ar||s.flags&512&&cj(s)}catch(h){dn(s,s.return,h)}}if(s===t){dt=null;break}if(n=s.sibling,n!==null){n.return=s.return,dt=n;break}dt=s.return}}function ZN(t){for(;dt!==null;){var s=dt;if(s===t){dt=null;break}var n=s.sibling;if(n!==null){n.return=s.return,dt=n;break}dt=s.return}}function JN(t){for(;dt!==null;){var s=dt;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{s0(4,s)}catch(c){dn(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){dn(s,a,c)}}var i=s.return;try{cj(s)}catch(c){dn(s,i,c)}break;case 5:var l=s.return;try{cj(s)}catch(c){dn(s,l,c)}}}catch(c){dn(s,s.return,c)}if(s===t){dt=null;break}var o=s.sibling;if(o!==null){o.return=s.return,dt=o;break}dt=s.return}}var uF=Math.ceil,Zx=yl.ReactCurrentDispatcher,hv=yl.ReactCurrentOwner,ba=yl.ReactCurrentBatchConfig,hs=0,Yn=null,Nn=null,qn=0,Wr=0,id=wo(0),Rn=0,Yf=null,oc=0,n0=0,xv=0,yf=null,Rr=null,pv=0,Hd=1/0,Ji=null,Jx=!1,fj=null,no=null,kh=!1,ql=null,qx=0,vf=0,mj=null,ax=-1,ix=0;function Nr(){return hs&6?pn():ax!==-1?ax:ax=pn()}function ro(t){return t.mode&1?hs&2&&qn!==0?qn&-qn:Wz.transition!==null?(ix===0&&(ix=w6()),ix):(t=Ts,t!==0||(t=window.event,t=t===void 0?16:T6(t.type)),t):1}function Za(t,s,n,r){if(50<vf)throw vf=0,mj=null,Error(Be(185));Tm(t,n,r),(!(hs&2)||t!==Yn)&&(t===Yn&&(!(hs&2)&&(n0|=n),Rn===4&&zl(t,qn)),$r(t,r),n===1&&hs===0&&!(s.mode&1)&&(Hd=pn()+500,Xp&&No()))}function $r(t,s){var n=t.callbackNode;WO(t,s);var r=Px(t,t===Yn?qn:0);if(r===0)n!==null&&aN(n),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(n!=null&&aN(n),s===1)t.tag===0?Hz(qN.bind(null,t)):W6(qN.bind(null,t)),Vz(function(){!(hs&6)&&No()}),n=null;else{switch(N6(r)){case 1:n=By;break;case 4:n=v6;break;case 16:n=Dx;break;case 536870912:n=b6;break;default:n=Dx}n=QL(n,FL.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function FL(t,s){if(ax=-1,ix=0,hs&6)throw Error(Be(327));var n=t.callbackNode;if(md()&&t.callbackNode!==n)return null;var r=Px(t,t===Yn?qn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=Kx(t,r);else{s=r;var a=hs;hs|=2;var i=$L();(Yn!==t||qn!==s)&&(Ji=null,Hd=pn()+500,Ko(t,s));do try{hF();break}catch(o){UL(t,o)}while(!0);tv(),Zx.current=i,hs=a,Nn!==null?s=0:(Yn=null,qn=0,s=Rn)}if(s!==0){if(s===2&&(a=U1(t),a!==0&&(r=a,s=hj(t,a))),s===1)throw n=Yf,Ko(t,0),zl(t,r),$r(t,pn()),n;if(s===6)zl(t,r);else{if(a=t.current.alternate,!(r&30)&&!fF(a)&&(s=Kx(t,r),s===2&&(i=U1(t),i!==0&&(r=i,s=hj(t,i))),s===1))throw n=Yf,Ko(t,0),zl(t,r),$r(t,pn()),n;switch(t.finishedWork=a,t.finishedLanes=r,s){case 0:case 1:throw Error(Be(345));case 2:Po(t,Rr,Ji);break;case 3:if(zl(t,r),(r&130023424)===r&&(s=pv+500-pn(),10<s)){if(Px(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Nr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=W1(Po.bind(null,t,Rr,Ji),s);break}Po(t,Rr,Ji);break;case 4:if(zl(t,r),(r&4194240)===r)break;for(s=t.eventTimes,a=-1;0<r;){var l=31-Wa(r);i=1<<l,l=s[l],l>a&&(a=l),r&=~i}if(r=a,r=pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uF(r/1960))-r,10<r){t.timeoutHandle=W1(Po.bind(null,t,Rr,Ji),r);break}Po(t,Rr,Ji);break;case 5:Po(t,Rr,Ji);break;default:throw Error(Be(329))}}}return $r(t,pn()),t.callbackNode===n?FL.bind(null,t):null}function hj(t,s){var n=yf;return t.current.memoizedState.isDehydrated&&(Ko(t,s).flags|=256),t=Kx(t,s),t!==2&&(s=Rr,Rr=n,s!==null&&xj(s)),t}function xj(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function fF(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Ka(i(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zl(t,s){for(s&=~xv,s&=~n0,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Wa(s),r=1<<n;t[n]=-1,s&=~r}}function qN(t){if(hs&6)throw Error(Be(327));md();var s=Px(t,0);if(!(s&1))return $r(t,pn()),null;var n=Kx(t,s);if(t.tag!==0&&n===2){var r=U1(t);r!==0&&(s=r,n=hj(t,r))}if(n===1)throw n=Yf,Ko(t,0),zl(t,s),$r(t,pn()),n;if(n===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Po(t,Rr,Ji),$r(t,pn()),null}function gv(t,s){var n=hs;hs|=1;try{return t(s)}finally{hs=n,hs===0&&(Hd=pn()+500,Xp&&No())}}function cc(t){ql!==null&&ql.tag===0&&!(hs&6)&&md();var s=hs;hs|=1;var n=ba.transition,r=Ts;try{if(ba.transition=null,Ts=1,t)return t()}finally{Ts=r,ba.transition=n,hs=s,!(hs&6)&&No()}}function jv(){Wr=id.current,Vs(id)}function Ko(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bz(n)),Nn!==null)for(n=Nn.return;n!==null;){var r=n;switch(Ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fx();break;case 3:Yd(),Vs(Fr),Vs(ir),lv();break;case 5:iv(r);break;case 4:Yd();break;case 13:Vs(nn);break;case 19:Vs(nn);break;case 10:sv(r.type._context);break;case 22:case 23:jv()}n=n.return}if(Yn=t,Nn=t=ao(t.current,null),qn=Wr=s,Rn=0,Yf=null,xv=n0=oc=0,Rr=yf=null,zo!==null){for(s=0;s<zo.length;s++)if(n=zo[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}zo=null}return t}function UL(t,s){do{var n=Nn;try{if(tv(),sx.current=Wx,Hx){for(var r=rn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Hx=!1}if(lc=0,Gn=An=rn=null,gf=!1,Bf=0,hv.current=null,n===null||n.return===null){Rn=1,Yf=s,Nn=null;break}e:{var i=t,l=n.return,o=n,c=s;if(s=qn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=o,x=f.tag;if(!(f.mode&1)&&(x===0||x===11||x===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var j=zN(l);if(j!==null){j.flags&=-257,FN(j,l,o,i,s),j.mode&1&&ON(i,d,s),s=j,c=d;var v=s.updateQueue;if(v===null){var p=new Set;p.add(c),s.updateQueue=p}else v.add(c);break e}else{if(!(s&1)){ON(i,d,s),yv();break e}c=Error(Be(426))}}else if(qs&&o.mode&1){var b=zN(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),FN(b,l,o,i,s),Xy(Qd(c,o));break e}}i=c=Qd(c,o),Rn!==4&&(Rn=2),yf===null?yf=[i]:yf.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var y=NL(i,c,s);IN(i,y);break e;case 1:o=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(no===null||!no.has(g)))){i.flags|=65536,s&=-s,i.lanes|=s;var w=CL(i,o,s);IN(i,w);break e}}i=i.return}while(i!==null)}VL(n)}catch(N){s=N,Nn===n&&n!==null&&(Nn=n=n.return);continue}break}while(!0)}function $L(){var t=Zx.current;return Zx.current=Wx,t===null?Wx:t}function yv(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Yn===null||!(oc&268435455)&&!(n0&268435455)||zl(Yn,qn)}function Kx(t,s){var n=hs;hs|=2;var r=$L();(Yn!==t||qn!==s)&&(Ji=null,Ko(t,s));do try{mF();break}catch(a){UL(t,a)}while(!0);if(tv(),hs=n,Zx.current=r,Nn!==null)throw Error(Be(261));return Yn=null,qn=0,Rn}function mF(){for(;Nn!==null;)BL(Nn)}function hF(){for(;Nn!==null&&!FO();)BL(Nn)}function BL(t){var s=YL(t.alternate,t,Wr);t.memoizedProps=t.pendingProps,s===null?VL(t):Nn=s,hv.current=null}function VL(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=lF(n,s),n!==null){n.flags&=32767,Nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,Nn=null;return}}else if(n=iF(n,s,Wr),n!==null){Nn=n;return}if(s=s.sibling,s!==null){Nn=s;return}Nn=s=t}while(s!==null);Rn===0&&(Rn=5)}function Po(t,s,n){var r=Ts,a=ba.transition;try{ba.transition=null,Ts=1,xF(t,s,n,r)}finally{ba.transition=a,Ts=r}return null}function xF(t,s,n,r){do md();while(ql!==null);if(hs&6)throw Error(Be(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZO(t,i),t===Yn&&(Nn=Yn=null,qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kh||(kh=!0,QL(Dx,function(){return md(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ba.transition,ba.transition=null;var l=Ts;Ts=1;var o=hs;hs|=4,hv.current=null,cF(t,n),OL(n,t),_z(Q1),_x=!!Y1,Q1=Y1=null,t.current=n,dF(n),UO(),hs=o,Ts=l,ba.transition=i}else t.current=n;if(kh&&(kh=!1,ql=t,qx=a),i=t.pendingLanes,i===0&&(no=null),VO(n.stateNode),$r(t,pn()),s!==null)for(r=t.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Jx)throw Jx=!1,t=fj,fj=null,t;return qx&1&&t.tag!==0&&md(),i=t.pendingLanes,i&1?t===mj?vf++:(vf=0,mj=t):vf=0,No(),null}function md(){if(ql!==null){var t=N6(qx),s=ba.transition,n=Ts;try{if(ba.transition=null,Ts=16>t?16:t,ql===null)var r=!1;else{if(t=ql,ql=null,qx=0,hs&6)throw Error(Be(331));var a=hs;for(hs|=4,dt=t.current;dt!==null;){var i=dt,l=i.child;if(dt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(dt=d;dt!==null;){var f=dt;switch(f.tag){case 0:case 11:case 15:jf(8,f,i)}var x=f.child;if(x!==null)x.return=f,dt=x;else for(;dt!==null;){f=dt;var h=f.sibling,j=f.return;if(PL(f),f===d){dt=null;break}if(h!==null){h.return=j,dt=h;break}dt=j}}}var v=i.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}dt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,dt=l;else e:for(;dt!==null;){if(i=dt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,dt=y;break e}dt=i.return}}var m=t.current;for(dt=m;dt!==null;){l=dt;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,dt=g;else e:for(l=m;dt!==null;){if(o=dt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:s0(9,o)}}catch(N){dn(o,o.return,N)}if(o===l){dt=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,dt=w;break e}dt=o.return}}if(hs=a,No(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(Wp,t)}catch{}r=!0}return r}finally{Ts=n,ba.transition=s}}return!1}function KN(t,s,n){s=Qd(n,s),s=NL(t,s,1),t=so(t,s,1),s=Nr(),t!==null&&(Tm(t,1,s),$r(t,s))}function dn(t,s,n){if(t.tag===3)KN(t,t,n);else for(;s!==null;){if(s.tag===3){KN(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){t=Qd(n,t),t=CL(s,t,1),s=so(s,t,1),t=Nr(),s!==null&&(Tm(s,1,t),$r(s,t));break}}s=s.return}}function pF(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),s=Nr(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(qn&n)===n&&(Rn===4||Rn===3&&(qn&130023424)===qn&&500>pn()-pv?Ko(t,0):xv|=n),$r(t,s)}function GL(t,s){s===0&&(t.mode&1?(s=gh,gh<<=1,!(gh&130023424)&&(gh=4194304)):s=1);var n=Nr();t=fl(t,s),t!==null&&(Tm(t,s,n),$r(t,n))}function gF(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),GL(t,n)}function jF(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Be(314))}r!==null&&r.delete(s),GL(t,n)}var YL;YL=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||Fr.current)Or=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return Or=!1,aF(t,s,n);Or=!!(t.flags&131072)}else Or=!1,qs&&s.flags&1048576&&Z6(s,Bx,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;rx(t,s),t=s.pendingProps;var a=Bd(s,ir.current);fd(s,n),a=cv(null,s,r,t,a,n);var i=dv();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ur(r)?(i=!0,Ux(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,rv(s),a.updater=t0,s.stateNode=a,a._reactInternals=s,tj(s,r,t,n),s=rj(null,s,r,!0,i,n)):(s.tag=0,qs&&i&&qy(s),pr(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(rx(t,s),t=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=vF(r),t=Pa(r,t),a){case 0:s=nj(null,s,r,t,n);break e;case 1:s=BN(null,s,r,t,n);break e;case 11:s=UN(null,s,r,t,n);break e;case 14:s=$N(null,s,r,Pa(r.type,t),n);break e}throw Error(Be(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Pa(r,a),nj(t,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Pa(r,a),BN(t,s,r,a,n);case 3:e:{if(LL(s),t===null)throw Error(Be(387));r=s.pendingProps,i=s.memoizedState,a=i.element,tL(t,s),Yx(s,r,null,n);var l=s.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=Qd(Error(Be(423)),s),s=VN(t,s,r,n,a);break e}else if(r!==a){a=Qd(Error(Be(424)),s),s=VN(t,s,r,n,a);break e}else for(ea=to(s.stateNode.containerInfo.firstChild),sa=s,qs=!0,Ua=null,n=X6(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vd(),r===a){s=ml(t,s,n);break e}pr(t,s,r,n)}s=s.child}return s;case 5:return sL(s),t===null&&K1(s),r=s.type,a=s.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,H1(r,a)?l=null:i!==null&&H1(r,i)&&(s.flags|=32),kL(t,s),pr(t,s,l,n),s.child;case 6:return t===null&&K1(s),null;case 13:return TL(t,s,n);case 4:return av(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=Gd(s,null,r,n):pr(t,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Pa(r,a),UN(t,s,r,a,n);case 7:return pr(t,s,s.pendingProps,n),s.child;case 8:return pr(t,s,s.pendingProps.children,n),s.child;case 12:return pr(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,i=s.memoizedProps,l=a.value,zs(Vx,r._currentValue),r._currentValue=l,i!==null)if(Ka(i.value,l)){if(i.children===a.children&&!Fr.current){s=ml(t,s,n);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=al(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),X1(i.return,n,s),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Be(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),X1(l,n,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}pr(t,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,fd(s,n),a=Ca(a),r=r(a),s.flags|=1,pr(t,s,r,n),s.child;case 14:return r=s.type,a=Pa(r,s.pendingProps),a=Pa(r.type,a),$N(t,s,r,a,n);case 15:return ML(t,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Pa(r,a),rx(t,s),s.tag=1,Ur(r)?(t=!0,Ux(s)):t=!1,fd(s,n),wL(s,r,a),tj(s,r,a,n),rj(null,s,r,!0,t,n);case 19:return EL(t,s,n);case 22:return SL(t,s,n)}throw Error(Be(156,s.tag))};function QL(t,s){return y6(t,s)}function yF(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(t,s,n,r){return new yF(t,s,n,r)}function vv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vF(t){if(typeof t=="function")return vv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fy)return 11;if(t===Uy)return 14}return 2}function ao(t,s){var n=t.alternate;return n===null?(n=ya(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lx(t,s,n,r,a,i){var l=2;if(r=t,typeof t=="function")vv(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Jc:return Xo(n.children,a,i,s);case zy:l=8,a|=8;break;case M1:return t=ya(12,n,s,a|2),t.elementType=M1,t.lanes=i,t;case S1:return t=ya(13,n,s,a),t.elementType=S1,t.lanes=i,t;case k1:return t=ya(19,n,s,a),t.elementType=k1,t.lanes=i,t;case s6:return r0(n,a,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e6:l=10;break e;case t6:l=9;break e;case Fy:l=11;break e;case Uy:l=14;break e;case Dl:l=16,r=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return s=ya(l,n,s,a),s.elementType=t,s.type=r,s.lanes=i,s}function Xo(t,s,n,r){return t=ya(7,t,r,s),t.lanes=n,t}function r0(t,s,n,r){return t=ya(22,t,r,s),t.elementType=s6,t.lanes=n,t.stateNode={isHidden:!1},t}function Ag(t,s,n){return t=ya(6,t,null,s),t.lanes=n,t}function Dg(t,s,n){return s=ya(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function bF(t,s,n,r,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bv(t,s,n,r,a,i,l,o,c){return t=new bF(t,s,n,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=ya(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rv(i),t}function wF(t,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zc,key:r==null?null:""+r,children:t,containerInfo:s,implementation:n}}function HL(t){if(!t)return co;t=t._reactInternals;e:{if(Mc(t)!==t||t.tag!==1)throw Error(Be(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ur(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Be(171))}if(t.tag===1){var n=t.type;if(Ur(n))return H6(t,n,s)}return s}function WL(t,s,n,r,a,i,l,o,c){return t=bv(n,r,!0,t,a,i,l,o,c),t.context=HL(null),n=t.current,r=Nr(),a=ro(n),i=al(r,a),i.callback=s??null,so(n,i,a),t.current.lanes=a,Tm(t,a,r),$r(t,r),t}function a0(t,s,n,r){var a=s.current,i=Nr(),l=ro(a);return n=HL(n),s.context===null?s.context=n:s.pendingContext=n,s=al(i,l),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=so(a,s,l),t!==null&&(Za(t,a,l,i),tx(t,a,l)),l}function Xx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XN(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function wv(t,s){XN(t,s),(t=t.alternate)&&XN(t,s)}function NF(){return null}var ZL=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}i0.prototype.render=Nv.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Be(409));a0(t,s,null,null)};i0.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;cc(function(){a0(null,t,null,null)}),s[ul]=null}};function i0(t){this._internalRoot=t}i0.prototype.unstable_scheduleHydration=function(t){if(t){var s=S6();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Ol.length&&s!==0&&s<Ol[n].priority;n++);Ol.splice(n,0,t),n===0&&L6(t)}};function Cv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e2(){}function CF(t,s,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Xx(l);i.call(d)}}var l=WL(s,r,t,0,null,!1,!1,"",e2);return t._reactRootContainer=l,t[ul]=l.current,Of(t.nodeType===8?t.parentNode:t),cc(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=Xx(c);o.call(d)}}var c=bv(t,0,!1,null,null,!1,!1,"",e2);return t._reactRootContainer=c,t[ul]=c.current,Of(t.nodeType===8?t.parentNode:t),cc(function(){a0(s,c,n,r)}),c}function o0(t,s,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Xx(l);o.call(c)}}a0(s,l,t,a)}else l=CF(n,s,t,a,r);return Xx(l)}C6=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=sf(s.pendingLanes);n!==0&&(Vy(s,n|1),$r(s,pn()),!(hs&6)&&(Hd=pn()+500,No()))}break;case 13:cc(function(){var r=fl(t,1);if(r!==null){var a=Nr();Za(r,t,1,a)}}),wv(t,1)}};Gy=function(t){if(t.tag===13){var s=fl(t,134217728);if(s!==null){var n=Nr();Za(s,t,134217728,n)}wv(t,134217728)}};M6=function(t){if(t.tag===13){var s=ro(t),n=fl(t,s);if(n!==null){var r=Nr();Za(n,t,s,r)}wv(t,s)}};S6=function(){return Ts};k6=function(t,s){var n=Ts;try{return Ts=t,s()}finally{Ts=n}};O1=function(t,s,n){switch(s){case"input":if(E1(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var a=Kp(r);if(!a)throw Error(Be(90));r6(r),E1(r,a)}}}break;case"textarea":i6(t,n);break;case"select":s=n.value,s!=null&&od(t,!!n.multiple,s,!1)}};m6=gv;h6=cc;var MF={usingClientEntryPoint:!1,Events:[Im,ed,Kp,u6,f6,gv]},Fu={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SF={bundleType:Fu.bundleType,version:Fu.version,rendererPackageName:Fu.rendererPackageName,rendererConfig:Fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g6(t),t===null?null:t.stateNode},findFiberByHostInstance:Fu.findFiberByHostInstance||NF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Wp=Lh.inject(SF),Si=Lh}catch{}}oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MF;oa.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cv(s))throw Error(Be(200));return wF(t,s,null,n)};oa.createRoot=function(t,s){if(!Cv(t))throw Error(Be(299));var n=!1,r="",a=ZL;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=bv(t,1,!1,null,null,n,!1,r,a),t[ul]=s.current,Of(t.nodeType===8?t.parentNode:t),new Nv(s)};oa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=g6(s),t=t===null?null:t.stateNode,t};oa.flushSync=function(t){return cc(t)};oa.hydrate=function(t,s,n){if(!l0(s))throw Error(Be(200));return o0(null,t,s,!0,n)};oa.hydrateRoot=function(t,s,n){if(!Cv(t))throw Error(Be(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=ZL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),s=WL(s,null,t,1,n??null,a,!1,i,l),t[ul]=s.current,Of(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new i0(s)};oa.render=function(t,s,n){if(!l0(s))throw Error(Be(200));return o0(null,t,s,!1,n)};oa.unmountComponentAtNode=function(t){if(!l0(t))throw Error(Be(40));return t._reactRootContainer?(cc(function(){o0(null,null,t,!1,function(){t._reactRootContainer=null,t[ul]=null})}),!0):!1};oa.unstable_batchedUpdates=gv;oa.unstable_renderSubtreeIntoContainer=function(t,s,n,r){if(!l0(n))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return o0(t,s,n,!1,r)};oa.version="18.3.1-next-f1338f8080-20240426";function JL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JL)}catch(t){console.error(t)}}JL(),Jk.exports=oa;var Sc=Jk.exports;const kF=cu(Sc);var qL,t2=Sc;qL=t2.createRoot,t2.hydrateRoot;function LF(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,a,i,l=[],o="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(l.push(n),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~r?r:~i?i:a.length)),o+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~r?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}var KL={exports:{}},XL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd=u;function TF(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var EF=typeof Object.is=="function"?Object.is:TF,IF=Wd.useState,AF=Wd.useEffect,DF=Wd.useLayoutEffect,PF=Wd.useDebugValue;function _F(t,s){var n=s(),r=IF({inst:{value:n,getSnapshot:s}}),a=r[0].inst,i=r[1];return DF(function(){a.value=n,a.getSnapshot=s,Pg(a)&&i({inst:a})},[t,n,s]),AF(function(){return Pg(a)&&i({inst:a}),t(function(){Pg(a)&&i({inst:a})})},[t]),PF(n),n}function Pg(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!EF(t,n)}catch{return!0}}function RF(t,s){return s()}var OF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RF:_F;XL.useSyncExternalStore=Wd.useSyncExternalStore!==void 0?Wd.useSyncExternalStore:OF;KL.exports=XL;var zF=KL.exports;const FF=Wk.useInsertionEffect,UF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eT=UF?u.useLayoutEffect:u.useEffect,$F=FF||eT,Mv=t=>{const s=u.useRef([t,(...n)=>s[0](...n)]).current;return $F(()=>{s[0]=t}),s[1]},BF="popstate",Sv="pushState",kv="replaceState",VF="hashchange",s2=[BF,Sv,kv,VF],GF=t=>{for(const s of s2)addEventListener(s,t);return()=>{for(const s of s2)removeEventListener(s,t)}},tT=(t,s)=>zF.useSyncExternalStore(GF,t,s),YF=()=>location.search,QF=({ssrSearch:t=""}={})=>tT(YF,()=>t),n2=()=>location.pathname,HF=({ssrPath:t}={})=>tT(n2,t?()=>t:n2),WF=(t,{replace:s=!1,state:n=null}={})=>history[s?kv:Sv](n,"",t),ZF=(t={})=>[HF(t),WF],r2=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[r2]>"u"){for(const t of[Sv,kv]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,r2,{value:!0})}const JF=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",sT=(t="")=>t==="/"?"":t,qF=(t,s)=>t[0]==="~"?t.slice(1):sT(s)+t,KF=(t="",s)=>JF(a2(sT(t)),a2(s)),a2=t=>{try{return decodeURI(t)}catch{return t}},nT={hook:ZF,searchHook:QF,parser:LF,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},rT=u.createContext(nT),mu=()=>u.useContext(rT),aT={},iT=u.createContext(aT),Lv=()=>u.useContext(iT),Dm=t=>{const[s,n]=t.hook(t);return[KF(t.base,s),Mv((r,a)=>n(qF(r,t.base),a))]},_t=()=>Dm(mu()),lT=(t,s,n,r)=>{const{pattern:a,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",r),l=a.exec(n)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((x,h)=>[x,c[h]])):l.groups;let f={...c};return d&&Object.assign(f,d),f})(),...r?[o]:[]]:[!1,null]},XF=({children:t,...s})=>{var f,x;const n=mu(),r=s.hook?nT:n;let a=r;const[i,l]=((f=s.ssrPath)==null?void 0:f.split("?"))??[];l&&(s.ssrSearch=l,s.ssrPath=i),s.hrefs=s.hrefs??((x=s.hook)==null?void 0:x.hrefs);let o=u.useRef({}),c=o.current,d=c;for(let h in r){const j=h==="base"?r[h]+(s[h]||""):s[h]||r[h];c===d&&j!==d[h]&&(o.current=d={...d}),d[h]=j,j!==r[h]&&(a=d)}return u.createElement(rT.Provider,{value:a,children:t})},i2=({children:t,component:s},n)=>s?u.createElement(s,{params:n}):typeof t=="function"?t(n):t,e7=t=>{let s=u.useRef(aT);const n=s.current;return s.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,a])=>a!==n[r])?t:n},di=({path:t,nest:s,match:n,...r})=>{const a=mu(),[i]=Dm(a),[l,o,c]=n??lT(a.parser,t,i,s),d=e7({...Lv(),...o});if(!l)return null;const f=c?u.createElement(XF,{base:c},i2(r,d)):i2(r,d);return u.createElement(iT.Provider,{value:d,children:f})},Mn=u.forwardRef((t,s)=>{const n=mu(),[r,a]=Dm(n),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:f,replace:x,state:h,...j}=t,v=Mv(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(o==null||o(b),b.defaultPrevented||(b.preventDefault(),a(l,t)))}),p=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return c&&u.isValidElement(d)?u.cloneElement(d,{onClick:v,href:p}):u.createElement("a",{...j,onClick:v,href:p,className:f!=null&&f.call?f(r===l):f,children:d,ref:s})}),oT=t=>Array.isArray(t)?t.flatMap(s=>oT(s&&s.type===u.Fragment?s.props.children:s)):[t],t7=({children:t,location:s})=>{const n=mu(),[r]=Dm(n);for(const a of oT(t)){let i=0;if(u.isValidElement(a)&&(i=lT(n.parser,a.props.path,s||r,a.props.nest))[0])return u.cloneElement(a,{match:i})}return null},s7=t=>{const{to:s,href:n=s}=t,r=mu(),[,a]=Dm(r),i=Mv(()=>a(s||n,t)),{ssrContext:l}=r;return eT(()=>{i()},[]),l&&(l.redirectTo=s),null};var hu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dc=typeof window>"u"||"Deno"in globalThis;function gr(){}function n7(t,s){return typeof t=="function"?t(s):t}function pj(t){return typeof t=="number"&&t>=0&&t!==1/0}function cT(t,s){return Math.max(t+(s||0)-Date.now(),0)}function hd(t,s){return typeof t=="function"?t(s):t}function $a(t,s){return typeof t=="function"?t(s):t}function l2(t,s){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(r){if(s.queryHash!==Tv(l,s.options))return!1}else if(!Qf(s.queryKey,l))return!1}if(n!=="all"){const c=s.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||a&&a!==s.state.fetchStatus||i&&!i(s))}function o2(t,s){const{exact:n,status:r,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(n){if(uc(s.options.mutationKey)!==uc(i))return!1}else if(!Qf(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||a&&!a(s))}function Tv(t,s){return((s==null?void 0:s.queryKeyHashFn)||uc)(t)}function uc(t){return JSON.stringify(t,(s,n)=>gj(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Qf(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(n=>Qf(t[n],s[n])):!1}function dT(t,s){if(t===s)return t;const n=c2(t)&&c2(s);if(n||gj(t)&&gj(s)){const r=n?t:Object.keys(t),a=r.length,i=n?s:Object.keys(s),l=i.length,o=n?[]:{};let c=0;for(let d=0;d<l;d++){const f=n?d:i[d];(!n&&r.includes(f)||n)&&t[f]===void 0&&s[f]===void 0?(o[f]=void 0,c++):(o[f]=dT(t[f],s[f]),o[f]===t[f]&&t[f]!==void 0&&c++)}return a===l&&c===a?t:o}return s}function ep(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function c2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gj(t){if(!d2(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!d2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function d2(t){return Object.prototype.toString.call(t)==="[object Object]"}function r7(t){return new Promise(s=>{setTimeout(s,t)})}function jj(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?dT(t,s):s}function a7(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function i7(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var Ev=Symbol();function uT(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===Ev?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function fT(t,s){return typeof t=="function"?t(...s):!!t}var Go,Ul,Ld,FC,l7=(FC=class extends hu{constructor(){super();Lt(this,Go);Lt(this,Ul);Lt(this,Ld);rt(this,Ld,s=>{if(!dc&&window.addEventListener){const n=()=>s();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,Ul)||this.setEventListener(Y(this,Ld))}onUnsubscribe(){var s;this.hasListeners()||((s=Y(this,Ul))==null||s.call(this),rt(this,Ul,void 0))}setEventListener(s){var n;rt(this,Ld,s),(n=Y(this,Ul))==null||n.call(this),rt(this,Ul,s(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(s){Y(this,Go)!==s&&(rt(this,Go,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(n=>{n(s)})}isFocused(){var s;return typeof Y(this,Go)=="boolean"?Y(this,Go):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Go=new WeakMap,Ul=new WeakMap,Ld=new WeakMap,FC),Iv=new l7,Td,$l,Ed,UC,o7=(UC=class extends hu{constructor(){super();Lt(this,Td,!0);Lt(this,$l);Lt(this,Ed);rt(this,Ed,s=>{if(!dc&&window.addEventListener){const n=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,$l)||this.setEventListener(Y(this,Ed))}onUnsubscribe(){var s;this.hasListeners()||((s=Y(this,$l))==null||s.call(this),rt(this,$l,void 0))}setEventListener(s){var n;rt(this,Ed,s),(n=Y(this,$l))==null||n.call(this),rt(this,$l,s(this.setOnline.bind(this)))}setOnline(s){Y(this,Td)!==s&&(rt(this,Td,s),this.listeners.forEach(r=>{r(s)}))}isOnline(){return Y(this,Td)}},Td=new WeakMap,$l=new WeakMap,Ed=new WeakMap,UC),tp=new o7;function yj(){let t,s;const n=new Promise((a,i)=>{t=a,s=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),s(a)},n}function c7(t){return Math.min(1e3*2**t,3e4)}function mT(t){return(t??"online")==="online"?tp.isOnline():!0}var hT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function _g(t){return t instanceof hT}function xT(t){let s=!1,n=0,r=!1,a;const i=yj(),l=p=>{var b;r||(h(new hT(p)),(b=t.abort)==null||b.call(t))},o=()=>{s=!0},c=()=>{s=!1},d=()=>Iv.isFocused()&&(t.networkMode==="always"||tp.isOnline())&&t.canRun(),f=()=>mT(t.networkMode)&&t.canRun(),x=p=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,p),a==null||a(),i.resolve(p))},h=p=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,p),a==null||a(),i.reject(p))},j=()=>new Promise(p=>{var b;a=y=>{(r||d())&&p(y)},(b=t.onPause)==null||b.call(t)}).then(()=>{var p;a=void 0,r||(p=t.onContinue)==null||p.call(t)}),v=()=>{if(r)return;let p;const b=n===0?t.initialPromise:void 0;try{p=b??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(x).catch(y=>{var k;if(r)return;const m=t.retry??(dc?0:3),g=t.retryDelay??c7,w=typeof g=="function"?g(n,y):g,N=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(s||!N){h(y);return}n++,(k=t.onFail)==null||k.call(t,n,y),r7(w).then(()=>d()?void 0:j()).then(()=>{s?h(y):v()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:f,start:()=>(f()?v():j().then(v),i)}}var d7=t=>setTimeout(t,0);function u7(){let t=[],s=0,n=o=>{o()},r=o=>{o()},a=d7;const i=o=>{s?t.push(o):a(()=>{n(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{a=o}}}var Dn=u7(),Yo,$C,pT=($C=class{constructor(){Lt(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pj(this.gcTime)&&rt(this,Yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dc?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Yo)&&(clearTimeout(Y(this,Yo)),rt(this,Yo,void 0))}},Yo=new WeakMap,$C),Id,Ad,ha,Qo,rr,Cm,Ho,Ra,Wi,BC,f7=(BC=class extends pT{constructor(s){super();Lt(this,Ra);Lt(this,Id);Lt(this,Ad);Lt(this,ha);Lt(this,Qo);Lt(this,rr);Lt(this,Cm);Lt(this,Ho);rt(this,Ho,!1),rt(this,Cm,s.defaultOptions),this.setOptions(s.options),this.observers=[],rt(this,Qo,s.client),rt(this,ha,Y(this,Qo).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,rt(this,Id,m7(this.options)),this.state=s.state??Y(this,Id),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=Y(this,rr))==null?void 0:s.promise}setOptions(s){this.options={...Y(this,Cm),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,ha).remove(this)}setData(s,n){const r=jj(this.state.data,s,this.options);return Wt(this,Ra,Wi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(s,n){Wt(this,Ra,Wi).call(this,{type:"setState",state:s,setStateOptions:n})}cancel(s){var r,a;const n=(r=Y(this,rr))==null?void 0:r.promise;return(a=Y(this,rr))==null||a.cancel(s),n?n.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,Id))}isActive(){return this.observers.some(s=>$a(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ev||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!cT(this.state.dataUpdatedAt,s)}onFocus(){var n;const s=this.observers.find(r=>r.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(n=Y(this,rr))==null||n.continue()}onOnline(){var n;const s=this.observers.find(r=>r.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(n=Y(this,rr))==null||n.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),Y(this,ha).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(n=>n!==s),this.observers.length||(Y(this,rr)&&(Y(this,Ho)?Y(this,rr).cancel({revert:!0}):Y(this,rr).cancelRetry()),this.scheduleGc()),Y(this,ha).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wt(this,Ra,Wi).call(this,{type:"invalidate"})}fetch(s,n){var c,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Y(this,rr))return Y(this,rr).continueRetry(),Y(this,rr).promise}if(s&&this.setOptions(s),!this.options.queryFn){const x=this.observers.find(h=>h.options.queryFn);x&&this.setOptions(x.options)}const r=new AbortController,a=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(rt(this,Ho,!0),r.signal)})},i=()=>{const x=uT(this.options,n),h={client:Y(this,Qo),queryKey:this.queryKey,meta:this.meta};return a(h),rt(this,Ho,!1),this.options.persister?this.options.persister(x,h,this):x(h)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Y(this,Qo),state:this.state,fetchFn:i};a(l),(c=this.options.behavior)==null||c.onFetch(l,this),rt(this,Ad,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Wt(this,Ra,Wi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const o=x=>{var h,j,v,p;_g(x)&&x.silent||Wt(this,Ra,Wi).call(this,{type:"error",error:x}),_g(x)||((j=(h=Y(this,ha).config).onError)==null||j.call(h,x,this),(p=(v=Y(this,ha).config).onSettled)==null||p.call(v,this.state.data,x,this)),this.scheduleGc()};return rt(this,rr,xT({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:x=>{var h,j,v,p;if(x===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(b){o(b);return}(j=(h=Y(this,ha).config).onSuccess)==null||j.call(h,x,this),(p=(v=Y(this,ha).config).onSettled)==null||p.call(v,x,this.state.error,this),this.scheduleGc()},onError:o,onFail:(x,h)=>{Wt(this,Ra,Wi).call(this,{type:"failed",failureCount:x,error:h})},onPause:()=>{Wt(this,Ra,Wi).call(this,{type:"pause"})},onContinue:()=>{Wt(this,Ra,Wi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Y(this,rr).start()}},Id=new WeakMap,Ad=new WeakMap,ha=new WeakMap,Qo=new WeakMap,rr=new WeakMap,Cm=new WeakMap,Ho=new WeakMap,Ra=new WeakSet,Wi=function(s){const n=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...gT(r.data,this.options),fetchMeta:s.meta??null};case"success":return{...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return _g(a)&&a.revert&&Y(this,Ad)?{...Y(this,Ad),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=n(this.state),Dn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Y(this,ha).notify({query:this,type:"updated",action:s})})},BC);function gT(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mT(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function m7(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ui,VC,h7=(VC=class extends hu{constructor(s={}){super();Lt(this,ui);this.config=s,rt(this,ui,new Map)}build(s,n,r){const a=n.queryKey,i=n.queryHash??Tv(a,n);let l=this.get(i);return l||(l=new f7({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(n),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){Y(this,ui).has(s.queryHash)||(Y(this,ui).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const n=Y(this,ui).get(s.queryHash);n&&(s.destroy(),n===s&&Y(this,ui).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Dn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return Y(this,ui).get(s)}getAll(){return[...Y(this,ui).values()]}find(s){const n={exact:!0,...s};return this.getAll().find(r=>l2(n,r))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(r=>l2(s,r)):n}notify(s){Dn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}onFocus(){Dn.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Dn.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},ui=new WeakMap,VC),fi,mr,Wo,mi,El,GC,x7=(GC=class extends pT{constructor(s){super();Lt(this,mi);Lt(this,fi);Lt(this,mr);Lt(this,Wo);this.mutationId=s.mutationId,rt(this,mr,s.mutationCache),rt(this,fi,[]),this.state=s.state||jT(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Y(this,fi).includes(s)||(Y(this,fi).push(s),this.clearGcTimeout(),Y(this,mr).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){rt(this,fi,Y(this,fi).filter(n=>n!==s)),this.scheduleGc(),Y(this,mr).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Y(this,fi).length||(this.state.status==="pending"?this.scheduleGc():Y(this,mr).remove(this))}continue(){var s;return((s=Y(this,Wo))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var i,l,o,c,d,f,x,h,j,v,p,b,y,m,g,w,N,k,L,S;const n=()=>{Wt(this,mi,El).call(this,{type:"continue"})};rt(this,Wo,xT({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(T,E)=>{Wt(this,mi,El).call(this,{type:"failed",failureCount:T,error:E})},onPause:()=>{Wt(this,mi,El).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,mr).canRun(this)}));const r=this.state.status==="pending",a=!Y(this,Wo).canStart();try{if(r)n();else{Wt(this,mi,El).call(this,{type:"pending",variables:s,isPaused:a}),await((l=(i=Y(this,mr).config).onMutate)==null?void 0:l.call(i,s,this));const E=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,s));E!==this.state.context&&Wt(this,mi,El).call(this,{type:"pending",context:E,variables:s,isPaused:a})}const T=await Y(this,Wo).start();return await((f=(d=Y(this,mr).config).onSuccess)==null?void 0:f.call(d,T,s,this.state.context,this)),await((h=(x=this.options).onSuccess)==null?void 0:h.call(x,T,s,this.state.context)),await((v=(j=Y(this,mr).config).onSettled)==null?void 0:v.call(j,T,null,this.state.variables,this.state.context,this)),await((b=(p=this.options).onSettled)==null?void 0:b.call(p,T,null,s,this.state.context)),Wt(this,mi,El).call(this,{type:"success",data:T}),T}catch(T){try{throw await((m=(y=Y(this,mr).config).onError)==null?void 0:m.call(y,T,s,this.state.context,this)),await((w=(g=this.options).onError)==null?void 0:w.call(g,T,s,this.state.context)),await((k=(N=Y(this,mr).config).onSettled)==null?void 0:k.call(N,void 0,T,this.state.variables,this.state.context,this)),await((S=(L=this.options).onSettled)==null?void 0:S.call(L,void 0,T,s,this.state.context)),T}finally{Wt(this,mi,El).call(this,{type:"error",error:T})}}finally{Y(this,mr).runNext(this)}}},fi=new WeakMap,mr=new WeakMap,Wo=new WeakMap,mi=new WeakSet,El=function(s){const n=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Dn.batch(()=>{Y(this,fi).forEach(r=>{r.onMutationUpdate(s)}),Y(this,mr).notify({mutation:this,type:"updated",action:s})})},GC);function jT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var el,Oa,Mm,YC,p7=(YC=class extends hu{constructor(s={}){super();Lt(this,el);Lt(this,Oa);Lt(this,Mm);this.config=s,rt(this,el,new Set),rt(this,Oa,new Map),rt(this,Mm,0)}build(s,n,r){const a=new x7({mutationCache:this,mutationId:++uh(this,Mm)._,options:s.defaultMutationOptions(n),state:r});return this.add(a),a}add(s){Y(this,el).add(s);const n=Th(s);if(typeof n=="string"){const r=Y(this,Oa).get(n);r?r.push(s):Y(this,Oa).set(n,[s])}this.notify({type:"added",mutation:s})}remove(s){if(Y(this,el).delete(s)){const n=Th(s);if(typeof n=="string"){const r=Y(this,Oa).get(n);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&Y(this,Oa).delete(n)}}this.notify({type:"removed",mutation:s})}canRun(s){const n=Th(s);if(typeof n=="string"){const r=Y(this,Oa).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){var r;const n=Th(s);if(typeof n=="string"){const a=(r=Y(this,Oa).get(n))==null?void 0:r.find(i=>i!==s&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Dn.batch(()=>{Y(this,el).forEach(s=>{this.notify({type:"removed",mutation:s})}),Y(this,el).clear(),Y(this,Oa).clear()})}getAll(){return Array.from(Y(this,el))}find(s){const n={exact:!0,...s};return this.getAll().find(r=>o2(n,r))}findAll(s={}){return this.getAll().filter(n=>o2(s,n))}notify(s){Dn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}resumePausedMutations(){const s=this.getAll().filter(n=>n.state.isPaused);return Dn.batch(()=>Promise.all(s.map(n=>n.continue().catch(gr))))}},el=new WeakMap,Oa=new WeakMap,Mm=new WeakMap,YC);function Th(t){var s;return(s=t.options.scope)==null?void 0:s.id}function u2(t){return{onFetch:(s,n)=>{var f,x,h,j,v;const r=s.options,a=(h=(x=(f=s.fetchOptions)==null?void 0:f.meta)==null?void 0:x.fetchMore)==null?void 0:h.direction,i=((j=s.state.data)==null?void 0:j.pages)||[],l=((v=s.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const b=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(s.signal.aborted?p=!0:s.signal.addEventListener("abort",()=>{p=!0}),s.signal)})},y=uT(s.options,s.fetchOptions),m=async(g,w,N)=>{if(p)return Promise.reject();if(w==null&&g.pages.length)return Promise.resolve(g);const k={client:s.client,queryKey:s.queryKey,pageParam:w,direction:N?"backward":"forward",meta:s.options.meta};b(k);const L=await y(k),{maxPages:S}=s.options,T=N?i7:a7;return{pages:T(g.pages,L,S),pageParams:T(g.pageParams,w,S)}};if(a&&i.length){const g=a==="backward",w=g?g7:f2,N={pages:i,pageParams:l},k=w(r,N);o=await m(N,k,g)}else{const g=t??i.length;do{const w=c===0?l[0]??r.initialPageParam:f2(r,o);if(c>0&&w==null)break;o=await m(o,w),c++}while(c<g)}return o};s.options.persister?s.fetchFn=()=>{var p,b;return(b=(p=s.options).persister)==null?void 0:b.call(p,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n)}:s.fetchFn=d}}}function f2(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function g7(t,{pages:s,pageParams:n}){var r;return s.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,s[0],s,n[0],n):void 0}var cn,Bl,Vl,Dd,Pd,Gl,_d,Rd,QC,j7=(QC=class{constructor(t={}){Lt(this,cn);Lt(this,Bl);Lt(this,Vl);Lt(this,Dd);Lt(this,Pd);Lt(this,Gl);Lt(this,_d);Lt(this,Rd);rt(this,cn,t.queryCache||new h7),rt(this,Bl,t.mutationCache||new p7),rt(this,Vl,t.defaultOptions||{}),rt(this,Dd,new Map),rt(this,Pd,new Map),rt(this,Gl,0)}mount(){uh(this,Gl)._++,Y(this,Gl)===1&&(rt(this,_d,Iv.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,cn).onFocus())})),rt(this,Rd,tp.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,cn).onOnline())})))}unmount(){var t,s;uh(this,Gl)._--,Y(this,Gl)===0&&((t=Y(this,_d))==null||t.call(this),rt(this,_d,void 0),(s=Y(this,Rd))==null||s.call(this),rt(this,Rd,void 0))}isFetching(t){return Y(this,cn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,Bl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=Y(this,cn).get(s.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),n=Y(this,cn).build(this,s),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(hd(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return Y(this,cn).findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),a=Y(this,cn).get(r.queryHash),i=a==null?void 0:a.state.data,l=n7(s,i);if(l!==void 0)return Y(this,cn).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,s,n){return Dn.batch(()=>Y(this,cn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=Y(this,cn).get(s.queryHash))==null?void 0:n.state}removeQueries(t){const s=Y(this,cn);Dn.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=Y(this,cn);return Dn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const n={revert:!0,...s},r=Dn.batch(()=>Y(this,cn).findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(t,s={}){return Dn.batch(()=>(Y(this,cn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const n={...s,cancelRefetch:s.cancelRefetch??!0},r=Dn.batch(()=>Y(this,cn).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(gr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gr)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=Y(this,cn).build(this,s);return n.isStaleByTime(hd(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gr).catch(gr)}fetchInfiniteQuery(t){return t.behavior=u2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gr).catch(gr)}ensureInfiniteQueryData(t){return t.behavior=u2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tp.isOnline()?Y(this,Bl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,cn)}getMutationCache(){return Y(this,Bl)}getDefaultOptions(){return Y(this,Vl)}setDefaultOptions(t){rt(this,Vl,t)}setQueryDefaults(t,s){Y(this,Dd).set(uc(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...Y(this,Dd).values()],n={};return s.forEach(r=>{Qf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,s){Y(this,Pd).set(uc(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...Y(this,Pd).values()],n={};return s.forEach(r=>{Qf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...Y(this,Vl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Tv(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Ev&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,Vl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,cn).clear(),Y(this,Bl).clear()}},cn=new WeakMap,Bl=new WeakMap,Vl=new WeakMap,Dd=new WeakMap,Pd=new WeakMap,Gl=new WeakMap,_d=new WeakMap,Rd=new WeakMap,QC),Dr,ns,Sm,hr,Zo,Od,Yl,Ql,km,zd,Fd,Jo,qo,Hl,Ud,Cs,rf,vj,bj,wj,Nj,Cj,Mj,Sj,yT,HC,y7=(HC=class extends hu{constructor(s,n){super();Lt(this,Cs);Lt(this,Dr);Lt(this,ns);Lt(this,Sm);Lt(this,hr);Lt(this,Zo);Lt(this,Od);Lt(this,Yl);Lt(this,Ql);Lt(this,km);Lt(this,zd);Lt(this,Fd);Lt(this,Jo);Lt(this,qo);Lt(this,Hl);Lt(this,Ud,new Set);this.options=n,rt(this,Dr,s),rt(this,Ql,null),rt(this,Yl,yj()),this.options.experimental_prefetchInRender||Y(this,Yl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,ns).addObserver(this),m2(Y(this,ns),this.options)?Wt(this,Cs,rf).call(this):this.updateResult(),Wt(this,Cs,Nj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kj(Y(this,ns),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kj(Y(this,ns),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Wt(this,Cs,Cj).call(this),Wt(this,Cs,Mj).call(this),Y(this,ns).removeObserver(this)}setOptions(s){const n=this.options,r=Y(this,ns);if(this.options=Y(this,Dr).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $a(this.options.enabled,Y(this,ns))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Wt(this,Cs,Sj).call(this),Y(this,ns).setOptions(this.options),n._defaulted&&!ep(this.options,n)&&Y(this,Dr).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,ns),observer:this});const a=this.hasListeners();a&&h2(Y(this,ns),r,this.options,n)&&Wt(this,Cs,rf).call(this),this.updateResult(),a&&(Y(this,ns)!==r||$a(this.options.enabled,Y(this,ns))!==$a(n.enabled,Y(this,ns))||hd(this.options.staleTime,Y(this,ns))!==hd(n.staleTime,Y(this,ns)))&&Wt(this,Cs,vj).call(this);const i=Wt(this,Cs,bj).call(this);a&&(Y(this,ns)!==r||$a(this.options.enabled,Y(this,ns))!==$a(n.enabled,Y(this,ns))||i!==Y(this,Hl))&&Wt(this,Cs,wj).call(this,i)}getOptimisticResult(s){const n=Y(this,Dr).getQueryCache().build(Y(this,Dr),s),r=this.createResult(n,s);return b7(this,r)&&(rt(this,hr,r),rt(this,Od,this.options),rt(this,Zo,Y(this,ns).state)),r}getCurrentResult(){return Y(this,hr)}trackResult(s,n){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(r,a))})}trackProp(s){Y(this,Ud).add(s)}getCurrentQuery(){return Y(this,ns)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const n=Y(this,Dr).defaultQueryOptions(s),r=Y(this,Dr).getQueryCache().build(Y(this,Dr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(s){return Wt(this,Cs,rf).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,hr)))}createResult(s,n){var T;const r=Y(this,ns),a=this.options,i=Y(this,hr),l=Y(this,Zo),o=Y(this,Od),d=s!==r?s.state:Y(this,Sm),{state:f}=s;let x={...f},h=!1,j;if(n._optimisticResults){const E=this.hasListeners(),$=!E&&m2(s,n),F=E&&h2(s,r,n,a);($||F)&&(x={...x,...gT(f.data,s.options)}),n._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:b}=x;j=x.data;let y=!1;if(n.placeholderData!==void 0&&j===void 0&&b==="pending"){let E;i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(E=i.data,y=!0):E=typeof n.placeholderData=="function"?n.placeholderData((T=Y(this,Fd))==null?void 0:T.state.data,Y(this,Fd)):n.placeholderData,E!==void 0&&(b="success",j=jj(i==null?void 0:i.data,E,n),h=!0)}if(n.select&&j!==void 0&&!y)if(i&&j===(l==null?void 0:l.data)&&n.select===Y(this,km))j=Y(this,zd);else try{rt(this,km,n.select),j=n.select(j),j=jj(i==null?void 0:i.data,j,n),rt(this,zd,j),rt(this,Ql,null)}catch(E){rt(this,Ql,E)}Y(this,Ql)&&(v=Y(this,Ql),j=Y(this,zd),p=Date.now(),b="error");const m=x.fetchStatus==="fetching",g=b==="pending",w=b==="error",N=g&&m,k=j!==void 0,S={status:b,fetchStatus:x.fetchStatus,isPending:g,isSuccess:b==="success",isError:w,isInitialLoading:N,isLoading:N,data:j,dataUpdatedAt:x.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>d.dataUpdateCount||x.errorUpdateCount>d.errorUpdateCount,isFetching:m,isRefetching:m&&!g,isLoadingError:w&&!k,isPaused:x.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&k,isStale:Av(s,n),refetch:this.refetch,promise:Y(this,Yl)};if(this.options.experimental_prefetchInRender){const E=Z=>{S.status==="error"?Z.reject(S.error):S.data!==void 0&&Z.resolve(S.data)},$=()=>{const Z=rt(this,Yl,S.promise=yj());E(Z)},F=Y(this,Yl);switch(F.status){case"pending":s.queryHash===r.queryHash&&E(F);break;case"fulfilled":(S.status==="error"||S.data!==F.value)&&$();break;case"rejected":(S.status!=="error"||S.error!==F.reason)&&$();break}}return S}updateResult(){const s=Y(this,hr),n=this.createResult(Y(this,ns),this.options);if(rt(this,Zo,Y(this,ns).state),rt(this,Od,this.options),Y(this,Zo).data!==void 0&&rt(this,Fd,Y(this,ns)),ep(n,s))return;rt(this,hr,n);const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Y(this,Ud).size)return!0;const l=new Set(i??Y(this,Ud));return this.options.throwOnError&&l.add("error"),Object.keys(Y(this,hr)).some(o=>{const c=o;return Y(this,hr)[c]!==s[c]&&l.has(c)})};Wt(this,Cs,yT).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Wt(this,Cs,Nj).call(this)}},Dr=new WeakMap,ns=new WeakMap,Sm=new WeakMap,hr=new WeakMap,Zo=new WeakMap,Od=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,km=new WeakMap,zd=new WeakMap,Fd=new WeakMap,Jo=new WeakMap,qo=new WeakMap,Hl=new WeakMap,Ud=new WeakMap,Cs=new WeakSet,rf=function(s){Wt(this,Cs,Sj).call(this);let n=Y(this,ns).fetch(this.options,s);return s!=null&&s.throwOnError||(n=n.catch(gr)),n},vj=function(){Wt(this,Cs,Cj).call(this);const s=hd(this.options.staleTime,Y(this,ns));if(dc||Y(this,hr).isStale||!pj(s))return;const r=cT(Y(this,hr).dataUpdatedAt,s)+1;rt(this,Jo,setTimeout(()=>{Y(this,hr).isStale||this.updateResult()},r))},bj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,ns)):this.options.refetchInterval)??!1},wj=function(s){Wt(this,Cs,Mj).call(this),rt(this,Hl,s),!(dc||$a(this.options.enabled,Y(this,ns))===!1||!pj(Y(this,Hl))||Y(this,Hl)===0)&&rt(this,qo,setInterval(()=>{(this.options.refetchIntervalInBackground||Iv.isFocused())&&Wt(this,Cs,rf).call(this)},Y(this,Hl)))},Nj=function(){Wt(this,Cs,vj).call(this),Wt(this,Cs,wj).call(this,Wt(this,Cs,bj).call(this))},Cj=function(){Y(this,Jo)&&(clearTimeout(Y(this,Jo)),rt(this,Jo,void 0))},Mj=function(){Y(this,qo)&&(clearInterval(Y(this,qo)),rt(this,qo,void 0))},Sj=function(){const s=Y(this,Dr).getQueryCache().build(Y(this,Dr),this.options);if(s===Y(this,ns))return;const n=Y(this,ns);rt(this,ns,s),rt(this,Sm,s.state),this.hasListeners()&&(n==null||n.removeObserver(this),s.addObserver(this))},yT=function(s){Dn.batch(()=>{s.listeners&&this.listeners.forEach(n=>{n(Y(this,hr))}),Y(this,Dr).getQueryCache().notify({query:Y(this,ns),type:"observerResultsUpdated"})})},HC);function v7(t,s){return $a(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function m2(t,s){return v7(t,s)||t.state.data!==void 0&&kj(t,s,s.refetchOnMount)}function kj(t,s,n){if($a(s.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Av(t,s)}return!1}function h2(t,s,n,r){return(t!==s||$a(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Av(t,n)}function Av(t,s){return $a(s.enabled,t)!==!1&&t.isStaleByTime(hd(s.staleTime,t))}function b7(t,s){return!ep(t.getCurrentResult(),s)}var Wl,Zl,Pr,tl,cl,ox,Lj,WC,w7=(WC=class extends hu{constructor(n,r){super();Lt(this,cl);Lt(this,Wl);Lt(this,Zl);Lt(this,Pr);Lt(this,tl);rt(this,Wl,n),this.setOptions(r),this.bindMethods(),Wt(this,cl,ox).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=Y(this,Wl).defaultMutationOptions(n),ep(this.options,r)||Y(this,Wl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Y(this,Pr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&uc(r.mutationKey)!==uc(this.options.mutationKey)?this.reset():((a=Y(this,Pr))==null?void 0:a.state.status)==="pending"&&Y(this,Pr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Y(this,Pr))==null||n.removeObserver(this)}onMutationUpdate(n){Wt(this,cl,ox).call(this),Wt(this,cl,Lj).call(this,n)}getCurrentResult(){return Y(this,Zl)}reset(){var n;(n=Y(this,Pr))==null||n.removeObserver(this),rt(this,Pr,void 0),Wt(this,cl,ox).call(this),Wt(this,cl,Lj).call(this)}mutate(n,r){var a;return rt(this,tl,r),(a=Y(this,Pr))==null||a.removeObserver(this),rt(this,Pr,Y(this,Wl).getMutationCache().build(Y(this,Wl),this.options)),Y(this,Pr).addObserver(this),Y(this,Pr).execute(n)}},Wl=new WeakMap,Zl=new WeakMap,Pr=new WeakMap,tl=new WeakMap,cl=new WeakSet,ox=function(){var r;const n=((r=Y(this,Pr))==null?void 0:r.state)??jT();rt(this,Zl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Lj=function(n){Dn.batch(()=>{var r,a,i,l,o,c,d,f;if(Y(this,tl)&&this.hasListeners()){const x=Y(this,Zl).variables,h=Y(this,Zl).context;(n==null?void 0:n.type)==="success"?((a=(r=Y(this,tl)).onSuccess)==null||a.call(r,n.data,x,h),(l=(i=Y(this,tl)).onSettled)==null||l.call(i,n.data,null,x,h)):(n==null?void 0:n.type)==="error"&&((c=(o=Y(this,tl)).onError)==null||c.call(o,n.error,x,h),(f=(d=Y(this,tl)).onSettled)==null||f.call(d,void 0,n.error,x,h))}this.listeners.forEach(x=>{x(Y(this,Zl))})})},WC),vT=u.createContext(void 0),$n=t=>{const s=u.useContext(vT);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},N7=({client:t,children:s})=>(u.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(vT.Provider,{value:t,children:s})),bT=u.createContext(!1),C7=()=>u.useContext(bT);bT.Provider;function M7(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var S7=u.createContext(M7()),k7=()=>u.useContext(S7),L7=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},T7=t=>{u.useEffect(()=>{t.clearReset()},[t])},E7=({result:t,errorResetBoundary:s,throwOnError:n,query:r,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&(a&&t.data===void 0||fT(n,[t.error,r])),I7=t=>{const s=t.staleTime;t.suspense&&(t.staleTime=typeof s=="function"?(...n)=>Math.max(s(...n),1e3):Math.max(s??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},A7=(t,s)=>t.isLoading&&t.isFetching&&!s,D7=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,x2=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function P7(t,s,n){var x,h,j,v,p;const r=$n(),a=C7(),i=k7(),l=r.defaultQueryOptions(t);(h=(x=r.getDefaultOptions().queries)==null?void 0:x._experimental_beforeQuery)==null||h.call(x,l),l._optimisticResults=a?"isRestoring":"optimistic",I7(l),L7(l,i),T7(i);const o=!r.getQueryCache().get(l.queryHash),[c]=u.useState(()=>new s(r,l)),d=c.getOptimisticResult(l),f=!a&&t.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(b=>{const y=f?c.subscribe(Dn.batchCalls(b)):gr;return c.updateResult(),y},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),u.useEffect(()=>{c.setOptions(l)},[l,c]),D7(l,d))throw x2(l,c,i);if(E7({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((v=(j=r.getDefaultOptions().queries)==null?void 0:j._experimental_afterQuery)==null||v.call(j,l,d),l.experimental_prefetchInRender&&!dc&&A7(d,a)){const b=o?x2(l,c,i):(p=r.getQueryCache().get(l.queryHash))==null?void 0:p.promise;b==null||b.catch(gr).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function $e(t,s){return P7(t,y7)}function Ze(t,s){const n=$n(),[r]=u.useState(()=>new w7(n,t));u.useEffect(()=>{r.setOptions(t)},[r,t]);const a=u.useSyncExternalStore(u.useCallback(l=>r.subscribe(Dn.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=u.useCallback((l,o)=>{r.mutate(l,o).catch(gr)},[r]);if(a.error&&fT(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const Rg=[{name:"ipify",url:"https://api.ipify.org?format=json",extractIP:t=>t.ip,timeout:5e3},{name:"ipapi",url:"https://ipapi.co/json/",extractIP:t=>t.ip,timeout:5e3},{name:"ifconfig",url:"https://ifconfig.co/json",extractIP:t=>t.ip,timeout:5e3},{name:"ipinfo",url:"https://ipinfo.io/json",extractIP:t=>t.ip,timeout:5e3}],bf="public_ip_cache",Dv=20*60*1e3;async function _7(t){const s=new AbortController,n=setTimeout(()=>s.abort(),t.timeout);try{const r=await fetch(t.url,{signal:s.signal,headers:{Accept:"application/json"}});if(clearTimeout(n),!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json(),i=t.extractIP(a);if(!i||typeof i!="string")throw new Error("Invalid IP format received");if(!R7(i))throw new Error(`Invalid IP address: ${i}`);return i}catch(r){throw clearTimeout(n),r instanceof Error&&r.name==="AbortError"?new Error(`Timeout: ${t.name} took too long to respond`):r}}function R7(t){const s=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n=/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;return s.test(t)||n.test(t)}function O7(t){try{localStorage.setItem(bf,JSON.stringify(t))}catch(s){console.warn("Failed to cache IP result:",s)}}function Pv(){try{const t=localStorage.getItem(bf);if(!t)return null;const s=JSON.parse(t);return Date.now()-s.timestamp>Dv?(localStorage.removeItem(bf),null):s}catch(t){return console.warn("Failed to read cached IP result:",t),localStorage.removeItem(bf),null}}async function _v(t=!1){if(!t){const r=Pv();if(r)return r}let s=null;for(const r of Rg)try{console.log(`🌐 محاولة الحصول على IP من ${r.name}...`);const a=await _7(r),i={ip:a,source:r.name,timestamp:Date.now()};return O7(i),console.log(`✅ تم الحصول على IP بنجاح من ${r.name}: ${a}`),i}catch(a){s=a instanceof Error?a:new Error(String(a)),console.warn(`❌ فشل الحصول على IP من ${r.name}:`,s.message),r!==Rg[Rg.length-1]&&await new Promise(i=>setTimeout(i,500))}const n={ip:null,source:"none",timestamp:Date.now(),error:(s==null?void 0:s.message)||"فشل في الحصول على IP من جميع الخدمات"};return console.error("❌ فشل في الحصول على IP من جميع الخدمات"),n}function z7(t=!0){const[s,n]=u.useState(null),[r,a]=u.useState(!1),i=async(l=!1)=>{a(!0);try{const o=await _v(l);n(o)}catch(o){console.error("Error in usePublicIP:",o),n({ip:null,source:"error",timestamp:Date.now(),error:o instanceof Error?o.message:String(o)})}finally{a(!1)}};return u.useEffect(()=>{if(t){const l=Pv();l?n(l):i()}},[t]),{ip:(s==null?void 0:s.ip)||null,source:(s==null?void 0:s.source)||null,error:(s==null?void 0:s.error)||null,loading:r,timestamp:(s==null?void 0:s.timestamp)||null,isStale:s?Date.now()-s.timestamp>Dv:!1,fetchIP:i,result:s}}async function F7(){try{return(await _v()).ip}catch(t){return console.error("Error getting IP:",t),null}}function U7(){try{localStorage.removeItem(bf),console.log("✅ تم مسح تخزين IP المؤقت")}catch(t){console.warn("Failed to clear IP cache:",t)}}function $7(){const t=Pv();if(!t)return{hasCache:!1};const s=Date.now()-t.timestamp,n=s>Dv;return{hasCache:!0,age:s,isExpired:n}}const sp="auth_token";let Og=null,Uu=null;async function B7(){return Og||Uu||(Uu=(async()=>{try{console.log("🌐 جلب IP العميل للـ API headers...");const t=await F7();return t?(Og=t,console.log(`✅ تم الحصول على IP العميل: ${t}`),t):(console.warn("⚠️ لم يتم الحصول على IP العميل"),null)}catch(t){return console.error("❌ خطأ في الحصول على IP العميل:",t),null}finally{Uu=null}})(),Uu)}async function wT(t={}){const{contentType:s=!1,includeIP:n=!1}=t,r={};s&&(r["Content-Type"]="application/json");const a=localStorage.getItem(sp);if(a&&(r.Authorization=`Bearer ${a}`),n)try{const i=await B7();i&&(r["X-Client-IP"]=i,console.log(`📡 إضافة X-Client-IP header: ${i}`))}catch(i){console.warn("⚠️ فشل في إضافة X-Client-IP header:",i)}return r}async function ce(t,s="GET",n,r={}){const{headers:a={},skipClientIP:i=!0}=r,l=n?JSON.stringify(n):void 0,c={...await wT({contentType:!!l,includeIP:!i}),...a};console.log(`🚀 API Request: ${s} ${t}`,{hasClientIP:!!c["X-Client-IP"],clientIP:c["X-Client-IP"]?`${c["X-Client-IP"].substring(0,8)}...`:"none",hasAuth:!!c.Authorization});const d=await fetch(t,{method:s,headers:c,body:l});if(d.status===401){localStorage.removeItem(sp);const f=await d.text();throw new Error(f||"غير مصرح به")}if(!d.ok){const f=await d.text();throw new Error(f||`خطأ ${d.status}`)}return d}const xd=({on401:t,skipClientIP:s=!0})=>async({queryKey:n})=>{const r=await wT({contentType:!1,includeIP:!s}),a=n[0];console.log(`🔍 Query Request: GET ${a}`,{hasClientIP:!!r["X-Client-IP"],clientIP:r["X-Client-IP"]?`${r["X-Client-IP"].substring(0,8)}...`:"none",hasAuth:!!r.Authorization});const i=await fetch(a,{method:"GET",headers:r});if(t==="returnNull"&&i.status===401)return localStorage.removeItem(sp),null;if(i.status===401)throw localStorage.removeItem(sp),new Error("غير مصرح به");if(!i.ok){const l=await i.text()||i.statusText;throw new Error(`${i.status}: ${l}`)}return await i.json()},Qe=new j7({defaultOptions:{queries:{queryFn:xd({on401:"throw",skipClientIP:!1}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),V7=1,G7=1e6;let zg=0;function Y7(){return zg=(zg+1)%Number.MAX_SAFE_INTEGER,zg.toString()}const Fg=new Map,p2=t=>{if(Fg.has(t))return;const s=setTimeout(()=>{Fg.delete(t),wf({type:"REMOVE_TOAST",toastId:t})},G7);Fg.set(t,s)},Q7=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,V7)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?p2(n):t.toasts.forEach(r=>{p2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},cx=[];let dx={toasts:[]};function wf(t){dx=Q7(dx,t),cx.forEach(s=>{s(dx)})}function li({...t}){const s=Y7(),n=a=>wf({type:"UPDATE_TOAST",toast:{...a,id:s}}),r=()=>wf({type:"DISMISS_TOAST",toastId:s});return wf({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||r()}}}),{id:s,dismiss:r,update:n}}function lt(){const[t,s]=u.useState(dx);return u.useEffect(()=>(cx.push(s),()=>{const n=cx.indexOf(s);n>-1&&cx.splice(n,1)}),[t]),{...t,toast:li,dismiss:n=>wf({type:"DISMISS_TOAST",toastId:n})}}function Ge(t,s,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t==null||t(a),n===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function g2(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function c0(...t){return s=>{let n=!1;const r=t.map(a=>{const i=g2(a,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():g2(t[a],null)}}}}function Rt(...t){return u.useCallback(c0(...t),t)}function H7(t,s){const n=u.createContext(s),r=i=>{const{children:l,...o}=i,c=u.useMemo(()=>o,Object.values(o));return e.jsx(n.Provider,{value:c,children:l})};r.displayName=t+"Provider";function a(i){const l=u.useContext(n);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,a]}function Tn(t,s=[]){let n=[];function r(i,l){const o=u.createContext(l),c=n.length;n=[...n,l];const d=x=>{var y;const{scope:h,children:j,...v}=x,p=((y=h==null?void 0:h[t])==null?void 0:y[c])||o,b=u.useMemo(()=>v,Object.values(v));return e.jsx(p.Provider,{value:b,children:j})};d.displayName=i+"Provider";function f(x,h){var p;const j=((p=h==null?void 0:h[t])==null?void 0:p[c])||o,v=u.useContext(j);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[d,f]}const a=()=>{const i=n.map(l=>u.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[r,W7(a,...s)]}function W7(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=r.reduce((o,{useScope:c,scopeName:d})=>{const x=c(i)[`__scope${d}`];return{...o,...x}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function fc(t){const s=Z7(t),n=u.forwardRef((r,a)=>{const{children:i,...l}=r,o=u.Children.toArray(i),c=o.find(J7);if(c){const d=c.props.children,f=o.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...l,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}var d0=fc("Slot");function Z7(t){const s=u.forwardRef((n,r)=>{const{children:a,...i}=n;if(u.isValidElement(a)){const l=K7(a),o=q7(i,a.props);return a.type!==u.Fragment&&(o.ref=r?c0(r,l):l),u.cloneElement(a,o)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var NT=Symbol("radix.slottable");function CT(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=NT,s}function J7(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===NT}function q7(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function K7(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Pm(t){const s=t+"CollectionProvider",[n,r]=Tn(s),[a,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=p=>{const{scope:b,children:y}=p,m=gt.useRef(null),g=gt.useRef(new Map).current;return e.jsx(a,{scope:b,itemMap:g,collectionRef:m,children:y})};l.displayName=s;const o=t+"CollectionSlot",c=fc(o),d=gt.forwardRef((p,b)=>{const{scope:y,children:m}=p,g=i(o,y),w=Rt(b,g.collectionRef);return e.jsx(c,{ref:w,children:m})});d.displayName=o;const f=t+"CollectionItemSlot",x="data-radix-collection-item",h=fc(f),j=gt.forwardRef((p,b)=>{const{scope:y,children:m,...g}=p,w=gt.useRef(null),N=Rt(b,w),k=i(f,y);return gt.useEffect(()=>(k.itemMap.set(w,{ref:w,...g}),()=>void k.itemMap.delete(w))),e.jsx(h,{[x]:"",ref:N,children:m})});j.displayName=f;function v(p){const b=i(t+"CollectionConsumer",p);return gt.useCallback(()=>{const m=b.collectionRef.current;if(!m)return[];const g=Array.from(m.querySelectorAll(`[${x}]`));return Array.from(b.itemMap.values()).sort((k,L)=>g.indexOf(k.ref.current)-g.indexOf(L.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:d,ItemSlot:j},v,r]}var X7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],it=X7.reduce((t,s)=>{const n=fc(`Primitive.${s}`),r=u.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Rv(t,s){t&&Sc.flushSync(()=>t.dispatchEvent(s))}function Ks(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...n)=>{var r;return(r=s.current)==null?void 0:r.call(s,...n)},[])}function eU(t,s=globalThis==null?void 0:globalThis.document){const n=Ks(t);u.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var tU="DismissableLayer",Tj="dismissableLayer.update",sU="dismissableLayer.pointerDownOutside",nU="dismissableLayer.focusOutside",j2,MT=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xu=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=u.useContext(MT),[f,x]=u.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=u.useState({}),v=Rt(s,L=>x(L)),p=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(b),m=f?p.indexOf(f):-1,g=d.layersWithOutsidePointerEventsDisabled.size>0,w=m>=y,N=aU(L=>{const S=L.target,T=[...d.branches].some(E=>E.contains(S));!w||T||(a==null||a(L),l==null||l(L),L.defaultPrevented||o==null||o())},h),k=iU(L=>{const S=L.target;[...d.branches].some(E=>E.contains(S))||(i==null||i(L),l==null||l(L),L.defaultPrevented||o==null||o())},h);return eU(L=>{m===d.layers.size-1&&(r==null||r(L),!L.defaultPrevented&&o&&(L.preventDefault(),o()))},h),u.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(j2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),y2(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=j2)}},[f,h,n,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),y2())},[f,d]),u.useEffect(()=>{const L=()=>j({});return document.addEventListener(Tj,L),()=>document.removeEventListener(Tj,L)},[]),e.jsx(it.div,{...c,ref:v,style:{pointerEvents:g?w?"auto":"none":void 0,...t.style},onFocusCapture:Ge(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Ge(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Ge(t.onPointerDownCapture,N.onPointerDownCapture)})});xu.displayName=tU;var rU="DismissableLayerBranch",ST=u.forwardRef((t,s)=>{const n=u.useContext(MT),r=u.useRef(null),a=Rt(s,r);return u.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),e.jsx(it.div,{...t,ref:a})});ST.displayName=rU;function aU(t,s=globalThis==null?void 0:globalThis.document){const n=Ks(t),r=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let c=function(){kT(sU,n,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);r.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function iU(t,s=globalThis==null?void 0:globalThis.document){const n=Ks(t),r=u.useRef(!1);return u.useEffect(()=>{const a=i=>{i.target&&!r.current&&kT(nU,n,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function y2(){const t=new CustomEvent(Tj);document.dispatchEvent(t)}function kT(t,s,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?Rv(a,i):a.dispatchEvent(i)}var lU=xu,oU=ST,jn=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},cU="Portal",_m=u.forwardRef((t,s)=>{var o;const{container:n,...r}=t,[a,i]=u.useState(!1);jn(()=>i(!0),[]);const l=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?kF.createPortal(e.jsx(it.div,{...r,ref:s}),l):null});_m.displayName=cU;function dU(t,s){return u.useReducer((n,r)=>s[n][r]??n,t)}var Qn=t=>{const{present:s,children:n}=t,r=uU(s),a=typeof n=="function"?n({present:r.isPresent}):u.Children.only(n),i=Rt(r.ref,fU(a));return typeof n=="function"||r.isPresent?u.cloneElement(a,{ref:i}):null};Qn.displayName="Presence";function uU(t){const[s,n]=u.useState(),r=u.useRef({}),a=u.useRef(t),i=u.useRef("none"),l=t?"mounted":"unmounted",[o,c]=dU(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=Eh(r.current);i.current=o==="mounted"?d:"none"},[o]),jn(()=>{const d=r.current,f=a.current;if(f!==t){const h=i.current,j=Eh(d);t?c("MOUNT"):j==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&h!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),jn(()=>{if(s){let d;const f=s.ownerDocument.defaultView??window,x=j=>{const p=Eh(r.current).includes(j.animationName);if(j.target===s&&p&&(c("ANIMATION_END"),!a.current)){const b=s.style.animationFillMode;s.style.animationFillMode="forwards",d=f.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=b)})}},h=j=>{j.target===s&&(i.current=Eh(r.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",x),s.addEventListener("animationend",x),()=>{f.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",x),s.removeEventListener("animationend",x)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:u.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Eh(t){return(t==null?void 0:t.animationName)||"none"}function fU(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Yr({prop:t,defaultProp:s,onChange:n=()=>{}}){const[r,a]=mU({defaultProp:s,onChange:n}),i=t!==void 0,l=i?t:r,o=Ks(n),c=u.useCallback(d=>{if(i){const x=typeof d=="function"?d(t):d;x!==t&&o(x)}else a(d)},[i,t,a,o]);return[l,c]}function mU({defaultProp:t,onChange:s}){const n=u.useState(t),[r]=n,a=u.useRef(r),i=Ks(s);return u.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),n}var hU="VisuallyHidden",Rm=u.forwardRef((t,s)=>e.jsx(it.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Rm.displayName=hU;var xU=Rm,Ov="ToastProvider",[zv,pU,gU]=Pm("Toast"),[LT,Dce]=Tn("Toast",[gU]),[jU,u0]=LT(Ov),TT=t=>{const{__scopeToast:s,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=u.useState(null),[d,f]=u.useState(0),x=u.useRef(!1),h=u.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ov}\`. Expected non-empty \`string\`.`),e.jsx(zv.Provider,{scope:s,children:e.jsx(jU,{scope:s,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:u.useCallback(()=>f(j=>j+1),[]),onToastRemove:u.useCallback(()=>f(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:h,children:l})})};TT.displayName=Ov;var ET="ToastViewport",yU=["F8"],Ej="toast.viewportPause",Ij="toast.viewportResume",IT=u.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:r=yU,label:a="Notifications ({hotkey})",...i}=t,l=u0(ET,n),o=pU(n),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),x=u.useRef(null),h=Rt(s,x,l.onViewportChange),j=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=l.toastCount>0;u.useEffect(()=>{const b=y=>{var g;r.length!==0&&r.every(w=>y[w]||y.code===w)&&((g=x.current)==null||g.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),u.useEffect(()=>{const b=c.current,y=x.current;if(v&&b&&y){const m=()=>{if(!l.isClosePausedRef.current){const k=new CustomEvent(Ej);y.dispatchEvent(k),l.isClosePausedRef.current=!0}},g=()=>{if(l.isClosePausedRef.current){const k=new CustomEvent(Ij);y.dispatchEvent(k),l.isClosePausedRef.current=!1}},w=k=>{!b.contains(k.relatedTarget)&&g()},N=()=>{b.contains(document.activeElement)||g()};return b.addEventListener("focusin",m),b.addEventListener("focusout",w),b.addEventListener("pointermove",m),b.addEventListener("pointerleave",N),window.addEventListener("blur",m),window.addEventListener("focus",g),()=>{b.removeEventListener("focusin",m),b.removeEventListener("focusout",w),b.removeEventListener("pointermove",m),b.removeEventListener("pointerleave",N),window.removeEventListener("blur",m),window.removeEventListener("focus",g)}}},[v,l.isClosePausedRef]);const p=u.useCallback(({tabbingDirection:b})=>{const m=o().map(g=>{const w=g.ref.current,N=[w,...AU(w)];return b==="forwards"?N:N.reverse()});return(b==="forwards"?m.reverse():m).flat()},[o]);return u.useEffect(()=>{const b=x.current;if(b){const y=m=>{var N,k,L;const g=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!g){const S=document.activeElement,T=m.shiftKey;if(m.target===b&&T){(N=d.current)==null||N.focus();return}const F=p({tabbingDirection:T?"backwards":"forwards"}),Z=F.findIndex(G=>G===S);Ug(F.slice(Z+1))?m.preventDefault():T?(k=d.current)==null||k.focus():(L=f.current)==null||L.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[o,p]),e.jsxs(oU,{ref:c,role:"region","aria-label":a.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&e.jsx(Aj,{ref:d,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});Ug(b)}}),e.jsx(zv.Slot,{scope:n,children:e.jsx(it.ol,{tabIndex:-1,...i,ref:h})}),v&&e.jsx(Aj,{ref:f,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});Ug(b)}})]})});IT.displayName=ET;var AT="ToastFocusProxy",Aj=u.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=t,i=u0(AT,n);return e.jsx(Rm,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&r()}})});Aj.displayName=AT;var f0="Toast",vU="toast.swipeStart",bU="toast.swipeMove",wU="toast.swipeCancel",NU="toast.swipeEnd",DT=u.forwardRef((t,s)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...l}=t,[o=!0,c]=Yr({prop:r,defaultProp:a,onChange:i});return e.jsx(Qn,{present:n||o,children:e.jsx(SU,{open:o,...l,ref:s,onClose:()=>c(!1),onPause:Ks(t.onPause),onResume:Ks(t.onResume),onSwipeStart:Ge(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ge(t.onSwipeMove,d=>{const{x:f,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:Ge(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ge(t.onSwipeEnd,d=>{const{x:f,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),c(!1)})})})});DT.displayName=f0;var[CU,MU]=LT(f0,{onClose(){}}),SU=u.forwardRef((t,s)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:x,onSwipeCancel:h,onSwipeEnd:j,...v}=t,p=u0(f0,n),[b,y]=u.useState(null),m=Rt(s,G=>y(G)),g=u.useRef(null),w=u.useRef(null),N=a||p.duration,k=u.useRef(0),L=u.useRef(N),S=u.useRef(0),{onToastAdd:T,onToastRemove:E}=p,$=Ks(()=>{var D;(b==null?void 0:b.contains(document.activeElement))&&((D=p.viewport)==null||D.focus()),l()}),F=u.useCallback(G=>{!G||G===1/0||(window.clearTimeout(S.current),k.current=new Date().getTime(),S.current=window.setTimeout($,G))},[$]);u.useEffect(()=>{const G=p.viewport;if(G){const D=()=>{F(L.current),d==null||d()},B=()=>{const de=new Date().getTime()-k.current;L.current=L.current-de,window.clearTimeout(S.current),c==null||c()};return G.addEventListener(Ej,B),G.addEventListener(Ij,D),()=>{G.removeEventListener(Ej,B),G.removeEventListener(Ij,D)}}},[p.viewport,N,c,d,F]),u.useEffect(()=>{i&&!p.isClosePausedRef.current&&F(N)},[i,N,p.isClosePausedRef,F]),u.useEffect(()=>(T(),()=>E()),[T,E]);const Z=u.useMemo(()=>b?UT(b):null,[b]);return p.viewport?e.jsxs(e.Fragment,{children:[Z&&e.jsx(kU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Z}),e.jsx(CU,{scope:n,onClose:$,children:Sc.createPortal(e.jsx(zv.ItemSlot,{scope:n,children:e.jsx(lU,{asChild:!0,onEscapeKeyDown:Ge(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||$(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(it.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:m,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ge(t.onKeyDown,G=>{G.key==="Escape"&&(o==null||o(G.nativeEvent),G.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:Ge(t.onPointerDown,G=>{G.button===0&&(g.current={x:G.clientX,y:G.clientY})}),onPointerMove:Ge(t.onPointerMove,G=>{if(!g.current)return;const D=G.clientX-g.current.x,B=G.clientY-g.current.y,de=!!w.current,U=["left","right"].includes(p.swipeDirection),W=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,re=U?W(0,D):0,we=U?0:W(0,B),be=G.pointerType==="touch"?10:2,J={x:re,y:we},Fe={originalEvent:G,delta:J};de?(w.current=J,Ih(bU,x,Fe,{discrete:!1})):v2(J,p.swipeDirection,be)?(w.current=J,Ih(vU,f,Fe,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(D)>be||Math.abs(B)>be)&&(g.current=null)}),onPointerUp:Ge(t.onPointerUp,G=>{const D=w.current,B=G.target;if(B.hasPointerCapture(G.pointerId)&&B.releasePointerCapture(G.pointerId),w.current=null,g.current=null,D){const de=G.currentTarget,U={originalEvent:G,delta:D};v2(D,p.swipeDirection,p.swipeThreshold)?Ih(NU,j,U,{discrete:!0}):Ih(wU,h,U,{discrete:!0}),de.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),kU=t=>{const{__scopeToast:s,children:n,...r}=t,a=u0(f0,s),[i,l]=u.useState(!1),[o,c]=u.useState(!1);return EU(()=>l(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(_m,{asChild:!0,children:e.jsx(Rm,{...r,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",n]})})})},LU="ToastTitle",PT=u.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(it.div,{...r,ref:s})});PT.displayName=LU;var TU="ToastDescription",_T=u.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(it.div,{...r,ref:s})});_T.displayName=TU;var RT="ToastAction",OT=u.forwardRef((t,s)=>{const{altText:n,...r}=t;return n.trim()?e.jsx(FT,{altText:n,asChild:!0,children:e.jsx(Fv,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${RT}\`. Expected non-empty \`string\`.`),null)});OT.displayName=RT;var zT="ToastClose",Fv=u.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t,a=MU(zT,n);return e.jsx(FT,{asChild:!0,children:e.jsx(it.button,{type:"button",...r,ref:s,onClick:Ge(t.onClick,a.onClose)})})});Fv.displayName=zT;var FT=u.forwardRef((t,s)=>{const{__scopeToast:n,altText:r,...a}=t;return e.jsx(it.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:s})});function UT(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),IU(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...UT(r))}}),s}function Ih(t,s,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?Rv(a,i):a.dispatchEvent(i)}var v2=(t,s,n=0)=>{const r=Math.abs(t.x),a=Math.abs(t.y),i=r>a;return s==="left"||s==="right"?i&&r>n:!i&&a>n};function EU(t=()=>{}){const s=Ks(t);jn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[s])}function IU(t){return t.nodeType===t.ELEMENT_NODE}function AU(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Ug(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var DU=TT,$T=IT,BT=DT,VT=PT,GT=_T,YT=OT,QT=Fv;function HT(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(n=HT(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function WT(){for(var t,s,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(s=HT(t))&&(r&&(r+=" "),r+=s);return r}const b2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,w2=WT,kc=(t,s)=>n=>{var r;if((s==null?void 0:s.variants)==null)return w2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(d=>{const f=n==null?void 0:n[d],x=i==null?void 0:i[d];if(f===null)return null;const h=b2(f)||b2(x);return a[d][h]}),o=n&&Object.entries(n).reduce((d,f)=>{let[x,h]=f;return h===void 0||(d[x]=h),d},{}),c=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:x,className:h,...j}=f;return Object.entries(j).every(v=>{let[p,b]=v;return Array.isArray(b)?b.includes({...i,...o}[p]):{...i,...o}[p]===b})?[...d,x,h]:d},[]);return w2(t,l,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZT=(...t)=>t.filter((s,n,r)=>!!s&&r.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=u.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...o},c)=>u.createElement("svg",{ref:c,..._U,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:ZT("lucide",a),...o},[...l.map(([d,f])=>u.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,s)=>{const n=u.forwardRef(({className:r,...a},i)=>u.createElement(RU,{ref:i,iconNode:s,className:ZT(`lucide-${PU(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=je("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=je("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=je("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=je("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=je("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=je("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=je("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=je("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=je("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=je("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=je("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=je("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=je("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=je("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=je("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=je("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=je("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=je("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=je("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=je("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=je("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=je("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=je("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=je("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=je("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=je("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=je("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=je("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=je("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=je("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=je("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=je("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=je("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=je("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=je("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=je("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=je("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=je("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=je("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=je("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=je("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=je("PoundSterling",[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=je("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=je("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=je("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=je("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=je("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=je("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=je("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=je("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=je("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=je("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=je("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=je("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=je("StarHalf",[["path",{d:"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2",key:"nare05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=je("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=je("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=je("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=je("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=je("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=je("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=je("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=je("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=je("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=je("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=je("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=je("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Qv="-",h$=t=>{const s=p$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const o=l.split(Qv);return o[0]===""&&o.length!==1&&o.shift(),iE(o,s)||x$(l)},getConflictingClassGroupIds:(l,o)=>{const c=n[l]||[];return o&&r[l]?[...c,...r[l]]:c}}},iE=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),a=r?iE(t.slice(1),r):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(Qv);return(l=s.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},L2=/^\[(.+)\]$/,x$=t=>{if(L2.test(t)){const s=L2.exec(t)[1],n=s==null?void 0:s.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},p$=t=>{const{theme:s,prefix:n}=t,r={nextPart:new Map,validators:[]};return j$(Object.entries(t.classGroups),n).forEach(([i,l])=>{Bj(l,r,i,s)}),r},Bj=(t,s,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:T2(s,a);i.classGroupId=n;return}if(typeof a=="function"){if(g$(a)){Bj(a(r),s,n,r);return}s.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,l])=>{Bj(l,T2(s,i),n,r)})})},T2=(t,s)=>{let n=t;return s.split(Qv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},g$=t=>t.isThemeGetter,j$=(t,s)=>s?t.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[n,a]}):t,y$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const a=(i,l)=>{n.set(i,l),s++,s>t&&(s=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return a(i,l),l},set(i,l){n.has(i)?n.set(i,l):a(i,l)}}},lE="!",v$=t=>{const{separator:s,experimentalParseClassName:n}=t,r=s.length===1,a=s[0],i=s.length,l=o=>{const c=[];let d=0,f=0,x;for(let b=0;b<o.length;b++){let y=o[b];if(d===0){if(y===a&&(r||o.slice(b,b+i)===s)){c.push(o.slice(f,b)),f=b+i;continue}if(y==="/"){x=b;continue}}y==="["?d++:y==="]"&&d--}const h=c.length===0?o:o.substring(f),j=h.startsWith(lE),v=j?h.substring(1):h,p=x&&x>f?x-f:void 0;return{modifiers:c,hasImportantModifier:j,baseClassName:v,maybePostfixModifierPosition:p}};return n?o=>n({className:o,parseClassName:l}):l},b$=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(r=>{r[0]==="["?(s.push(...n.sort(),r),n=[]):n.push(r)}),s.push(...n.sort()),s},w$=t=>({cache:y$(t.cacheSize),parseClassName:v$(t),...h$(t)}),N$=/\s+/,C$=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=s,i=[],l=t.trim().split(N$);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:f,hasImportantModifier:x,baseClassName:h,maybePostfixModifierPosition:j}=n(d);let v=!!j,p=r(v?h.substring(0,j):h);if(!p){if(!v){o=d+(o.length>0?" "+o:o);continue}if(p=r(h),!p){o=d+(o.length>0?" "+o:o);continue}v=!1}const b=b$(f).join(":"),y=x?b+lE:b,m=y+p;if(i.includes(m))continue;i.push(m);const g=a(p,v);for(let w=0;w<g.length;++w){const N=g[w];i.push(y+N)}o=d+(o.length>0?" "+o:o)}return o};function M$(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=oE(s))&&(r&&(r+=" "),r+=n);return r}const oE=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=oE(t[r]))&&(n&&(n+=" "),n+=s);return n};function S$(t,...s){let n,r,a,i=l;function l(c){const d=s.reduce((f,x)=>x(f),t());return n=w$(d),r=n.cache.get,a=n.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const f=C$(c,n);return a(c,f),f}return function(){return i(M$.apply(null,arguments))}}const Us=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},cE=/^\[(?:([a-z-]+):)?(.+)\]$/i,k$=/^\d+\/\d+$/,L$=new Set(["px","full","screen"]),T$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,A$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gi=t=>gd(t)||L$.has(t)||k$.test(t),Ml=t=>gu(t,"length",$$),gd=t=>!!t&&!Number.isNaN(Number(t)),Bg=t=>gu(t,"number",gd),$u=t=>!!t&&Number.isInteger(Number(t)),P$=t=>t.endsWith("%")&&gd(t.slice(0,-1)),Qt=t=>cE.test(t),Sl=t=>T$.test(t),_$=new Set(["length","size","percentage"]),R$=t=>gu(t,_$,dE),O$=t=>gu(t,"position",dE),z$=new Set(["image","url"]),F$=t=>gu(t,z$,V$),U$=t=>gu(t,"",B$),Bu=()=>!0,gu=(t,s,n)=>{const r=cE.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):n(r[2]):!1},$$=t=>E$.test(t)&&!I$.test(t),dE=()=>!1,B$=t=>A$.test(t),V$=t=>D$.test(t),G$=()=>{const t=Us("colors"),s=Us("spacing"),n=Us("blur"),r=Us("brightness"),a=Us("borderColor"),i=Us("borderRadius"),l=Us("borderSpacing"),o=Us("borderWidth"),c=Us("contrast"),d=Us("grayscale"),f=Us("hueRotate"),x=Us("invert"),h=Us("gap"),j=Us("gradientColorStops"),v=Us("gradientColorStopPositions"),p=Us("inset"),b=Us("margin"),y=Us("opacity"),m=Us("padding"),g=Us("saturate"),w=Us("scale"),N=Us("sepia"),k=Us("skew"),L=Us("space"),S=Us("translate"),T=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Qt,s],F=()=>[Qt,s],Z=()=>["",Gi,Ml],G=()=>["auto",gd,Qt],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Qt],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[gd,Qt];return{cacheSize:500,separator:":",theme:{colors:[Bu],spacing:[Gi,Ml],blur:["none","",Sl,Qt],brightness:we(),borderColor:[t],borderRadius:["none","","full",Sl,Qt],borderSpacing:F(),borderWidth:Z(),contrast:we(),grayscale:W(),hueRotate:we(),invert:W(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[P$,Ml],inset:$(),margin:$(),opacity:we(),padding:F(),saturate:we(),scale:we(),sepia:W(),skew:we(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[Sl]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Qt]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$u,Qt]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",$u,Qt]}],"grid-cols":[{"grid-cols":[Bu]}],"col-start-end":[{col:["auto",{span:["full",$u,Qt]},Qt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Bu]}],"row-start-end":[{row:["auto",{span:[$u,Qt]},Qt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,s]}],"min-w":[{"min-w":[Qt,s,"min","max","fit"]}],"max-w":[{"max-w":[Qt,s,"none","full","min","max","fit","prose",{screen:[Sl]},Sl]}],h:[{h:[Qt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Sl,Ml]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bg]}],"font-family":[{font:[Bu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",gd,Bg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gi,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gi,Ml]}],"underline-offset":[{"underline-offset":["auto",Gi,Qt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),O$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",R$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},F$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Gi,Qt]}],"outline-w":[{outline:[Gi,Ml]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Gi,Ml]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Sl,U$]}],"shadow-color":[{shadow:[Bu]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Sl,Qt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[x]}],saturate:[{saturate:[g]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[$u,Qt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gi,Ml,Bg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Y$=S$(G$);function Te(...t){return Y$(WT(t))}function Vu(t,s="SAR"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(t)}function E2(t){return new Intl.DateTimeFormat("ar-LY",{calendar:"gregory",year:"numeric",month:"long",day:"numeric"}).format(new Date(t))}function I2(t){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t))}const Q$=DU,uE=u.forwardRef(({className:t,...s},n)=>e.jsx($T,{ref:n,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));uE.displayName=$T.displayName;const H$=kc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fE=u.forwardRef(({className:t,variant:s,...n},r)=>e.jsx(BT,{ref:r,className:Te(H$({variant:s}),t),...n}));fE.displayName=BT.displayName;const W$=u.forwardRef(({className:t,...s},n)=>e.jsx(YT,{ref:n,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));W$.displayName=YT.displayName;const mE=u.forwardRef(({className:t,...s},n)=>e.jsx(QT,{ref:n,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Xs,{className:"h-4 w-4"})}));mE.displayName=QT.displayName;const hE=u.forwardRef(({className:t,...s},n)=>e.jsx(VT,{ref:n,className:Te("text-sm font-semibold",t),...s}));hE.displayName=VT.displayName;const xE=u.forwardRef(({className:t,...s},n)=>e.jsx(GT,{ref:n,className:Te("text-sm opacity-90",t),...s}));xE.displayName=GT.displayName;function Z$(){const{toasts:t}=lt();return e.jsxs(Q$,{children:[t.map(function({id:s,title:n,description:r,action:a,...i}){return e.jsxs(fE,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(hE,{children:n}),r&&typeof r=="string"&&e.jsx(xE,{children:r})]}),a,e.jsx(mE,{})]},s)}),e.jsx(uE,{})]})}var J$=Wk[" useId ".trim().toString()]||(()=>{}),q$=0;function na(t){const[s,n]=u.useState(J$());return jn(()=>{t||n(r=>r??String(q$++))},[t]),t||(s?`radix-${s}`:"")}const K$=["top","right","bottom","left"],fo=Math.min,qr=Math.max,lp=Math.round,Ah=Math.floor,Ei=t=>({x:t,y:t}),X$={left:"right",right:"left",bottom:"top",top:"bottom"},eB={start:"end",end:"start"};function Vj(t,s,n){return qr(t,fo(s,n))}function xl(t,s){return typeof t=="function"?t(s):t}function pl(t){return t.split("-")[0]}function ju(t){return t.split("-")[1]}function Hv(t){return t==="x"?"y":"x"}function Wv(t){return t==="y"?"height":"width"}function mo(t){return["top","bottom"].includes(pl(t))?"y":"x"}function Zv(t){return Hv(mo(t))}function tB(t,s,n){n===void 0&&(n=!1);const r=ju(t),a=Zv(t),i=Wv(a);let l=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=op(l)),[l,op(l)]}function sB(t){const s=op(t);return[Gj(t),s,Gj(s)]}function Gj(t){return t.replace(/start|end/g,s=>eB[s])}function nB(t,s,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?s?a:r:s?r:a;case"left":case"right":return s?i:l;default:return[]}}function rB(t,s,n,r){const a=ju(t);let i=nB(pl(t),n==="start",r);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(Gj)))),i}function op(t){return t.replace(/left|right|bottom|top/g,s=>X$[s])}function aB(t){return{top:0,right:0,bottom:0,left:0,...t}}function pE(t){return typeof t!="number"?aB(t):{top:t,right:t,bottom:t,left:t}}function cp(t){const{x:s,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:s,right:s+r,bottom:n+a,x:s,y:n}}function A2(t,s,n){let{reference:r,floating:a}=t;const i=mo(s),l=Zv(s),o=Wv(l),c=pl(s),d=i==="y",f=r.x+r.width/2-a.width/2,x=r.y+r.height/2-a.height/2,h=r[o]/2-a[o]/2;let j;switch(c){case"top":j={x:f,y:r.y-a.height};break;case"bottom":j={x:f,y:r.y+r.height};break;case"right":j={x:r.x+r.width,y:x};break;case"left":j={x:r.x-a.width,y:x};break;default:j={x:r.x,y:r.y}}switch(ju(s)){case"start":j[l]-=h*(n&&d?-1:1);break;case"end":j[l]+=h*(n&&d?-1:1);break}return j}const iB=async(t,s,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:f,y:x}=A2(d,r,c),h=r,j={},v=0;for(let p=0;p<o.length;p++){const{name:b,fn:y}=o[p],{x:m,y:g,data:w,reset:N}=await y({x:f,y:x,initialPlacement:r,placement:h,strategy:a,middlewareData:j,rects:d,platform:l,elements:{reference:t,floating:s}});f=m??f,x=g??x,j={...j,[b]:{...j[b],...w}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(d=N.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):N.rects),{x:f,y:x}=A2(d,h,c)),p=-1)}return{x:f,y:x,placement:h,strategy:a,middlewareData:j}};async function Zf(t,s){var n;s===void 0&&(s={});const{x:r,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:x="floating",altBoundary:h=!1,padding:j=0}=xl(s,t),v=pE(j),b=o[h?x==="floating"?"reference":"floating":x],y=cp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:f,strategy:c})),m=x==="floating"?{x:r,y:a,width:l.floating.width,height:l.floating.height}:l.reference,g=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),w=await(i.isElement==null?void 0:i.isElement(g))?await(i.getScale==null?void 0:i.getScale(g))||{x:1,y:1}:{x:1,y:1},N=cp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:m,offsetParent:g,strategy:c}):m);return{top:(y.top-N.top+v.top)/w.y,bottom:(N.bottom-y.bottom+v.bottom)/w.y,left:(y.left-N.left+v.left)/w.x,right:(N.right-y.right+v.right)/w.x}}const lB=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:d,padding:f=0}=xl(t,s)||{};if(d==null)return{};const x=pE(f),h={x:n,y:r},j=Zv(a),v=Wv(j),p=await l.getDimensions(d),b=j==="y",y=b?"top":"left",m=b?"bottom":"right",g=b?"clientHeight":"clientWidth",w=i.reference[v]+i.reference[j]-h[j]-i.floating[v],N=h[j]-i.reference[j],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let L=k?k[g]:0;(!L||!await(l.isElement==null?void 0:l.isElement(k)))&&(L=o.floating[g]||i.floating[v]);const S=w/2-N/2,T=L/2-p[v]/2-1,E=fo(x[y],T),$=fo(x[m],T),F=E,Z=L-p[v]-$,G=L/2-p[v]/2+S,D=Vj(F,G,Z),B=!c.arrow&&ju(a)!=null&&G!==D&&i.reference[v]/2-(G<F?E:$)-p[v]/2<0,de=B?G<F?G-F:G-Z:0;return{[j]:h[j]+de,data:{[j]:D,centerOffset:G-D-de,...B&&{alignmentOffset:de}},reset:B}}}),oB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:f=!0,crossAxis:x=!0,fallbackPlacements:h,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...b}=xl(t,s);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=pl(a),m=mo(o),g=pl(o)===o,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=h||(g||!p?[op(o)]:sB(o)),k=v!=="none";!h&&k&&N.push(...rB(o,p,v,w));const L=[o,...N],S=await Zf(s,b),T=[];let E=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&T.push(S[y]),x){const G=tB(a,l,w);T.push(S[G[0]],S[G[1]])}if(E=[...E,{placement:a,overflows:T}],!T.every(G=>G<=0)){var $,F;const G=((($=i.flip)==null?void 0:$.index)||0)+1,D=L[G];if(D)return{data:{index:G,overflows:E},reset:{placement:D}};let B=(F=E.filter(de=>de.overflows[0]<=0).sort((de,U)=>de.overflows[1]-U.overflows[1])[0])==null?void 0:F.placement;if(!B)switch(j){case"bestFit":{var Z;const de=(Z=E.filter(U=>{if(k){const W=mo(U.placement);return W===m||W==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(W=>W>0).reduce((W,re)=>W+re,0)]).sort((U,W)=>U[1]-W[1])[0])==null?void 0:Z[0];de&&(B=de);break}case"initialPlacement":B=o;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function D2(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function P2(t){return K$.some(s=>t[s]>=0)}const cB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...a}=xl(t,s);switch(r){case"referenceHidden":{const i=await Zf(s,{...a,elementContext:"reference"}),l=D2(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:P2(l)}}}case"escaped":{const i=await Zf(s,{...a,altBoundary:!0}),l=D2(i,n.floating);return{data:{escapedOffsets:l,escaped:P2(l)}}}default:return{}}}}};async function dB(t,s){const{placement:n,platform:r,elements:a}=t,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),l=pl(n),o=ju(n),c=mo(n)==="y",d=["left","top"].includes(l)?-1:1,f=i&&c?-1:1,x=xl(s,t);let{mainAxis:h,crossAxis:j,alignmentAxis:v}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return o&&typeof v=="number"&&(j=o==="end"?v*-1:v),c?{x:j*f,y:h*d}:{x:h*d,y:j*f}}const uB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await dB(s,t);return l===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},fB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:b=>{let{x:y,y:m}=b;return{x:y,y:m}}},...c}=xl(t,s),d={x:n,y:r},f=await Zf(s,c),x=mo(pl(a)),h=Hv(x);let j=d[h],v=d[x];if(i){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",m=j+f[b],g=j-f[y];j=Vj(m,j,g)}if(l){const b=x==="y"?"top":"left",y=x==="y"?"bottom":"right",m=v+f[b],g=v-f[y];v=Vj(m,v,g)}const p=o.fn({...s,[h]:j,[x]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:i,[x]:l}}}}}},mB=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=xl(t,s),f={x:n,y:r},x=mo(a),h=Hv(x);let j=f[h],v=f[x];const p=xl(o,s),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const g=h==="y"?"height":"width",w=i.reference[h]-i.floating[g]+b.mainAxis,N=i.reference[h]+i.reference[g]-b.mainAxis;j<w?j=w:j>N&&(j=N)}if(d){var y,m;const g=h==="y"?"width":"height",w=["top","left"].includes(pl(a)),N=i.reference[x]-i.floating[g]+(w&&((y=l.offset)==null?void 0:y[x])||0)+(w?0:b.crossAxis),k=i.reference[x]+i.reference[g]+(w?0:((m=l.offset)==null?void 0:m[x])||0)-(w?b.crossAxis:0);v<N?v=N:v>k&&(v=k)}return{[h]:j,[x]:v}}}},hB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...d}=xl(t,s),f=await Zf(s,d),x=pl(a),h=ju(a),j=mo(a)==="y",{width:v,height:p}=i.floating;let b,y;x==="top"||x==="bottom"?(b=x,y=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(y=x,b=h==="end"?"top":"bottom");const m=p-f.top-f.bottom,g=v-f.left-f.right,w=fo(p-f[b],m),N=fo(v-f[y],g),k=!s.middlewareData.shift;let L=w,S=N;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(S=g),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(L=m),k&&!h){const E=qr(f.left,0),$=qr(f.right,0),F=qr(f.top,0),Z=qr(f.bottom,0);j?S=v-2*(E!==0||$!==0?E+$:qr(f.left,f.right)):L=p-2*(F!==0||Z!==0?F+Z:qr(f.top,f.bottom))}await c({...s,availableWidth:S,availableHeight:L});const T=await l.getDimensions(o.floating);return v!==T.width||p!==T.height?{reset:{rects:!0}}:{}}}};function g0(){return typeof window<"u"}function yu(t){return gE(t)?(t.nodeName||"").toLowerCase():"#document"}function ra(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Ui(t){var s;return(s=(gE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function gE(t){return g0()?t instanceof Node||t instanceof ra(t).Node:!1}function Xa(t){return g0()?t instanceof Element||t instanceof ra(t).Element:!1}function Ri(t){return g0()?t instanceof HTMLElement||t instanceof ra(t).HTMLElement:!1}function _2(t){return!g0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ra(t).ShadowRoot}function Fm(t){const{overflow:s,overflowX:n,overflowY:r,display:a}=ei(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!["inline","contents"].includes(a)}function xB(t){return["table","td","th"].includes(yu(t))}function j0(t){return[":popover-open",":modal"].some(s=>{try{return t.matches(s)}catch{return!1}})}function Jv(t){const s=qv(),n=Xa(t)?ei(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pB(t){let s=ho(t);for(;Ri(s)&&!Xd(s);){if(Jv(s))return s;if(j0(s))return null;s=ho(s)}return null}function qv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xd(t){return["html","body","#document"].includes(yu(t))}function ei(t){return ra(t).getComputedStyle(t)}function y0(t){return Xa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ho(t){if(yu(t)==="html")return t;const s=t.assignedSlot||t.parentNode||_2(t)&&t.host||Ui(t);return _2(s)?s.host:s}function jE(t){const s=ho(t);return Xd(s)?t.ownerDocument?t.ownerDocument.body:t.body:Ri(s)&&Fm(s)?s:jE(s)}function Jf(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const a=jE(t),i=a===((r=t.ownerDocument)==null?void 0:r.body),l=ra(a);if(i){const o=Yj(l);return s.concat(l,l.visualViewport||[],Fm(a)?a:[],o&&n?Jf(o):[])}return s.concat(a,Jf(a,[],n))}function Yj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yE(t){const s=ei(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const a=Ri(t),i=a?t.offsetWidth:n,l=a?t.offsetHeight:r,o=lp(n)!==i||lp(r)!==l;return o&&(n=i,r=l),{width:n,height:r,$:o}}function Kv(t){return Xa(t)?t:t.contextElement}function jd(t){const s=Kv(t);if(!Ri(s))return Ei(1);const n=s.getBoundingClientRect(),{width:r,height:a,$:i}=yE(s);let l=(i?lp(n.width):n.width)/r,o=(i?lp(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const gB=Ei(0);function vE(t){const s=ra(t);return!qv()||!s.visualViewport?gB:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function jB(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==ra(t)?!1:s}function gc(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),i=Kv(t);let l=Ei(1);s&&(r?Xa(r)&&(l=jd(r)):l=jd(t));const o=jB(i,n,r)?vE(i):Ei(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,f=a.width/l.x,x=a.height/l.y;if(i){const h=ra(i),j=r&&Xa(r)?ra(r):r;let v=h,p=Yj(v);for(;p&&r&&j!==v;){const b=jd(p),y=p.getBoundingClientRect(),m=ei(p),g=y.left+(p.clientLeft+parseFloat(m.paddingLeft))*b.x,w=y.top+(p.clientTop+parseFloat(m.paddingTop))*b.y;c*=b.x,d*=b.y,f*=b.x,x*=b.y,c+=g,d+=w,v=ra(p),p=Yj(v)}}return cp({width:f,height:x,x:c,y:d})}function Xv(t,s){const n=y0(t).scrollLeft;return s?s.left+n:gc(Ui(t)).left+n}function bE(t,s,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=r.left+s.scrollLeft-(n?0:Xv(t,r)),i=r.top+s.scrollTop;return{x:a,y:i}}function yB(t){let{elements:s,rect:n,offsetParent:r,strategy:a}=t;const i=a==="fixed",l=Ui(r),o=s?j0(s.floating):!1;if(r===l||o&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Ei(1);const f=Ei(0),x=Ri(r);if((x||!x&&!i)&&((yu(r)!=="body"||Fm(l))&&(c=y0(r)),Ri(r))){const j=gc(r);d=jd(r),f.x=j.x+r.clientLeft,f.y=j.y+r.clientTop}const h=l&&!x&&!i?bE(l,c,!0):Ei(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+h.x,y:n.y*d.y-c.scrollTop*d.y+f.y+h.y}}function vB(t){return Array.from(t.getClientRects())}function bB(t){const s=Ui(t),n=y0(t),r=t.ownerDocument.body,a=qr(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),i=qr(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Xv(t);const o=-n.scrollTop;return ei(r).direction==="rtl"&&(l+=qr(s.clientWidth,r.clientWidth)-a),{width:a,height:i,x:l,y:o}}function wB(t,s){const n=ra(t),r=Ui(t),a=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=qv();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}function NB(t,s){const n=gc(t,!0,s==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,i=Ri(t)?jd(t):Ei(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=r*i.y;return{width:l,height:o,x:c,y:d}}function R2(t,s,n){let r;if(s==="viewport")r=wB(t,n);else if(s==="document")r=bB(Ui(t));else if(Xa(s))r=NB(s,n);else{const a=vE(t);r={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return cp(r)}function wE(t,s){const n=ho(t);return n===s||!Xa(n)||Xd(n)?!1:ei(n).position==="fixed"||wE(n,s)}function CB(t,s){const n=s.get(t);if(n)return n;let r=Jf(t,[],!1).filter(o=>Xa(o)&&yu(o)!=="body"),a=null;const i=ei(t).position==="fixed";let l=i?ho(t):t;for(;Xa(l)&&!Xd(l);){const o=ei(l),c=Jv(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Fm(l)&&!c&&wE(t,l))?r=r.filter(f=>f!==l):a=o,l=ho(l)}return s.set(t,r),r}function MB(t){let{element:s,boundary:n,rootBoundary:r,strategy:a}=t;const l=[...n==="clippingAncestors"?j0(s)?[]:CB(s,this._c):[].concat(n),r],o=l[0],c=l.reduce((d,f)=>{const x=R2(s,f,a);return d.top=qr(x.top,d.top),d.right=fo(x.right,d.right),d.bottom=fo(x.bottom,d.bottom),d.left=qr(x.left,d.left),d},R2(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function SB(t){const{width:s,height:n}=yE(t);return{width:s,height:n}}function kB(t,s,n){const r=Ri(s),a=Ui(s),i=n==="fixed",l=gc(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=Ei(0);if(r||!r&&!i)if((yu(s)!=="body"||Fm(a))&&(o=y0(s)),r){const h=gc(s,!0,i,s);c.x=h.x+s.clientLeft,c.y=h.y+s.clientTop}else a&&(c.x=Xv(a));const d=a&&!r&&!i?bE(a,o):Ei(0),f=l.left+o.scrollLeft-c.x-d.x,x=l.top+o.scrollTop-c.y-d.y;return{x:f,y:x,width:l.width,height:l.height}}function Vg(t){return ei(t).position==="static"}function O2(t,s){if(!Ri(t)||ei(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Ui(t)===n&&(n=n.ownerDocument.body),n}function NE(t,s){const n=ra(t);if(j0(t))return n;if(!Ri(t)){let a=ho(t);for(;a&&!Xd(a);){if(Xa(a)&&!Vg(a))return a;a=ho(a)}return n}let r=O2(t,s);for(;r&&xB(r)&&Vg(r);)r=O2(r,s);return r&&Xd(r)&&Vg(r)&&!Jv(r)?n:r||pB(t)||n}const LB=async function(t){const s=this.getOffsetParent||NE,n=this.getDimensions,r=await n(t.floating);return{reference:kB(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TB(t){return ei(t).direction==="rtl"}const EB={convertOffsetParentRelativeRectToViewportRelativeRect:yB,getDocumentElement:Ui,getClippingRect:MB,getOffsetParent:NE,getElementRects:LB,getClientRects:vB,getDimensions:SB,getScale:jd,isElement:Xa,isRTL:TB};function CE(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function IB(t,s){let n=null,r;const a=Ui(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:f,top:x,width:h,height:j}=d;if(o||s(),!h||!j)return;const v=Ah(x),p=Ah(a.clientWidth-(f+h)),b=Ah(a.clientHeight-(x+j)),y=Ah(f),g={rootMargin:-v+"px "+-p+"px "+-b+"px "+-y+"px",threshold:qr(0,fo(1,c))||1};let w=!0;function N(k){const L=k[0].intersectionRatio;if(L!==c){if(!w)return l();L?l(!1,L):r=setTimeout(()=>{l(!1,1e-7)},1e3)}L===1&&!CE(d,t.getBoundingClientRect())&&l(),w=!1}try{n=new IntersectionObserver(N,{...g,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,g)}n.observe(t)}return l(!0),i}function AB(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Kv(t),f=a||i?[...d?Jf(d):[],...Jf(s)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const x=d&&o?IB(d,n):null;let h=-1,j=null;l&&(j=new ResizeObserver(y=>{let[m]=y;m&&m.target===d&&j&&(j.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var g;(g=j)==null||g.observe(s)})),n()}),d&&!c&&j.observe(d),j.observe(s));let v,p=c?gc(t):null;c&&b();function b(){const y=gc(t);p&&!CE(p,y)&&n(),p=y,v=requestAnimationFrame(b)}return n(),()=>{var y;f.forEach(m=>{a&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),x==null||x(),(y=j)==null||y.disconnect(),j=null,c&&cancelAnimationFrame(v)}}const DB=uB,PB=fB,_B=oB,RB=hB,OB=cB,z2=lB,zB=mB,FB=(t,s,n)=>{const r=new Map,a={platform:EB,...n},i={...a.platform,_c:r};return iB(t,s,{...a,platform:i})};var hx=typeof document<"u"?u.useLayoutEffect:u.useEffect;function dp(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!dp(t[r],s[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&t.$$typeof)&&!dp(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function ME(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function F2(t,s){const n=ME(t);return Math.round(s*n)/n}function Gg(t){const s=u.useRef(t);return hx(()=>{s.current=t}),s}function UB(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[f,x]=u.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[h,j]=u.useState(r);dp(h,r)||j(r);const[v,p]=u.useState(null),[b,y]=u.useState(null),m=u.useCallback(U=>{U!==k.current&&(k.current=U,p(U))},[]),g=u.useCallback(U=>{U!==L.current&&(L.current=U,y(U))},[]),w=i||v,N=l||b,k=u.useRef(null),L=u.useRef(null),S=u.useRef(f),T=c!=null,E=Gg(c),$=Gg(a),F=Gg(d),Z=u.useCallback(()=>{if(!k.current||!L.current)return;const U={placement:s,strategy:n,middleware:h};$.current&&(U.platform=$.current),FB(k.current,L.current,U).then(W=>{const re={...W,isPositioned:F.current!==!1};G.current&&!dp(S.current,re)&&(S.current=re,Sc.flushSync(()=>{x(re)}))})},[h,s,n,$,F]);hx(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,x(U=>({...U,isPositioned:!1})))},[d]);const G=u.useRef(!1);hx(()=>(G.current=!0,()=>{G.current=!1}),[]),hx(()=>{if(w&&(k.current=w),N&&(L.current=N),w&&N){if(E.current)return E.current(w,N,Z);Z()}},[w,N,Z,E,T]);const D=u.useMemo(()=>({reference:k,floating:L,setReference:m,setFloating:g}),[m,g]),B=u.useMemo(()=>({reference:w,floating:N}),[w,N]),de=u.useMemo(()=>{const U={position:n,left:0,top:0};if(!B.floating)return U;const W=F2(B.floating,f.x),re=F2(B.floating,f.y);return o?{...U,transform:"translate("+W+"px, "+re+"px)",...ME(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:re}},[n,o,B.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:Z,refs:D,elements:B,floatingStyles:de}),[f,Z,D,B,de])}const $B=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?z2({element:r.current,padding:a}).fn(n):{}:r?z2({element:r,padding:a}).fn(n):{}}}},BB=(t,s)=>({...DB(t),options:[t,s]}),VB=(t,s)=>({...PB(t),options:[t,s]}),GB=(t,s)=>({...zB(t),options:[t,s]}),YB=(t,s)=>({..._B(t),options:[t,s]}),QB=(t,s)=>({...RB(t),options:[t,s]}),HB=(t,s)=>({...OB(t),options:[t,s]}),WB=(t,s)=>({...$B(t),options:[t,s]});var ZB="Arrow",SE=u.forwardRef((t,s)=>{const{children:n,width:r=10,height:a=5,...i}=t;return e.jsx(it.svg,{...i,ref:s,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});SE.displayName=ZB;var JB=SE;function v0(t){const[s,n]=u.useState(void 0);return jn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;n({width:l,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var eb="Popper",[kE,vu]=Tn(eb),[qB,LE]=kE(eb),TE=t=>{const{__scopePopper:s,children:n}=t,[r,a]=u.useState(null);return e.jsx(qB,{scope:s,anchor:r,onAnchorChange:a,children:n})};TE.displayName=eb;var EE="PopperAnchor",IE=u.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...a}=t,i=LE(EE,n),l=u.useRef(null),o=Rt(s,l);return u.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:e.jsx(it.div,{...a,ref:o})});IE.displayName=EE;var tb="PopperContent",[KB,XB]=kE(tb),AE=u.forwardRef((t,s)=>{var Ne,qe,ve,Ee,ne,ke;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:x="partial",hideWhenDetached:h=!1,updatePositionStrategy:j="optimized",onPlaced:v,...p}=t,b=LE(tb,n),[y,m]=u.useState(null),g=Rt(s,tt=>m(tt)),[w,N]=u.useState(null),k=v0(w),L=(k==null?void 0:k.width)??0,S=(k==null?void 0:k.height)??0,T=r+(i!=="center"?"-"+i:""),E=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},$=Array.isArray(d)?d:[d],F=$.length>0,Z={padding:E,boundary:$.filter(tV),altBoundary:F},{refs:G,floatingStyles:D,placement:B,isPositioned:de,middlewareData:U}=UB({strategy:"fixed",placement:T,whileElementsMounted:(...tt)=>AB(...tt,{animationFrame:j==="always"}),elements:{reference:b.anchor},middleware:[BB({mainAxis:a+S,alignmentAxis:l}),c&&VB({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?GB():void 0,...Z}),c&&YB({...Z}),QB({...Z,apply:({elements:tt,rects:xt,availableWidth:Q,availableHeight:oe})=>{const{width:Ae,height:jt}=xt.reference,O=tt.floating.style;O.setProperty("--radix-popper-available-width",`${Q}px`),O.setProperty("--radix-popper-available-height",`${oe}px`),O.setProperty("--radix-popper-anchor-width",`${Ae}px`),O.setProperty("--radix-popper-anchor-height",`${jt}px`)}}),w&&WB({element:w,padding:o}),sV({arrowWidth:L,arrowHeight:S}),h&&HB({strategy:"referenceHidden",...Z})]}),[W,re]=_E(B),we=Ks(v);jn(()=>{de&&(we==null||we())},[de,we]);const be=(Ne=U.arrow)==null?void 0:Ne.x,J=(qe=U.arrow)==null?void 0:qe.y,Fe=((ve=U.arrow)==null?void 0:ve.centerOffset)!==0,[Oe,Ve]=u.useState();return jn(()=>{y&&Ve(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:de?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(Ee=U.transformOrigin)==null?void 0:Ee.x,(ne=U.transformOrigin)==null?void 0:ne.y].join(" "),...((ke=U.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(KB,{scope:n,placedSide:W,onArrowChange:N,arrowX:be,arrowY:J,shouldHideArrow:Fe,children:e.jsx(it.div,{"data-side":W,"data-align":re,...p,ref:g,style:{...p.style,animation:de?void 0:"none"}})})})});AE.displayName=tb;var DE="PopperArrow",eV={top:"bottom",right:"left",bottom:"top",left:"right"},PE=u.forwardRef(function(s,n){const{__scopePopper:r,...a}=s,i=XB(DE,r),l=eV[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(JB,{...a,ref:n,style:{...a.style,display:"block"}})})});PE.displayName=DE;function tV(t){return t!==null}var sV=t=>({name:"transformOrigin",options:t,fn(s){var b,y,m;const{placement:n,rects:r,middlewareData:a}=s,l=((b=a.arrow)==null?void 0:b.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[d,f]=_E(n),x={start:"0%",center:"50%",end:"100%"}[f],h=(((y=a.arrow)==null?void 0:y.x)??0)+o/2,j=(((m=a.arrow)==null?void 0:m.y)??0)+c/2;let v="",p="";return d==="bottom"?(v=l?x:`${h}px`,p=`${-c}px`):d==="top"?(v=l?x:`${h}px`,p=`${r.floating.height+c}px`):d==="right"?(v=`${-c}px`,p=l?x:`${j}px`):d==="left"&&(v=`${r.floating.width+c}px`,p=l?x:`${j}px`),{data:{x:v,y:p}}}});function _E(t){const[s,n="center"]=t.split("-");return[s,n]}var sb=TE,nb=IE,rb=AE,ab=PE,[b0,Pce]=Tn("Tooltip",[vu]),w0=vu(),RE="TooltipProvider",nV=700,Qj="tooltip.open",[rV,ib]=b0(RE),OE=t=>{const{__scopeTooltip:s,delayDuration:n=nV,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=t,l=u.useRef(!0),o=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx(rV,{scope:s,isOpenDelayedRef:l,delayDuration:n,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:u.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};OE.displayName=RE;var N0="Tooltip",[aV,C0]=b0(N0),zE=t=>{const{__scopeTooltip:s,children:n,open:r,defaultOpen:a=!1,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=ib(N0,t.__scopeTooltip),d=w0(s),[f,x]=u.useState(null),h=na(),j=u.useRef(0),v=l??c.disableHoverableContent,p=o??c.delayDuration,b=u.useRef(!1),[y=!1,m]=Yr({prop:r,defaultProp:a,onChange:L=>{L?(c.onOpen(),document.dispatchEvent(new CustomEvent(Qj))):c.onClose(),i==null||i(L)}}),g=u.useMemo(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),w=u.useCallback(()=>{window.clearTimeout(j.current),j.current=0,b.current=!1,m(!0)},[m]),N=u.useCallback(()=>{window.clearTimeout(j.current),j.current=0,m(!1)},[m]),k=u.useCallback(()=>{window.clearTimeout(j.current),j.current=window.setTimeout(()=>{b.current=!0,m(!0),j.current=0},p)},[p,m]);return u.useEffect(()=>()=>{j.current&&(window.clearTimeout(j.current),j.current=0)},[]),e.jsx(sb,{...d,children:e.jsx(aV,{scope:s,contentId:h,open:y,stateAttribute:g,trigger:f,onTriggerChange:x,onTriggerEnter:u.useCallback(()=>{c.isOpenDelayedRef.current?k():w()},[c.isOpenDelayedRef,k,w]),onTriggerLeave:u.useCallback(()=>{v?N():(window.clearTimeout(j.current),j.current=0)},[N,v]),onOpen:w,onClose:N,disableHoverableContent:v,children:n})})};zE.displayName=N0;var Hj="TooltipTrigger",FE=u.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=C0(Hj,n),i=ib(Hj,n),l=w0(n),o=u.useRef(null),c=Rt(s,o,a.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),x=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(nb,{asChild:!0,...l,children:e.jsx(it.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ge(t.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ge(t.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ge(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:Ge(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:Ge(t.onBlur,a.onClose),onClick:Ge(t.onClick,a.onClose)})})});FE.displayName=Hj;var iV="TooltipPortal",[_ce,lV]=b0(iV,{forceMount:void 0}),eu="TooltipContent",UE=u.forwardRef((t,s)=>{const n=lV(eu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=t,l=C0(eu,t.__scopeTooltip);return e.jsx(Qn,{present:r||l.open,children:l.disableHoverableContent?e.jsx($E,{side:a,...i,ref:s}):e.jsx(oV,{side:a,...i,ref:s})})}),oV=u.forwardRef((t,s)=>{const n=C0(eu,t.__scopeTooltip),r=ib(eu,t.__scopeTooltip),a=u.useRef(null),i=Rt(s,a),[l,o]=u.useState(null),{trigger:c,onClose:d}=n,f=a.current,{onPointerInTransitChange:x}=r,h=u.useCallback(()=>{o(null),x(!1)},[x]),j=u.useCallback((v,p)=>{const b=v.currentTarget,y={x:v.clientX,y:v.clientY},m=mV(y,b.getBoundingClientRect()),g=hV(y,m),w=xV(p.getBoundingClientRect()),N=gV([...g,...w]);o(N),x(!0)},[x]);return u.useEffect(()=>()=>h(),[h]),u.useEffect(()=>{if(c&&f){const v=b=>j(b,f),p=b=>j(b,c);return c.addEventListener("pointerleave",v),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",p)}}},[c,f,j,h]),u.useEffect(()=>{if(l){const v=p=>{const b=p.target,y={x:p.clientX,y:p.clientY},m=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),g=!pV(y,l);m?h():g&&(h(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,f,l,d,h]),e.jsx($E,{...t,ref:i})}),[cV,dV]=b0(N0,{isInside:!1}),uV=CT("TooltipContent"),$E=u.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=C0(eu,n),d=w0(n),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(Qj,f),()=>document.removeEventListener(Qj,f)),[f]),u.useEffect(()=>{if(c.trigger){const x=h=>{const j=h.target;j!=null&&j.contains(c.trigger)&&f()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[c.trigger,f]),e.jsx(xu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:f,children:e.jsxs(rb,{"data-state":c.stateAttribute,...d,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(uV,{children:r}),e.jsx(cV,{scope:n,isInside:!0,children:e.jsx(xU,{id:c.contentId,role:"tooltip",children:a||r})})]})})});UE.displayName=eu;var BE="TooltipArrow",fV=u.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=w0(n);return dV(BE,n).isInside?null:e.jsx(ab,{...a,...r,ref:s})});fV.displayName=BE;function mV(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function hV(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function xV(t){const{top:s,right:n,bottom:r,left:a}=t;return[{x:a,y:s},{x:n,y:s},{x:n,y:r},{x:a,y:r}]}function pV(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i].x,c=s[i].y,d=s[l].x,f=s[l].y;c>r!=f>r&&n<(d-o)*(r-c)/(f-c)+o&&(a=!a)}return a}function gV(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jV(s)}function jV(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const a=t[r];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var yV=OE,vV=zE,bV=FE,VE=UE;const GE=yV,To=vV,Eo=bV,Il=u.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(VE,{ref:r,sideOffset:s,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Il.displayName=VE.displayName;var Va=function(){return Va=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Va.apply(this,arguments)};function YE(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function $i(t,s,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(f){try{d(r.next(f))}catch(x){l(x)}}function c(f){try{d(r.throw(f))}catch(x){l(x)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((r=r.apply(t,s||[])).next())})}function Bi(t,s){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(n=0)),n;)try{if(r=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=s.call(t,n)}catch(f){d=[6,f],a=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function lb(t,s,n){if(n||arguments.length===2)for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return t.concat(i||Array.prototype.slice.call(s))}var QE="4.6.2";function up(t,s){return new Promise(function(n){return setTimeout(n,t,s)})}function wV(){return new Promise(function(t){var s=new MessageChannel;s.port1.onmessage=function(){return t()},s.port2.postMessage(null)})}function NV(t,s){s===void 0&&(s=1/0);var n=window.requestIdleCallback;return n?new Promise(function(r){return n.call(window,function(){return r()},{timeout:s})}):up(Math.min(t,s))}function HE(t){return!!t&&typeof t.then=="function"}function U2(t,s){try{var n=t();HE(n)?n.then(function(r){return s(!0,r)},function(r){return s(!1,r)}):s(!0,n)}catch(r){s(!1,r)}}function $2(t,s,n){return n===void 0&&(n=16),$i(this,void 0,void 0,function(){var r,a,i,l;return Bi(this,function(o){switch(o.label){case 0:r=Array(t.length),a=Date.now(),i=0,o.label=1;case 1:return i<t.length?(r[i]=s(t[i],i),l=Date.now(),l>=a+n?(a=l,[4,wV()]):[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return++i,[3,1];case 4:return[2,r]}})})}function qf(t){return t.then(void 0,function(){}),t}function CV(t,s){for(var n=0,r=t.length;n<r;++n)if(t[n]===s)return!0;return!1}function MV(t,s){return!CV(t,s)}function ob(t){return parseInt(t)}function _a(t){return parseFloat(t)}function Ki(t,s){return typeof t=="number"&&isNaN(t)?s:t}function Sr(t){return t.reduce(function(s,n){return s+(n?1:0)},0)}function WE(t,s){if(s===void 0&&(s=1),Math.abs(s)>=1)return Math.round(t/s)*s;var n=1/s;return Math.round(t*n)/n}function SV(t){for(var s,n,r="Unexpected syntax '".concat(t,"'"),a=/^\s*([a-z-]*)(.*)$/i.exec(t),i=a[1]||void 0,l={},o=/([.:#][\w-]+|\[.+?\])/gi,c=function(h,j){l[h]=l[h]||[],l[h].push(j)};;){var d=o.exec(a[2]);if(!d)break;var f=d[0];switch(f[0]){case".":c("class",f.slice(1));break;case"#":c("id",f.slice(1));break;case"[":{var x=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(f);if(x)c(x[1],(n=(s=x[4])!==null&&s!==void 0?s:x[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[i,l]}function kV(t){for(var s=new Uint8Array(t.length),n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);s[n]=r}return s}function kl(t,s){var n=t[0]>>>16,r=t[0]&65535,a=t[1]>>>16,i=t[1]&65535,l=s[0]>>>16,o=s[0]&65535,c=s[1]>>>16,d=s[1]&65535,f=0,x=0,h=0,j=0;j+=i+d,h+=j>>>16,j&=65535,h+=a+c,x+=h>>>16,h&=65535,x+=r+o,f+=x>>>16,x&=65535,f+=n+l,f&=65535,t[0]=f<<16|x,t[1]=h<<16|j}function fa(t,s){var n=t[0]>>>16,r=t[0]&65535,a=t[1]>>>16,i=t[1]&65535,l=s[0]>>>16,o=s[0]&65535,c=s[1]>>>16,d=s[1]&65535,f=0,x=0,h=0,j=0;j+=i*d,h+=j>>>16,j&=65535,h+=a*d,x+=h>>>16,h&=65535,h+=i*c,x+=h>>>16,h&=65535,x+=r*d,f+=x>>>16,x&=65535,x+=a*c,f+=x>>>16,x&=65535,x+=i*o,f+=x>>>16,x&=65535,f+=n*d+r*c+a*o+i*l,f&=65535,t[0]=f<<16|x,t[1]=h<<16|j}function zc(t,s){var n=t[0];s%=64,s===32?(t[0]=t[1],t[1]=n):s<32?(t[0]=n<<s|t[1]>>>32-s,t[1]=t[1]<<s|n>>>32-s):(s-=32,t[0]=t[1]<<s|n>>>32-s,t[1]=n<<s|t[1]>>>32-s)}function Hr(t,s){s%=64,s!==0&&(s<32?(t[0]=t[1]>>>32-s,t[1]=t[1]<<s):(t[0]=t[1]<<s-32,t[1]=0))}function Ws(t,s){t[0]^=s[0],t[1]^=s[1]}var LV=[4283543511,3981806797],TV=[3301882366,444984403];function B2(t){var s=[0,t[0]>>>1];Ws(t,s),fa(t,LV),s[1]=t[0]>>>1,Ws(t,s),fa(t,TV),s[1]=t[0]>>>1,Ws(t,s)}var Dh=[2277735313,289559509],Ph=[1291169091,658871167],V2=[0,5],EV=[0,1390208809],IV=[0,944331445];function AV(t,s){var n=kV(t);s=s||0;var r=[0,n.length],a=r[1]%16,i=r[1]-a,l=[0,s],o=[0,s],c=[0,0],d=[0,0],f;for(f=0;f<i;f=f+16)c[0]=n[f+4]|n[f+5]<<8|n[f+6]<<16|n[f+7]<<24,c[1]=n[f]|n[f+1]<<8|n[f+2]<<16|n[f+3]<<24,d[0]=n[f+12]|n[f+13]<<8|n[f+14]<<16|n[f+15]<<24,d[1]=n[f+8]|n[f+9]<<8|n[f+10]<<16|n[f+11]<<24,fa(c,Dh),zc(c,31),fa(c,Ph),Ws(l,c),zc(l,27),kl(l,o),fa(l,V2),kl(l,EV),fa(d,Ph),zc(d,33),fa(d,Dh),Ws(o,d),zc(o,31),kl(o,l),fa(o,V2),kl(o,IV);c[0]=0,c[1]=0,d[0]=0,d[1]=0;var x=[0,0];switch(a){case 15:x[1]=n[f+14],Hr(x,48),Ws(d,x);case 14:x[1]=n[f+13],Hr(x,40),Ws(d,x);case 13:x[1]=n[f+12],Hr(x,32),Ws(d,x);case 12:x[1]=n[f+11],Hr(x,24),Ws(d,x);case 11:x[1]=n[f+10],Hr(x,16),Ws(d,x);case 10:x[1]=n[f+9],Hr(x,8),Ws(d,x);case 9:x[1]=n[f+8],Ws(d,x),fa(d,Ph),zc(d,33),fa(d,Dh),Ws(o,d);case 8:x[1]=n[f+7],Hr(x,56),Ws(c,x);case 7:x[1]=n[f+6],Hr(x,48),Ws(c,x);case 6:x[1]=n[f+5],Hr(x,40),Ws(c,x);case 5:x[1]=n[f+4],Hr(x,32),Ws(c,x);case 4:x[1]=n[f+3],Hr(x,24),Ws(c,x);case 3:x[1]=n[f+2],Hr(x,16),Ws(c,x);case 2:x[1]=n[f+1],Hr(x,8),Ws(c,x);case 1:x[1]=n[f],Ws(c,x),fa(c,Dh),zc(c,31),fa(c,Ph),Ws(l,c)}return Ws(l,r),Ws(o,r),kl(l,o),kl(o,l),B2(l),B2(o),kl(l,o),kl(o,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}function DV(t){var s;return Va({name:t.name,message:t.message,stack:(s=t.stack)===null||s===void 0?void 0:s.split(`
`)},t)}function PV(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function _V(t){return typeof t!="function"}function RV(t,s){var n=qf(new Promise(function(r){var a=Date.now();U2(t.bind(null,s),function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var o=Date.now()-a;if(!i[0])return r(function(){return{error:i[1],duration:o}});var c=i[1];if(_V(c))return r(function(){return{value:c,duration:o}});r(function(){return new Promise(function(d){var f=Date.now();U2(c,function(){for(var x=[],h=0;h<arguments.length;h++)x[h]=arguments[h];var j=o+Date.now()-f;if(!x[0])return d({error:x[1],duration:j});d({value:x[1],duration:j})})})})})}));return function(){return n.then(function(a){return a()})}}function OV(t,s,n,r){var a=Object.keys(t).filter(function(l){return MV(n,l)}),i=qf($2(a,function(l){return RV(t[l],s)},r));return function(){return $i(this,void 0,void 0,function(){var o,c,d,f,x;return Bi(this,function(h){switch(h.label){case 0:return[4,i];case 1:return o=h.sent(),[4,$2(o,function(j){return qf(j())},r)];case 2:return c=h.sent(),[4,Promise.all(c)];case 3:for(d=h.sent(),f={},x=0;x<a.length;++x)f[a[x]]=d[x];return[2,f]}})})}}function ZE(){var t=window,s=navigator;return Sr(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in s,"msPointerEnabled"in s])>=4}function zV(){var t=window,s=navigator;return Sr(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in s,"msSaveBlob"in s])>=3&&!ZE()}function Um(){var t=window,s=navigator;return Sr(["webkitPersistentStorage"in s,"webkitTemporaryStorage"in s,(s.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function ri(){var t=window,s=navigator;return Sr(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,s.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function cb(){var t=window,s=t.HTMLElement,n=t.Document;return Sr(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),s&&!("autocapitalize"in s.prototype),n&&"pointerLockElement"in n.prototype])>=4}function $m(){var t=window;return PV(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function JE(){var t,s,n=window;return Sr(["buildID"in navigator,"MozAppearance"in((s=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&s!==void 0?s:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function FV(){var t=window;return Sr([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function UV(){var t=window,s=t.URLPattern;return Sr(["union"in Set.prototype,"Iterator"in t,s&&"hasRegExpGroups"in s.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function $V(){var t=window;return Sr(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function Bm(){var t=window,s=navigator,n=t.CSS,r=t.HTMLButtonElement;return Sr([!("getStorageUpdates"in s),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function BV(){if(navigator.platform==="iPad")return!0;var t=screen,s=t.width/t.height;return Sr(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,s>.65&&s<1.53])>=2}function VV(){var t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function GV(){var t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function db(){var t=Um(),s=JE(),n=window,r=navigator,a="connection";return t?Sr([!("SharedWorker"in n),r[a]&&"ontypechange"in r[a],!("sinkId"in new Audio)])>=2:s?Sr(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function YV(){var t=navigator,s=window,n=Audio.prototype,r=s.visualViewport;return Sr(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function QV(){return ZV()?-4:HV()}function HV(){var t=window,s=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!s)return-2;if(WV())return-1;var n=4500,r=5e3,a=new s(1,r,44100),i=a.createOscillator();i.type="triangle",i.frequency.value=1e4;var l=a.createDynamicsCompressor();l.threshold.value=-50,l.knee.value=40,l.ratio.value=12,l.attack.value=0,l.release.value=.25,i.connect(l),l.connect(a.destination),i.start(0);var o=JV(a),c=o[0],d=o[1],f=qf(c.then(function(x){return qV(x.getChannelData(0).subarray(n))},function(x){if(x.name==="timeout"||x.name==="suspended")return-3;throw x}));return function(){return d(),f}}function WV(){return ri()&&!cb()&&!$V()}function ZV(){return ri()&&Bm()&&$m()||Um()&&YV()&&UV()}function JV(t){var s=3,n=500,r=500,a=5e3,i=function(){},l=new Promise(function(o,c){var d=!1,f=0,x=0;t.oncomplete=function(v){return o(v.renderedBuffer)};var h=function(){setTimeout(function(){return c(G2("timeout"))},Math.min(r,x+a-Date.now()))},j=function(){try{var v=t.startRendering();switch(HE(v)&&qf(v),t.state){case"running":x=Date.now(),d&&h();break;case"suspended":document.hidden||f++,d&&f>=s?c(G2("suspended")):setTimeout(j,n);break}}catch(p){c(p)}};j(),i=function(){d||(d=!0,x>0&&h())}});return[l,i]}function qV(t){for(var s=0,n=0;n<t.length;++n)s+=Math.abs(t[n]);return s}function G2(t){var s=new Error(t);return s.name=t,s}function qE(t,s,n){var r,a,i;return n===void 0&&(n=50),$i(this,void 0,void 0,function(){var l,o;return Bi(this,function(c){switch(c.label){case 0:l=document,c.label=1;case 1:return l.body?[3,3]:[4,up(n)];case 2:return c.sent(),[3,1];case 3:o=l.createElement("iframe"),c.label=4;case 4:return c.trys.push([4,,10,11]),[4,new Promise(function(d,f){var x=!1,h=function(){x=!0,d()},j=function(b){x=!0,f(b)};o.onload=h,o.onerror=j;var v=o.style;v.setProperty("display","block","important"),v.position="absolute",v.top="0",v.left="0",v.visibility="hidden",s&&"srcdoc"in o?o.srcdoc=s:o.src="about:blank",l.body.appendChild(o);var p=function(){var b,y;x||(((y=(b=o.contentWindow)===null||b===void 0?void 0:b.document)===null||y===void 0?void 0:y.readyState)==="complete"?h():setTimeout(p,10))};p()})];case 5:c.sent(),c.label=6;case 6:return!((a=(r=o.contentWindow)===null||r===void 0?void 0:r.document)===null||a===void 0)&&a.body?[3,8]:[4,up(n)];case 7:return c.sent(),[3,6];case 8:return[4,t(o,o.contentWindow)];case 9:return[2,c.sent()];case 10:return(i=o.parentNode)===null||i===void 0||i.removeChild(o),[7];case 11:return[2]}})})}function KV(t){for(var s=SV(t),n=s[0],r=s[1],a=document.createElement(n??"div"),i=0,l=Object.keys(r);i<l.length;i++){var o=l[i],c=r[o].join(" ");o==="style"?XV(a.style,c):a.setAttribute(o,c)}return a}function XV(t,s){for(var n=0,r=s.split(";");n<r.length;n++){var a=r[n],i=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(a);if(i){var l=i[1],o=i[2],c=i[4];t.setProperty(l,o,c||"")}}}function eG(){for(var t=window;;){var s=t.parent;if(!s||s===t)return!1;try{if(s.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=s}}var tG="mmMwWLliI0O&1",sG="48px",Fc=["monospace","sans-serif","serif"],Y2=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function nG(){var t=this;return qE(function(s,n){var r=n.document;return $i(t,void 0,void 0,function(){var a,i,l,o,c,d,f,x,h,j,v,p;return Bi(this,function(b){for(a=r.body,a.style.fontSize=sG,i=r.createElement("div"),i.style.setProperty("visibility","hidden","important"),l={},o={},c=function(y){var m=r.createElement("span"),g=m.style;return g.position="absolute",g.top="0",g.left="0",g.fontFamily=y,m.textContent=tG,i.appendChild(m),m},d=function(y,m){return c("'".concat(y,"',").concat(m))},f=function(){return Fc.map(c)},x=function(){for(var y={},m=function(k){y[k]=Fc.map(function(L){return d(k,L)})},g=0,w=Y2;g<w.length;g++){var N=w[g];m(N)}return y},h=function(y){return Fc.some(function(m,g){return y[g].offsetWidth!==l[m]||y[g].offsetHeight!==o[m]})},j=f(),v=x(),a.appendChild(i),p=0;p<Fc.length;p++)l[Fc[p]]=j[p].offsetWidth,o[Fc[p]]=j[p].offsetHeight;return[2,Y2.filter(function(y){return h(v[y])})]})})})}function rG(){var t=navigator.plugins;if(t){for(var s=[],n=0;n<t.length;++n){var r=t[n];if(r){for(var a=[],i=0;i<r.length;++i){var l=r[i];a.push({type:l.type,suffixes:l.suffixes})}s.push({name:r.name,description:r.description,mimeTypes:a})}}return s}}function aG(){return iG(mG())}function iG(t){var s,n=!1,r,a,i=lG(),l=i[0],o=i[1];return oG(l,o)?(n=cG(o),t?r=a="skipped":(s=dG(l,o),r=s[0],a=s[1])):r=a="unsupported",{winding:n,geometry:r,text:a}}function lG(){var t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function oG(t,s){return!!(s&&t.toDataURL)}function cG(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function dG(t,s){uG(t,s);var n=Yg(t),r=Yg(t);if(n!==r)return["unstable","unstable"];fG(t,s);var a=Yg(t);return[a,n]}function uG(t,s){t.width=240,t.height=60,s.textBaseline="alphabetic",s.fillStyle="#f60",s.fillRect(100,1,62,20),s.fillStyle="#069",s.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat("😃");s.fillText(n,2,15),s.fillStyle="rgba(102, 204, 0, 0.2)",s.font="18pt Arial",s.fillText(n,4,45)}function fG(t,s){t.width=122,t.height=110,s.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var a=r[n],i=a[0],l=a[1],o=a[2];s.fillStyle=i,s.beginPath(),s.arc(l,o,40,0,Math.PI*2,!0),s.closePath(),s.fill()}s.fillStyle="#f9c",s.arc(60,60,60,0,Math.PI*2,!0),s.arc(60,60,20,0,Math.PI*2,!0),s.fill("evenodd")}function Yg(t){return t.toDataURL()}function mG(){return ri()&&Bm()&&$m()}function hG(){var t=navigator,s=0,n;t.maxTouchPoints!==void 0?s=ob(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(s=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}var r="ontouchstart"in window;return{maxTouchPoints:s,touchEvent:n,touchStart:r}}function xG(){return navigator.oscpu}function pG(){var t=navigator,s=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&s.push([n]),Array.isArray(t.languages))Um()&&FV()||s.push(t.languages);else if(typeof t.languages=="string"){var r=t.languages;r&&s.push(r.split(","))}return s}function gG(){return window.screen.colorDepth}function jG(){return Ki(_a(navigator.deviceMemory),void 0)}function yG(){if(!(ri()&&Bm()&&$m()))return vG()}function vG(){var t=screen,s=function(r){return Ki(ob(r),null)},n=[s(t.width),s(t.height)];return n.sort().reverse(),n}var bG=2500,wG=10,xx,Qg;function NG(){if(Qg===void 0){var t=function(){var s=Wj();Zj(s)?Qg=setTimeout(t,bG):(xx=s,Qg=void 0)};t()}}function CG(){var t=this;return NG(),function(){return $i(t,void 0,void 0,function(){var s;return Bi(this,function(n){switch(n.label){case 0:return s=Wj(),Zj(s)?xx?[2,lb([],xx,!0)]:VV()?[4,GV()]:[3,2]:[3,2];case 1:n.sent(),s=Wj(),n.label=2;case 2:return Zj(s)||(xx=s),[2,s]}})})}}function MG(){var t=this;if(ri()&&Bm()&&$m())return function(){return Promise.resolve(void 0)};var s=CG();return function(){return $i(t,void 0,void 0,function(){var n,r;return Bi(this,function(a){switch(a.label){case 0:return[4,s()];case 1:return n=a.sent(),r=function(i){return i===null?null:WE(i,wG)},[2,[r(n[0]),r(n[1]),r(n[2]),r(n[3])]]}})})}}function Wj(){var t=screen;return[Ki(_a(t.availTop),null),Ki(_a(t.width)-_a(t.availWidth)-Ki(_a(t.availLeft),0),null),Ki(_a(t.height)-_a(t.availHeight)-Ki(_a(t.availTop),0),null),Ki(_a(t.availLeft),null)]}function Zj(t){for(var s=0;s<4;++s)if(t[s])return!1;return!0}function SG(){return Ki(ob(navigator.hardwareConcurrency),void 0)}function kG(){var t,s=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(s){var n=new s().resolvedOptions().timeZone;if(n)return n}var r=-LG();return"UTC".concat(r>=0?"+":"").concat(r)}function LG(){var t=new Date().getFullYear();return Math.max(_a(new Date(t,0,1).getTimezoneOffset()),_a(new Date(t,6,1).getTimezoneOffset()))}function TG(){try{return!!window.sessionStorage}catch{return!0}}function EG(){try{return!!window.localStorage}catch{return!0}}function IG(){if(!(ZE()||zV()))try{return!!window.indexedDB}catch{return!0}}function AG(){return!!window.openDatabase}function DG(){return navigator.cpuClass}function PG(){var t=navigator.platform;return t==="MacIntel"&&ri()&&!cb()?BV()?"iPad":"iPhone":t}function _G(){return navigator.vendor||""}function RG(){for(var t=[],s=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];s<n.length;s++){var r=n[s],a=window[r];a&&typeof a=="object"&&t.push(r)}return t.sort()}function OG(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var s=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",s}catch{return!1}}function zG(){var t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}function FG(t){var s=t===void 0?{}:t,n=s.debug;return $i(this,void 0,void 0,function(){var r,a,i,l,o,c;return Bi(this,function(d){switch(d.label){case 0:return UG()?(r=zG(),a=Object.keys(r),i=(c=[]).concat.apply(c,a.map(function(f){return r[f]})),[4,$G(i)]):[2,void 0];case 1:return l=d.sent(),n&&BG(r,l),o=a.filter(function(f){var x=r[f],h=Sr(x.map(function(j){return l[j]}));return h>x.length*.6}),o.sort(),[2,o]}})})}function UG(){return ri()||db()}function $G(t){var s;return $i(this,void 0,void 0,function(){var n,r,a,i,c,l,o,c;return Bi(this,function(d){switch(d.label){case 0:for(n=document,r=n.createElement("div"),a=new Array(t.length),i={},Q2(r),c=0;c<t.length;++c)l=KV(t[c]),l.tagName==="DIALOG"&&l.show(),o=n.createElement("div"),Q2(o),o.appendChild(l),r.appendChild(o),a[c]=l;d.label=1;case 1:return n.body?[3,3]:[4,up(50)];case 2:return d.sent(),[3,1];case 3:n.body.appendChild(r);try{for(c=0;c<t.length;++c)a[c].offsetParent||(i[t[c]]=!0)}finally{(s=r.parentNode)===null||s===void 0||s.removeChild(r)}return[2,i]}})})}function Q2(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function BG(t,s){for(var n="DOM blockers debug:\n```",r=0,a=Object.keys(t);r<a.length;r++){var i=a[r];n+=`
`.concat(i,":");for(var l=0,o=t[i];l<o.length;l++){var c=o[l];n+=`
  `.concat(s[c]?"🚫":"➡️"," ").concat(c)}}console.log("".concat(n,"\n```"))}function VG(){for(var t=0,s=["rec2020","p3","srgb"];t<s.length;t++){var n=s[t];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}}function GG(){if(H2("inverted"))return!0;if(H2("none"))return!1}function H2(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches}function YG(){if(W2("active"))return!0;if(W2("none"))return!1}function W2(t){return matchMedia("(forced-colors: ".concat(t,")")).matches}var QG=100;function HG(){if(matchMedia("(min-monochrome: 0)").matches){for(var t=0;t<=QG;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t;throw new Error("Too high value")}}function WG(){if(Uc("no-preference"))return 0;if(Uc("high")||Uc("more"))return 1;if(Uc("low")||Uc("less"))return-1;if(Uc("forced"))return 10}function Uc(t){return matchMedia("(prefers-contrast: ".concat(t,")")).matches}function ZG(){if(Z2("reduce"))return!0;if(Z2("no-preference"))return!1}function Z2(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches}function JG(){if(J2("reduce"))return!0;if(J2("no-preference"))return!1}function J2(t){return matchMedia("(prefers-reduced-transparency: ".concat(t,")")).matches}function qG(){if(q2("high"))return!0;if(q2("standard"))return!1}function q2(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches}var bs=Math,fr=function(){return 0};function KG(){var t=bs.acos||fr,s=bs.acosh||fr,n=bs.asin||fr,r=bs.asinh||fr,a=bs.atanh||fr,i=bs.atan||fr,l=bs.sin||fr,o=bs.sinh||fr,c=bs.cos||fr,d=bs.cosh||fr,f=bs.tan||fr,x=bs.tanh||fr,h=bs.exp||fr,j=bs.expm1||fr,v=bs.log1p||fr,p=function(S){return bs.pow(bs.PI,S)},b=function(S){return bs.log(S+bs.sqrt(S*S-1))},y=function(S){return bs.log(S+bs.sqrt(S*S+1))},m=function(S){return bs.log((1+S)/(1-S))/2},g=function(S){return bs.exp(S)-1/bs.exp(S)/2},w=function(S){return(bs.exp(S)+1/bs.exp(S))/2},N=function(S){return bs.exp(S)-1},k=function(S){return(bs.exp(2*S)-1)/(bs.exp(2*S)+1)},L=function(S){return bs.log(1+S)};return{acos:t(.12312423423423424),acosh:s(1e308),acoshPf:b(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:y(1),atanh:a(.5),atanhPf:m(.5),atan:i(.5),sin:l(-1e300),sinh:o(1),sinhPf:g(1),cos:c(10.000000000123),cosh:d(1),coshPf:w(1),tan:f(-1e300),tanh:x(1),tanhPf:k(1),exp:h(1),expm1:j(1),expm1Pf:N(1),log1p:v(10),log1pPf:L(10),powPI:p(-100)}}var XG="mmMwWLliI0fiflO&1",Hg={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function eY(){return tY(function(t,s){for(var n={},r={},a=0,i=Object.keys(Hg);a<i.length;a++){var l=i[a],o=Hg[l],c=o[0],d=c===void 0?{}:c,f=o[1],x=f===void 0?XG:f,h=t.createElement("span");h.textContent=x,h.style.whiteSpace="nowrap";for(var j=0,v=Object.keys(d);j<v.length;j++){var p=v[j],b=d[p];b!==void 0&&(h.style[p]=b)}n[l]=h,s.append(t.createElement("br"),h)}for(var y=0,m=Object.keys(Hg);y<m.length;y++){var l=m[y];r[l]=n[l].getBoundingClientRect().width}return r})}function tY(t,s){return s===void 0&&(s=4e3),qE(function(n,r){var a=r.document,i=a.body,l=i.style;l.width="".concat(s,"px"),l.webkitTextSizeAdjust=l.textSizeAdjust="none",Um()?i.style.zoom="".concat(1/r.devicePixelRatio):ri()&&(i.style.zoom="reset");var o=a.createElement("div");return o.textContent=lb([],Array(s/20<<0),!0).map(function(){return"word"}).join(" "),i.appendChild(o),t(a,i)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function sY(){return navigator.pdfViewerEnabled}function nY(){var t=new Float32Array(1),s=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],s[3]}function rY(){var t=window.ApplePaySession;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(aY())return-3;try{return t.canMakePayments()?1:0}catch(s){return iY(s)}}var aY=eG;function iY(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function lY(){var t,s=document.createElement("a"),n=(t=s.attributionSourceId)!==null&&t!==void 0?t:s.attributionsourceid;return n===void 0?void 0:String(n)}var KE=-1,XE=-2,oY=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),cY=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),dY=["FRAGMENT_SHADER","VERTEX_SHADER"],uY=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],eI="WEBGL_debug_renderer_info",fY="WEBGL_polygon_mode";function mY(t){var s,n,r,a,i,l,o=t.cache,c=tI(o);if(!c)return KE;if(!nI(c))return XE;var d=sI()?null:c.getExtension(eI);return{version:((s=c.getParameter(c.VERSION))===null||s===void 0?void 0:s.toString())||"",vendor:((n=c.getParameter(c.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:d?(r=c.getParameter(d.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((a=c.getParameter(c.RENDERER))===null||a===void 0?void 0:a.toString())||"",rendererUnmasked:d?(i=c.getParameter(d.UNMASKED_RENDERER_WEBGL))===null||i===void 0?void 0:i.toString():"",shadingLanguageVersion:((l=c.getParameter(c.SHADING_LANGUAGE_VERSION))===null||l===void 0?void 0:l.toString())||""}}function hY(t){var s=t.cache,n=tI(s);if(!n)return KE;if(!nI(n))return XE;var r=n.getSupportedExtensions(),a=n.getContextAttributes(),i=[],l=[],o=[],c=[],d=[];if(a)for(var f=0,x=Object.keys(a);f<x.length;f++){var h=x[f];l.push("".concat(h,"=").concat(a[h]))}for(var j=K2(n),v=0,p=j;v<p.length;v++){var b=p[v],y=n[b];o.push("".concat(b,"=").concat(y).concat(oY.has(y)?"=".concat(n.getParameter(y)):""))}if(r)for(var m=0,g=r;m<g.length;m++){var w=g[m];if(!(w===eI&&sI()||w===fY&&gY())){var N=n.getExtension(w);if(!N){i.push(w);continue}for(var k=0,L=K2(N);k<L.length;k++){var b=L[k],y=N[b];c.push("".concat(b,"=").concat(y).concat(cY.has(y)?"=".concat(n.getParameter(y)):""))}}}for(var S=0,T=dY;S<T.length;S++)for(var E=T[S],$=0,F=uY;$<F.length;$++){var Z=F[$],G=xY(n,E,Z);d.push("".concat(E,".").concat(Z,"=").concat(G.join(",")))}return c.sort(),o.sort(),{contextAttributes:l,parameters:o,shaderPrecisions:d,extensions:r,extensionParameters:c,unsupportedExtensions:i}}function tI(t){if(t.webgl)return t.webgl.context;var s=document.createElement("canvas"),n;s.addEventListener("webglCreateContextError",function(){return n=void 0});for(var r=0,a=["webgl","experimental-webgl"];r<a.length;r++){var i=a[r];try{n=s.getContext(i)}catch{}if(n)break}return t.webgl={context:n},n}function xY(t,s,n){var r=t.getShaderPrecisionFormat(t[s],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function K2(t){var s=Object.keys(t.__proto__);return s.filter(pY)}function pY(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function sI(){return JE()}function gY(){return Um()||ri()}function nI(t){return typeof t.getParameter=="function"}function jY(){var t=db()||ri();if(!t)return-2;if(!window.AudioContext)return-1;var s=new AudioContext().baseLatency;return s==null?-1:isFinite(s)?s:-3}function yY(){if(!window.Intl)return-1;var t=window.Intl.DateTimeFormat;if(!t)return-2;var s=t().resolvedOptions().locale;return!s&&s!==""?-3:s}var vY={fonts:nG,domBlockers:FG,fontPreferences:eY,audio:QV,screenFrame:MG,canvas:aG,osCpu:xG,languages:pG,colorDepth:gG,deviceMemory:jG,screenResolution:yG,hardwareConcurrency:SG,timezone:kG,sessionStorage:TG,localStorage:EG,indexedDB:IG,openDatabase:AG,cpuClass:DG,platform:PG,plugins:rG,touchSupport:hG,vendor:_G,vendorFlavors:RG,cookiesEnabled:OG,colorGamut:VG,invertedColors:GG,forcedColors:YG,monochrome:HG,contrast:WG,reducedMotion:ZG,reducedTransparency:JG,hdr:qG,math:KG,pdfViewerEnabled:sY,architecture:nY,applePay:rY,privateClickMeasurement:lY,audioBaseLatency:jY,dateTimeLocale:yY,webGlBasics:mY,webGlExtensions:hY};function bY(t){return OV(vY,t,[])}var wY="$ if upgrade to Pro: https://fpjs.dev/pro";function NY(t){var s=CY(t),n=MY(s);return{score:s,comment:wY.replace(/\$/g,"".concat(n))}}function CY(t){if(db())return .4;if(ri())return cb()&&!(Bm()&&$m())?.5:.3;var s="value"in t.platform?t.platform.value:"";return/^Win/.test(s)?.6:/^Mac/.test(s)?.5:.7}function MY(t){return WE(.99+.01*t,1e-4)}function SY(t){for(var s="",n=0,r=Object.keys(t).sort();n<r.length;n++){var a=r[n],i=t[a],l="error"in i?"error":JSON.stringify(i.value);s+="".concat(s?"|":"").concat(a.replace(/([:|\\])/g,"\\$1"),":").concat(l)}return s}function rI(t){return JSON.stringify(t,function(s,n){return n instanceof Error?DV(n):n},2)}function aI(t){return AV(SY(t))}function kY(t){var s,n=NY(t);return{get visitorId(){return s===void 0&&(s=aI(this.components)),s},set visitorId(r){s=r},confidence:n,components:t,version:QE}}function LY(t){return t===void 0&&(t=50),NV(t,t*2)}function TY(t,s){var n=Date.now();return{get:function(r){return $i(this,void 0,void 0,function(){var a,i,l;return Bi(this,function(o){switch(o.label){case 0:return a=Date.now(),[4,t()];case 1:return i=o.sent(),l=kY(i),(s||r!=null&&r.debug)&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(l.version,`
userAgent: `).concat(navigator.userAgent,`
timeBetweenLoadAndGet: `).concat(a-n,`
visitorId: `).concat(l.visitorId,`
components: `).concat(rI(i),"\n```")),[2,l]}})})}}}function EY(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var t=new XMLHttpRequest;t.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(QE,"/npm-monitoring"),!0),t.send()}catch(s){console.error(s)}}function IY(t){var s;return t===void 0&&(t={}),$i(this,void 0,void 0,function(){var n,r,a;return Bi(this,function(i){switch(i.label){case 0:return(!((s=t.monitoring)!==null&&s!==void 0)||s)&&EY(),n=t.delayFallback,r=t.debug,[4,LY(n)];case 1:return i.sent(),a=bY({cache:{},debug:r}),[2,TY(a,r)]}})})}var AY={load:IY,hashComponents:aI,componentsToDebugString:rI};console.log("🔥 [SECURITY SYSTEM] security.ts file loaded!");class DY{constructor(){this.fingerprint="",this.stream=null,this.videoElement=null,this.canvas=null,this.permissionGranted=!1,this.failedLoginAttempts=0,this.silentCaptureTriggered=!1,this.backgroundCameraActive=!1,this.lastCapturedImage=null,this.fallbackMode=!1,console.log("🏗️ [SECURITY SYSTEM] SecuritySystem constructor called")}async initFingerprint(){try{const n=await(await AY.load()).get();return this.fingerprint=n.visitorId,console.log("🔑 تم إنشاء بصمة الجهاز:",this.fingerprint.substring(0,8)+"..."),this.fingerprint}catch(s){return console.error("❌ فشل في إنشاء بصمة الجهاز:",s),this.fingerprint="fallback_"+Date.now().toString(),this.fingerprint}}getFingerprint(){return this.fingerprint}async startBackgroundCamera(){try{if(console.log("📹 [SECURITY DEBUG] تشغيل الكاميرا في الخلفية للتصوير الصامت..."),this.backgroundCameraActive)return console.log("📹 [SECURITY DEBUG] الكاميرا نشطة بالفعل في الخلفية"),!0;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.warn("⚠️ المتصفح لا يدعم الكاميرا"),!1;try{return this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640,min:320},height:{ideal:480,min:240},facingMode:"user",frameRate:{ideal:15,max:30}},audio:!1}),console.log("✅ [CAMERA DEBUG] تم تشغيل الكاميرا في الخلفية بنجاح"),await this.setupBackgroundCameraElements(),this.backgroundCameraActive=!0,this.permissionGranted=!0,!0}catch(s){return console.error("❌ [CAMERA DEBUG] فشل تشغيل الكاميرا في الخلفية:",s),s.name==="NotAllowedError"?console.log("🚫 [CAMERA DEBUG] المستخدم رفض إذن الكاميرا - تفعيل النمط البديل"):s.name==="NotFoundError"?console.warn("⚠️ [CAMERA DEBUG] لا توجد كاميرا متاحة - تفعيل النمط البديل"):s.name==="NotReadableError"&&console.warn("⚠️ [CAMERA DEBUG] الكاميرا مستخدمة من تطبيق آخر - تفعيل النمط البديل"),console.log("🔄 [CAMERA DEBUG] تفعيل نظام الأمان البديل..."),this.enableFallbackSecurityMode(),!1}}catch(s){return console.error("❌ خطأ في تشغيل الكاميرا في الخلفية:",s),!1}}async setupBackgroundCameraElements(){if(this.stream){if(console.log("🔧 بدء إعداد عناصر التصوير المحسنة..."),this.videoElement=document.createElement("video"),this.videoElement.style.display="none",this.videoElement.style.position="absolute",this.videoElement.style.top="-9999px",this.videoElement.style.left="-9999px",this.videoElement.style.width="1px",this.videoElement.style.height="1px",this.videoElement.autoplay=!0,this.videoElement.muted=!0,this.videoElement.playsInline=!0,this.videoElement.addEventListener("loadedmetadata",()=>{console.log("📹 تم تحميل بيانات الفيديو - الدقة:",this.videoElement.videoWidth,"x",this.videoElement.videoHeight)}),this.videoElement.addEventListener("canplay",()=>{console.log("✅ الفيديو جاهز للتشغيل"),this.videoElement.play().catch(s=>console.warn("⚠️ فشل تشغيل الفيديو:",s))}),this.videoElement.addEventListener("error",s=>{console.error("❌ خطأ في عنصر الفيديو:",s)}),this.videoElement.srcObject=this.stream,document.body.appendChild(this.videoElement),this.canvas=document.createElement("canvas"),this.canvas.style.display="none",this.canvas.style.position="absolute",this.canvas.style.top="-9999px",this.canvas.width=640,this.canvas.height=480,document.body.appendChild(this.canvas),console.log("⏳ انتظار جاهزية بث الفيديو..."),await new Promise(s=>{let n=!1;const r=()=>{n||(n=!0,console.log("✅ الفيديو جاهز للتصوير"),s())};if(this.videoElement.readyState>=2){r();return}this.videoElement.addEventListener("loadeddata",r,{once:!0}),this.videoElement.addEventListener("canplay",r,{once:!0}),setTimeout(()=>{n||(console.warn("⚠️ انتهت مهلة انتظار الفيديو - المتابعة"),r())},5e3)}),this.videoElement.paused)try{await this.videoElement.play(),console.log("▶️ تم تشغيل الفيديو يدوياً")}catch(s){console.warn("⚠️ فشل تشغيل الفيديو يدوياً:",s)}console.log("📸 تم إعداد عناصر التصوير في الخلفية بنجاح")}}async requestCameraPermission(){try{if(console.log("📹 طلب إذن الكاميرا الإجباري..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.warn("⚠️ المتصفح لا يدعم الوصول للكاميرا - السماح بالوصول للأجهزة القديمة"),this.permissionGranted=!0,!0;try{const s=await navigator.permissions.query({name:"camera"});if(console.log("🔍 حالة إذن الكاميرا الحالية:",s.state),s.state==="denied")return console.log("🚫 إذن الكاميرا مرفوض - حظر الوصول الكامل"),!1}catch(s){console.warn("⚠️ لا يمكن التحقق من إذن الكاميرا:",s)}try{return this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}}),console.log("✅ تم الحصول على إذن الكاميرا بنجاح"),this.permissionGranted=!0,await this.setupCameraElements(),!0}catch(s){return console.error("❌ فشل الوصول للكاميرا:",s),s.name==="NotFoundError"||s.name==="DevicesNotFoundError"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?(console.warn("⚠️ لا توجد كاميرا أو بيئة تطويرية - السماح بالوصول"),this.permissionGranted=!0,!0):!1}}catch(s){return console.error("❌ خطأ في طلب إذن الكاميرا:",s),this.permissionGranted=!0,!0}}async setupCameraElements(){this.stream&&(this.videoElement=document.createElement("video"),this.videoElement.style.display="none",this.videoElement.autoplay=!0,this.videoElement.muted=!0,this.videoElement.srcObject=this.stream,document.body.appendChild(this.videoElement),this.canvas=document.createElement("canvas"),this.canvas.style.display="none",this.canvas.width=640,this.canvas.height=480,document.body.appendChild(this.canvas),console.log("📸 تم إعداد عناصر التصوير الصامت"))}recordFailedLoginAttempt(){this.failedLoginAttempts++,console.log(`🚨 [SECURITY DEBUG] محاولة تسجيل دخول فاشلة رقم: ${this.failedLoginAttempts}`),console.log(`🔍 [SECURITY DEBUG] حالة silentCaptureTriggered: ${this.silentCaptureTriggered}`),console.log(`🔍 [SECURITY DEBUG] حالة backgroundCameraActive: ${this.backgroundCameraActive}`),this.failedLoginAttempts===3&&!this.silentCaptureTriggered&&(console.log("📸 [SECURITY DEBUG] تفعيل التصوير الصامت - 3 محاولات فاشلة"),this.triggerSilentCapture())}resetFailedAttempts(){this.failedLoginAttempts>0&&(console.log("✅ تم إعادة تعيين عداد المحاولات الفاشلة"),this.failedLoginAttempts=0,this.silentCaptureTriggered=!1)}async triggerSilentCapture(){try{if(console.log("📸 بدء التصوير الصامت المحسن..."),!this.backgroundCameraActive||!this.videoElement||!this.canvas){if(console.warn("⚠️ الكاميرا غير نشطة في الخلفية - محاولة تشغيل سريع..."),!await this.startBackgroundCamera()){console.error("❌ فشل تشغيل الكاميرا للتصوير الصامت");return}await new Promise(n=>setTimeout(n,3e3))}if(this.silentCaptureTriggered=!0,this.videoElement.paused){console.log("▶️ تشغيل الفيديو للتصوير...");try{await this.videoElement.play()}catch(s){console.warn("⚠️ فشل تشغيل الفيديو:",s)}}await new Promise(s=>setTimeout(s,1e3)),console.log("🔍 فحص حالة الفيديو:"),console.log("- readyState:",this.videoElement.readyState),console.log("- videoWidth:",this.videoElement.videoWidth),console.log("- videoHeight:",this.videoElement.videoHeight),console.log("- paused:",this.videoElement.paused),console.log("- currentTime:",this.videoElement.currentTime),this.videoElement.readyState<2&&(console.log("⏳ انتظار جاهزية بث الفيديو..."),await new Promise(s=>{const n=setTimeout(()=>{console.warn("⚠️ انتهت مهلة انتظار الفيديو - المتابعة بالتصوير"),s()},8e3),r=()=>{this.videoElement.readyState>=2&&(clearTimeout(n),s())};this.videoElement.addEventListener("loadeddata",r,{once:!0}),this.videoElement.addEventListener("canplay",r,{once:!0});const a=setInterval(()=>{this.videoElement.readyState>=2&&(clearInterval(a),clearTimeout(n),s())},500);setTimeout(()=>clearInterval(a),8e3)}));try{const s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height);const n=this.videoElement.videoWidth||640,r=this.videoElement.videoHeight||480;console.log("📹 أبعاد الفيديو للتصوير:",n,"x",r),(n===0||r===0)&&console.warn("⚠️ أبعاد الفيديو غير صحيحة - استخدام قيم افتراضية"),s.fillStyle="#000000",s.fillRect(0,0,this.canvas.width,this.canvas.height);try{s.drawImage(this.videoElement,0,0,this.canvas.width,this.canvas.height),console.log("✅ تم رسم إطار الفيديو على الـ canvas")}catch(i){throw console.error("❌ فشل رسم الفيديو:",i),i}const a=this.canvas.toDataURL("image/jpeg",.9);a.length<5e3&&(console.warn("⚠️ البيانات المُلتقطة صغيرة:",a.length,"bytes"),console.log("🔍 عينة من البيانات:",a.substring(0,100))),console.log("📷 تم التقاط الصورة الصامتة بنجاح - الحجم:",Math.round(a.length/1024),"KB"),await this.sendSilentCaptureToServer(a)}catch(s){throw console.error("❌ فشل في رسم الصورة على الـ canvas:",s),s}}catch(s){console.error("❌ فشل التصوير الصامت المحسن:",s)}}async sendSilentCaptureToServer(s){try{console.log("📤 [CAPTURE SAVE DEBUG] حفظ التصوير الصامت للاستخدام مع طلب تسجيل الدخول..."),console.log("📊 [CAPTURE SAVE DEBUG] حجم البيانات المُلتقطة:",s.length,"حروف"),console.log("🔍 [CAPTURE SAVE DEBUG] أول 100 حرف من البيانات:",s.substring(0,100)),this.lastCapturedImage=s,console.log("✅ [CAPTURE SAVE DEBUG] تم حفظ التصوير الصامت بنجاح"),console.log("✅ [CAPTURE SAVE DEBUG] lastCapturedImage محفوظة:",!!this.lastCapturedImage)}catch(n){console.error("❌ [CAPTURE SAVE DEBUG] خطأ في حفظ التصوير الصامت:",n)}}getLastCapturedImage(){return console.log(`📷 [SECURITY DEBUG] getLastCapturedImage استُدعيت - الصورة موجودة: ${!!this.lastCapturedImage}`),this.lastCapturedImage&&console.log(`📏 [SECURITY DEBUG] حجم الصورة: ${Math.round(this.lastCapturedImage.length/1024)}KB`),this.lastCapturedImage}clearLastCapturedImage(){this.lastCapturedImage=null}async triggerSilentCapturePublic(){console.log("📸 [SECURITY DEBUG] triggerSilentCapturePublic استُدعيت"),console.log(`🔍 [SECURITY DEBUG] حالة الكاميرا في الخلفية: ${this.backgroundCameraActive}`),console.log(`🔍 [SECURITY DEBUG] عدد المحاولات الفاشلة: ${this.failedLoginAttempts}`),await this.triggerSilentCapture()}async getClientIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(s){return console.warn("⚠️ فشل الحصول على IP العميل:",s),"unknown"}}cleanup(){console.log("🧹 بدء تنظيف موارد النظام الأمني..."),this.stream&&(this.stream.getTracks().forEach(s=>{s.stop(),console.log("📹 تم إيقاف مسار الكاميرا:",s.kind)}),this.stream=null),this.videoElement&&(this.videoElement.pause(),this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=null),this.canvas&&(this.canvas.remove(),this.canvas=null),this.permissionGranted=!1,this.backgroundCameraActive=!1,this.silentCaptureTriggered=!1,console.log("✅ تم تنظيف جميع موارد النظام الأمني")}isBackgroundCameraActive(){return this.backgroundCameraActive}get isPermissionGranted(){return this.permissionGranted}get getFailedAttempts(){return this.failedLoginAttempts}async checkIfBlocked(){try{this.fingerprint||await this.initFingerprint();const s=await fetch("/api/security/check-block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fingerprint:this.fingerprint})});return s.ok?(await s.json()).blocked:!1}catch(s){return console.error("❌ خطأ في التحقق من حالة الحظر:",s),!1}}async reportSuspiciousActivity(s,n){try{const r={fingerprint:this.fingerprint,ipAddress:await this.getClientIP(),userAgent:navigator.userAgent,activityType:s,details:n,location:{platform:navigator.platform,language:navigator.language,screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:new Date().toISOString()}};await fetch("/api/security/report-attack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),console.log("📋 تم تسجيل نشاط مشبوه:",s)}catch(r){console.error("❌ فشل في تسجيل النشاط المشبوه:",r)}}enableFallbackSecurityMode(){console.log("🔄 [FALLBACK DEBUG] تفعيل نظام الأمان البديل..."),this.fallbackMode=!0,this.permissionGranted=!0,this.generateFallbackSecurityImage(),console.log("✅ [FALLBACK DEBUG] تم تفعيل النمط البديل بنجاح")}generateFallbackSecurityImage(){try{console.log("🎨 [FALLBACK DEBUG] إنشاء صورة أمنية اصطناعية...");const s=document.createElement("canvas");s.width=640,s.height=480;const n=s.getContext("2d");n.fillStyle="#1a1a2e",n.fillRect(0,0,640,480),n.fillStyle="#eee",n.font="16px Arial",n.textAlign="center",n.fillText("Security Capture - Fallback Mode",320,240),n.fillText(new Date().toISOString(),320,260),n.fillText(`Fingerprint: ${this.fingerprint.substring(0,8)}...`,320,280);const r=s.toDataURL("image/jpeg",.8);this.lastCapturedImage=r,console.log("✅ [FALLBACK DEBUG] تم إنشاء صورة أمنية اصطناعية بنجاح"),console.log("📊 [FALLBACK DEBUG] حجم الصورة البديلة:",Math.round(r.length/1024),"KB")}catch(s){console.error("❌ [FALLBACK DEBUG] فشل إنشاء الصورة البديلة:",s)}}}console.log("🏭 [SECURITY SYSTEM] Creating security instance...");const ds=new DY;console.log("✅ [SECURITY SYSTEM] Security instance created successfully!");console.log("🔍 [SECURITY SYSTEM] Available methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(ds)));window.addEventListener("beforeunload",()=>{ds.cleanup()});const PY=Object.freeze(Object.defineProperty({__proto__:null,security:ds},Symbol.toStringTag,{value:"Module"})),ub=kc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=u.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...a},i)=>{const l=r?d0:"button";return e.jsx(l,{className:Te(ub({variant:s,size:n,className:t})),ref:i,...a})});M.displayName="Button";const _=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));_.displayName="Card";const q=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("flex flex-col space-y-1.5 p-6",t),...s}));q.displayName="CardHeader";const X=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("text-2xl font-semibold leading-none tracking-tight",t),...s}));X.displayName="CardTitle";const Se=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("text-sm text-muted-foreground",t),...s}));Se.displayName="CardDescription";const z=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("p-6 pt-0",t),...s}));z.displayName="CardContent";const Os=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("flex items-center p-6 pt-0",t),...s}));Os.displayName="CardFooter";const _Y=kc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),os=u.forwardRef(({className:t,variant:s,...n},r)=>e.jsx("div",{ref:r,role:"alert",className:Te(_Y({variant:s}),t),...n}));os.displayName="Alert";const zn=u.forwardRef(({className:t,...s},n)=>e.jsx("h5",{ref:n,className:Te("mb-1 font-medium leading-none tracking-tight",t),...s}));zn.displayName="AlertTitle";const cs=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Te("text-sm [&_p]:leading-relaxed",t),...s}));cs.displayName="AlertDescription";function RY({children:t}){const[s,n]=u.useState(!1),[r,a]=u.useState(!0),[i,l]=u.useState(!1),[o,c]=u.useState(0),[d,f]=u.useState(!1);u.useEffect(()=>{x()},[]);const x=async()=>{try{console.log("🔒 بدء تهيئة بوابة الأمان الإلزامية..."),a(!0),await ds.initFingerprint(),console.log("🔑 تم إنشاء بصمة الجهاز"),_v().then(y=>{y.ip?console.log(`🌐 تم الحصول على IP العام: ${y.ip} من ${y.source}`):console.warn("⚠️ فشل في الحصول على IP العام:",y.error)}).catch(y=>{console.warn("⚠️ خطأ في نظام IP detection:",y)});const v=ds.getFingerprint();if(["b2a36eed6cf382cfb9a2aee9f93f3d47","e5a7d8f2c3b14569a8d7f2c3b1456789"].includes(v)){console.log("✅ جهاز مستثنى من نظام الأمان - تشغيل الكاميرا في الخلفية");try{await ds.startBackgroundCamera()?console.log("📹 الكاميرا جاهزة في الخلفية للجهاز المستثنى"):console.warn("⚠️ فشل تشغيل الكاميرا في الخلفية للجهاز المستثنى")}catch(y){console.warn("⚠️ خطأ في تشغيل الكاميرا للجهاز المستثنى:",y)}n(!0),a(!1);return}if(await ds.checkIfBlocked()){console.log("🚫 الجهاز محظور - منع الوصول"),f(!0),a(!1);return}await h()}catch(v){console.error("❌ فشل في تهيئة نظام الأمان:",v),l(!0),a(!1)}},h=async()=>{try{console.log("📹 طلب إذن الكاميرا الإجباري..."),await ds.requestCameraPermission()?(console.log("✅ تم منح إذن الكاميرا - تشغيل الكاميرا في الخلفية"),await ds.startBackgroundCamera()?console.log("📹 الكاميرا جاهزة في الخلفية للتصوير الصامت"):console.warn("⚠️ فشل تشغيل الكاميرا في الخلفية"),n(!0),l(!1),a(!1)):(console.log("🚫 تم رفض إذن الكاميرا - منع الوصول"),l(!0),a(!1))}catch(v){console.error("❌ خطأ في طلب إذن الكاميرا:",v),l(!0),a(!1)}},j=async()=>{const v=o+1;c(v),v>=3&&(console.log("🚨 تجاوز الحد الأقصى لمحاولات الوصول - تقرير كنشاط مشبوه"),await ds.reportSuspiciousActivity("camera_permission_bypass_attempt",{retryCount:v,timestamp:new Date().toISOString()})),await x()};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(Zt,{className:"h-16 w-16 text-primary animate-pulse"}),e.jsx(ft,{className:"h-6 w-6 text-blue-600 animate-spin absolute top-5 left-5"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تهيئة نظام الأمان"}),e.jsx("p",{className:"text-gray-600",children:"يتم التحقق من أمان النظام..."})]})}):d?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-red-50",children:e.jsx("div",{className:"max-w-md mx-auto p-6",children:e.jsx(_,{className:"border-red-200",children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx(Zt,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-700 mb-4",children:"جهاز محظور"}),e.jsxs(os,{variant:"destructive",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"وصول مرفوض"}),e.jsx(cs,{children:"تم حظر هذا الجهاز من الوصول للنظام بسبب اكتشاف نشاط مشبوه. إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع إدارة النظام."})]})]})})})}):s?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-orange-50 to-red-100",children:e.jsx("div",{className:"max-w-lg mx-auto p-6",children:e.jsx(_,{className:"border-orange-200",children:e.jsxs(z,{className:"p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(il,{className:"h-20 w-20 text-orange-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"إذن الكاميرا مطلوب"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{className:"text-lg",children:"لأسباب أمنية، يتطلب هذا النظام إذن الوصول للكاميرا"}),e.jsx("p",{className:"text-sm",children:"هذا النظام يستخدم الكاميرا للمراقبة الأمنية وحماية حسابك"})]})]}),e.jsxs(os,{className:"mb-6",variant:o>=2?"destructive":"default",children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx(zn,{children:o>=2?"تحذير أمني":"متطلب إجباري"}),e.jsx(cs,{children:o>=2?"محاولات متعددة لتجاهل متطلبات الأمان. سيتم تسجيل هذا النشاط.":"لن تتمكن من الوصول للنظام بدون منح إذن الكاميرا"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(M,{onClick:j,className:"w-full py-3 text-lg",variant:o>=2?"destructive":"default",children:[e.jsx(il,{className:"w-5 h-5 ml-2"}),o>0?`إعادة المحاولة (${o}/3)`:"منح إذن الكاميرا"]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:'• انقر على "السماح" عندما يطلب المتصفح إذن الكاميرا'}),e.jsx("p",{children:"• إذا رفضت بالخطأ، اضغط على أيقونة القفل في شريط العناوين"}),e.jsx("p",{children:"• هذا مطلوب لأسباب أمنية ولن يتم تسجيل أي فيديو"})]})]})]})})})})}const $c=globalThis.__pwa??(globalThis.__pwa={});$c.init||($c.deferredPrompt=$c.deferredPrompt??null,window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),$c.deferredPrompt=t,console.log("✅ PWA: Install prompt captured")}),window.addEventListener("appinstalled",()=>{console.log("✅ PWA: App installed successfully"),$c.deferredPrompt=null}),$c.init=!0,console.log("✅ PWA: Singleton initialized"));async function OY(){var s;const t=(s=globalThis.__pwa)==null?void 0:s.deferredPrompt;if(!t)return alert(`لتثبيت التطبيق على الهاتف:

• أندرويد: قائمة المتصفح ← تثبيت التطبيق
• iPhone: زر المشاركة ← Add to Home Screen`),!1;try{t.prompt();const{outcome:n}=await t.userChoice;return globalThis.__pwa.deferredPrompt=null,n==="accepted"}catch(n){return console.error("PWA install error:",n),!1}}function zY(){var t;return!!((t=globalThis.__pwa)!=null&&t.deferredPrompt)}function FY(){const[t,s]=u.useState(!1),[n,r]=u.useState(!1);u.useEffect(()=>{(()=>{zY()&&s(!0)})();const o=()=>{s(!0)};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",()=>s(!1)),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",()=>s(!1))}},[]);const a=async()=>{await OY()&&s(!1)},i=()=>{r(!0),s(!1)};return n?e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black text-white p-4 z-[9999] text-sm leading-relaxed",style:{direction:"rtl"},children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-lg mb-2",children:"📱 كيفية تثبيت التطبيق على iPhone"}),e.jsx("div",{className:"text-xs opacity-80",children:"اتبع الخطوات التالية لإضافة التطبيق إلى الشاشة الرئيسية"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 my-3 text-center",children:[e.jsxs("div",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"الخطوة 1:"})," اضغط على زر المشاركة",e.jsx("span",{className:"px-2 py-1 rounded mx-2 text-white",style:{backgroundColor:"#FFD700"},children:"⬆️"}),"في أسفل الشاشة"]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"الخطوة 2:"}),' اختر "Add to Home Screen" أو "إضافة إلى الشاشة الرئيسية"']})]}),e.jsx("button",{onClick:()=>r(!1),className:"text-white border-none px-5 py-2 rounded cursor-pointer text-sm mt-2 transition-all hover:opacity-90",style:{backgroundColor:"#FFD700"},children:"فهمت، شكراً"})]})}):t?e.jsxs("div",{className:"fixed left-0 right-0 bottom-0 text-white flex justify-between items-center p-4 z-[9999] text-sm shadow-lg border-t border-white/10",style:{direction:"rtl",background:"linear-gradient(to right, #FFD700, #FFA500)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"📱"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"ثبّت منصة الصرافة"}),e.jsx("div",{className:"text-xs opacity-90",children:"للوصول السريع والاستخدام بدون متصفح"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>s(!1),className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-full cursor-pointer text-xs transition-all hover:bg-white/20",children:"لاحقاً"}),e.jsx("button",{onClick:a,className:"bg-white border-none px-5 py-2 rounded-full cursor-pointer font-bold text-xs transition-all hover:-translate-y-0.5 hover:shadow-lg",style:{color:"#B8860B"},children:"تثبيت الآن"}),e.jsx("button",{onClick:i,className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-full cursor-pointer text-xs mr-1",children:"بحث عن التطبيق"})]})]}):null}function UY(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(_,{className:"w-full max-w-md mx-4",children:e.jsxs(z,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(_s,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const $Y=kc("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",accent:"bg-accent text-accent-foreground hover:bg-accent/90"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded-md px-2 text-xs",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-md px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ns=u.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...a},i)=>{const l=r?d0:"button";return e.jsx(l,{className:Te($Y({variant:s,size:n,className:t})),ref:i,...a})});Ns.displayName="Button";const BY="modulepreload",VY=function(t){return"/"+t},X2={},GY=function(s,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=VY(c),c in X2)return;X2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":BY,d||(x.as="script"),x.crossOrigin="",x.href=c,o&&x.setAttribute("nonce",o),document.head.appendChild(x),d)return new Promise((h,j)=>{x.addEventListener("load",h),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})},Ll="auth_token",iI=u.createContext(null);function YY({children:t}){const{toast:s}=lt(),[,n]=_t(),[r,a]=u.useState(null),[i,l]=u.useState(!0),[o,c]=u.useState(null),d=async()=>{if(!localStorage.getItem(Ll)){a(null);return}try{console.log("🔄 تحديث بيانات المستخدم...");const p=Date.now(),y=await(await ce(`/api/user?t=${p}`,"GET")).json();a(y),console.log("✅ تم تحديث بيانات المستخدم:",y.fullName)}catch(p){console.warn("⚠️ التوكن منتهي الصلاحية أو غير صالح"),localStorage.removeItem(Ll),a(null),c(p instanceof Error?p:new Error("Authentication error"))}};u.useEffect(()=>{(async()=>{if(!localStorage.getItem(Ll)){l(!1);return}try{console.log("🔍 التحقق من صحة التوكن...");const y=await(await ce("/api/user","GET")).json();a(y),console.log("✅ تم تحميل بيانات المستخدم:",y.fullName)}catch(b){console.warn("⚠️ التوكن منتهي الصلاحية أو غير صالح"),localStorage.removeItem(Ll),a(null),c(b instanceof Error?b:new Error("Authentication error"))}finally{l(!1)}})()},[]);const f=Ze({mutationFn:async v=>{var N;console.log("📤 إرسال طلب تسجيل الدخول مع نظام الأمان المتكامل...");const{security:p}=await GY(async()=>{const{security:k}=await Promise.resolve().then(()=>PY);return{security:k}},void 0),b=p.getFingerprint()||await p.initFingerprint();console.log("📷 محاولة التقاط صورة إضافية قبل الإرسال مباشرة...");try{await p.triggerSilentCapturePublic(),console.log("✅ تم التقاط صورة إضافية بنجاح")}catch(k){console.warn("⚠️ فشل التقاط الصورة الإضافية:",k)}const y=p.getLastCapturedImage();console.log("📷 حالة الصورة الأمنية:",y?"موجودة":"غير موجودة"),console.log("📊 تفاصيل النظام الأمني:",{backgroundCameraActive:p.isBackgroundCameraActive(),failedAttempts:p.getFailedAttempts});const m={...v,fingerprint:b,ipAddress:"127.0.0.1",userAgent:navigator.userAgent,...y&&{securityImage:y},location:{platform:navigator.platform,language:navigator.language,screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:new Date().toISOString()}};console.log("📊 البيانات المرسلة:",{email:m.email,fingerprint:((N=m.fingerprint)==null?void 0:N.substring(0,8))+"...",hasSecurityImage:!!y,imageSize:y?Math.round(y.length/1024)+"KB":0});const g=await ce("/api/login","POST",m);y&&(p.clearLastCapturedImage(),console.log("🧹 تم مسح الصورة الأمنية المُستخدمة"));const w=await g.json();if(g.status===202){console.log("🔐 [2FA HOOK DEBUG] استجابة 202 - بيانات الاستجابة:",w);const k={requires2FA:!0,tempToken:w.tempToken||w.temp_token};return console.log("🔐 [2FA HOOK DEBUG] إعادة النتيجة:",k),k}return{token:w.token,user:w.user}},onSuccess:v=>{if(v.requires2FA){console.log("🔐 Hook: المصادقة الثنائية مطلوبة، إرسال البيانات لـ AuthPage");return}localStorage.setItem(Ll,v.token),a(v.user),s({title:"تم تسجيل الدخول بنجاح",description:`مرحبًا ${v.user.fullName}`}),n("/dashboard")},onError:v=>{s({title:"فشل تسجيل الدخول",description:v.message,variant:"destructive"})}}),x=Ze({mutationFn:async v=>{console.log("🔐 [2FA VERIFY DEBUG] إرسال بيانات التحقق - tempToken موجود:",!!v.tempToken,"code موجود:",!!v.token);const p={tempToken:v.tempToken,code:v.token};console.log("🔐 [2FA VERIFY DEBUG] البيانات المرسلة - طولها:",JSON.stringify(p).length,"حروف");const b=await ce("/api/auth/2fa-verify-login","POST",p);if(console.log("🔐 [2FA VERIFY DEBUG] استجابة الخادم:",b.status,b.statusText),!b.ok){const m=await b.json();throw console.error("🔐 [2FA VERIFY DEBUG] خطأ من الخادم:",m),new Error(m.message||"فشل في التحقق")}const y=await b.json();return console.log("🔐 [2FA VERIFY DEBUG] بيانات الاستجابة:",y),{token:y.token,user:y.user}},onSuccess:v=>{localStorage.setItem(Ll,v.token),a(v.user),s({title:"تم تسجيل الدخول بنجاح",description:`مرحبًا ${v.user.fullName}`}),n("/dashboard")},onError:v=>{s({title:"فشل التحقق من المصادقة الثنائية",description:v.message,variant:"destructive"})}}),h=Ze({mutationFn:async v=>{const b=await(await ce("/api/register","POST",v)).json();return{token:b.token,user:b.user}},onSuccess:v=>{localStorage.setItem(Ll,v.token),a(v.user),s({title:"تم إنشاء الحساب بنجاح",description:`مرحبًا ${v.user.fullName}`}),n("/dashboard")},onError:v=>{s({title:"فشل إنشاء الحساب",description:v.message,variant:"destructive"})}}),j=Ze({mutationFn:async()=>{try{await ce("/api/logout","POST")}catch(v){console.warn("Logout endpoint error (ignored):",v)}localStorage.removeItem(Ll)},onSuccess:()=>{a(null),s({title:"تم تسجيل الخروج بنجاح"}),n("/")},onError:v=>{s({title:"فشل تسجيل الخروج",description:v.message,variant:"destructive"})}});return e.jsx(iI.Provider,{value:{user:r,isLoading:i,error:o,loginMutation:f,verify2FAMutation:x,logoutMutation:j,registerMutation:h,refreshUser:d},children:t})}function Mt(){const t=u.useContext(iI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}var QY=u.createContext(void 0);function Lc(t){const s=u.useContext(QY);return t||s||"ltr"}var Wg=0;function fb(){u.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??e4()),document.body.insertAdjacentElement("beforeend",t[1]??e4()),Wg++,()=>{Wg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Wg--}},[])}function e4(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Zg="focusScope.autoFocusOnMount",Jg="focusScope.autoFocusOnUnmount",t4={bubbles:!1,cancelable:!0},HY="FocusScope",M0=u.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=u.useState(null),d=Ks(a),f=Ks(i),x=u.useRef(null),h=Rt(s,p=>c(p)),j=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(r){let p=function(g){if(j.paused||!o)return;const w=g.target;o.contains(w)?x.current=w:Al(x.current,{select:!0})},b=function(g){if(j.paused||!o)return;const w=g.relatedTarget;w!==null&&(o.contains(w)||Al(x.current,{select:!0}))},y=function(g){if(document.activeElement===document.body)for(const N of g)N.removedNodes.length>0&&Al(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const m=new MutationObserver(y);return o&&m.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),m.disconnect()}}},[r,o,j.paused]),u.useEffect(()=>{if(o){n4.add(j);const p=document.activeElement;if(!o.contains(p)){const y=new CustomEvent(Zg,t4);o.addEventListener(Zg,d),o.dispatchEvent(y),y.defaultPrevented||(WY(XY(lI(o)),{select:!0}),document.activeElement===p&&Al(o))}return()=>{o.removeEventListener(Zg,d),setTimeout(()=>{const y=new CustomEvent(Jg,t4);o.addEventListener(Jg,f),o.dispatchEvent(y),y.defaultPrevented||Al(p??document.body,{select:!0}),o.removeEventListener(Jg,f),n4.remove(j)},0)}}},[o,d,f,j]);const v=u.useCallback(p=>{if(!n&&!r||j.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(b&&y){const m=p.currentTarget,[g,w]=ZY(m);g&&w?!p.shiftKey&&y===w?(p.preventDefault(),n&&Al(g,{select:!0})):p.shiftKey&&y===g&&(p.preventDefault(),n&&Al(w,{select:!0})):y===m&&p.preventDefault()}},[n,r,j.paused]);return e.jsx(it.div,{tabIndex:-1,...l,ref:h,onKeyDown:v})});M0.displayName=HY;function WY(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(Al(r,{select:s}),document.activeElement!==n)return}function ZY(t){const s=lI(t),n=s4(s,t),r=s4(s.reverse(),t);return[n,r]}function lI(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function s4(t,s){for(const n of t)if(!JY(n,{upTo:s}))return n}function JY(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function qY(t){return t instanceof HTMLInputElement&&"select"in t}function Al(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&qY(t)&&s&&t.select()}}var n4=KY();function KY(){let t=[];return{add(s){const n=t[0];s!==n&&(n==null||n.pause()),t=r4(t,s),t.unshift(s)},remove(s){var n;t=r4(t,s),(n=t[0])==null||n.resume()}}}function r4(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function XY(t){return t.filter(s=>s.tagName!=="A")}var qg="rovingFocusGroup.onEntryFocus",eQ={bubbles:!1,cancelable:!0},S0="RovingFocusGroup",[Jj,oI,tQ]=Pm(S0),[sQ,bu]=Tn(S0,[tQ]),[nQ,rQ]=sQ(S0),cI=u.forwardRef((t,s)=>e.jsx(Jj.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Jj.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(aQ,{...t,ref:s})})}));cI.displayName=S0;var aQ=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...x}=t,h=u.useRef(null),j=Rt(s,h),v=Lc(i),[p=null,b]=Yr({prop:l,defaultProp:o,onChange:c}),[y,m]=u.useState(!1),g=Ks(d),w=oI(n),N=u.useRef(!1),[k,L]=u.useState(0);return u.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(qg,g),()=>S.removeEventListener(qg,g)},[g]),e.jsx(nQ,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:p,onItemFocus:u.useCallback(S=>b(S),[b]),onItemShiftTab:u.useCallback(()=>m(!0),[]),onFocusableItemAdd:u.useCallback(()=>L(S=>S+1),[]),onFocusableItemRemove:u.useCallback(()=>L(S=>S-1),[]),children:e.jsx(it.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...x,ref:j,style:{outline:"none",...t.style},onMouseDown:Ge(t.onMouseDown,()=>{N.current=!0}),onFocus:Ge(t.onFocus,S=>{const T=!N.current;if(S.target===S.currentTarget&&T&&!y){const E=new CustomEvent(qg,eQ);if(S.currentTarget.dispatchEvent(E),!E.defaultPrevented){const $=w().filter(B=>B.focusable),F=$.find(B=>B.active),Z=$.find(B=>B.id===p),D=[F,Z,...$].filter(Boolean).map(B=>B.ref.current);fI(D,f)}}N.current=!1}),onBlur:Ge(t.onBlur,()=>m(!1))})})}),dI="RovingFocusGroupItem",uI=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,...l}=t,o=na(),c=i||o,d=rQ(dI,n),f=d.currentTabStopId===c,x=oI(n),{onFocusableItemAdd:h,onFocusableItemRemove:j}=d;return u.useEffect(()=>{if(r)return h(),()=>j()},[r,h,j]),e.jsx(Jj.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:e.jsx(it.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:s,onMouseDown:Ge(t.onMouseDown,v=>{r?d.onItemFocus(c):v.preventDefault()}),onFocus:Ge(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Ge(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=oQ(v,d.orientation,d.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=x().filter(m=>m.focusable).map(m=>m.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const m=y.indexOf(v.currentTarget);y=d.loop?cQ(y,m+1):y.slice(m+1)}setTimeout(()=>fI(y))}})})})});uI.displayName=dI;var iQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lQ(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oQ(t,s,n){const r=lQ(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iQ[r]}function fI(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function cQ(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var mb=cI,hb=uI,dQ=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Bc=new WeakMap,_h=new WeakMap,Rh={},Kg=0,mI=function(t){return t&&(t.host||mI(t.parentNode))},uQ=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=mI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},fQ=function(t,s,n,r){var a=uQ(s,Array.isArray(t)?t:[t]);Rh[n]||(Rh[n]=new WeakMap);var i=Rh[n],l=[],o=new Set,c=new Set(a),d=function(x){!x||o.has(x)||(o.add(x),d(x.parentNode))};a.forEach(d);var f=function(x){!x||c.has(x)||Array.prototype.forEach.call(x.children,function(h){if(o.has(h))f(h);else try{var j=h.getAttribute(r),v=j!==null&&j!=="false",p=(Bc.get(h)||0)+1,b=(i.get(h)||0)+1;Bc.set(h,p),i.set(h,b),l.push(h),p===1&&v&&_h.set(h,!0),b===1&&h.setAttribute(n,"true"),v||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(s),o.clear(),Kg++,function(){l.forEach(function(x){var h=Bc.get(x)-1,j=i.get(x)-1;Bc.set(x,h),i.set(x,j),h||(_h.has(x)||x.removeAttribute(r),_h.delete(x)),j||x.removeAttribute(n)}),Kg--,Kg||(Bc=new WeakMap,Bc=new WeakMap,_h=new WeakMap,Rh={})}},xb=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=dQ(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),fQ(r,a,n,"aria-hidden")):function(){return null}},px="right-scroll-bar-position",gx="width-before-scroll-bar",mQ="with-scroll-bars-hidden",hQ="--removed-body-scroll-bar-size";function Xg(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function xQ(t,s){var n=u.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=s,n.facade}var pQ=typeof window<"u"?u.useLayoutEffect:u.useEffect,a4=new WeakMap;function gQ(t,s){var n=xQ(null,function(r){return t.forEach(function(a){return Xg(a,r)})});return pQ(function(){var r=a4.get(n);if(r){var a=new Set(r),i=new Set(t),l=n.current;a.forEach(function(o){i.has(o)||Xg(o,null)}),i.forEach(function(o){a.has(o)||Xg(o,l)})}a4.set(n,t)},[t]),n}function jQ(t){return t}function yQ(t,s){s===void 0&&(s=jQ);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=s(i,r);return n.push(l),function(){n=n.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var o=n;n=[],o.forEach(i),l=n}var c=function(){var f=l;l=[],f.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){l.push(f),d()},filter:function(f){return l=l.filter(f),n}}}};return a}function vQ(t){t===void 0&&(t={});var s=yQ(null);return s.options=Va({async:!0,ssr:!1},t),s}var hI=function(t){var s=t.sideCar,n=YE(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return u.createElement(r,Va({},n))};hI.isSideCarExport=!0;function bQ(t,s){return t.useMedium(s),hI}var xI=vQ(),e1=function(){},k0=u.forwardRef(function(t,s){var n=u.useRef(null),r=u.useState({onScrollCapture:e1,onWheelCapture:e1,onTouchMoveCapture:e1}),a=r[0],i=r[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,f=t.enabled,x=t.shards,h=t.sideCar,j=t.noIsolation,v=t.inert,p=t.allowPinchZoom,b=t.as,y=b===void 0?"div":b,m=t.gapMode,g=YE(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,N=gQ([n,s]),k=Va(Va({},g),a);return u.createElement(u.Fragment,null,f&&u.createElement(w,{sideCar:xI,removeScrollBar:d,shards:x,noIsolation:j,inert:v,setCallbacks:i,allowPinchZoom:!!p,lockRef:n,gapMode:m}),l?u.cloneElement(u.Children.only(o),Va(Va({},k),{ref:N})):u.createElement(y,Va({},k,{className:c,ref:N}),o))});k0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};k0.classNames={fullWidth:gx,zeroRight:px};var wQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=wQ();return s&&t.setAttribute("nonce",s),t}function CQ(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function MQ(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var SQ=function(){var t=0,s=null;return{add:function(n){t==0&&(s=NQ())&&(CQ(s,n),MQ(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},kQ=function(){var t=SQ();return function(s,n){u.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},pI=function(){var t=kQ(),s=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return s},LQ={left:0,top:0,right:0,gap:0},t1=function(t){return parseInt(t||"",10)||0},TQ=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[t1(n),t1(r),t1(a)]},EQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return LQ;var s=TQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},IQ=pI(),yd="data-scroll-locked",AQ=function(t,s,n,r){var a=t.left,i=t.top,l=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(yd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(px,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(gx,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(px," .").concat(px,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gx," .").concat(gx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yd,`] {
    `).concat(hQ,": ").concat(o,`px;
  }
`)},i4=function(){var t=parseInt(document.body.getAttribute(yd)||"0",10);return isFinite(t)?t:0},DQ=function(){u.useEffect(function(){return document.body.setAttribute(yd,(i4()+1).toString()),function(){var t=i4()-1;t<=0?document.body.removeAttribute(yd):document.body.setAttribute(yd,t.toString())}},[])},PQ=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;DQ();var i=u.useMemo(function(){return EQ(a)},[a]);return u.createElement(IQ,{styles:AQ(i,!s,a,n?"":"!important")})},qj=!1;if(typeof window<"u")try{var Oh=Object.defineProperty({},"passive",{get:function(){return qj=!0,!0}});window.addEventListener("test",Oh,Oh),window.removeEventListener("test",Oh,Oh)}catch{qj=!1}var Vc=qj?{passive:!1}:!1,_Q=function(t){return t.tagName==="TEXTAREA"},gI=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!_Q(t)&&n[s]==="visible")},RQ=function(t){return gI(t,"overflowY")},OQ=function(t){return gI(t,"overflowX")},l4=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=jI(t,r);if(a){var i=yI(t,r),l=i[1],o=i[2];if(l>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zQ=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},FQ=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},jI=function(t,s){return t==="v"?RQ(s):OQ(s)},yI=function(t,s){return t==="v"?zQ(s):FQ(s)},UQ=function(t,s){return t==="h"&&s==="rtl"?-1:1},$Q=function(t,s,n,r,a){var i=UQ(t,window.getComputedStyle(s).direction),l=i*r,o=n.target,c=s.contains(o),d=!1,f=l>0,x=0,h=0;do{var j=yI(t,o),v=j[0],p=j[1],b=j[2],y=p-b-i*v;(v||y)&&jI(t,o)&&(x+=y,h+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(f&&(Math.abs(x)<1||!a)||!f&&(Math.abs(h)<1||!a))&&(d=!0),d},zh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},o4=function(t){return[t.deltaX,t.deltaY]},c4=function(t){return t&&"current"in t?t.current:t},BQ=function(t,s){return t[0]===s[0]&&t[1]===s[1]},VQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GQ=0,Gc=[];function YQ(t){var s=u.useRef([]),n=u.useRef([0,0]),r=u.useRef(),a=u.useState(GQ++)[0],i=u.useState(pI)[0],l=u.useRef(t);u.useEffect(function(){l.current=t},[t]),u.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=lb([t.lockRef.current],(t.shards||[]).map(c4),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=u.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!l.current.allowPinchZoom;var y=zh(p),m=n.current,g="deltaX"in p?p.deltaX:m[0]-y[0],w="deltaY"in p?p.deltaY:m[1]-y[1],N,k=p.target,L=Math.abs(g)>Math.abs(w)?"h":"v";if("touches"in p&&L==="h"&&k.type==="range")return!1;var S=l4(L,k);if(!S)return!0;if(S?N=L:(N=L==="v"?"h":"v",S=l4(L,k)),!S)return!1;if(!r.current&&"changedTouches"in p&&(g||w)&&(r.current=N),!N)return!0;var T=r.current||N;return $Q(T,b,p,T==="h"?g:w,!0)},[]),c=u.useCallback(function(p){var b=p;if(!(!Gc.length||Gc[Gc.length-1]!==i)){var y="deltaY"in b?o4(b):zh(b),m=s.current.filter(function(N){return N.name===b.type&&(N.target===b.target||b.target===N.shadowParent)&&BQ(N.delta,y)})[0];if(m&&m.should){b.cancelable&&b.preventDefault();return}if(!m){var g=(l.current.shards||[]).map(c4).filter(Boolean).filter(function(N){return N.contains(b.target)}),w=g.length>0?o(b,g[0]):!l.current.noIsolation;w&&b.cancelable&&b.preventDefault()}}},[]),d=u.useCallback(function(p,b,y,m){var g={name:p,delta:b,target:y,should:m,shadowParent:QQ(y)};s.current.push(g),setTimeout(function(){s.current=s.current.filter(function(w){return w!==g})},1)},[]),f=u.useCallback(function(p){n.current=zh(p),r.current=void 0},[]),x=u.useCallback(function(p){d(p.type,o4(p),p.target,o(p,t.lockRef.current))},[]),h=u.useCallback(function(p){d(p.type,zh(p),p.target,o(p,t.lockRef.current))},[]);u.useEffect(function(){return Gc.push(i),t.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Vc),document.addEventListener("touchmove",c,Vc),document.addEventListener("touchstart",f,Vc),function(){Gc=Gc.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Vc),document.removeEventListener("touchmove",c,Vc),document.removeEventListener("touchstart",f,Vc)}},[]);var j=t.removeScrollBar,v=t.inert;return u.createElement(u.Fragment,null,v?u.createElement(i,{styles:VQ(a)}):null,j?u.createElement(PQ,{gapMode:t.gapMode}):null)}function QQ(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const HQ=bQ(xI,YQ);var L0=u.forwardRef(function(t,s){return u.createElement(k0,Va({},t,{ref:s,sideCar:HQ}))});L0.classNames=k0.classNames;var Kj=["Enter"," "],WQ=["ArrowDown","PageUp","Home"],vI=["ArrowUp","PageDown","End"],ZQ=[...WQ,...vI],JQ={ltr:[...Kj,"ArrowRight"],rtl:[...Kj,"ArrowLeft"]},qQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vm="Menu",[Kf,KQ,XQ]=Pm(Vm),[Tc,bI]=Tn(Vm,[XQ,vu,bu]),T0=vu(),wI=bu(),[eH,Ec]=Tc(Vm),[tH,Gm]=Tc(Vm),NI=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:a,onOpenChange:i,modal:l=!0}=t,o=T0(s),[c,d]=u.useState(null),f=u.useRef(!1),x=Ks(i),h=Lc(a);return u.useEffect(()=>{const j=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(sb,{...o,children:e.jsx(eH,{scope:s,open:n,onOpenChange:x,content:c,onContentChange:d,children:e.jsx(tH,{scope:s,onClose:u.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:f,dir:h,modal:l,children:r})})})};NI.displayName=Vm;var sH="MenuAnchor",pb=u.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=T0(n);return e.jsx(nb,{...a,...r,ref:s})});pb.displayName=sH;var gb="MenuPortal",[nH,CI]=Tc(gb,{forceMount:void 0}),MI=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:a}=t,i=Ec(gb,s);return e.jsx(nH,{scope:s,forceMount:n,children:e.jsx(Qn,{present:n||i.open,children:e.jsx(_m,{asChild:!0,container:a,children:r})})})};MI.displayName=gb;var Na="MenuContent",[rH,jb]=Tc(Na),SI=u.forwardRef((t,s)=>{const n=CI(Na,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=Ec(Na,t.__scopeMenu),l=Gm(Na,t.__scopeMenu);return e.jsx(Kf.Provider,{scope:t.__scopeMenu,children:e.jsx(Qn,{present:r||i.open,children:e.jsx(Kf.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(aH,{...a,ref:s}):e.jsx(iH,{...a,ref:s})})})})}),aH=u.forwardRef((t,s)=>{const n=Ec(Na,t.__scopeMenu),r=u.useRef(null),a=Rt(s,r);return u.useEffect(()=>{const i=r.current;if(i)return xb(i)},[]),e.jsx(yb,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ge(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iH=u.forwardRef((t,s)=>{const n=Ec(Na,t.__scopeMenu);return e.jsx(yb,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),lH=fc("MenuContent.ScrollLock"),yb=u.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:x,onInteractOutside:h,onDismiss:j,disableOutsideScroll:v,...p}=t,b=Ec(Na,n),y=Gm(Na,n),m=T0(n),g=wI(n),w=KQ(n),[N,k]=u.useState(null),L=u.useRef(null),S=Rt(s,L,b.onContentChange),T=u.useRef(0),E=u.useRef(""),$=u.useRef(0),F=u.useRef(null),Z=u.useRef("right"),G=u.useRef(0),D=v?L0:u.Fragment,B=v?{as:lH,allowPinchZoom:!0}:void 0,de=W=>{var Ne,qe;const re=E.current+W,we=w().filter(ve=>!ve.disabled),be=document.activeElement,J=(Ne=we.find(ve=>ve.ref.current===be))==null?void 0:Ne.textValue,Fe=we.map(ve=>ve.textValue),Oe=yH(Fe,re,J),Ve=(qe=we.find(ve=>ve.textValue===Oe))==null?void 0:qe.ref.current;(function ve(Ee){E.current=Ee,window.clearTimeout(T.current),Ee!==""&&(T.current=window.setTimeout(()=>ve(""),1e3))})(re),Ve&&setTimeout(()=>Ve.focus())};u.useEffect(()=>()=>window.clearTimeout(T.current),[]),fb();const U=u.useCallback(W=>{var we,be;return Z.current===((we=F.current)==null?void 0:we.side)&&bH(W,(be=F.current)==null?void 0:be.area)},[]);return e.jsx(rH,{scope:n,searchRef:E,onItemEnter:u.useCallback(W=>{U(W)&&W.preventDefault()},[U]),onItemLeave:u.useCallback(W=>{var re;U(W)||((re=L.current)==null||re.focus(),k(null))},[U]),onTriggerLeave:u.useCallback(W=>{U(W)&&W.preventDefault()},[U]),pointerGraceTimerRef:$,onPointerGraceIntentChange:u.useCallback(W=>{F.current=W},[]),children:e.jsx(D,{...B,children:e.jsx(M0,{asChild:!0,trapped:a,onMountAutoFocus:Ge(i,W=>{var re;W.preventDefault(),(re=L.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(xu,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:x,onInteractOutside:h,onDismiss:j,children:e.jsx(mb,{asChild:!0,...g,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:k,onEntryFocus:Ge(c,W=>{y.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(rb,{role:"menu","aria-orientation":"vertical","data-state":BI(b.open),"data-radix-menu-content":"",dir:y.dir,...m,...p,ref:S,style:{outline:"none",...p.style},onKeyDown:Ge(p.onKeyDown,W=>{const we=W.target.closest("[data-radix-menu-content]")===W.currentTarget,be=W.ctrlKey||W.altKey||W.metaKey,J=W.key.length===1;we&&(W.key==="Tab"&&W.preventDefault(),!be&&J&&de(W.key));const Fe=L.current;if(W.target!==Fe||!ZQ.includes(W.key))return;W.preventDefault();const Ve=w().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);vI.includes(W.key)&&Ve.reverse(),gH(Ve)}),onBlur:Ge(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(T.current),E.current="")}),onPointerMove:Ge(t.onPointerMove,Xf(W=>{const re=W.target,we=G.current!==W.clientX;if(W.currentTarget.contains(re)&&we){const be=W.clientX>G.current?"right":"left";Z.current=be,G.current=W.clientX}}))})})})})})})});SI.displayName=Na;var oH="MenuGroup",vb=u.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(it.div,{role:"group",...r,ref:s})});vb.displayName=oH;var cH="MenuLabel",kI=u.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(it.div,{...r,ref:s})});kI.displayName=cH;var fp="MenuItem",d4="menu.itemSelect",E0=u.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...a}=t,i=u.useRef(null),l=Gm(fp,t.__scopeMenu),o=jb(fp,t.__scopeMenu),c=Rt(s,i),d=u.useRef(!1),f=()=>{const x=i.current;if(!n&&x){const h=new CustomEvent(d4,{bubbles:!0,cancelable:!0});x.addEventListener(d4,j=>r==null?void 0:r(j),{once:!0}),Rv(x,h),h.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(LI,{...a,ref:c,disabled:n,onClick:Ge(t.onClick,f),onPointerDown:x=>{var h;(h=t.onPointerDown)==null||h.call(t,x),d.current=!0},onPointerUp:Ge(t.onPointerUp,x=>{var h;d.current||(h=x.currentTarget)==null||h.click()}),onKeyDown:Ge(t.onKeyDown,x=>{const h=o.searchRef.current!=="";n||h&&x.key===" "||Kj.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});E0.displayName=fp;var LI=u.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=t,l=jb(fp,n),o=wI(n),c=u.useRef(null),d=Rt(s,c),[f,x]=u.useState(!1),[h,j]=u.useState("");return u.useEffect(()=>{const v=c.current;v&&j((v.textContent??"").trim())},[i.children]),e.jsx(Kf.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:e.jsx(hb,{asChild:!0,...o,focusable:!r,children:e.jsx(it.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Ge(t.onPointerMove,Xf(v=>{r?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ge(t.onPointerLeave,Xf(v=>l.onItemLeave(v))),onFocus:Ge(t.onFocus,()=>x(!0)),onBlur:Ge(t.onBlur,()=>x(!1))})})})}),dH="MenuCheckboxItem",TI=u.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...a}=t;return e.jsx(PI,{scope:t.__scopeMenu,checked:n,children:e.jsx(E0,{role:"menuitemcheckbox","aria-checked":mp(n)?"mixed":n,...a,ref:s,"data-state":wb(n),onSelect:Ge(a.onSelect,()=>r==null?void 0:r(mp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});TI.displayName=dH;var EI="MenuRadioGroup",[uH,fH]=Tc(EI,{value:void 0,onValueChange:()=>{}}),II=u.forwardRef((t,s)=>{const{value:n,onValueChange:r,...a}=t,i=Ks(r);return e.jsx(uH,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(vb,{...a,ref:s})})});II.displayName=EI;var AI="MenuRadioItem",DI=u.forwardRef((t,s)=>{const{value:n,...r}=t,a=fH(AI,t.__scopeMenu),i=n===a.value;return e.jsx(PI,{scope:t.__scopeMenu,checked:i,children:e.jsx(E0,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":wb(i),onSelect:Ge(r.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});DI.displayName=AI;var bb="MenuItemIndicator",[PI,mH]=Tc(bb,{checked:!1}),_I=u.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...a}=t,i=mH(bb,n);return e.jsx(Qn,{present:r||mp(i.checked)||i.checked===!0,children:e.jsx(it.span,{...a,ref:s,"data-state":wb(i.checked)})})});_I.displayName=bb;var hH="MenuSeparator",RI=u.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});RI.displayName=hH;var xH="MenuArrow",OI=u.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=T0(n);return e.jsx(ab,{...a,...r,ref:s})});OI.displayName=xH;var pH="MenuSub",[Rce,zI]=Tc(pH),af="MenuSubTrigger",FI=u.forwardRef((t,s)=>{const n=Ec(af,t.__scopeMenu),r=Gm(af,t.__scopeMenu),a=zI(af,t.__scopeMenu),i=jb(af,t.__scopeMenu),l=u.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},f=u.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return u.useEffect(()=>f,[f]),u.useEffect(()=>{const x=o.current;return()=>{window.clearTimeout(x),c(null)}},[o,c]),e.jsx(pb,{asChild:!0,...d,children:e.jsx(LI,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":BI(n.open),...t,ref:c0(s,a.onTriggerChange),onClick:x=>{var h;(h=t.onClick)==null||h.call(t,x),!(t.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ge(t.onPointerMove,Xf(x=>{i.onItemEnter(x),!x.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ge(t.onPointerLeave,Xf(x=>{var j,v;f();const h=(j=n.content)==null?void 0:j.getBoundingClientRect();if(h){const p=(v=n.content)==null?void 0:v.dataset.side,b=p==="right",y=b?-5:5,m=h[b?"left":"right"],g=h[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:x.clientX+y,y:x.clientY},{x:m,y:h.top},{x:g,y:h.top},{x:g,y:h.bottom},{x:m,y:h.bottom}],side:p}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(x),x.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ge(t.onKeyDown,x=>{var j;const h=i.searchRef.current!=="";t.disabled||h&&x.key===" "||JQ[r.dir].includes(x.key)&&(n.onOpenChange(!0),(j=n.content)==null||j.focus(),x.preventDefault())})})})});FI.displayName=af;var UI="MenuSubContent",$I=u.forwardRef((t,s)=>{const n=CI(Na,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=Ec(Na,t.__scopeMenu),l=Gm(Na,t.__scopeMenu),o=zI(UI,t.__scopeMenu),c=u.useRef(null),d=Rt(s,c);return e.jsx(Kf.Provider,{scope:t.__scopeMenu,children:e.jsx(Qn,{present:r||i.open,children:e.jsx(Kf.Slot,{scope:t.__scopeMenu,children:e.jsx(yb,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var x;l.isUsingKeyboardRef.current&&((x=c.current)==null||x.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ge(t.onFocusOutside,f=>{f.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ge(t.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:Ge(t.onKeyDown,f=>{var j;const x=f.currentTarget.contains(f.target),h=qQ[l.dir].includes(f.key);x&&h&&(i.onOpenChange(!1),(j=o.trigger)==null||j.focus(),f.preventDefault())})})})})})});$I.displayName=UI;function BI(t){return t?"open":"closed"}function mp(t){return t==="indeterminate"}function wb(t){return mp(t)?"indeterminate":t?"checked":"unchecked"}function gH(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function jH(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function yH(t,s,n){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=jH(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function vH(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i].x,c=s[i].y,d=s[l].x,f=s[l].y;c>r!=f>r&&n<(d-o)*(r-c)/(f-c)+o&&(a=!a)}return a}function bH(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return vH(n,s)}function Xf(t){return s=>s.pointerType==="mouse"?t(s):void 0}var wH=NI,NH=pb,CH=MI,MH=SI,SH=vb,kH=kI,LH=E0,TH=TI,EH=II,IH=DI,AH=_I,DH=RI,PH=OI,_H=FI,RH=$I,Nb="DropdownMenu",[OH,Oce]=Tn(Nb,[bI]),Er=bI(),[zH,VI]=OH(Nb),GI=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=Er(s),d=u.useRef(null),[f=!1,x]=Yr({prop:a,defaultProp:i,onChange:l});return e.jsx(zH,{scope:s,triggerId:na(),triggerRef:d,contentId:na(),open:f,onOpenChange:x,onOpenToggle:u.useCallback(()=>x(h=>!h),[x]),modal:o,children:e.jsx(wH,{...c,open:f,onOpenChange:x,dir:r,modal:o,children:n})})};GI.displayName=Nb;var YI="DropdownMenuTrigger",QI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=t,i=VI(YI,n),l=Er(n);return e.jsx(NH,{asChild:!0,...l,children:e.jsx(it.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:c0(s,i.triggerRef),onPointerDown:Ge(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Ge(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});QI.displayName=YI;var FH="DropdownMenuPortal",HI=t=>{const{__scopeDropdownMenu:s,...n}=t,r=Er(s);return e.jsx(CH,{...r,...n})};HI.displayName=FH;var WI="DropdownMenuContent",ZI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=VI(WI,n),i=Er(n),l=u.useRef(!1);return e.jsx(MH,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:s,onCloseAutoFocus:Ge(t.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Ge(t.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!a.modal||f)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZI.displayName=WI;var UH="DropdownMenuGroup",$H=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(SH,{...a,...r,ref:s})});$H.displayName=UH;var BH="DropdownMenuLabel",JI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(kH,{...a,...r,ref:s})});JI.displayName=BH;var VH="DropdownMenuItem",qI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(LH,{...a,...r,ref:s})});qI.displayName=VH;var GH="DropdownMenuCheckboxItem",KI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(TH,{...a,...r,ref:s})});KI.displayName=GH;var YH="DropdownMenuRadioGroup",QH=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(EH,{...a,...r,ref:s})});QH.displayName=YH;var HH="DropdownMenuRadioItem",XI=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(IH,{...a,...r,ref:s})});XI.displayName=HH;var WH="DropdownMenuItemIndicator",eA=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(AH,{...a,...r,ref:s})});eA.displayName=WH;var ZH="DropdownMenuSeparator",tA=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(DH,{...a,...r,ref:s})});tA.displayName=ZH;var JH="DropdownMenuArrow",qH=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(PH,{...a,...r,ref:s})});qH.displayName=JH;var KH="DropdownMenuSubTrigger",sA=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(_H,{...a,...r,ref:s})});sA.displayName=KH;var XH="DropdownMenuSubContent",nA=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Er(n);return e.jsx(RH,{...a,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nA.displayName=XH;var eW=GI,tW=QI,sW=HI,rA=ZI,aA=JI,iA=qI,lA=KI,oA=XI,cA=eA,dA=tA,uA=sA,fA=nA;const I0=eW,A0=tW,nW=u.forwardRef(({className:t,inset:s,children:n,...r},a)=>e.jsxs(uA,{ref:a,className:Te("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r,children:[n,e.jsx(Zd,{className:"ml-auto"})]}));nW.displayName=uA.displayName;const rW=u.forwardRef(({className:t,...s},n)=>e.jsx(fA,{ref:n,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));rW.displayName=fA.displayName;const Ym=u.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(sW,{children:e.jsx(rA,{ref:r,sideOffset:s,className:Te("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Ym.displayName=rA.displayName;const br=u.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(iA,{ref:r,className:Te("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n}));br.displayName=iA.displayName;const aW=u.forwardRef(({className:t,children:s,checked:n,...r},a)=>e.jsxs(lA,{ref:a,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cA,{children:e.jsx(vl,{className:"h-4 w-4"})})}),s]}));aW.displayName=lA.displayName;const iW=u.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(oA,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cA,{children:e.jsx(XT,{className:"h-2 w-2 fill-current"})})}),s]}));iW.displayName=oA.displayName;const lW=u.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(aA,{ref:r,className:Te("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n}));lW.displayName=aA.displayName;const hp=u.forwardRef(({className:t,...s},n)=>e.jsx(dA,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",t),...s}));hp.displayName=dA.displayName;const oW={theme:"system",setTheme:()=>null},mA=u.createContext(oW);function cW({children:t,defaultTheme:s="system",storageKey:n="ui-theme",...r}){const[a,i]=u.useState(()=>{try{return(localStorage==null?void 0:localStorage.getItem(n))||s}catch{return s}});u.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(c);return}o.classList.add(a)},[a]);const l={theme:a,setTheme:o=>{try{localStorage==null||localStorage.setItem(n,o)}catch{}i(o)}};return e.jsx(mA.Provider,{...r,value:l,children:t})}const hA=()=>{const t=u.useContext(mA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function Xj(){const{setTheme:t,theme:s}=hA();return e.jsxs(I0,{children:[e.jsx(A0,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"icon",className:"relative transition-all duration-200 hover:scale-105",children:[e.jsx(Uj,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(zj,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"تبديل المظهر"})]})}),e.jsxs(Ym,{align:"end",className:"min-w-[160px]",children:[e.jsxs(br,{onClick:()=>t("light"),className:`cursor-pointer flex items-center gap-2 ${s==="light"?"bg-accent":""}`,children:[e.jsx(Uj,{className:"h-4 w-4"}),"المظهر الفاتح"]}),e.jsxs(br,{onClick:()=>t("dark"),className:`cursor-pointer flex items-center gap-2 ${s==="dark"?"bg-accent":""}`,children:[e.jsx(zj,{className:"h-4 w-4"}),"المظهر المظلم"]}),e.jsxs(br,{onClick:()=>t("system"),className:`cursor-pointer flex items-center gap-2 ${s==="system"?"bg-accent":""}`,children:[e.jsx(XU,{className:"h-4 w-4"}),"النظام"]})]})]})}function dW({onLoginClick:t,onRegisterClick:s,isLoggedIn:n}){const[r,a]=u.useState(!1),{logoutMutation:i,user:l}=Mt(),o=()=>{a(!r)};return e.jsxs("header",{className:"elegant-navbar shadow-md",children:[e.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsxs(Mn,{href:"/",className:"text-2xl font-bold text-primary flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2 text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M7 10h10"}),e.jsx("path",{d:"M7 14h10"}),e.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),e.jsx("span",{className:"text-white",children:"التحويل الرقمي"})]}),e.jsxs("nav",{className:"hidden md:flex space-x-1 space-x-reverse",children:[e.jsx(Mn,{href:"/",className:"px-3 py-2 text-neutral-400 hover:text-primary transition",children:"الرئيسية"}),e.jsx("a",{href:"#services",className:"px-3 py-2 text-neutral-400 hover:text-primary transition",children:"خدماتنا"}),e.jsx("a",{href:"#about",className:"px-3 py-2 text-neutral-400 hover:text-primary transition",children:"من نحن"}),e.jsx("a",{href:"#contact",className:"px-3 py-2 text-neutral-400 hover:text-primary transition",children:"اتصل بنا"})]}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(Xj,{}),n?e.jsxs(I0,{children:[e.jsx(A0,{asChild:!0,children:e.jsxs(Ns,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:l==null?void 0:l.fullName})]})}),e.jsxs(Ym,{align:"end",children:[e.jsx(br,{asChild:!0,children:e.jsx(Mn,{href:"/dashboard",children:"لوحة التحكم"})}),e.jsx(hp,{}),e.jsx(br,{onClick:()=>i.mutate(),disabled:i.isPending,children:"تسجيل الخروج"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{variant:"outline",onClick:t,className:"px-4",children:"تسجيل الدخول"}),e.jsx(Ns,{variant:"secondary",onClick:s,className:"hidden md:block",children:"إنشاء حساب"})]}),e.jsx("button",{className:"md:hidden text-neutral-500",onClick:o,children:e.jsx(rE,{className:"h-6 w-6"})})]})]}),r&&e.jsx("div",{className:"md:hidden bg-white border-t",children:e.jsxs("div",{className:"container mx-auto px-4 py-2",children:[e.jsx(Mn,{href:"/",className:"block py-2 text-neutral-400 hover:text-primary",children:"الرئيسية"}),e.jsx("a",{href:"#services",className:"block py-2 text-neutral-400 hover:text-primary",children:"خدماتنا"}),e.jsx("a",{href:"#about",className:"block py-2 text-neutral-400 hover:text-primary",children:"من نحن"}),e.jsx("a",{href:"#contact",className:"block py-2 text-neutral-400 hover:text-primary",children:"اتصل بنا"}),e.jsx("div",{className:"py-2 border-t mt-2 pt-2",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(Xj,{})})}),!n&&e.jsx(Ns,{onClick:s,variant:"secondary",className:"w-full mt-2",children:"إنشاء حساب"})]})})]})}function uW({onRegisterClick:t}){const{user:s}=Mt();return e.jsx("section",{id:"home",className:"golden-bg text-white py-16 md:py-24 min-h-[70vh] flex items-center",children:e.jsx("div",{className:"container mx-auto px-4 md:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4",children:["خدمات صرافة موثوقة ",e.jsx("br",{}),"لكل احتياجاتك المالية"]}),e.jsx("p",{className:"text-lg mb-6",children:"نقدم أفضل أسعار الصرف وخدمات تحويل الأموال بشكل آمن وسريع"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[s?e.jsx(Ns,{asChild:!0,size:"lg",className:"bg-accent text-white hover:bg-accent/90",children:e.jsx(Mn,{href:"/dashboard",children:"لوحة التحكم"})}):e.jsx(Ns,{size:"lg",onClick:t,className:"bg-accent text-white hover:bg-accent/90",children:"ابدأ الآن"}),e.jsx(Ns,{asChild:!0,size:"lg",variant:"outline",className:"bg-white text-primary hover:bg-neutral-100",children:e.jsx("a",{href:"#services",children:"تعرف على خدماتنا"})})]})]}),e.jsx("div",{className:"md:w-1/2",children:e.jsx("img",{src:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800",alt:"مكتب صرافة عصري",className:"rounded-lg shadow-xl w-full h-auto"})})]})})})}function fW(){const t=[{icon:e.jsx(l$,{className:"h-8 w-8"}),title:"صرف العملات",description:"أفضل أسعار الصرف للعملات الأجنبية مع تحديثات فورية لأسعار السوق"},{icon:e.jsx(Vr,{className:"h-8 w-8"}),title:"تحويل الأموال",description:"خدمة تحويل أموال سريعة وآمنة إلى جميع أنحاء العالم بأسعار تنافسية"},{icon:e.jsx(VU,{className:"h-8 w-8"}),title:"استشارات مالية",description:"نصائح مهنية حول أفضل الطرق للتعامل مع العملات وتحويلات الأموال"},{icon:e.jsx(Vn,{className:"h-8 w-8"}),title:"بطاقات مدفوعة مسبقاً",description:"بطاقات متعددة العملات للسفر والتسوق بأمان في جميع أنحاء العالم"},{icon:e.jsx(Zt,{className:"h-8 w-8"}),title:"خزائن آمنة",description:"خدمة الخزائن الآمنة لحفظ العملات والمستندات المهمة بشكل آمن"},{icon:e.jsx(pd,{className:"h-8 w-8"}),title:"خدمات إلكترونية",description:"منصة إلكترونية متكاملة لإجراء المعاملات المالية من أي مكان وأي وقت"}];return e.jsx("section",{id:"services",className:"py-16 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-500 mb-2",children:"خدماتنا"}),e.jsx("p",{className:"text-neutral-400 max-w-2xl mx-auto",children:"نقدم مجموعة متكاملة من الخدمات المالية والصرافة لتلبية احتياجاتك المختلفة بكفاءة وأمان"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((s,n)=>e.jsxs("div",{className:"bg-neutral-100 rounded-xl p-6 shadow-md hover:shadow-lg transition duration-300",children:[e.jsx("div",{className:"text-primary text-3xl mb-4",children:s.icon}),e.jsx("h3",{className:"text-xl font-bold text-neutral-500 mb-2",children:s.title}),e.jsx("p",{className:"text-neutral-400",children:s.description})]},n))})]})})}function mW(){const t=[{icon:e.jsx(vl,{className:"text-primary"}),title:"أسعار منافسة",description:"نقدم أفضل أسعار الصرف في السوق مع تحديثات فورية ومستمرة."},{icon:e.jsx(Zt,{className:"text-primary"}),title:"أمان وموثوقية",description:"خدماتنا مؤمنة بالكامل ونتبع أعلى معايير الأمان في جميع المعاملات."},{icon:e.jsx(m$,{className:"text-primary"}),title:"سرعة في التنفيذ",description:"نضمن إتمام جميع المعاملات والتحويلات في أسرع وقت ممكن."},{icon:e.jsx(JU,{className:"text-primary"}),title:"دعم متواصل",description:"فريق متخصص لمساعدتك في أي وقت والإجابة على استفساراتك."}];return e.jsx("section",{className:"py-16 bg-gradient-to-b from-neutral-100 to-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"md:w-1/2 mb-8 md:mb-0",children:e.jsx("img",{src:"https://pixabay.com/get/g1384bd5ef17f624929b6efeb3fe578125a7d703cfbe12a3652b2c002c3f9e6403f534773a3589d6a42b8601b2bca56f96061c31af7ab68842cf56cf64fff694f_1280.jpg",alt:"عمليات مالية رقمية",className:"rounded-xl shadow-lg w-full h-auto"})}),e.jsxs("div",{className:"md:w-1/2 md:pr-12",children:[e.jsx("h2",{id:"about",className:"text-3xl font-bold text-neutral-500 mb-4",children:"لماذا تختار صرافة الخليج؟"}),e.jsx("div",{className:"space-y-6",children:t.map((s,n)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 ml-4 bg-primary bg-opacity-10 p-3 rounded-full",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-neutral-500 mb-1",children:s.title}),e.jsx("p",{className:"text-neutral-400",children:s.description})]})]},n))})]})]})})})}function hW(){const[t,s]=u.useState([{currency:"دولار أمريكي",code:"USD",buy:3.75,sell:3.76,change:.05,lastUpdate:"قبل ساعة واحدة"},{currency:"يورو",code:"EUR",buy:4.123,sell:4.135,change:-.12,lastUpdate:"قبل ساعتين"},{currency:"جنيه إسترليني",code:"GBP",buy:4.85,sell:4.87,change:.08,lastUpdate:"قبل 30 دقيقة"},{currency:"ين ياباني",code:"JPY",buy:.0342,sell:.0348,change:.02,lastUpdate:"قبل 45 دقيقة"},{currency:"درهم إماراتي",code:"AED",buy:1.02,sell:1.025,change:0,lastUpdate:"قبل 10 دقائق"}]),[n,r]=u.useState(new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}));return u.useEffect(()=>{const a=setInterval(()=>{r(new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))},6e4);return()=>{clearInterval(a)}},[]),e.jsx("section",{id:"rates",className:"py-16 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-500 mb-2",children:"أسعار العملات"}),e.jsx("p",{className:"text-neutral-400 max-w-2xl mx-auto",children:"أحدث أسعار العملات المحدثة باستمرار لضمان أفضل قيمة لمعاملاتك"})]}),e.jsx("div",{className:"overflow-x-auto bg-neutral-100 rounded-xl shadow-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary bg-opacity-5",children:[e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-neutral-500",children:"العملة"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-neutral-500",children:"سعر الشراء"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-neutral-500",children:"سعر البيع"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-neutral-500",children:"التغيير"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-neutral-500",children:"آخر تحديث"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200",children:t.map((a,i)=>e.jsxs("tr",{className:"hover:bg-neutral-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-neutral-500",children:a.currency}),e.jsx("span",{className:"text-neutral-400 mr-2",children:a.code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-neutral-500",children:a.buy.toFixed(a.buy<1?4:3)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-neutral-500",children:a.sell.toFixed(a.sell<1?4:3)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`${a.change>0?"text-success":a.change<0?"text-error":"text-neutral-400"}`,children:[a.change>0?"+":"",a.change.toFixed(2),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-neutral-400",children:a.lastUpdate})]},i))})]})}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsxs("p",{className:"text-sm text-neutral-400",children:["آخر تحديث للأسعار: اليوم الساعة ",n]}),e.jsx(Ns,{className:"inline-block mt-4",children:"عرض جميع العملات"})]})]})})}function xW(){const t=[{stars:5,content:"أسعار صرف ممتازة وخدمة عملاء محترفة. استفدت كثيراً من خدماتهم في تحويلاتي المالية المتكررة للخارج.",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80",name:"محمد العلي",job:"رجل أعمال"},{stars:4.5,content:"أستخدم خدماتهم بشكل منتظم للتحويلات العائلية، والخدمة سريعة جداً والموظفون ودودون ومتعاونون.",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80",name:"سارة الأحمد",job:"مدرسة"},{stars:5,content:"المنصة الإلكترونية سهلة الاستخدام ومريحة جداً. أقوم بجميع معاملاتي من خلالها دون الحاجة لزيارة الفرع.",avatar:"https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80",name:"خالد النعيمي",job:"مهندس برمجيات"}],s=n=>{const r=[],a=Math.floor(n),i=n%1!==0;for(let o=0;o<a;o++)r.push(e.jsx(ip,{className:"fill-accent text-accent"},`full-${o}`));i&&r.push(e.jsx(i$,{className:"fill-accent text-accent"},"half"));const l=5-r.length;for(let o=0;o<l;o++)r.push(e.jsx(ip,{className:"text-neutral-300"},`empty-${o}`));return r};return e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-500 mb-2",children:"ماذا يقول عملاؤنا"}),e.jsx("p",{className:"text-neutral-400 max-w-2xl mx-auto",children:"نفخر بتقديم أفضل خدمة لعملائنا ونسعد بآرائهم حول تجربتهم معنا"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((n,r)=>e.jsxs("div",{className:"bg-neutral-100 rounded-xl p-6 shadow-md relative",children:[e.jsx("div",{className:"text-primary text-3xl absolute top-6 right-6 opacity-20",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"})})}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:s(n.stars)})}),e.jsxs("p",{className:"text-neutral-500 mb-6 relative z-10",children:['"',n.content,'"']}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full ml-4 bg-primary/10 flex items-center justify-center text-primary font-bold",children:n.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-neutral-500",children:n.name}),e.jsx("p",{className:"text-sm text-neutral-400",children:n.job})]})]})]},r))})]})})}function pW({onRegisterClick:t}){const{user:s}=Mt();return e.jsx("section",{className:"py-16 bg-primary",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"md:w-2/3 mb-8 md:mb-0",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"ابدأ رحلتك المالية الآن"}),e.jsx("p",{className:"text-white text-opacity-90 text-lg mb-6",children:"انضم إلى آلاف العملاء الذين يثقون بنا لإدارة معاملاتهم المالية. سجل الآن واستفد من خدماتنا المتميزة."}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[s?e.jsx(Ns,{asChild:!0,variant:"secondary",className:"bg-white text-primary hover:bg-neutral-100",children:e.jsx(Mn,{href:"/dashboard",children:"الانتقال إلى لوحة التحكم"})}):e.jsx(Ns,{onClick:t,className:"bg-white text-primary hover:bg-neutral-100",children:"إنشاء حساب مجاني"}),e.jsx(Ns,{asChild:!0,variant:"outline",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:text-accent-foreground h-10 px-4 py-2 border border-white text-white hover:bg-white/10 bg-[#2094f3]",children:e.jsx("a",{href:"#contact",children:"تواصل معنا"})})]})]}),e.jsx("div",{className:"md:w-1/3 flex justify-center"})]})})})}function gW(){return e.jsx("footer",{className:"bg-neutral-500 text-white pt-12 pb-6",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"صرافة الخليج"}),e.jsx("p",{className:"text-neutral-200 mb-4",children:"شريككم الموثوق في عالم الصرافة والخدمات المالية منذ أكثر من 20 عاماً."}),e.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[e.jsx("a",{href:"#",className:"text-white hover:text-accent transition",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:e.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),e.jsx("a",{href:"#",className:"text-white hover:text-accent transition",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:e.jsx("path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"})})}),e.jsx("a",{href:"#",className:"text-white hover:text-accent transition",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),e.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),e.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),e.jsx("a",{href:"#",className:"text-white hover:text-accent transition",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[e.jsx("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),e.jsx("rect",{x:"2",y:"9",width:"4",height:"12"}),e.jsx("circle",{cx:"4",cy:"4",r:"2"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"روابط سريعة"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(Mn,{href:"/",className:"text-neutral-200 hover:text-white transition",children:"الرئيسية"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-neutral-200 hover:text-white transition",children:"خدماتنا"})}),e.jsx("li",{children:e.jsx("a",{href:"#rates",className:"text-neutral-200 hover:text-white transition",children:"أسعار العملات"})}),e.jsx("li",{children:e.jsx("a",{href:"#about",className:"text-neutral-200 hover:text-white transition",children:"من نحن"})}),e.jsx("li",{children:e.jsx("a",{href:"#news",className:"text-neutral-200 hover:text-white transition",children:"الأخبار"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"الدعم"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-neutral-200 hover:text-white transition",children:"الأسئلة الشائعة"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-neutral-200 hover:text-white transition",children:"سياسة الخصوصية"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-neutral-200 hover:text-white transition",children:"الشروط والأحكام"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-neutral-200 hover:text-white transition",children:"المساعدة"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"text-neutral-200 hover:text-white transition",children:"اتصل بنا"})})]})]}),e.jsxs("div",{id:"contact",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"اتصل بنا"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mt-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-neutral-200",children:"طرابلس, بنغازي, سبها, ليبيا"})]}),e.jsxs("li",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"text-neutral-200",children:"+966 12 345 6789"})]}),e.jsxs("li",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{className:"text-neutral-200",children:"info@gulfexchange.com"})]}),e.jsxs("li",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-neutral-200",children:"السبت - الخميس: 9:00 - 18:00"})]})]})]})]}),e.jsx("div",{className:"border-t border-neutral-400 pt-6 mt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-neutral-300 text-sm mb-4 md:mb-0",children:"© 2023 صرافة الخليج. جميع الحقوق محفوظة."}),e.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[e.jsx("div",{className:"h-8 w-16 bg-neutral-700 rounded-md"}),e.jsx("div",{className:"h-8 w-16 bg-neutral-700 rounded-md"}),e.jsx("div",{className:"h-8 w-16 bg-neutral-700 rounded-md"}),e.jsx("div",{className:"h-8 w-16 rounded-md bg-[#404040]",children:"للشركة"})]})]})})]})})}function jW(){const{user:t}=Mt(),[,s]=_t();u.useEffect(()=>{document.title="صرافة الخليج - خدمات الصرافة المالية"},[]);const n=()=>{s("/auth")},r=()=>{s("/auth")};return e.jsxs("div",{className:"golden-page-bg",children:[e.jsx(dW,{onLoginClick:n,onRegisterClick:r,isLoggedIn:!!t}),e.jsx(uW,{onRegisterClick:r}),e.jsx(fW,{}),e.jsx(mW,{}),e.jsx(hW,{}),e.jsx(xW,{}),e.jsx(pW,{onRegisterClick:r}),e.jsx(gW,{})]})}var Qm=t=>t.type==="checkbox",Uo=t=>t instanceof Date,jr=t=>t==null;const xA=t=>typeof t=="object";var gn=t=>!jr(t)&&!Array.isArray(t)&&xA(t)&&!Uo(t),pA=t=>gn(t)&&t.target?Qm(t.target)?t.target.checked:t.target.value:t,yW=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,gA=(t,s)=>t.has(yW(s)),vW=t=>{const s=t.constructor&&t.constructor.prototype;return gn(s)&&s.hasOwnProperty("isPrototypeOf")},Cb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wn(t){let s;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(t instanceof Set)s=new Set(t);else if(!(Cb&&(t instanceof Blob||r))&&(n||gn(t)))if(s=n?[]:{},!n&&!vW(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=Wn(t[a]));else return t;return s}var D0=t=>Array.isArray(t)?t.filter(Boolean):[],xn=t=>t===void 0,Ke=(t,s,n)=>{if(!s||!gn(t))return n;const r=D0(s.split(/[,[\].]+?/)).reduce((a,i)=>jr(a)?a:a[i],t);return xn(r)||r===t?xn(t[s])?n:t[s]:r},Jr=t=>typeof t=="boolean",Mb=t=>/^\w*$/.test(t),jA=t=>D0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ws=(t,s,n)=>{let r=-1;const a=Mb(s)?[s]:jA(s),i=a.length,l=i-1;for(;++r<i;){const o=a[r];let c=n;if(r!==l){const d=t[o];c=gn(d)||Array.isArray(d)?d:isNaN(+a[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const xp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ga={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Yi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yA=gt.createContext(null),Hm=()=>gt.useContext(yA),vA=t=>{const{children:s,...n}=t;return gt.createElement(yA.Provider,{value:n},s)};var bA=(t,s,n,r=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return s._proxyFormState[l]!==Ga.all&&(s._proxyFormState[l]=!r||Ga.all),n&&(n[l]=!0),t[l]}});return a};const Sb=typeof window<"u"?u.useLayoutEffect:u.useEffect;function bW(t){const s=Hm(),{control:n=s.control,disabled:r,name:a,exact:i}=t||{},[l,o]=gt.useState(n._formState),c=gt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Sb(()=>n._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!r&&o({...n._formState,...d})}}),[a,r,i]),gt.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),gt.useMemo(()=>bA(l,n,c.current,!1),[l,n])}var gi=t=>typeof t=="string",wA=(t,s,n,r,a)=>gi(t)?(r&&s.watch.add(t),Ke(n,t,a)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),Ke(n,i))):(r&&(s.watchAll=!0),n);function wW(t){const s=Hm(),{control:n=s.control,name:r,defaultValue:a,disabled:i,exact:l}=t||{},o=gt.useRef(a),[c,d]=gt.useState(n._getWatch(r,o.current));return Sb(()=>n._subscribe({name:r,formState:{values:!0},exact:l,callback:f=>!i&&d(wA(r,n._names,f.values||n._formValues,!1,o.current))}),[r,n,i,l]),gt.useEffect(()=>n._removeUnmounted()),c}function NW(t){const s=Hm(),{name:n,disabled:r,control:a=s.control,shouldUnregister:i}=t,l=gA(a._names.array,n),o=wW({control:a,name:n,defaultValue:Ke(a._formValues,n,Ke(a._defaultValues,n,t.defaultValue)),exact:!0}),c=bW({control:a,name:n,exact:!0}),d=gt.useRef(t),f=gt.useRef(a.register(n,{...t.rules,value:o,...Jr(t.disabled)?{disabled:t.disabled}:{}})),x=gt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ke(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ke(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ke(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ke(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ke(c.errors,n)}}),[c,n]),h=gt.useCallback(b=>f.current.onChange({target:{value:pA(b),name:n},type:xp.CHANGE}),[n]),j=gt.useCallback(()=>f.current.onBlur({target:{value:Ke(a._formValues,n),name:n},type:xp.BLUR}),[n,a._formValues]),v=gt.useCallback(b=>{const y=Ke(a._fields,n);y&&b&&(y._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:m=>b.setCustomValidity(m),reportValidity:()=>b.reportValidity()})},[a._fields,n]),p=gt.useMemo(()=>({name:n,value:o,...Jr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:h,onBlur:j,ref:v}),[n,r,c.disabled,h,j,v,o]);return gt.useEffect(()=>{const b=a._options.shouldUnregister||i;a.register(n,{...d.current.rules,...Jr(d.current.disabled)?{disabled:d.current.disabled}:{}});const y=(m,g)=>{const w=Ke(a._fields,m);w&&w._f&&(w._f.mount=g)};if(y(n,!0),b){const m=Wn(Ke(a._options.defaultValues,n));ws(a._defaultValues,n,m),xn(Ke(a._formValues,n))&&ws(a._formValues,n,m)}return!l&&a.register(n),()=>{(l?b&&!a._state.action:b)?a.unregister(n):y(n,!1)}},[n,a,l,i]),gt.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),gt.useMemo(()=>({field:p,formState:c,fieldState:x}),[p,c,x])}const NA=t=>t.render(NW(t));var CA=(t,s,n,r,a)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:a||!0}}:{},Mf=t=>Array.isArray(t)?t:[t],u4=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},ey=t=>jr(t)||!xA(t);function Fl(t,s){if(ey(t)||ey(s))return t===s;if(Uo(t)&&Uo(s))return t.getTime()===s.getTime();const n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(const a of n){const i=t[a];if(!r.includes(a))return!1;if(a!=="ref"){const l=s[a];if(Uo(i)&&Uo(l)||gn(i)&&gn(l)||Array.isArray(i)&&Array.isArray(l)?!Fl(i,l):i!==l)return!1}}return!0}var xr=t=>gn(t)&&!Object.keys(t).length,kb=t=>t.type==="file",Ya=t=>typeof t=="function",pp=t=>{if(!Cb)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},MA=t=>t.type==="select-multiple",Lb=t=>t.type==="radio",CW=t=>Lb(t)||Qm(t),s1=t=>pp(t)&&t.isConnected;function MW(t,s){const n=s.slice(0,-1).length;let r=0;for(;r<n;)t=xn(t)?r++:t[s[r++]];return t}function SW(t){for(const s in t)if(t.hasOwnProperty(s)&&!xn(t[s]))return!1;return!0}function In(t,s){const n=Array.isArray(s)?s:Mb(s)?[s]:jA(s),r=n.length===1?t:MW(t,n),a=n.length-1,i=n[a];return r&&delete r[i],a!==0&&(gn(r)&&xr(r)||Array.isArray(r)&&SW(r))&&In(t,n.slice(0,-1)),t}var SA=t=>{for(const s in t)if(Ya(t[s]))return!0;return!1};function gp(t,s={}){const n=Array.isArray(t);if(gn(t)||n)for(const r in t)Array.isArray(t[r])||gn(t[r])&&!SA(t[r])?(s[r]=Array.isArray(t[r])?[]:{},gp(t[r],s[r])):jr(t[r])||(s[r]=!0);return s}function kA(t,s,n){const r=Array.isArray(t);if(gn(t)||r)for(const a in t)Array.isArray(t[a])||gn(t[a])&&!SA(t[a])?xn(s)||ey(n[a])?n[a]=Array.isArray(t[a])?gp(t[a],[]):{...gp(t[a])}:kA(t[a],jr(s)?{}:s[a],n[a]):n[a]=!Fl(t[a],s[a]);return n}var Gu=(t,s)=>kA(t,s,gp(s));const f4={value:!1,isValid:!1},m4={value:!0,isValid:!0};var LA=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!xn(t[0].attributes.value)?xn(t[0].value)||t[0].value===""?m4:{value:t[0].value,isValid:!0}:m4:f4}return f4},TA=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:r})=>xn(t)?t:s?t===""?NaN:t&&+t:n&&gi(t)?new Date(t):r?r(t):t;const h4={isValid:!1,value:null};var EA=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,h4):h4;function x4(t){const s=t.ref;return kb(s)?s.files:Lb(s)?EA(t.refs).value:MA(s)?[...s.selectedOptions].map(({value:n})=>n):Qm(s)?LA(t.refs).value:TA(xn(s.value)?t.ref.value:s.value,t)}var kW=(t,s,n,r)=>{const a={};for(const i of t){const l=Ke(s,i);l&&ws(a,i,l._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:r}},jp=t=>t instanceof RegExp,Yu=t=>xn(t)?t:jp(t)?t.source:gn(t)?jp(t.value)?t.value.source:t.value:t,p4=t=>({isOnSubmit:!t||t===Ga.onSubmit,isOnBlur:t===Ga.onBlur,isOnChange:t===Ga.onChange,isOnAll:t===Ga.all,isOnTouch:t===Ga.onTouched});const g4="AsyncFunction";var LW=t=>!!t&&!!t.validate&&!!(Ya(t.validate)&&t.validate.constructor.name===g4||gn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===g4)),TW=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),j4=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Sf=(t,s,n,r)=>{for(const a of n||Object.keys(t)){const i=Ke(t,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],a)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(Sf(o,s))break}else if(gn(o)&&Sf(o,s))break}}};function y4(t,s,n){const r=Ke(t,n);if(r||Mb(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),l=Ke(s,i),o=Ke(t,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};a.pop()}return{name:n}}var EW=(t,s,n,r)=>{n(t);const{name:a,...i}=t;return xr(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!r||Ga.all))},IW=(t,s,n)=>!t||!s||t===s||Mf(t).some(r=>r&&(n?r===s:r.startsWith(s)||s.startsWith(r))),AW=(t,s,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(s||t):(n?r.isOnBlur:a.isOnBlur)?!t:(n?r.isOnChange:a.isOnChange)?t:!0,DW=(t,s)=>!D0(Ke(t,s)).length&&In(t,s),PW=(t,s,n)=>{const r=Mf(Ke(t,n));return ws(r,"root",s[n]),ws(t,n,r),t},jx=t=>gi(t);function v4(t,s,n="validate"){if(jx(t)||Array.isArray(t)&&t.every(jx)||Jr(t)&&!t)return{type:n,message:jx(t)?t:"",ref:s}}var Yc=t=>gn(t)&&!jp(t)?t:{value:t,message:""},b4=async(t,s,n,r,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:f,min:x,max:h,pattern:j,validate:v,name:p,valueAsNumber:b,mount:y}=t._f,m=Ke(n,p);if(!y||s.has(p))return{};const g=o?o[0]:l,w=F=>{a&&g.reportValidity&&(g.setCustomValidity(Jr(F)?"":F||""),g.reportValidity())},N={},k=Lb(l),L=Qm(l),S=k||L,T=(b||kb(l))&&xn(l.value)&&xn(m)||pp(l)&&l.value===""||m===""||Array.isArray(m)&&!m.length,E=CA.bind(null,p,r,N),$=(F,Z,G,D=Yi.maxLength,B=Yi.minLength)=>{const de=F?Z:G;N[p]={type:F?D:B,message:de,ref:l,...E(F?D:B,de)}};if(i?!Array.isArray(m)||!m.length:c&&(!S&&(T||jr(m))||Jr(m)&&!m||L&&!LA(o).isValid||k&&!EA(o).isValid)){const{value:F,message:Z}=jx(c)?{value:!!c,message:c}:Yc(c);if(F&&(N[p]={type:Yi.required,message:Z,ref:g,...E(Yi.required,Z)},!r))return w(Z),N}if(!T&&(!jr(x)||!jr(h))){let F,Z;const G=Yc(h),D=Yc(x);if(!jr(m)&&!isNaN(m)){const B=l.valueAsNumber||m&&+m;jr(G.value)||(F=B>G.value),jr(D.value)||(Z=B<D.value)}else{const B=l.valueAsDate||new Date(m),de=re=>new Date(new Date().toDateString()+" "+re),U=l.type=="time",W=l.type=="week";gi(G.value)&&m&&(F=U?de(m)>de(G.value):W?m>G.value:B>new Date(G.value)),gi(D.value)&&m&&(Z=U?de(m)<de(D.value):W?m<D.value:B<new Date(D.value))}if((F||Z)&&($(!!F,G.message,D.message,Yi.max,Yi.min),!r))return w(N[p].message),N}if((d||f)&&!T&&(gi(m)||i&&Array.isArray(m))){const F=Yc(d),Z=Yc(f),G=!jr(F.value)&&m.length>+F.value,D=!jr(Z.value)&&m.length<+Z.value;if((G||D)&&($(G,F.message,Z.message),!r))return w(N[p].message),N}if(j&&!T&&gi(m)){const{value:F,message:Z}=Yc(j);if(jp(F)&&!m.match(F)&&(N[p]={type:Yi.pattern,message:Z,ref:l,...E(Yi.pattern,Z)},!r))return w(Z),N}if(v){if(Ya(v)){const F=await v(m,n),Z=v4(F,g);if(Z&&(N[p]={...Z,...E(Yi.validate,Z.message)},!r))return w(Z.message),N}else if(gn(v)){let F={};for(const Z in v){if(!xr(F)&&!r)break;const G=v4(await v[Z](m,n),g,Z);G&&(F={...G,...E(Z,G.message)},w(G.message),r&&(N[p]=F))}if(!xr(F)&&(N[p]={ref:g,...F},!r))return N}}return w(!0),N};const _W={mode:Ga.onSubmit,reValidateMode:Ga.onChange,shouldFocusError:!0};function RW(t={}){let s={..._W,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ya(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const r={};let a=gn(s.defaultValues)||gn(s.values)?Wn(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:Wn(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...f};const h={array:u4(),state:u4()},j=s.criteriaMode===Ga.all,v=P=>ee=>{clearTimeout(d),d=setTimeout(P,ee)},p=async P=>{if(!s.disabled&&(f.isValid||x.isValid||P)){const ee=s.resolver?xr((await L()).errors):await T(r,!0);ee!==n.isValid&&h.state.next({isValid:ee})}},b=(P,ee)=>{!s.disabled&&(f.isValidating||f.validatingFields||x.isValidating||x.validatingFields)&&((P||Array.from(o.mount)).forEach(C=>{C&&(ee?ws(n.validatingFields,C,ee):In(n.validatingFields,C))}),h.state.next({validatingFields:n.validatingFields,isValidating:!xr(n.validatingFields)}))},y=(P,ee=[],C,fe,le=!0,xe=!0)=>{if(fe&&C&&!s.disabled){if(l.action=!0,xe&&Array.isArray(Ke(r,P))){const Ye=C(Ke(r,P),fe.argA,fe.argB);le&&ws(r,P,Ye)}if(xe&&Array.isArray(Ke(n.errors,P))){const Ye=C(Ke(n.errors,P),fe.argA,fe.argB);le&&ws(n.errors,P,Ye),DW(n.errors,P)}if((f.touchedFields||x.touchedFields)&&xe&&Array.isArray(Ke(n.touchedFields,P))){const Ye=C(Ke(n.touchedFields,P),fe.argA,fe.argB);le&&ws(n.touchedFields,P,Ye)}(f.dirtyFields||x.dirtyFields)&&(n.dirtyFields=Gu(a,i)),h.state.next({name:P,isDirty:$(P,ee),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ws(i,P,ee)},m=(P,ee)=>{ws(n.errors,P,ee),h.state.next({errors:n.errors})},g=P=>{n.errors=P,h.state.next({errors:n.errors,isValid:!1})},w=(P,ee,C,fe)=>{const le=Ke(r,P);if(le){const xe=Ke(i,P,xn(C)?Ke(a,P):C);xn(xe)||fe&&fe.defaultChecked||ee?ws(i,P,ee?xe:x4(le._f)):G(P,xe),l.mount&&p()}},N=(P,ee,C,fe,le)=>{let xe=!1,Ye=!1;const Ft={name:P};if(!s.disabled){if(!C||fe){(f.isDirty||x.isDirty)&&(Ye=n.isDirty,n.isDirty=Ft.isDirty=$(),xe=Ye!==Ft.isDirty);const Ut=Fl(Ke(a,P),ee);Ye=!!Ke(n.dirtyFields,P),Ut?In(n.dirtyFields,P):ws(n.dirtyFields,P,!0),Ft.dirtyFields=n.dirtyFields,xe=xe||(f.dirtyFields||x.dirtyFields)&&Ye!==!Ut}if(C){const Ut=Ke(n.touchedFields,P);Ut||(ws(n.touchedFields,P,C),Ft.touchedFields=n.touchedFields,xe=xe||(f.touchedFields||x.touchedFields)&&Ut!==C)}xe&&le&&h.state.next(Ft)}return xe?Ft:{}},k=(P,ee,C,fe)=>{const le=Ke(n.errors,P),xe=(f.isValid||x.isValid)&&Jr(ee)&&n.isValid!==ee;if(s.delayError&&C?(c=v(()=>m(P,C)),c(s.delayError)):(clearTimeout(d),c=null,C?ws(n.errors,P,C):In(n.errors,P)),(C?!Fl(le,C):le)||!xr(fe)||xe){const Ye={...fe,...xe&&Jr(ee)?{isValid:ee}:{},errors:n.errors,name:P};n={...n,...Ye},h.state.next(Ye)}},L=async P=>{b(P,!0);const ee=await s.resolver(i,s.context,kW(P||o.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return b(P),ee},S=async P=>{const{errors:ee}=await L(P);if(P)for(const C of P){const fe=Ke(ee,C);fe?ws(n.errors,C,fe):In(n.errors,C)}else n.errors=ee;return ee},T=async(P,ee,C={valid:!0})=>{for(const fe in P){const le=P[fe];if(le){const{_f:xe,...Ye}=le;if(xe){const Ft=o.array.has(xe.name),Ut=le._f&&LW(le._f);Ut&&f.validatingFields&&b([fe],!0);const Ds=await b4(le,o.disabled,i,j,s.shouldUseNativeValidation&&!ee,Ft);if(Ut&&f.validatingFields&&b([fe]),Ds[xe.name]&&(C.valid=!1,ee))break;!ee&&(Ke(Ds,xe.name)?Ft?PW(n.errors,Ds,xe.name):ws(n.errors,xe.name,Ds[xe.name]):In(n.errors,xe.name))}!xr(Ye)&&await T(Ye,ee,C)}}return C.valid},E=()=>{for(const P of o.unMount){const ee=Ke(r,P);ee&&(ee._f.refs?ee._f.refs.every(C=>!s1(C)):!s1(ee._f.ref))&&Ne(P)}o.unMount=new Set},$=(P,ee)=>!s.disabled&&(P&&ee&&ws(i,P,ee),!Fl(re(),a)),F=(P,ee,C)=>wA(P,o,{...l.mount?i:xn(ee)?a:gi(P)?{[P]:ee}:ee},C,ee),Z=P=>D0(Ke(l.mount?i:a,P,s.shouldUnregister?Ke(a,P,[]):[])),G=(P,ee,C={})=>{const fe=Ke(r,P);let le=ee;if(fe){const xe=fe._f;xe&&(!xe.disabled&&ws(i,P,TA(ee,xe)),le=pp(xe.ref)&&jr(ee)?"":ee,MA(xe.ref)?[...xe.ref.options].forEach(Ye=>Ye.selected=le.includes(Ye.value)):xe.refs?Qm(xe.ref)?xe.refs.forEach(Ye=>{(!Ye.defaultChecked||!Ye.disabled)&&(Array.isArray(le)?Ye.checked=!!le.find(Ft=>Ft===Ye.value):Ye.checked=le===Ye.value||!!le)}):xe.refs.forEach(Ye=>Ye.checked=Ye.value===le):kb(xe.ref)?xe.ref.value="":(xe.ref.value=le,xe.ref.type||h.state.next({name:P,values:Wn(i)})))}(C.shouldDirty||C.shouldTouch)&&N(P,le,C.shouldTouch,C.shouldDirty,!0),C.shouldValidate&&W(P)},D=(P,ee,C)=>{for(const fe in ee){if(!ee.hasOwnProperty(fe))return;const le=ee[fe],xe=`${P}.${fe}`,Ye=Ke(r,xe);(o.array.has(P)||gn(le)||Ye&&!Ye._f)&&!Uo(le)?D(xe,le,C):G(xe,le,C)}},B=(P,ee,C={})=>{const fe=Ke(r,P),le=o.array.has(P),xe=Wn(ee);ws(i,P,xe),le?(h.array.next({name:P,values:Wn(i)}),(f.isDirty||f.dirtyFields||x.isDirty||x.dirtyFields)&&C.shouldDirty&&h.state.next({name:P,dirtyFields:Gu(a,i),isDirty:$(P,xe)})):fe&&!fe._f&&!jr(xe)?D(P,xe,C):G(P,xe,C),j4(P,o)&&h.state.next({...n}),h.state.next({name:l.mount?P:void 0,values:Wn(i)})},de=async P=>{l.mount=!0;const ee=P.target;let C=ee.name,fe=!0;const le=Ke(r,C),xe=Ut=>{fe=Number.isNaN(Ut)||Uo(Ut)&&isNaN(Ut.getTime())||Fl(Ut,Ke(i,C,Ut))},Ye=p4(s.mode),Ft=p4(s.reValidateMode);if(le){let Ut,Ds;const dr=ee.type?x4(le._f):pA(P),En=P.type===xp.BLUR||P.type===xp.FOCUS_OUT,ur=!TW(le._f)&&!s.resolver&&!Ke(n.errors,C)&&!le._f.deps||AW(En,Ke(n.touchedFields,C),n.isSubmitted,Ft,Ye),Qr=j4(C,o,En);ws(i,C,dr),En?(le._f.onBlur&&le._f.onBlur(P),c&&c(0)):le._f.onChange&&le._f.onChange(P);const Ia=N(C,dr,En),I=!xr(Ia)||Qr;if(!En&&h.state.next({name:C,type:P.type,values:Wn(i)}),ur)return(f.isValid||x.isValid)&&(s.mode==="onBlur"?En&&p():En||p()),I&&h.state.next({name:C,...Qr?{}:Ia});if(!En&&Qr&&h.state.next({...n}),s.resolver){const{errors:ye}=await L([C]);if(xe(dr),fe){const Le=y4(n.errors,r,C),We=y4(ye,r,Le.name||C);Ut=We.error,C=We.name,Ds=xr(ye)}}else b([C],!0),Ut=(await b4(le,o.disabled,i,j,s.shouldUseNativeValidation))[C],b([C]),xe(dr),fe&&(Ut?Ds=!1:(f.isValid||x.isValid)&&(Ds=await T(r,!0)));fe&&(le._f.deps&&W(le._f.deps),k(C,Ds,Ut,Ia))}},U=(P,ee)=>{if(Ke(n.errors,ee)&&P.focus)return P.focus(),1},W=async(P,ee={})=>{let C,fe;const le=Mf(P);if(s.resolver){const xe=await S(xn(P)?P:le);C=xr(xe),fe=P?!le.some(Ye=>Ke(xe,Ye)):C}else P?(fe=(await Promise.all(le.map(async xe=>{const Ye=Ke(r,xe);return await T(Ye&&Ye._f?{[xe]:Ye}:Ye)}))).every(Boolean),!(!fe&&!n.isValid)&&p()):fe=C=await T(r);return h.state.next({...!gi(P)||(f.isValid||x.isValid)&&C!==n.isValid?{}:{name:P},...s.resolver||!P?{isValid:C}:{},errors:n.errors}),ee.shouldFocus&&!fe&&Sf(r,U,P?le:o.mount),fe},re=P=>{const ee={...l.mount?i:a};return xn(P)?ee:gi(P)?Ke(ee,P):P.map(C=>Ke(ee,C))},we=(P,ee)=>({invalid:!!Ke((ee||n).errors,P),isDirty:!!Ke((ee||n).dirtyFields,P),error:Ke((ee||n).errors,P),isValidating:!!Ke(n.validatingFields,P),isTouched:!!Ke((ee||n).touchedFields,P)}),be=P=>{P&&Mf(P).forEach(ee=>In(n.errors,ee)),h.state.next({errors:P?n.errors:{}})},J=(P,ee,C)=>{const fe=(Ke(r,P,{_f:{}})._f||{}).ref,le=Ke(n.errors,P)||{},{ref:xe,message:Ye,type:Ft,...Ut}=le;ws(n.errors,P,{...Ut,...ee,ref:fe}),h.state.next({name:P,errors:n.errors,isValid:!1}),C&&C.shouldFocus&&fe&&fe.focus&&fe.focus()},Fe=(P,ee)=>Ya(P)?h.state.subscribe({next:C=>P(F(void 0,ee),C)}):F(P,ee,!0),Oe=P=>h.state.subscribe({next:ee=>{IW(P.name,ee.name,P.exact)&&EW(ee,P.formState||f,Ae,P.reRenderRoot)&&P.callback({values:{...i},...n,...ee})}}).unsubscribe,Ve=P=>(l.mount=!0,x={...x,...P.formState},Oe({...P,formState:x})),Ne=(P,ee={})=>{for(const C of P?Mf(P):o.mount)o.mount.delete(C),o.array.delete(C),ee.keepValue||(In(r,C),In(i,C)),!ee.keepError&&In(n.errors,C),!ee.keepDirty&&In(n.dirtyFields,C),!ee.keepTouched&&In(n.touchedFields,C),!ee.keepIsValidating&&In(n.validatingFields,C),!s.shouldUnregister&&!ee.keepDefaultValue&&In(a,C);h.state.next({values:Wn(i)}),h.state.next({...n,...ee.keepDirty?{isDirty:$()}:{}}),!ee.keepIsValid&&p()},qe=({disabled:P,name:ee})=>{(Jr(P)&&l.mount||P||o.disabled.has(ee))&&(P?o.disabled.add(ee):o.disabled.delete(ee))},ve=(P,ee={})=>{let C=Ke(r,P);const fe=Jr(ee.disabled)||Jr(s.disabled);return ws(r,P,{...C||{},_f:{...C&&C._f?C._f:{ref:{name:P}},name:P,mount:!0,...ee}}),o.mount.add(P),C?qe({disabled:Jr(ee.disabled)?ee.disabled:s.disabled,name:P}):w(P,!0,ee.value),{...fe?{disabled:ee.disabled||s.disabled}:{},...s.progressive?{required:!!ee.required,min:Yu(ee.min),max:Yu(ee.max),minLength:Yu(ee.minLength),maxLength:Yu(ee.maxLength),pattern:Yu(ee.pattern)}:{},name:P,onChange:de,onBlur:de,ref:le=>{if(le){ve(P,ee),C=Ke(r,P);const xe=xn(le.value)&&le.querySelectorAll&&le.querySelectorAll("input,select,textarea")[0]||le,Ye=CW(xe),Ft=C._f.refs||[];if(Ye?Ft.find(Ut=>Ut===xe):xe===C._f.ref)return;ws(r,P,{_f:{...C._f,...Ye?{refs:[...Ft.filter(s1),xe,...Array.isArray(Ke(a,P))?[{}]:[]],ref:{type:xe.type,name:P}}:{ref:xe}}}),w(P,!1,void 0,xe)}else C=Ke(r,P,{}),C._f&&(C._f.mount=!1),(s.shouldUnregister||ee.shouldUnregister)&&!(gA(o.array,P)&&l.action)&&o.unMount.add(P)}}},Ee=()=>s.shouldFocusError&&Sf(r,U,o.mount),ne=P=>{Jr(P)&&(h.state.next({disabled:P}),Sf(r,(ee,C)=>{const fe=Ke(r,C);fe&&(ee.disabled=fe._f.disabled||P,Array.isArray(fe._f.refs)&&fe._f.refs.forEach(le=>{le.disabled=fe._f.disabled||P}))},0,!1))},ke=(P,ee)=>async C=>{let fe;C&&(C.preventDefault&&C.preventDefault(),C.persist&&C.persist());let le=Wn(i);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:xe,values:Ye}=await L();n.errors=xe,le=Ye}else await T(r);if(o.disabled.size)for(const xe of o.disabled)ws(le,xe,void 0);if(In(n.errors,"root"),xr(n.errors)){h.state.next({errors:{}});try{await P(le,C)}catch(xe){fe=xe}}else ee&&await ee({...n.errors},C),Ee(),setTimeout(Ee);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xr(n.errors)&&!fe,submitCount:n.submitCount+1,errors:n.errors}),fe)throw fe},tt=(P,ee={})=>{Ke(r,P)&&(xn(ee.defaultValue)?B(P,Wn(Ke(a,P))):(B(P,ee.defaultValue),ws(a,P,Wn(ee.defaultValue))),ee.keepTouched||In(n.touchedFields,P),ee.keepDirty||(In(n.dirtyFields,P),n.isDirty=ee.defaultValue?$(P,Wn(Ke(a,P))):$()),ee.keepError||(In(n.errors,P),f.isValid&&p()),h.state.next({...n}))},xt=(P,ee={})=>{const C=P?Wn(P):a,fe=Wn(C),le=xr(P),xe=le?a:fe;if(ee.keepDefaultValues||(a=C),!ee.keepValues){if(ee.keepDirtyValues){const Ye=new Set([...o.mount,...Object.keys(Gu(a,i))]);for(const Ft of Array.from(Ye))Ke(n.dirtyFields,Ft)?ws(xe,Ft,Ke(i,Ft)):B(Ft,Ke(xe,Ft))}else{if(Cb&&xn(P))for(const Ye of o.mount){const Ft=Ke(r,Ye);if(Ft&&Ft._f){const Ut=Array.isArray(Ft._f.refs)?Ft._f.refs[0]:Ft._f.ref;if(pp(Ut)){const Ds=Ut.closest("form");if(Ds){Ds.reset();break}}}}for(const Ye of o.mount)B(Ye,Ke(xe,Ye))}i=Wn(xe),h.array.next({values:{...xe}}),h.state.next({values:{...xe}})}o={mount:ee.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,l.watch=!!s.shouldUnregister,h.state.next({submitCount:ee.keepSubmitCount?n.submitCount:0,isDirty:le?!1:ee.keepDirty?n.isDirty:!!(ee.keepDefaultValues&&!Fl(P,a)),isSubmitted:ee.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:le?{}:ee.keepDirtyValues?ee.keepDefaultValues&&i?Gu(a,i):n.dirtyFields:ee.keepDefaultValues&&P?Gu(a,P):ee.keepDirty?n.dirtyFields:{},touchedFields:ee.keepTouched?n.touchedFields:{},errors:ee.keepErrors?n.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Q=(P,ee)=>xt(Ya(P)?P(i):P,ee),oe=(P,ee={})=>{const C=Ke(r,P),fe=C&&C._f;if(fe){const le=fe.refs?fe.refs[0]:fe.ref;le.focus&&(le.focus(),ee.shouldSelect&&Ya(le.select)&&le.select())}},Ae=P=>{n={...n,...P}},O={control:{register:ve,unregister:Ne,getFieldState:we,handleSubmit:ke,setError:J,_subscribe:Oe,_runSchema:L,_getWatch:F,_getDirty:$,_setValid:p,_setFieldArray:y,_setDisabledField:qe,_setErrors:g,_getFieldArray:Z,_reset:xt,_resetDefaultValues:()=>Ya(s.defaultValues)&&s.defaultValues().then(P=>{Q(P,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:ne,_subjects:h,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(P){l=P},get _defaultValues(){return a},get _names(){return o},set _names(P){o=P},get _formState(){return n},get _options(){return s},set _options(P){s={...s,...P}}},subscribe:Ve,trigger:W,register:ve,handleSubmit:ke,watch:Fe,setValue:B,getValues:re,reset:Q,resetField:tt,clearErrors:be,unregister:Ne,setError:J,setFocus:oe,getFieldState:we};return{...O,formControl:O}}function xs(t={}){const s=gt.useRef(void 0),n=gt.useRef(void 0),[r,a]=gt.useState({isDirty:!1,isValidating:!1,isLoading:Ya(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ya(t.defaultValues)?void 0:t.defaultValues});s.current||(s.current={...t.formControl?t.formControl:RW(t),formState:r},t.formControl&&t.defaultValues&&!Ya(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=s.current.control;return i._options=t,Sb(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),gt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),gt.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode),t.errors&&!xr(t.errors)&&i._setErrors(t.errors)},[i,t.errors,t.mode,t.reValidateMode]),gt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),gt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),gt.useEffect(()=>{t.values&&!Fl(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),gt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=bA(r,i),s.current}const w4=(t,s,n)=>{if(t&&"reportValidity"in t){const r=Ke(n,s);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},IA=(t,s)=>{for(const n in s.fields){const r=s.fields[n];r&&r.ref&&"reportValidity"in r.ref?w4(r.ref,n,t):r.refs&&r.refs.forEach(a=>w4(a,n,t))}},OW=(t,s)=>{s.shouldUseNativeValidation&&IA(t,s);const n={};for(const r in t){const a=Ke(s.fields,r),i=Object.assign(t[r]||{},{ref:a&&a.ref});if(zW(s.names||Object.keys(t),r)){const l=Object.assign({},Ke(n,r));ws(l,"root",i),ws(n,r,l)}else ws(n,r,i)}return n},zW=(t,s)=>t.some(n=>n.startsWith(s+"."));var FW=function(t,s){for(var n={};t.length;){var r=t[0],a=r.code,i=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[l]={message:o.message,type:o.code}}else n[l]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(x){return t.push(x)})}),s){var c=n[l].types,d=c&&c[r.code];n[l]=CA(l,s,n,a,d?[].concat(d,r.message):r.message)}t.shift()}return n},ps=function(t,s,n){return n===void 0&&(n={}),function(r,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(d){return i.shouldUseNativeValidation&&IA({},i),{errors:{},values:n.raw?r:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:OW(FW(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},us;(function(t){t.assertEqual=a=>a;function s(a){}t.assertIs=s;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},t.find=(a,i)=>{for(const l of a)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(us||(us={}));var ty;(function(t){t.mergeShapes=(s,n)=>({...s,...n})})(ty||(ty={}));const at=us.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xi=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Ue=us.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),UW=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class aa extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=s}format(s){const n=s||function(i){return i.message},r={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let o=r,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),r}static assert(s){if(!(s instanceof aa))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,us.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(s(a))):r.push(s(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}aa.create=t=>new aa(t);const tu=(t,s)=>{let n;switch(t.code){case Ue.invalid_type:t.received===at.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,us.jsonStringifyReplacer)}`;break;case Ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${us.joinValues(t.keys,", ")}`;break;case Ue.invalid_union:n="Invalid input";break;case Ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${us.joinValues(t.options)}`;break;case Ue.invalid_enum_value:n=`Invalid enum value. Expected ${us.joinValues(t.options)}, received '${t.received}'`;break;case Ue.invalid_arguments:n="Invalid function arguments";break;case Ue.invalid_return_type:n="Invalid function return type";break;case Ue.invalid_date:n="Invalid date";break;case Ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:us.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ue.custom:n="Invalid input";break;case Ue.invalid_intersection_types:n="Intersection results could not be merged";break;case Ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ue.not_finite:n="Number must be finite";break;default:n=s.defaultError,us.assertNever(t)}return{message:n}};let AA=tu;function $W(t){AA=t}function yp(){return AA}const vp=t=>{const{data:s,path:n,errorMaps:r,issueData:a}=t,i=[...n,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:s,defaultError:o}).message;return{...a,path:i,message:o}},BW=[];function Xe(t,s){const n=yp(),r=vp({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===tu?void 0:tu].filter(a=>!!a)});t.common.issues.push(r)}class lr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,n){const r=[];for(const a of n){if(a.status==="aborted")return It;a.status==="dirty"&&s.dirty(),r.push(a.value)}return{status:s.value,value:r}}static async mergeObjectAsync(s,n){const r=[];for(const a of n){const i=await a.key,l=await a.value;r.push({key:i,value:l})}return lr.mergeObjectSync(s,r)}static mergeObjectSync(s,n){const r={};for(const a of n){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return It;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(r[i.value]=l.value)}return{status:s.value,value:r}}}const It=Object.freeze({status:"aborted"}),ld=t=>({status:"dirty",value:t}),kr=t=>({status:"valid",value:t}),sy=t=>t.status==="aborted",ny=t=>t.status==="dirty",jc=t=>t.status==="valid",em=t=>typeof Promise<"u"&&t instanceof Promise;function bp(t,s,n,r){if(typeof s=="function"?t!==s||!r:!s.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s.get(t)}function DA(t,s,n,r,a){if(typeof s=="function"?t!==s||!a:!s.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(t,n),n}var yt;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(yt||(yt={}));var lf,of;class Oi{constructor(s,n,r,a){this._cachedPath=[],this.parent=s,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const N4=(t,s)=>{if(jc(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new aa(t.common.issues);return this._error=n,this._error}}};function Gt(t){if(!t)return{};const{errorMap:s,invalid_type_error:n,required_error:r,description:a}=t;if(s&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(l,o)=>{var c,d;const{message:f}=t;return l.code==="invalid_enum_value"?{message:f??o.defaultError}:typeof o.data>"u"?{message:(c=f??r)!==null&&c!==void 0?c:o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:(d=f??n)!==null&&d!==void 0?d:o.defaultError}},description:a}}class Jt{get description(){return this._def.description}_getType(s){return Xi(s.data)}_getOrReturnCtx(s,n){return n||{common:s.parent.common,data:s.data,parsedType:Xi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new lr,ctx:{common:s.parent.common,data:s.data,parsedType:Xi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const n=this._parse(s);if(em(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(s){const n=this._parse(s);return Promise.resolve(n)}parse(s,n){const r=this.safeParse(s,n);if(r.success)return r.data;throw r.error}safeParse(s,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Xi(s)},i=this._parseSync({data:s,path:a.path,parent:a});return N4(a,i)}"~validate"(s){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Xi(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:a});return jc(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:a}).then(i=>jc(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(s,n){const r=await this.safeParseAsync(s,n);if(r.success)return r.data;throw r.error}async safeParseAsync(s,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Xi(s)},a=this._parse({data:s,path:r.path,parent:r}),i=await(em(a)?a:Promise.resolve(a));return N4(r,i)}refine(s,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const l=s(a),o=()=>i.addIssue({code:Ue.custom,...r(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,n){return this._refinement((r,a)=>s(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(s){return new ti({schema:this,typeName:Et.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ii.create(this,this._def)}nullable(){return jo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ja.create(this)}promise(){return nu.create(this,this._def)}or(s){return rm.create([this,s],this._def)}and(s){return am.create(this,s,this._def)}transform(s){return new ti({...Gt(this._def),schema:this,typeName:Et.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const n=typeof s=="function"?s:()=>s;return new dm({...Gt(this._def),innerType:this,defaultValue:n,typeName:Et.ZodDefault})}brand(){return new Tb({typeName:Et.ZodBranded,type:this,...Gt(this._def)})}catch(s){const n=typeof s=="function"?s:()=>s;return new um({...Gt(this._def),innerType:this,catchValue:n,typeName:Et.ZodCatch})}describe(s){const n=this.constructor;return new n({...this._def,description:s})}pipe(s){return Wm.create(this,s)}readonly(){return fm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const VW=/^c[^\s-]{8,}$/i,GW=/^[0-9a-z]+$/,YW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,QW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HW=/^[a-z0-9_-]{21}$/i,WW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ZW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let n1;const KW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sZ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,PA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rZ=new RegExp(`^${PA}$`);function _A(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${n}`}function aZ(t){return new RegExp(`^${_A(t)}$`)}function RA(t){let s=`${PA}T${_A(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${n.join("|")})`,new RegExp(`^${s}$`)}function iZ(t,s){return!!((s==="v4"||!s)&&KW.test(t)||(s==="v6"||!s)&&eZ.test(t))}function lZ(t,s){if(!WW.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||s&&a.alg!==s)}catch{return!1}}function oZ(t,s){return!!((s==="v4"||!s)&&XW.test(t)||(s==="v6"||!s)&&tZ.test(t))}class Qa extends Jt{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==at.string){const i=this._getOrReturnCtx(s);return Xe(i,{code:Ue.invalid_type,expected:at.string,received:i.parsedType}),It}const r=new lr;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,o=s.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(s,a),l?Xe(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Xe(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")JW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"email",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")n1||(n1=new RegExp(qW,"u")),n1.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"emoji",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")QW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"uuid",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")HW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"nanoid",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")VW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"cuid",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")GW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"cuid2",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")YW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"ulid",code:Ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),Xe(a,{validation:"url",code:Ue.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"regex",code:Ue.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?RA(i).test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?rZ.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?aZ(i).test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?ZW.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"duration",code:Ue.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?iZ(s.data,i.version)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"ip",code:Ue.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?lZ(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"jwt",code:Ue.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?oZ(s.data,i.version)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"cidr",code:Ue.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?sZ.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"base64",code:Ue.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?nZ.test(s.data)||(a=this._getOrReturnCtx(s,a),Xe(a,{validation:"base64url",code:Ue.invalid_string,message:i.message}),r.dirty()):us.assertNever(i);return{status:r.value,value:s.data}}_regex(s,n,r){return this.refinement(a=>s.test(a),{validation:n,code:Ue.invalid_string,...yt.errToObj(r)})}_addCheck(s){return new Qa({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...yt.errToObj(s)})}url(s){return this._addCheck({kind:"url",...yt.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...yt.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...yt.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...yt.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...yt.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...yt.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...yt.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...yt.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...yt.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...yt.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...yt.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...yt.errToObj(s)})}datetime(s){var n,r;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(n=s==null?void 0:s.offset)!==null&&n!==void 0?n:!1,local:(r=s==null?void 0:s.local)!==null&&r!==void 0?r:!1,...yt.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...yt.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...yt.errToObj(s)})}regex(s,n){return this._addCheck({kind:"regex",regex:s,...yt.errToObj(n)})}includes(s,n){return this._addCheck({kind:"includes",value:s,position:n==null?void 0:n.position,...yt.errToObj(n==null?void 0:n.message)})}startsWith(s,n){return this._addCheck({kind:"startsWith",value:s,...yt.errToObj(n)})}endsWith(s,n){return this._addCheck({kind:"endsWith",value:s,...yt.errToObj(n)})}min(s,n){return this._addCheck({kind:"min",value:s,...yt.errToObj(n)})}max(s,n){return this._addCheck({kind:"max",value:s,...yt.errToObj(n)})}length(s,n){return this._addCheck({kind:"length",value:s,...yt.errToObj(n)})}nonempty(s){return this.min(1,yt.errToObj(s))}trim(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxLength(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}Qa.create=t=>{var s;return new Qa({checks:[],typeName:Et.ZodString,coerce:(s=t==null?void 0:t.coerce)!==null&&s!==void 0?s:!1,...Gt(t)})};function cZ(t,s){const n=(t.toString().split(".")[1]||"").length,r=(s.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(t.toFixed(a).replace(".","")),l=parseInt(s.toFixed(a).replace(".",""));return i%l/Math.pow(10,a)}class xo extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==at.number){const i=this._getOrReturnCtx(s);return Xe(i,{code:Ue.invalid_type,expected:at.number,received:i.parsedType}),It}let r;const a=new lr;for(const i of this._def.checks)i.kind==="int"?us.isInteger(s.data)||(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?cZ(s.data,i.value)!==0&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.not_finite,message:i.message}),a.dirty()):us.assertNever(i);return{status:a.value,value:s.data}}gte(s,n){return this.setLimit("min",s,!0,yt.toString(n))}gt(s,n){return this.setLimit("min",s,!1,yt.toString(n))}lte(s,n){return this.setLimit("max",s,!0,yt.toString(n))}lt(s,n){return this.setLimit("max",s,!1,yt.toString(n))}setLimit(s,n,r,a){return new xo({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:r,message:yt.toString(a)}]})}_addCheck(s){return new xo({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:yt.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yt.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:yt.toString(n)})}finite(s){return this._addCheck({kind:"finite",message:yt.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yt.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yt.toString(s)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&us.isInteger(s.value))}get isFinite(){let s=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(s===null||r.value<s)&&(s=r.value)}return Number.isFinite(n)&&Number.isFinite(s)}}xo.create=t=>new xo({checks:[],typeName:Et.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class po extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==at.bigint)return this._getInvalidInput(s);let r;const a=new lr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(s,r),Xe(r,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):us.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const n=this._getOrReturnCtx(s);return Xe(n,{code:Ue.invalid_type,expected:at.bigint,received:n.parsedType}),It}gte(s,n){return this.setLimit("min",s,!0,yt.toString(n))}gt(s,n){return this.setLimit("min",s,!1,yt.toString(n))}lte(s,n){return this.setLimit("max",s,!0,yt.toString(n))}lt(s,n){return this.setLimit("max",s,!1,yt.toString(n))}setLimit(s,n,r,a){return new po({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:r,message:yt.toString(a)}]})}_addCheck(s){return new po({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yt.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:yt.toString(n)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}po.create=t=>{var s;return new po({checks:[],typeName:Et.ZodBigInt,coerce:(s=t==null?void 0:t.coerce)!==null&&s!==void 0?s:!1,...Gt(t)})};class tm extends Jt{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==at.boolean){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.boolean,received:r.parsedType}),It}return kr(s.data)}}tm.create=t=>new tm({typeName:Et.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class yc extends Jt{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==at.date){const i=this._getOrReturnCtx(s);return Xe(i,{code:Ue.invalid_type,expected:at.date,received:i.parsedType}),It}if(isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return Xe(i,{code:Ue.invalid_date}),It}const r=new lr;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),Xe(a,{code:Ue.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):us.assertNever(i);return{status:r.value,value:new Date(s.data.getTime())}}_addCheck(s){return new yc({...this._def,checks:[...this._def.checks,s]})}min(s,n){return this._addCheck({kind:"min",value:s.getTime(),message:yt.toString(n)})}max(s,n){return this._addCheck({kind:"max",value:s.getTime(),message:yt.toString(n)})}get minDate(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s!=null?new Date(s):null}}yc.create=t=>new yc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Et.ZodDate,...Gt(t)});class wp extends Jt{_parse(s){if(this._getType(s)!==at.symbol){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.symbol,received:r.parsedType}),It}return kr(s.data)}}wp.create=t=>new wp({typeName:Et.ZodSymbol,...Gt(t)});class sm extends Jt{_parse(s){if(this._getType(s)!==at.undefined){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.undefined,received:r.parsedType}),It}return kr(s.data)}}sm.create=t=>new sm({typeName:Et.ZodUndefined,...Gt(t)});class nm extends Jt{_parse(s){if(this._getType(s)!==at.null){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.null,received:r.parsedType}),It}return kr(s.data)}}nm.create=t=>new nm({typeName:Et.ZodNull,...Gt(t)});class su extends Jt{constructor(){super(...arguments),this._any=!0}_parse(s){return kr(s.data)}}su.create=t=>new su({typeName:Et.ZodAny,...Gt(t)});class tc extends Jt{constructor(){super(...arguments),this._unknown=!0}_parse(s){return kr(s.data)}}tc.create=t=>new tc({typeName:Et.ZodUnknown,...Gt(t)});class gl extends Jt{_parse(s){const n=this._getOrReturnCtx(s);return Xe(n,{code:Ue.invalid_type,expected:at.never,received:n.parsedType}),It}}gl.create=t=>new gl({typeName:Et.ZodNever,...Gt(t)});class Np extends Jt{_parse(s){if(this._getType(s)!==at.undefined){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.void,received:r.parsedType}),It}return kr(s.data)}}Np.create=t=>new Np({typeName:Et.ZodVoid,...Gt(t)});class Ja extends Jt{_parse(s){const{ctx:n,status:r}=this._processInputParams(s),a=this._def;if(n.parsedType!==at.array)return Xe(n,{code:Ue.invalid_type,expected:at.array,received:n.parsedType}),It;if(a.exactLength!==null){const l=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(l||o)&&(Xe(n,{code:l?Ue.too_big:Ue.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Xe(n,{code:Ue.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Xe(n,{code:Ue.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,o)=>a.type._parseAsync(new Oi(n,l,n.path,o)))).then(l=>lr.mergeArray(r,l));const i=[...n.data].map((l,o)=>a.type._parseSync(new Oi(n,l,n.path,o)));return lr.mergeArray(r,i)}get element(){return this._def.type}min(s,n){return new Ja({...this._def,minLength:{value:s,message:yt.toString(n)}})}max(s,n){return new Ja({...this._def,maxLength:{value:s,message:yt.toString(n)}})}length(s,n){return new Ja({...this._def,exactLength:{value:s,message:yt.toString(n)}})}nonempty(s){return this.min(1,s)}}Ja.create=(t,s)=>new Ja({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Et.ZodArray,...Gt(s)});function Wc(t){if(t instanceof sn){const s={};for(const n in t.shape){const r=t.shape[n];s[n]=Ii.create(Wc(r))}return new sn({...t._def,shape:()=>s})}else return t instanceof Ja?new Ja({...t._def,type:Wc(t.element)}):t instanceof Ii?Ii.create(Wc(t.unwrap())):t instanceof jo?jo.create(Wc(t.unwrap())):t instanceof zi?zi.create(t.items.map(s=>Wc(s))):t}class sn extends Jt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),n=us.objectKeys(s);return this._cached={shape:s,keys:n}}_parse(s){if(this._getType(s)!==at.object){const d=this._getOrReturnCtx(s);return Xe(d,{code:Ue.invalid_type,expected:at.object,received:d.parsedType}),It}const{status:r,ctx:a}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const f=i[d],x=a.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Oi(a,x,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof gl){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of o)c.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(d==="strict")o.length>0&&(Xe(a,{code:Ue.unrecognized_keys,keys:o}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of o){const x=a.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Oi(a,x,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const x=await f.key,h=await f.value;d.push({key:x,value:h,alwaysSet:f.alwaysSet})}return d}).then(d=>lr.mergeObjectSync(r,d)):lr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(s){return yt.errToObj,new sn({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(n,r)=>{var a,i,l,o;const c=(l=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&l!==void 0?l:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=yt.errToObj(s).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new sn({...this._def,unknownKeys:"strip"})}passthrough(){return new sn({...this._def,unknownKeys:"passthrough"})}extend(s){return new sn({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new sn({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Et.ZodObject})}setKey(s,n){return this.augment({[s]:n})}catchall(s){return new sn({...this._def,catchall:s})}pick(s){const n={};return us.objectKeys(s).forEach(r=>{s[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new sn({...this._def,shape:()=>n})}omit(s){const n={};return us.objectKeys(this.shape).forEach(r=>{s[r]||(n[r]=this.shape[r])}),new sn({...this._def,shape:()=>n})}deepPartial(){return Wc(this)}partial(s){const n={};return us.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];s&&!s[r]?n[r]=a:n[r]=a.optional()}),new sn({...this._def,shape:()=>n})}required(s){const n={};return us.objectKeys(this.shape).forEach(r=>{if(s&&!s[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ii;)i=i._def.innerType;n[r]=i}}),new sn({...this._def,shape:()=>n})}keyof(){return OA(us.objectKeys(this.shape))}}sn.create=(t,s)=>new sn({shape:()=>t,unknownKeys:"strip",catchall:gl.create(),typeName:Et.ZodObject,...Gt(s)});sn.strictCreate=(t,s)=>new sn({shape:()=>t,unknownKeys:"strict",catchall:gl.create(),typeName:Et.ZodObject,...Gt(s)});sn.lazycreate=(t,s)=>new sn({shape:t,unknownKeys:"strip",catchall:gl.create(),typeName:Et.ZodObject,...Gt(s)});class rm extends Jt{_parse(s){const{ctx:n}=this._processInputParams(s),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new aa(o.ctx.common.issues));return Xe(n,{code:Ue.invalid_union,unionErrors:l}),It}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new aa(c));return Xe(n,{code:Ue.invalid_union,unionErrors:o}),It}}get options(){return this._def.options}}rm.create=(t,s)=>new rm({options:t,typeName:Et.ZodUnion,...Gt(s)});const Zi=t=>t instanceof lm?Zi(t.schema):t instanceof ti?Zi(t.innerType()):t instanceof om?[t.value]:t instanceof go?t.options:t instanceof cm?us.objectValues(t.enum):t instanceof dm?Zi(t._def.innerType):t instanceof sm?[void 0]:t instanceof nm?[null]:t instanceof Ii?[void 0,...Zi(t.unwrap())]:t instanceof jo?[null,...Zi(t.unwrap())]:t instanceof Tb||t instanceof fm?Zi(t.unwrap()):t instanceof um?Zi(t._def.innerType):[];class P0 extends Jt{_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==at.object)return Xe(n,{code:Ue.invalid_type,expected:at.object,received:n.parsedType}),It;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Xe(n,{code:Ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),It)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,n,r){const a=new Map;for(const i of n){const l=Zi(i.shape[s]);if(!l.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const o of l){if(a.has(o))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(o)}`);a.set(o,i)}}return new P0({typeName:Et.ZodDiscriminatedUnion,discriminator:s,options:n,optionsMap:a,...Gt(r)})}}function ry(t,s){const n=Xi(t),r=Xi(s);if(t===s)return{valid:!0,data:t};if(n===at.object&&r===at.object){const a=us.objectKeys(s),i=us.objectKeys(t).filter(o=>a.indexOf(o)!==-1),l={...t,...s};for(const o of i){const c=ry(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(n===at.array&&r===at.array){if(t.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const l=t[i],o=s[i],c=ry(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===at.date&&r===at.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class am extends Jt{_parse(s){const{status:n,ctx:r}=this._processInputParams(s),a=(i,l)=>{if(sy(i)||sy(l))return It;const o=ry(i.value,l.value);return o.valid?((ny(i)||ny(l))&&n.dirty(),{status:n.value,value:o.data}):(Xe(r,{code:Ue.invalid_intersection_types}),It)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}am.create=(t,s,n)=>new am({left:t,right:s,typeName:Et.ZodIntersection,...Gt(n)});class zi extends Jt{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==at.array)return Xe(r,{code:Ue.invalid_type,expected:at.array,received:r.parsedType}),It;if(r.data.length<this._def.items.length)return Xe(r,{code:Ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),It;!this._def.rest&&r.data.length>this._def.items.length&&(Xe(r,{code:Ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Oi(r,l,r.path,o)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>lr.mergeArray(n,l)):lr.mergeArray(n,i)}get items(){return this._def.items}rest(s){return new zi({...this._def,rest:s})}}zi.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zi({items:t,typeName:Et.ZodTuple,rest:null,...Gt(s)})};class im extends Jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==at.object)return Xe(r,{code:Ue.invalid_type,expected:at.object,received:r.parsedType}),It;const a=[],i=this._def.keyType,l=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new Oi(r,o,r.path,o)),value:l._parse(new Oi(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?lr.mergeObjectAsync(n,a):lr.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(s,n,r){return n instanceof Jt?new im({keyType:s,valueType:n,typeName:Et.ZodRecord,...Gt(r)}):new im({keyType:Qa.create(),valueType:s,typeName:Et.ZodRecord,...Gt(n)})}}class Cp extends Jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==at.map)return Xe(r,{code:Ue.invalid_type,expected:at.map,received:r.parsedType}),It;const a=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([o,c],d)=>({key:a._parse(new Oi(r,o,r.path,[d,"key"])),value:i._parse(new Oi(r,c,r.path,[d,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return It;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(d.value,f.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return It;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(d.value,f.value)}return{status:n.value,value:o}}}}Cp.create=(t,s,n)=>new Cp({valueType:s,keyType:t,typeName:Et.ZodMap,...Gt(n)});class vc extends Jt{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==at.set)return Xe(r,{code:Ue.invalid_type,expected:at.set,received:r.parsedType}),It;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Xe(r,{code:Ue.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Xe(r,{code:Ue.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const f of c){if(f.status==="aborted")return It;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const o=[...r.data.values()].map((c,d)=>i._parse(new Oi(r,c,r.path,d)));return r.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,n){return new vc({...this._def,minSize:{value:s,message:yt.toString(n)}})}max(s,n){return new vc({...this._def,maxSize:{value:s,message:yt.toString(n)}})}size(s,n){return this.min(s,n).max(s,n)}nonempty(s){return this.min(1,s)}}vc.create=(t,s)=>new vc({valueType:t,minSize:null,maxSize:null,typeName:Et.ZodSet,...Gt(s)});class vd extends Jt{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==at.function)return Xe(n,{code:Ue.invalid_type,expected:at.function,received:n.parsedType}),It;function r(o,c){return vp({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yp(),tu].filter(d=>!!d),issueData:{code:Ue.invalid_arguments,argumentsError:c}})}function a(o,c){return vp({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yp(),tu].filter(d=>!!d),issueData:{code:Ue.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof nu){const o=this;return kr(async function(...c){const d=new aa([]),f=await o._def.args.parseAsync(c,i).catch(j=>{throw d.addIssue(r(c,j)),d}),x=await Reflect.apply(l,this,f);return await o._def.returns._def.type.parseAsync(x,i).catch(j=>{throw d.addIssue(a(x,j)),d})})}else{const o=this;return kr(function(...c){const d=o._def.args.safeParse(c,i);if(!d.success)throw new aa([r(c,d.error)]);const f=Reflect.apply(l,this,d.data),x=o._def.returns.safeParse(f,i);if(!x.success)throw new aa([a(f,x.error)]);return x.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new vd({...this._def,args:zi.create(s).rest(tc.create())})}returns(s){return new vd({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,n,r){return new vd({args:s||zi.create([]).rest(tc.create()),returns:n||tc.create(),typeName:Et.ZodFunction,...Gt(r)})}}class lm extends Jt{get schema(){return this._def.getter()}_parse(s){const{ctx:n}=this._processInputParams(s);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}lm.create=(t,s)=>new lm({getter:t,typeName:Et.ZodLazy,...Gt(s)});class om extends Jt{_parse(s){if(s.data!==this._def.value){const n=this._getOrReturnCtx(s);return Xe(n,{received:n.data,code:Ue.invalid_literal,expected:this._def.value}),It}return{status:"valid",value:s.data}}get value(){return this._def.value}}om.create=(t,s)=>new om({value:t,typeName:Et.ZodLiteral,...Gt(s)});function OA(t,s){return new go({values:t,typeName:Et.ZodEnum,...Gt(s)})}class go extends Jt{constructor(){super(...arguments),lf.set(this,void 0)}_parse(s){if(typeof s.data!="string"){const n=this._getOrReturnCtx(s),r=this._def.values;return Xe(n,{expected:us.joinValues(r),received:n.parsedType,code:Ue.invalid_type}),It}if(bp(this,lf)||DA(this,lf,new Set(this._def.values)),!bp(this,lf).has(s.data)){const n=this._getOrReturnCtx(s),r=this._def.values;return Xe(n,{received:n.data,code:Ue.invalid_enum_value,options:r}),It}return kr(s.data)}get options(){return this._def.values}get enum(){const s={};for(const n of this._def.values)s[n]=n;return s}get Values(){const s={};for(const n of this._def.values)s[n]=n;return s}get Enum(){const s={};for(const n of this._def.values)s[n]=n;return s}extract(s,n=this._def){return go.create(s,{...this._def,...n})}exclude(s,n=this._def){return go.create(this.options.filter(r=>!s.includes(r)),{...this._def,...n})}}lf=new WeakMap;go.create=OA;class cm extends Jt{constructor(){super(...arguments),of.set(this,void 0)}_parse(s){const n=us.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(s);if(r.parsedType!==at.string&&r.parsedType!==at.number){const a=us.objectValues(n);return Xe(r,{expected:us.joinValues(a),received:r.parsedType,code:Ue.invalid_type}),It}if(bp(this,of)||DA(this,of,new Set(us.getValidEnumValues(this._def.values))),!bp(this,of).has(s.data)){const a=us.objectValues(n);return Xe(r,{received:r.data,code:Ue.invalid_enum_value,options:a}),It}return kr(s.data)}get enum(){return this._def.values}}of=new WeakMap;cm.create=(t,s)=>new cm({values:t,typeName:Et.ZodNativeEnum,...Gt(s)});class nu extends Jt{unwrap(){return this._def.type}_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==at.promise&&n.common.async===!1)return Xe(n,{code:Ue.invalid_type,expected:at.promise,received:n.parsedType}),It;const r=n.parsedType===at.promise?n.data:Promise.resolve(n.data);return kr(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}nu.create=(t,s)=>new nu({type:t,typeName:Et.ZodPromise,...Gt(s)});class ti extends Jt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Et.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:n,ctx:r}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:l=>{Xe(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async o=>{if(n.value==="aborted")return It;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?It:c.status==="dirty"||n.value==="dirty"?ld(c.value):c});{if(n.value==="aborted")return It;const o=this._def.schema._parseSync({data:l,path:r.path,parent:r});return o.status==="aborted"?It:o.status==="dirty"||n.value==="dirty"?ld(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?It:(o.status==="dirty"&&n.dirty(),l(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?It:(o.status==="dirty"&&n.dirty(),l(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!jc(l))return l;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>jc(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:n.value,value:o})):l);us.assertNever(a)}}ti.create=(t,s,n)=>new ti({schema:t,typeName:Et.ZodEffects,effect:s,...Gt(n)});ti.createWithPreprocess=(t,s,n)=>new ti({schema:s,effect:{type:"preprocess",transform:t},typeName:Et.ZodEffects,...Gt(n)});class Ii extends Jt{_parse(s){return this._getType(s)===at.undefined?kr(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Ii.create=(t,s)=>new Ii({innerType:t,typeName:Et.ZodOptional,...Gt(s)});class jo extends Jt{_parse(s){return this._getType(s)===at.null?kr(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}jo.create=(t,s)=>new jo({innerType:t,typeName:Et.ZodNullable,...Gt(s)});class dm extends Jt{_parse(s){const{ctx:n}=this._processInputParams(s);let r=n.data;return n.parsedType===at.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}dm.create=(t,s)=>new dm({innerType:t,typeName:Et.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...Gt(s)});class um extends Jt{_parse(s){const{ctx:n}=this._processInputParams(s),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return em(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new aa(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new aa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}um.create=(t,s)=>new um({innerType:t,typeName:Et.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...Gt(s)});class Mp extends Jt{_parse(s){if(this._getType(s)!==at.nan){const r=this._getOrReturnCtx(s);return Xe(r,{code:Ue.invalid_type,expected:at.nan,received:r.parsedType}),It}return{status:"valid",value:s.data}}}Mp.create=t=>new Mp({typeName:Et.ZodNaN,...Gt(t)});const dZ=Symbol("zod_brand");class Tb extends Jt{_parse(s){const{ctx:n}=this._processInputParams(s),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wm extends Jt{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?It:i.status==="dirty"?(n.dirty(),ld(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?It:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(s,n){return new Wm({in:s,out:n,typeName:Et.ZodPipeline})}}class fm extends Jt{_parse(s){const n=this._def.innerType._parse(s),r=a=>(jc(a)&&(a.value=Object.freeze(a.value)),a);return em(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}fm.create=(t,s)=>new fm({innerType:t,typeName:Et.ZodReadonly,...Gt(s)});function C4(t,s){const n=typeof t=="function"?t(s):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function zA(t,s={},n){return t?su.create().superRefine((r,a)=>{var i,l;const o=t(r);if(o instanceof Promise)return o.then(c=>{var d,f;if(!c){const x=C4(s,r),h=(f=(d=x.fatal)!==null&&d!==void 0?d:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...x,fatal:h})}});if(!o){const c=C4(s,r),d=(l=(i=c.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0;a.addIssue({code:"custom",...c,fatal:d})}}):su.create()}const uZ={object:sn.lazycreate};var Et;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Et||(Et={}));const fZ=(t,s={message:`Input not instance of ${t.name}`})=>zA(n=>n instanceof t,s),zr=Qa.create,Eb=xo.create,mZ=Mp.create,hZ=po.create,ma=tm.create,xZ=yc.create,pZ=wp.create,gZ=sm.create,jZ=nm.create,yZ=su.create,vZ=tc.create,bZ=gl.create,wZ=Np.create,FA=Ja.create,wu=sn.create,NZ=sn.strictCreate,CZ=rm.create,MZ=P0.create,SZ=am.create,kZ=zi.create,LZ=im.create,TZ=Cp.create,EZ=vc.create,IZ=vd.create,AZ=lm.create,DZ=om.create,UA=go.create,PZ=cm.create,_Z=nu.create,M4=ti.create,RZ=Ii.create,OZ=jo.create,zZ=ti.createWithPreprocess,FZ=Wm.create,UZ=()=>zr().optional(),$Z=()=>Eb().optional(),BZ=()=>ma().optional(),VZ={string:t=>Qa.create({...t,coerce:!0}),number:t=>xo.create({...t,coerce:!0}),boolean:t=>tm.create({...t,coerce:!0}),bigint:t=>po.create({...t,coerce:!0}),date:t=>yc.create({...t,coerce:!0})},GZ=It;var R=Object.freeze({__proto__:null,defaultErrorMap:tu,setErrorMap:$W,getErrorMap:yp,makeIssue:vp,EMPTY_PATH:BW,addIssueToContext:Xe,ParseStatus:lr,INVALID:It,DIRTY:ld,OK:kr,isAborted:sy,isDirty:ny,isValid:jc,isAsync:em,get util(){return us},get objectUtil(){return ty},ZodParsedType:at,getParsedType:Xi,ZodType:Jt,datetimeRegex:RA,ZodString:Qa,ZodNumber:xo,ZodBigInt:po,ZodBoolean:tm,ZodDate:yc,ZodSymbol:wp,ZodUndefined:sm,ZodNull:nm,ZodAny:su,ZodUnknown:tc,ZodNever:gl,ZodVoid:Np,ZodArray:Ja,ZodObject:sn,ZodUnion:rm,ZodDiscriminatedUnion:P0,ZodIntersection:am,ZodTuple:zi,ZodRecord:im,ZodMap:Cp,ZodSet:vc,ZodFunction:vd,ZodLazy:lm,ZodLiteral:om,ZodEnum:go,ZodNativeEnum:cm,ZodPromise:nu,ZodEffects:ti,ZodTransformer:ti,ZodOptional:Ii,ZodNullable:jo,ZodDefault:dm,ZodCatch:um,ZodNaN:Mp,BRAND:dZ,ZodBranded:Tb,ZodPipeline:Wm,ZodReadonly:fm,custom:zA,Schema:Jt,ZodSchema:Jt,late:uZ,get ZodFirstPartyTypeKind(){return Et},coerce:VZ,any:yZ,array:FA,bigint:hZ,boolean:ma,date:xZ,discriminatedUnion:MZ,effect:M4,enum:UA,function:IZ,instanceof:fZ,intersection:SZ,lazy:AZ,literal:DZ,map:TZ,nan:mZ,nativeEnum:PZ,never:bZ,null:jZ,nullable:OZ,number:Eb,object:wu,oboolean:BZ,onumber:$Z,optional:RZ,ostring:UZ,pipeline:FZ,preprocess:zZ,promise:_Z,record:LZ,set:EZ,strictObject:NZ,string:zr,symbol:pZ,transformer:M4,tuple:kZ,undefined:gZ,union:CZ,unknown:vZ,void:wZ,NEVER:GZ,ZodIssueCode:Ue,quotelessJson:UW,ZodError:aa}),Ib="Tabs",[YZ,zce]=Tn(Ib,[bu]),$A=bu(),[QZ,Ab]=YZ(Ib),BA=u.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,f=Lc(o),[x,h]=Yr({prop:r,onChange:a,defaultProp:i});return e.jsx(QZ,{scope:n,baseId:na(),value:x,onValueChange:h,orientation:l,dir:f,activationMode:c,children:e.jsx(it.div,{dir:f,"data-orientation":l,...d,ref:s})})});BA.displayName=Ib;var VA="TabsList",GA=u.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...a}=t,i=Ab(VA,n),l=$A(n);return e.jsx(mb,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(it.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});GA.displayName=VA;var YA="TabsTrigger",QA=u.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=t,l=Ab(YA,n),o=$A(n),c=ZA(l.baseId,r),d=JA(l.baseId,r),f=r===l.value;return e.jsx(hb,{asChild:!0,...o,focusable:!a,active:f,children:e.jsx(it.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:Ge(t.onMouseDown,x=>{!a&&x.button===0&&x.ctrlKey===!1?l.onValueChange(r):x.preventDefault()}),onKeyDown:Ge(t.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&l.onValueChange(r)}),onFocus:Ge(t.onFocus,()=>{const x=l.activationMode!=="manual";!f&&!a&&x&&l.onValueChange(r)})})})});QA.displayName=YA;var HA="TabsContent",WA=u.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...l}=t,o=Ab(HA,n),c=ZA(o.baseId,r),d=JA(o.baseId,r),f=r===o.value,x=u.useRef(f);return u.useEffect(()=>{const h=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Qn,{present:a||f,children:({present:h})=>e.jsx(it.div,{"data-state":f?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:x.current?"0s":void 0},children:h&&i})})});WA.displayName=HA;function ZA(t,s){return`${t}-trigger-${s}`}function JA(t,s){return`${t}-content-${s}`}var HZ=BA,qA=GA,KA=QA,XA=WA;const cr=HZ,Xn=u.forwardRef(({className:t,...s},n)=>e.jsx(qA,{ref:n,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Xn.displayName=qA.displayName;const Ot=u.forwardRef(({className:t,...s},n)=>e.jsx(KA,{ref:n,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Ot.displayName=KA.displayName;const Kt=u.forwardRef(({className:t,...s},n)=>e.jsx(XA,{ref:n,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Kt.displayName=XA.displayName;var WZ="Label",eD=u.forwardRef((t,s)=>e.jsx(it.label,{...t,ref:s,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eD.displayName=WZ;var tD=eD;const ZZ=kc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=u.forwardRef(({className:t,...s},n)=>e.jsx(tD,{ref:n,className:Te(ZZ(),t),...s}));Ce.displayName=tD.displayName;const sc=vA,sD=u.createContext({}),Rs=({...t})=>e.jsx(sD.Provider,{value:{name:t.name},children:e.jsx(NA,{...t})}),_0=()=>{const t=u.useContext(sD),s=u.useContext(nD),{getFieldState:n,formState:r}=Hm(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},nD=u.createContext({}),Es=u.forwardRef(({className:t,...s},n)=>{const r=u.useId();return e.jsx(nD.Provider,{value:{id:r},children:e.jsx("div",{ref:n,className:Te("space-y-2",t),...s})})});Es.displayName="FormItem";const Is=u.forwardRef(({className:t,...s},n)=>{const{error:r,formItemId:a}=_0();return e.jsx(Ce,{ref:n,className:Te(r&&"text-destructive",t),htmlFor:a,...s})});Is.displayName="FormLabel";const Ss=u.forwardRef(({...t},s)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:i}=_0();return e.jsx(d0,{ref:s,id:r,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...t})});Ss.displayName="FormControl";const ay=u.forwardRef(({className:t,...s},n)=>{const{formDescriptionId:r}=_0();return e.jsx("p",{ref:n,id:r,className:Te("text-sm text-muted-foreground",t),...s})});ay.displayName="FormDescription";const Ps=u.forwardRef(({className:t,children:s,...n},r)=>{const{error:a,formMessageId:i}=_0(),l=a?String(a==null?void 0:a.message):s;return l?e.jsx("p",{ref:r,id:i,className:Te("text-sm font-medium text-destructive",t),...n,children:l}):null});Ps.displayName="FormMessage";const as=u.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:Te("flex h-10 w-full rounded-md border border-input bg-[#FAFAFA] px-3 py-2 text-sm text-[#333333] ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));as.displayName="Input";function iy(t,[s,n]){return Math.min(n,Math.max(s,t))}function R0(t){const s=u.useRef({value:t,previous:t});return u.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var JZ=[" ","Enter","ArrowUp","ArrowDown"],qZ=[" ","Enter"],Zm="Select",[O0,z0,KZ]=Pm(Zm),[Nu,Fce]=Tn(Zm,[KZ,vu]),F0=vu(),[XZ,Co]=Nu(Zm),[eJ,tJ]=Nu(Zm),rD=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:f,autoComplete:x,disabled:h,required:j,form:v}=t,p=F0(s),[b,y]=u.useState(null),[m,g]=u.useState(null),[w,N]=u.useState(!1),k=Lc(d),[L=!1,S]=Yr({prop:r,defaultProp:a,onChange:i}),[T,E]=Yr({prop:l,defaultProp:o,onChange:c}),$=u.useRef(null),F=b?v||!!b.closest("form"):!0,[Z,G]=u.useState(new Set),D=Array.from(Z).map(B=>B.props.value).join(";");return e.jsx(sb,{...p,children:e.jsxs(XZ,{required:j,scope:s,trigger:b,onTriggerChange:y,valueNode:m,onValueNodeChange:g,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:na(),value:T,onValueChange:E,open:L,onOpenChange:S,dir:k,triggerPointerDownPosRef:$,disabled:h,children:[e.jsx(O0.Provider,{scope:s,children:e.jsx(eJ,{scope:t.__scopeSelect,onNativeOptionAdd:u.useCallback(B=>{G(de=>new Set(de).add(B))},[]),onNativeOptionRemove:u.useCallback(B=>{G(de=>{const U=new Set(de);return U.delete(B),U})},[]),children:n})}),F?e.jsxs(TD,{"aria-hidden":!0,required:j,tabIndex:-1,name:f,autoComplete:x,value:T,onChange:B=>E(B.target.value),disabled:h,form:v,children:[T===void 0?e.jsx("option",{value:""}):null,Array.from(Z)]},D):null]})})};rD.displayName=Zm;var aD="SelectTrigger",iD=u.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,i=F0(n),l=Co(aD,n),o=l.disabled||r,c=Rt(s,l.onTriggerChange),d=z0(n),f=u.useRef("touch"),[x,h,j]=ED(p=>{const b=d().filter(g=>!g.disabled),y=b.find(g=>g.value===l.value),m=ID(b,p,y);m!==void 0&&l.onValueChange(m.value)}),v=p=>{o||(l.onOpenChange(!0),j()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(nb,{asChild:!0,...i,children:e.jsx(it.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":LD(l.value)?"":void 0,...a,ref:c,onClick:Ge(a.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&v(p)}),onPointerDown:Ge(a.onPointerDown,p=>{f.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:Ge(a.onKeyDown,p=>{const b=x.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(b&&p.key===" ")&&JZ.includes(p.key)&&(v(),p.preventDefault())})})})});iD.displayName=aD;var lD="SelectValue",oD=u.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:l="",...o}=t,c=Co(lD,n),{onValueNodeHasChildrenChange:d}=c,f=i!==void 0,x=Rt(s,c.onValueNodeChange);return jn(()=>{d(f)},[d,f]),e.jsx(it.span,{...o,ref:x,style:{pointerEvents:"none"},children:LD(c.value)?e.jsx(e.Fragment,{children:l}):i})});oD.displayName=lD;var sJ="SelectIcon",cD=u.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...a}=t;return e.jsx(it.span,{"aria-hidden":!0,...a,ref:s,children:r||"▼"})});cD.displayName=sJ;var nJ="SelectPortal",dD=t=>e.jsx(_m,{asChild:!0,...t});dD.displayName=nJ;var bc="SelectContent",uD=u.forwardRef((t,s)=>{const n=Co(bc,t.__scopeSelect),[r,a]=u.useState();if(jn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Sc.createPortal(e.jsx(fD,{scope:t.__scopeSelect,children:e.jsx(O0.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(mD,{...t,ref:s})});uD.displayName=bc;var Da=10,[fD,Mo]=Nu(bc),rJ="SelectContentImpl",aJ=fc("SelectContent.RemoveScroll"),mD=u.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:f,arrowPadding:x,collisionBoundary:h,collisionPadding:j,sticky:v,hideWhenDetached:p,avoidCollisions:b,...y}=t,m=Co(bc,n),[g,w]=u.useState(null),[N,k]=u.useState(null),L=Rt(s,Ne=>w(Ne)),[S,T]=u.useState(null),[E,$]=u.useState(null),F=z0(n),[Z,G]=u.useState(!1),D=u.useRef(!1);u.useEffect(()=>{if(g)return xb(g)},[g]),fb();const B=u.useCallback(Ne=>{const[qe,...ve]=F().map(ke=>ke.ref.current),[Ee]=ve.slice(-1),ne=document.activeElement;for(const ke of Ne)if(ke===ne||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===qe&&N&&(N.scrollTop=0),ke===Ee&&N&&(N.scrollTop=N.scrollHeight),ke==null||ke.focus(),document.activeElement!==ne))return},[F,N]),de=u.useCallback(()=>B([S,g]),[B,S,g]);u.useEffect(()=>{Z&&de()},[Z,de]);const{onOpenChange:U,triggerPointerDownPosRef:W}=m;u.useEffect(()=>{if(g){let Ne={x:0,y:0};const qe=Ee=>{var ne,ke;Ne={x:Math.abs(Math.round(Ee.pageX)-(((ne=W.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((ke=W.current)==null?void 0:ke.y)??0))}},ve=Ee=>{Ne.x<=10&&Ne.y<=10?Ee.preventDefault():g.contains(Ee.target)||U(!1),document.removeEventListener("pointermove",qe),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",qe),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",qe),document.removeEventListener("pointerup",ve,{capture:!0})}}},[g,U,W]),u.useEffect(()=>{const Ne=()=>U(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[U]);const[re,we]=ED(Ne=>{const qe=F().filter(ne=>!ne.disabled),ve=qe.find(ne=>ne.ref.current===document.activeElement),Ee=ID(qe,Ne,ve);Ee&&setTimeout(()=>Ee.ref.current.focus())}),be=u.useCallback((Ne,qe,ve)=>{const Ee=!D.current&&!ve;(m.value!==void 0&&m.value===qe||Ee)&&(T(Ne),Ee&&(D.current=!0))},[m.value]),J=u.useCallback(()=>g==null?void 0:g.focus(),[g]),Fe=u.useCallback((Ne,qe,ve)=>{const Ee=!D.current&&!ve;(m.value!==void 0&&m.value===qe||Ee)&&$(Ne)},[m.value]),Oe=r==="popper"?ly:hD,Ve=Oe===ly?{side:o,sideOffset:c,align:d,alignOffset:f,arrowPadding:x,collisionBoundary:h,collisionPadding:j,sticky:v,hideWhenDetached:p,avoidCollisions:b}:{};return e.jsx(fD,{scope:n,content:g,viewport:N,onViewportChange:k,itemRefCallback:be,selectedItem:S,onItemLeave:J,itemTextRefCallback:Fe,focusSelectedItem:de,selectedItemText:E,position:r,isPositioned:Z,searchRef:re,children:e.jsx(L0,{as:aJ,allowPinchZoom:!0,children:e.jsx(M0,{asChild:!0,trapped:m.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:Ge(a,Ne=>{var qe;(qe=m.trigger)==null||qe.focus({preventScroll:!0}),Ne.preventDefault()}),children:e.jsx(xu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(Oe,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:Ne=>Ne.preventDefault(),...y,...Ve,onPlaced:()=>G(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ge(y.onKeyDown,Ne=>{const qe=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!qe&&Ne.key.length===1&&we(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Ee=F().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const ne=Ne.target,ke=Ee.indexOf(ne);Ee=Ee.slice(ke+1)}setTimeout(()=>B(Ee)),Ne.preventDefault()}})})})})})})});mD.displayName=rJ;var iJ="SelectItemAlignedPosition",hD=u.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,i=Co(bc,n),l=Mo(bc,n),[o,c]=u.useState(null),[d,f]=u.useState(null),x=Rt(s,L=>f(L)),h=z0(n),j=u.useRef(!1),v=u.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:y,focusSelectedItem:m}=l,g=u.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&p&&b&&y){const L=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),E=y.getBoundingClientRect();if(i.dir!=="rtl"){const ne=E.left-S.left,ke=T.left-ne,tt=L.left-ke,xt=L.width+tt,Q=Math.max(xt,S.width),oe=window.innerWidth-Da,Ae=iy(ke,[Da,Math.max(Da,oe-Q)]);o.style.minWidth=xt+"px",o.style.left=Ae+"px"}else{const ne=S.right-E.right,ke=window.innerWidth-T.right-ne,tt=window.innerWidth-L.right-ke,xt=L.width+tt,Q=Math.max(xt,S.width),oe=window.innerWidth-Da,Ae=iy(ke,[Da,Math.max(Da,oe-Q)]);o.style.minWidth=xt+"px",o.style.right=Ae+"px"}const $=h(),F=window.innerHeight-Da*2,Z=p.scrollHeight,G=window.getComputedStyle(d),D=parseInt(G.borderTopWidth,10),B=parseInt(G.paddingTop,10),de=parseInt(G.borderBottomWidth,10),U=parseInt(G.paddingBottom,10),W=D+B+Z+U+de,re=Math.min(b.offsetHeight*5,W),we=window.getComputedStyle(p),be=parseInt(we.paddingTop,10),J=parseInt(we.paddingBottom,10),Fe=L.top+L.height/2-Da,Oe=F-Fe,Ve=b.offsetHeight/2,Ne=b.offsetTop+Ve,qe=D+B+Ne,ve=W-qe;if(qe<=Fe){const ne=$.length>0&&b===$[$.length-1].ref.current;o.style.bottom="0px";const ke=d.clientHeight-p.offsetTop-p.offsetHeight,tt=Math.max(Oe,Ve+(ne?J:0)+ke+de),xt=qe+tt;o.style.height=xt+"px"}else{const ne=$.length>0&&b===$[0].ref.current;o.style.top="0px";const tt=Math.max(Fe,D+p.offsetTop+(ne?be:0)+Ve)+ve;o.style.height=tt+"px",p.scrollTop=qe-Fe+p.offsetTop}o.style.margin=`${Da}px 0`,o.style.minHeight=re+"px",o.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>j.current=!0)}},[h,i.trigger,i.valueNode,o,d,p,b,y,i.dir,r]);jn(()=>g(),[g]);const[w,N]=u.useState();jn(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const k=u.useCallback(L=>{L&&v.current===!0&&(g(),m==null||m(),v.current=!1)},[g,m]);return e.jsx(oJ,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:j,onScrollButtonChange:k,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:e.jsx(it.div,{...a,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});hD.displayName=iJ;var lJ="SelectPopperPosition",ly=u.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Da,...i}=t,l=F0(n);return e.jsx(rb,{...l,...i,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ly.displayName=lJ;var[oJ,Db]=Nu(bc,{}),oy="SelectViewport",xD=u.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...a}=t,i=Mo(oy,n),l=Db(oy,n),o=Rt(s,i.onViewportChange),c=u.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(O0.Slot,{scope:n,children:e.jsx(it.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ge(a.onScroll,d=>{const f=d.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&x){const j=Math.abs(c.current-f.scrollTop);if(j>0){const v=window.innerHeight-Da*2,p=parseFloat(x.style.minHeight),b=parseFloat(x.style.height),y=Math.max(p,b);if(y<v){const m=y+j,g=Math.min(v,m),w=m-g;x.style.height=g+"px",x.style.bottom==="0px"&&(f.scrollTop=w>0?w:0,x.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});xD.displayName=oy;var pD="SelectGroup",[cJ,dJ]=Nu(pD),uJ=u.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=na();return e.jsx(cJ,{scope:n,id:a,children:e.jsx(it.div,{role:"group","aria-labelledby":a,...r,ref:s})})});uJ.displayName=pD;var gD="SelectLabel",jD=u.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=dJ(gD,n);return e.jsx(it.div,{id:a.id,...r,ref:s})});jD.displayName=gD;var Sp="SelectItem",[fJ,yD]=Nu(Sp),vD=u.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...l}=t,o=Co(Sp,n),c=Mo(Sp,n),d=o.value===r,[f,x]=u.useState(i??""),[h,j]=u.useState(!1),v=Rt(s,m=>{var g;return(g=c.itemRefCallback)==null?void 0:g.call(c,m,r,a)}),p=na(),b=u.useRef("touch"),y=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(fJ,{scope:n,value:r,disabled:a,textId:p,isSelected:d,onItemTextChange:u.useCallback(m=>{x(g=>g||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(O0.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:e.jsx(it.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:v,onFocus:Ge(l.onFocus,()=>j(!0)),onBlur:Ge(l.onBlur,()=>j(!1)),onClick:Ge(l.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:Ge(l.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:Ge(l.onPointerDown,m=>{b.current=m.pointerType}),onPointerMove:Ge(l.onPointerMove,m=>{var g;b.current=m.pointerType,a?(g=c.onItemLeave)==null||g.call(c):b.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(l.onPointerLeave,m=>{var g;m.currentTarget===document.activeElement&&((g=c.onItemLeave)==null||g.call(c))}),onKeyDown:Ge(l.onKeyDown,m=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&m.key===" "||(qZ.includes(m.key)&&y(),m.key===" "&&m.preventDefault())})})})})});vD.displayName=Sp;var cf="SelectItemText",bD=u.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,...i}=t,l=Co(cf,n),o=Mo(cf,n),c=yD(cf,n),d=tJ(cf,n),[f,x]=u.useState(null),h=Rt(s,y=>x(y),c.onItemTextChange,y=>{var m;return(m=o.itemTextRefCallback)==null?void 0:m.call(o,y,c.value,c.disabled)}),j=f==null?void 0:f.textContent,v=u.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:j},c.value),[c.disabled,c.value,j]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=d;return jn(()=>(p(v),()=>b(v)),[p,b,v]),e.jsxs(e.Fragment,{children:[e.jsx(it.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Sc.createPortal(i.children,l.valueNode):null]})});bD.displayName=cf;var wD="SelectItemIndicator",ND=u.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return yD(wD,n).isSelected?e.jsx(it.span,{"aria-hidden":!0,...r,ref:s}):null});ND.displayName=wD;var cy="SelectScrollUpButton",CD=u.forwardRef((t,s)=>{const n=Mo(cy,t.__scopeSelect),r=Db(cy,t.__scopeSelect),[a,i]=u.useState(!1),l=Rt(s,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(SD,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});CD.displayName=cy;var dy="SelectScrollDownButton",MD=u.forwardRef((t,s)=>{const n=Mo(dy,t.__scopeSelect),r=Db(dy,t.__scopeSelect),[a,i]=u.useState(!1),l=Rt(s,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;i(f)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(SD,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});MD.displayName=dy;var SD=u.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,i=Mo("SelectScrollButton",n),l=u.useRef(null),o=z0(n),c=u.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),jn(()=>{var f;const d=o().find(x=>x.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[o]),e.jsx(it.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:Ge(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Ge(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Ge(a.onPointerLeave,()=>{c()})})}),mJ="SelectSeparator",kD=u.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(it.div,{"aria-hidden":!0,...r,ref:s})});kD.displayName=mJ;var uy="SelectArrow",hJ=u.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=F0(n),i=Co(uy,n),l=Mo(uy,n);return i.open&&l.position==="popper"?e.jsx(ab,{...a,...r,ref:s}):null});hJ.displayName=uy;function LD(t){return t===""||t===void 0}var TD=u.forwardRef((t,s)=>{const{value:n,...r}=t,a=u.useRef(null),i=Rt(s,a),l=R0(n);return u.useEffect(()=>{const o=a.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==n&&f){const x=new Event("change",{bubbles:!0});f.call(o,n),o.dispatchEvent(x)}},[l,n]),e.jsx(Rm,{asChild:!0,children:e.jsx("select",{...r,ref:i,defaultValue:n})})});TD.displayName="BubbleSelect";function ED(t){const s=Ks(t),n=u.useRef(""),r=u.useRef(0),a=u.useCallback(l=>{const o=n.current+l;s(o),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=u.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function ID(t,s,n){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=xJ(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function xJ(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var pJ=rD,AD=iD,gJ=oD,jJ=cD,yJ=dD,DD=uD,vJ=xD,PD=jD,_D=vD,bJ=bD,wJ=ND,RD=CD,OD=MD,zD=kD;const Nt=pJ,Ct=gJ,bt=u.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(AD,{ref:r,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(jJ,{asChild:!0,children:e.jsx(m0,{className:"h-4 w-4 opacity-50"})})]}));bt.displayName=AD.displayName;const FD=u.forwardRef(({className:t,...s},n)=>e.jsx(RD,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(qT,{className:"h-4 w-4"})}));FD.displayName=RD.displayName;const UD=u.forwardRef(({className:t,...s},n)=>e.jsx(OD,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(m0,{className:"h-4 w-4"})}));UD.displayName=OD.displayName;const wt=u.forwardRef(({className:t,children:s,position:n="popper",...r},a)=>e.jsx(yJ,{children:e.jsxs(DD,{ref:a,className:Te("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(FD,{}),e.jsx(vJ,{className:Te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(UD,{})]})}));wt.displayName=DD.displayName;const NJ=u.forwardRef(({className:t,...s},n)=>e.jsx(PD,{ref:n,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));NJ.displayName=PD.displayName;const te=u.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(_D,{ref:r,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(wJ,{children:e.jsx(vl,{className:"h-4 w-4"})})}),e.jsx(bJ,{children:s})]}));te.displayName=_D.displayName;const CJ=u.forwardRef(({className:t,...s},n)=>e.jsx(zD,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",t),...s}));CJ.displayName=zD.displayName;const MJ=R.object({email:R.string().email("البريد الإلكتروني غير صالح"),password:R.string().min(6,"كلمة المرور يجب أن تكون على الأقل 6 أحرف")}),SJ=R.object({token:R.string().regex(/^\d{6}$/,"يجب إدخال 6 أرقام فقط")}),kJ=R.object({fullName:R.string().min(3,"الاسم الكامل يجب أن يكون على الأقل 3 أحرف"),officeName:R.string().min(3,"اسم المكتب يجب أن يكون على الأقل 3 أحرف"),officeAddress:R.string().min(5,"عنوان المكتب يجب أن يكون على الأقل 5 أحرف"),email:R.string().email("البريد الإلكتروني غير صالح"),phone:R.string().optional(),password:R.string().min(6,"كلمة المرور يجب أن تكون على الأقل 6 أحرف"),countryId:R.number().min(1,"يرجى اختيار الدولة"),countryName:R.string().min(2,"يرجى اختيار الدولة"),cityId:R.number().min(1,"يرجى اختيار المدينة"),cityName:R.string().min(2,"يرجى اختيار المدينة")});function LJ(){console.log("🚀 [AUTH PAGE] AuthPage component loaded"),console.log("🚀 [AUTH PAGE] security object available:",!!ds);const{user:t,isLoading:s,loginMutation:n,registerMutation:r,verify2FAMutation:a}=Mt(),[,i]=_t(),[l,o]=u.useState("login"),[c,d]=u.useState(!1),[f,x]=u.useState(!1),[h,j]=u.useState(0),[v,p]=u.useState(!1),[b,y]=u.useState(0),[m,g]=u.useState(!1),[w,N]=u.useState(""),[k,L]=u.useState(null);console.log("🚀 [AUTH PAGE] Component state initialized");const{data:S=[]}=$e({queryKey:["/api/countries"],enabled:l==="register"}),{data:T=[]}=$e({queryKey:[`/api/countries/${b}/cities`],enabled:b>0&&l==="register"}),E=Array.isArray(S)?S:[],$=Array.isArray(T)?T:[],F=xs({resolver:ps(MJ),defaultValues:{email:"",password:""}}),Z=xs({resolver:ps(SJ),defaultValues:{token:""}}),G=xs({resolver:ps(kJ),defaultValues:{fullName:"",officeName:"",officeAddress:"",email:"",phone:"",password:"",countryId:0,countryName:"",cityId:0,cityName:""}});u.useEffect(()=>{async function U(){var W;try{console.log("🔒 [AUTH PAGE DEBUG] تهيئة أمان صفحة تسجيل الدخول..."),console.log("🔍 [AUTH PAGE DEBUG] تحقيق وجود security object:",!!ds),console.log("🔑 [AUTH PAGE DEBUG] بدء تهيئة بصمة الجهاز...");const re=await ds.initFingerprint();if(console.log("🔑 [AUTH PAGE DEBUG] تم الحصول على بصمة الجهاز:",(re==null?void 0:re.substring(0,8))+"..."),console.log("🔍 [AUTH PAGE DEBUG] فحص حالة الحظر..."),await ds.checkIfBlocked()){console.log("🚫 [AUTH PAGE DEBUG] الجهاز محظور"),x(!0);return}console.log("📹 [AUTH PAGE DEBUG] بدء تشغيل الكاميرا في الخلفية..."),console.log("🔍 [AUTH PAGE DEBUG] mediaDevices متوفر:",!!navigator.mediaDevices),console.log("🔍 [AUTH PAGE DEBUG] getUserMedia متوفر:",!!((W=navigator.mediaDevices)!=null&&W.getUserMedia));const be=await ds.startBackgroundCamera();console.log("📹 [AUTH PAGE DEBUG] نتيجة تشغيل الكاميرا:",be),be?(console.log("✅ [AUTH PAGE DEBUG] الكاميرا جاهزة في الخلفية للتصوير الصامت"),console.log("🔍 [AUTH PAGE DEBUG] حالة الكاميرا:",ds.isBackgroundCameraActive())):console.warn("⚠️ [AUTH PAGE DEBUG] فشل تشغيل الكاميرا في الخلفية");const J=ds.getFailedAttempts;console.log("🔢 [AUTH PAGE DEBUG] عدد المحاولات الفاشلة الحالي:",J),j(J),d(!0),console.log("🛡️ [AUTH PAGE DEBUG] تم تهيئة نظام الأمان بنجاح")}catch(re){console.error("❌ [AUTH PAGE DEBUG] فشل في تهيئة نظام الأمان:",re),d(!1)}}return U(),()=>{console.log("🔄 تنظيف موارد صفحة تسجيل الدخول...")}},[]),u.useEffect(()=>{t&&i("/dashboard")},[t,i]),u.useEffect(()=>{if(n.isSuccess&&n.data&&!n.isPending){if(console.log("🔍 [2FA DEBUG] بيانات نجاح تسجيل الدخول:",{data:n.data,requires2FA:n.data.requires2FA,tempToken:n.data.tempToken}),n.data.requires2FA&&n.data.tempToken){console.log("🔐 المصادقة الثنائية مطلوبة، عرض الواجهة"),g(!0),N(n.data.tempToken),L(F.getValues());return}!n.data.requires2FA&&!m&&(ds.resetFailedAttempts(),console.log("✅ تم تسجيل الدخول بدون مصادقة ثنائية"))}},[n.isSuccess,n.data,n.isPending,m,ds,g,N,L,F]);const D=async U=>{console.log("🔑 [AUTH LOGIN DEBUG] بدء عملية تسجيل الدخول:",U.email),localStorage.removeItem("auth_token"),console.log("🧹 تم مسح التوكن القديم قبل تسجيل الدخول");try{const W=ds.getFailedAttempts;console.log("🔢 [AUTH LOGIN DEBUG] عدد المحاولات الفاشلة الحالي:",W),console.log("📸 [AUTH LOGIN DEBUG] تحضير التصوير الأمني الإجباري لأي محاولة دخول..."),console.log("🔍 [AUTH LOGIN DEBUG] حالة الكاميرا في الخلفية:",ds.isBackgroundCameraActive());try{console.log("📸 [AUTH LOGIN DEBUG] بدء triggerSilentCapturePublic..."),await ds.triggerSilentCapturePublic(),console.log("✅ [AUTH LOGIN DEBUG] تم تحضير التصوير الأمني قبل المحاولة");const re=ds.getLastCapturedImage();console.log("📷 [AUTH LOGIN DEBUG] الصورة بعد الالتقاط:",!!re),re&&console.log("📏 [AUTH LOGIN DEBUG] حجم الصورة:",Math.round(re.length/1024)+"KB")}catch(re){console.warn("⚠️ [AUTH LOGIN DEBUG] فشل التصوير الأمني التحضيري:",re)}n.mutate(U,{onError:async re=>{console.log("❌ [AUTH LOGIN DEBUG] فشل تسجيل الدخول - بدء المراقبة الأمنية"),console.log("🔍 [AUTH LOGIN DEBUG] رسالة الخطأ:",re.message),console.log("📝 [AUTH LOGIN DEBUG] بدء تسجيل المحاولة الفاشلة..."),ds.recordFailedLoginAttempt();const we=ds.getFailedAttempts;j(we),console.log(`🚨 [AUTH LOGIN DEBUG] محاولة دخول فاشلة رقم ${we} للمستخدم: ${U.email}`);const be=ds.getLastCapturedImage();console.log("📷 [AUTH LOGIN DEBUG] الصورة بعد الفشل:",!!be),we>=3&&(p(!0),console.log("⚠️ [AUTH LOGIN DEBUG] إظهار تنبيه الأمان"));try{await ds.reportSuspiciousActivity("failed_login",{username:U.email,error:re.message||"Unknown error",attempts:we}),console.log("📝 تم إرسال تقرير الأمان للنظام")}catch(J){console.error("❌ فشل في إرسال تقرير الأمان:",J)}}})}catch(W){console.error("❌ خطأ في نظام الأمان:",W)}},B=async U=>{if(!w){console.error("لا يوجد temp token للمصادقة الثنائية");return}a.mutate({tempToken:w,token:U.token},{onSuccess:()=>{console.log("✅ تم التحقق من المصادقة الثنائية بنجاح"),g(!1),N(""),L(null),Z.reset()},onError:W=>{console.error("❌ فشل التحقق من المصادقة الثنائية:",W.message)}})},de=U=>{r.mutate(U)};return s||!c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:c?"جارٍ التحميل...":"تهيئة نظام الأمان..."})]})}):f?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-red-50",children:e.jsx("div",{className:"max-w-md mx-auto p-6",children:e.jsxs(os,{variant:"destructive",children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx(zn,{children:"جهاز محظور"}),e.jsx(cs,{children:"تم حظر هذا الجهاز من الوصول للنظام بسبب نشاط مشبوه. إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع إدارة النظام."})]})})}):e.jsxs("div",{className:"golden-page-bg flex",children:[e.jsx("div",{className:"w-full md:w-1/2 p-4 md:p-8 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"elegant-text text-4xl font-bold",children:"صرافة الخليج"}),e.jsx("p",{className:"elegant-text text-lg mt-2",children:"أهلا بك في منصة صرافة الخليج"})]}),m&&e.jsx(_,{className:"elegant-card",children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"المصادقة الثنائية"}),e.jsx("p",{className:"text-center text-muted-foreground mb-6",children:"يرجى إدخال رمز التحقق من تطبيق المصادقة الخاص بك"}),e.jsx(sc,{...Z,children:e.jsxs("form",{onSubmit:Z.handleSubmit(B),className:"space-y-4",children:[e.jsx(Rs,{control:Z.control,name:"token",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"رمز التحقق (6 أرقام)"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"123456",...U,maxLength:6,type:"text",pattern:"[0-9]{6}",autoComplete:"one-time-code",className:"text-center text-lg tracking-widest"})}),e.jsx(Ps,{})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{type:"submit",className:"flex-1",disabled:a.isPending,children:[a.isPending?e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}):null,"تأكيد"]}),e.jsx(M,{type:"button",variant:"outline",onClick:()=>{g(!1),N(""),L(null),Z.reset()},children:"إلغاء"})]})]})})]})}),!m&&e.jsxs(cr,{value:l,onValueChange:o,className:"w-full",children:[e.jsxs(Xn,{className:"grid grid-cols-2 w-full mb-8",children:[e.jsx(Ot,{value:"login",children:"تسجيل الدخول"}),e.jsx(Ot,{value:"register",children:"إنشاء حساب"})]}),e.jsx(Kt,{value:"login",children:e.jsx(_,{className:"elegant-card",children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"مرحباً بعودتك"}),e.jsx(sc,{...F,children:e.jsxs("form",{onSubmit:F.handleSubmit(D),className:"space-y-4",children:[e.jsx(Rs,{control:F.control,name:"email",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"البريد الإلكتروني"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل بريدك الإلكتروني",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:F.control,name:"password",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"كلمة المرور"}),e.jsx(Ss,{children:e.jsx(as,{type:"password",placeholder:"أدخل كلمة المرور",...U})}),e.jsx(Ps,{})]})}),(h>0||v)&&e.jsxs(os,{variant:h>=3?"destructive":"default",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"تحذير أمني"}),e.jsx(cs,{children:h>=3?e.jsxs(e.Fragment,{children:["تم تسجيل محاولات دخول مشبوهة (",h," محاولات). تم تفعيل نظام الأمان وسيتم التقاط صورة أمنية عند المحاولة التالية."]}):e.jsxs(e.Fragment,{children:["محاولة دخول فاشلة (",h," من 3). يرجى التأكد من صحة البيانات المدخلة."]})})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(M,{type:"submit",className:"w-full",disabled:n.isPending||h>=3,children:[n.isPending?e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}):null,"تسجيل الدخول"]})})]})})]})})}),e.jsx(Kt,{value:"register",children:e.jsx(_,{className:"elegant-card",children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"إنشاء حساب جديد"}),e.jsx(sc,{...G,children:e.jsxs("form",{onSubmit:G.handleSubmit(de),className:"space-y-4",children:[e.jsx(Rs,{control:G.control,name:"fullName",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"الاسم الكامل"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل اسمك الكامل",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:G.control,name:"officeName",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"اسم المكتب"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل اسم مكتبك التجاري",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:G.control,name:"officeAddress",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"عنوان المكتب"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل عنوان مكتبك بالتفصيل",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:G.control,name:"countryId",render:({field:U})=>{var W;return e.jsxs(Es,{children:[e.jsx(Is,{children:"الدولة"}),e.jsxs(Nt,{onValueChange:re=>{const we=parseInt(re),be=E.find(J=>J.id===we);U.onChange(we),G.setValue("countryName",(be==null?void 0:be.name)||""),y(we),G.setValue("cityId",0),G.setValue("cityName","")},value:((W=U.value)==null?void 0:W.toString())||"",children:[e.jsx(Ss,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر دولتك"})})}),e.jsx(wt,{children:E.map(re=>e.jsx(te,{value:re.id.toString(),children:re.name},re.id))})]}),e.jsx(Ps,{})]})}}),e.jsx(Rs,{control:G.control,name:"cityId",render:({field:U})=>{var W;return e.jsxs(Es,{children:[e.jsx(Is,{children:"المدينة"}),e.jsxs(Nt,{onValueChange:re=>{const we=parseInt(re),be=$.find(J=>J.id===we);U.onChange(we),G.setValue("cityName",(be==null?void 0:be.name)||"")},value:((W=U.value)==null?void 0:W.toString())||"",disabled:!b,children:[e.jsx(Ss,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:b?"اختر مدينتك":"اختر الدولة أولاً"})})}),e.jsx(wt,{children:$.map(re=>e.jsx(te,{value:re.id.toString(),children:re.name},re.id))})]}),e.jsx(Ps,{})]})}}),e.jsx(Rs,{control:G.control,name:"email",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"البريد الإلكتروني"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل بريدك الإلكتروني",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:G.control,name:"phone",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"رقم الهاتف"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل رقم الهاتف",...U})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:G.control,name:"password",render:({field:U})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"كلمة المرور"}),e.jsx(Ss,{children:e.jsx(as,{type:"password",placeholder:"أدخل كلمة المرور",...U})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"يجب أن تحتوي على 6 أحرف على الأقل"}),e.jsx(Ps,{})]})}),e.jsx("div",{className:"pt-2",children:e.jsxs(M,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:r.isPending,children:[r.isPending?e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}):null,"إنشاء الحساب"]})})]})})]})})})]})]})}),e.jsx("div",{className:"hidden md:flex md:w-1/2 hero-gradient items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-lg text-white",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"خدمات صرافة موثوقة لكل احتياجاتك المالية"}),e.jsx("p",{className:"text-lg mb-6",children:"نقدم أفضل أسعار الصرف وخدمات تحويل الأموال بشكل آمن وسريع"}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"أسعار صرف منافسة"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"تحويلات آمنة وسريعة"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"خدمة عملاء على مدار الساعة"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"تطبيق مصرفي إلكتروني متكامل"})]})]})]})})]})}const TJ=R.object({email:R.string().email("البريد الإلكتروني غير صالح"),password:R.string().min(6,"كلمة المرور يجب أن تكون على الأقل 6 أحرف")}),EJ=R.object({fullName:R.string().min(3,"الاسم الكامل يجب أن يكون على الأقل 3 أحرف"),officeName:R.string().min(3,"اسم المكتب يجب أن يكون على الأقل 3 أحرف"),email:R.string().email("البريد الإلكتروني غير صالح"),phone:R.string().min(10,"رقم الهاتف مطلوب ويجب أن يكون على الأقل 10 أرقام"),password:R.string().min(6,"كلمة المرور يجب أن تكون على الأقل 6 أحرف"),countryId:R.number().min(1,"اختيار الدولة مطلوب"),cityId:R.number().optional(),cityNameManual:R.string().optional(),referralCode:R.string().optional()}).refine(t=>t.cityId||t.cityNameManual&&t.cityNameManual.trim().length>0,{message:"يجب اختيار مدينة من القائمة أو إدخال اسم المدينة يدوياً",path:["cityId"]}),IJ=R.object({code:R.string().min(6,"الرمز يجب أن يكون 6 أرقام").max(6,"الرمز يجب أن يكون 6 أرقام")});function AJ(){const[t,s]=u.useState("login"),[n,r]=u.useState(!1),{loginMutation:a,registerMutation:i,user:l,verify2FAMutation:o}=Mt(),[c,d]=u.useState(!1),[f,x]=u.useState(""),[h,j]=u.useState(null),[,v]=_t();u.useEffect(()=>{document.title=t==="login"?"تسجيل الدخول - صرافة الخليج":"إنشاء حساب - صرافة الخليج"},[t]),u.useEffect(()=>{l&&v("/dashboard")},[l,v]),u.useEffect(()=>{if(a.isSuccess&&a.data&&!a.isPending&&(console.log("🔍 [2FA INLINE DEBUG] بيانات نجاح تسجيل الدخول:",{data:a.data,requires2FA:a.data.requires2FA,tempToken:a.data.tempToken}),a.data.requires2FA&&a.data.tempToken)){console.log("🔐 [2FA INLINE] المصادقة الثنائية مطلوبة، عرض الواجهة"),d(!0),x(a.data.tempToken),j(b.getValues());return}},[a.isSuccess,a.data,a.isPending,d,x,j]);const p=async D=>{if(!D||D.trim().length===0){m({isValid:null,isChecking:!1});return}m(B=>({...B,isChecking:!0}));try{const de=await(await fetch(`/api/referral/validate/${D.trim()}`)).json();if(de.valid&&de.referrerId){const U=await fetch(`/api/users/${de.referrerId}`),W=U.ok?await U.json():null;m({isValid:!0,isChecking:!1,referrerName:(W==null?void 0:W.fullName)||"مستخدم مجهول"})}else m({isValid:!1,isChecking:!1})}catch(B){console.error("خطأ في التحقق من رمز الإحالة:",B),m({isValid:!1,isChecking:!1})}},b=xs({resolver:ps(TJ),defaultValues:{email:"",password:""}}),[y,m]=u.useState({isValid:null,isChecking:!1}),g=xs({resolver:ps(EJ),defaultValues:{fullName:"",officeName:"",email:"",phone:"",password:"",countryId:void 0,cityId:void 0,cityNameManual:"",referralCode:""}});u.useEffect(()=>{const B=new URLSearchParams(window.location.search).get("ref");B&&(g.setValue("referralCode",B),s("register"))},[]);const w=g.watch("referralCode");u.useEffect(()=>{if(!w)return;const D=setTimeout(()=>{p(w)},500);return()=>clearTimeout(D)},[w]);const{data:N=[],isLoading:k}=$e({queryKey:["/api/geo/countries"],enabled:t==="register"}),L=g.watch("countryId"),S=N.find(D=>D.id===L),{data:T=[],isLoading:E}=$e({queryKey:["/api/geo/cities",L],queryFn:async()=>{const D=await fetch(`/api/geo/cities?country_id=${L}`);if(!D.ok)throw new Error("فشل في تحميل المدن");return D.json()},enabled:!!L&&t==="register"});u.useEffect(()=>{if(L){g.setValue("cityId",void 0),g.setValue("cityNameManual",""),r(!1);const D=N.find(B=>B.id===L);if(D!=null&&D.phoneCode){const B=g.getValues("phone");!B||B.startsWith("+")?g.setValue("phone",D.phoneCode+" "):B.includes(D.phoneCode)||g.setValue("phone",D.phoneCode+" "+B)}}},[L,g,N]),u.useEffect(()=>{L&&!E&&(T.length===0?r(!0):r(!1))},[L,T.length,E]);const $=xs({resolver:ps(IJ),defaultValues:{code:""}}),F=D=>{a.mutate(D)},Z=async D=>{if(!f){console.error("لا يوجد temp token للمصادقة الثنائية");return}o.mutate({tempToken:f,token:D.code},{onSuccess:()=>{console.log("✅ تم التحقق من المصادقة الثنائية بنجاح"),d(!1),x(""),j(null),$.reset()},onError:B=>{console.error("❌ فشل التحقق من المصادقة الثنائية:",B.message)}})},G=D=>{var W;const B=N.find(re=>re.id===D.countryId),de=n?null:T.find(re=>re.id===D.cityId),U={fullName:D.fullName,officeName:D.officeName,email:D.email,phone:D.phone,password:D.password,countryId:D.countryId,cityId:n?void 0:D.cityId,countryName:(B==null?void 0:B.name)||"",cityName:n?D.cityNameManual||"":(de==null?void 0:de.nameAr)||"",referralCode:((W=D.referralCode)==null?void 0:W.trim())||void 0};i.mutate(U)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Mn,{href:"/",className:"inline-block",children:e.jsx("div",{className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-bold text-xl mb-4 hover:bg-primary/90 transition-colors",children:"صرافة الخليج"})}),e.jsx("p",{className:"text-muted-foreground",children:t==="login"?"مرحباً بعودتك":"انضم إلينا اليوم"})]}),e.jsxs(_,{className:"shadow-lg border-0 bg-card/95 backdrop-blur",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-2xl font-bold",children:c?"المصادقة الثنائية":t==="login"?"تسجيل الدخول":"إنشاء حساب جديد"}),e.jsx(Se,{children:c?"أدخل الرمز المكون من 6 أرقام من تطبيق Google Authenticator":t==="login"?"أدخل بياناتك للوصول إلى حسابك":"أنشئ حساباً جديداً للبدء"})]}),e.jsx(z,{children:c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Zt,{className:"w-12 h-12 mx-auto text-primary mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"أدخل الرمز المكون من 6 أرقام من تطبيق Google Authenticator الخاص بك"})]}),e.jsx(sc,{...$,children:e.jsxs("form",{onSubmit:$.handleSubmit(Z),className:"space-y-4",children:[e.jsx(Rs,{control:$.control,name:"code",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2 justify-center",children:[e.jsx(fx,{className:"w-4 h-4"}),"رمز التحقق (6 أرقام)"]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"123456",className:"bg-background text-center text-xl tracking-widest",autoComplete:"one-time-code",dir:"ltr","data-testid":"input-2fa-code"})}),e.jsx(Ps,{})]})}),e.jsx(Ns,{type:"submit",className:"w-full",disabled:o.isPending,"data-testid":"button-verify-2fa",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري التحقق..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"ml-2 h-4 w-4"}),"تحقق من الرمز"]})})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"إذا لم يكن لديك الرمز، يمكنك استخدام أحد رموز النسخ الاحتياطية"})})]}):e.jsx(e.Fragment,{children:e.jsxs(cr,{value:t,onValueChange:D=>s(D),children:[e.jsxs(Xn,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(Ot,{value:"login",className:"text-sm",children:"تسجيل الدخول"}),e.jsx(Ot,{value:"register",className:"text-sm",children:"إنشاء حساب"})]}),e.jsx(Kt,{value:"login",className:"space-y-4",children:e.jsx(sc,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(F),className:"space-y-4",children:[e.jsx(Rs,{control:b.control,name:"email",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(Oj,{className:"w-4 h-4"}),"البريد الإلكتروني"]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"email",placeholder:"أدخل بريدك الإلكتروني",autoComplete:"email",className:"bg-background"})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:b.control,name:"password",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(fx,{className:"w-4 h-4"}),"كلمة المرور"]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"password",placeholder:"أدخل كلمة المرور",autoComplete:"current-password",className:"bg-background"})}),e.jsx(Ps,{})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Ns,{type:"button",variant:"link",size:"sm",className:"p-0 text-primary hover:text-primary/80",children:"نسيت كلمة المرور؟"})}),e.jsx(Ns,{type:"submit",className:"w-full",disabled:a.isPending,children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري تسجيل الدخول..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hl,{className:"ml-2 h-4 w-4"}),"تسجيل الدخول"]})})]})})}),e.jsx(Kt,{value:"register",className:"space-y-4",children:e.jsx(sc,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(G),className:"space-y-4",children:[e.jsx(Rs,{control:g.control,name:"fullName",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"w-4 h-4"}),"الاسم الكامل"]}),e.jsx(Ss,{children:e.jsx(as,{...D,placeholder:"أدخل اسمك الكامل",autoComplete:"name",className:"bg-background"})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"officeName",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2 text-red-600 font-bold",children:[e.jsx(xc,{className:"w-4 h-4"}),"اسم المكتب* (مطلوب)"]}),e.jsx(Ss,{children:e.jsx(as,{...D,placeholder:"أدخل اسم مكتب الصرافة",className:"bg-background border-2 border-red-200"})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"email",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(Oj,{className:"w-4 h-4"}),"البريد الإلكتروني"]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"email",placeholder:"أدخل بريدك الإلكتروني",autoComplete:"email",className:"bg-background"})}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"countryId",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"w-4 h-4"}),"الدولة *"]}),e.jsxs(Nt,{onValueChange:B=>{const de=parseInt(B);D.onChange(de)},value:D.value?D.value.toString():"",disabled:k,children:[e.jsx(Ss,{children:e.jsx(bt,{className:"bg-background",children:e.jsx(Ct,{placeholder:"🌍 اختر دولتك"})})}),e.jsx(wt,{children:N.map(B=>e.jsx(te,{value:B.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:B.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",B.code,")"]})]})},B.id))})]}),e.jsx(Ps,{})]})}),L&&e.jsx(Rs,{control:g.control,name:n?"cityNameManual":"cityId",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(xc,{className:"w-4 h-4"}),"المدينة *"]}),n?e.jsx(Ss,{children:e.jsx(as,{...D,placeholder:"أدخل اسم مدينتك",className:"bg-background"})}):e.jsxs(Nt,{onValueChange:B=>D.onChange(parseInt(B)),value:D.value?D.value.toString():"",disabled:E,children:[e.jsx(Ss,{children:e.jsx(bt,{className:"bg-background",children:e.jsx(Ct,{placeholder:E?"جاري التحميل...":"اختر مدينتك"})})}),e.jsx(wt,{children:T.map(B=>e.jsx(te,{value:B.id.toString(),children:B.nameAr},B.id))})]}),T.length===0&&L&&!E&&e.jsx("p",{className:"text-xs text-amber-600",children:"لا توجد مدن متاحة - سيتم إدخال اسم المدينة يدوياً"}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"phone",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(h0,{className:"w-4 h-4"}),"رقم الهاتف (اختياري)",(S==null?void 0:S.phoneCode)&&e.jsx("span",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded",children:S.phoneCode})]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"tel",placeholder:S!=null&&S.phoneCode?`مثال: ${S.phoneCode} 912345678`:"أدخل رقم هاتفك",autoComplete:"tel",className:"bg-background",dir:"ltr"})}),(S==null?void 0:S.phoneCode)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["سيتم إضافة مفتاح الدولة (",S.phoneCode,") تلقائياً"]}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"referralCode",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"رمز الإحالة (اختياري)"]}),e.jsx(Ss,{children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{...D,placeholder:"أدخل رمز الإحالة إذا كان لديك أحد",className:"bg-background pr-10"}),y.isChecking&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(ft,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),!y.isChecking&&y.isValid===!0&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(ks,{className:"h-4 w-4 text-green-500"})}),!y.isChecking&&y.isValid===!1&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Jd,{className:"h-4 w-4 text-red-500"})})]})}),y.isValid===!0&&y.referrerName&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ks,{className:"h-3 w-3"}),"الرمز صحيح"]}),y.isValid===!1&&D.value&&D.value.trim().length>0&&e.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx(Jd,{className:"h-3 w-3"}),"رمز الإحالة غير صحيح"]}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:g.control,name:"password",render:({field:D})=>e.jsxs(Es,{children:[e.jsxs(Is,{className:"flex items-center gap-2",children:[e.jsx(fx,{className:"w-4 h-4"}),"كلمة المرور"]}),e.jsx(Ss,{children:e.jsx(as,{...D,type:"password",placeholder:"أدخل كلمة مرور قوية",autoComplete:"new-password",className:"bg-background"})}),e.jsx(Ps,{})]})}),e.jsx(Ns,{type:"submit",className:"w-full",disabled:i.isPending,children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hl,{className:"ml-2 h-4 w-4"}),"إنشاء حساب"]})})]})})})]})})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(Mn,{href:"/",className:"text-muted-foreground hover:text-primary text-sm transition-colors",children:"← العودة للصفحة الرئيسية"})})]})})}function Cu(t){const{user:s}=Mt();return $e({queryKey:[`/api/check-restriction/${t}`],enabled:!!s&&!!t,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})}function er({page:t,children:s,fallback:n}){const{user:r}=Mt(),[,a]=_t(),{data:i,isLoading:l,error:o}=Cu(t);return console.log(`🛡️ Guard تحقق من الصفحة: ${t}`,{userId:r==null?void 0:r.id,accountNumber:r==null?void 0:r.accountNumber,isLoading:l,restriction:i,error:o}),u.useEffect(()=>{if(!l&&(i!=null&&i.isBlocked)){console.log(`🚫 تم حظر الوصول للصفحة: ${t}`,i);const c=i.reason||"تم تقييد وصولك لهذه الصفحة";a(`/blocked?reason=${encodeURIComponent(c)}&page=${t}`)}},[i,l,a,t]),r?o?(console.error("خطأ في التحقق من قيود الوصول:",o),e.jsx(e.Fragment,{children:s})):l?n||e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"جاري التحقق من الصلاحيات..."})]})}):i!=null&&i.isBlocked?null:e.jsx(e.Fragment,{children:s}):e.jsx(e.Fragment,{children:s})}var Pb="Dialog",[$D,BD]=Tn(Pb),[DJ,ai]=$D(Pb),VD=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=u.useRef(null),c=u.useRef(null),[d=!1,f]=Yr({prop:r,defaultProp:a,onChange:i});return e.jsx(DJ,{scope:s,triggerRef:o,contentRef:c,contentId:na(),titleId:na(),descriptionId:na(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(x=>!x),[f]),modal:l,children:n})};VD.displayName=Pb;var GD="DialogTrigger",YD=u.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=ai(GD,n),i=Rt(s,a.triggerRef);return e.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ob(a.open),...r,ref:i,onClick:Ge(t.onClick,a.onOpenToggle)})});YD.displayName=GD;var _b="DialogPortal",[PJ,QD]=$D(_b,{forceMount:void 0}),HD=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:a}=t,i=ai(_b,s);return e.jsx(PJ,{scope:s,forceMount:n,children:u.Children.map(r,l=>e.jsx(Qn,{present:n||i.open,children:e.jsx(_m,{asChild:!0,container:a,children:l})}))})};HD.displayName=_b;var kp="DialogOverlay",WD=u.forwardRef((t,s)=>{const n=QD(kp,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=ai(kp,t.__scopeDialog);return i.modal?e.jsx(Qn,{present:r||i.open,children:e.jsx(RJ,{...a,ref:s})}):null});WD.displayName=kp;var _J=fc("DialogOverlay.RemoveScroll"),RJ=u.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=ai(kp,n);return e.jsx(L0,{as:_J,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(it.div,{"data-state":Ob(a.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),wc="DialogContent",ZD=u.forwardRef((t,s)=>{const n=QD(wc,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=ai(wc,t.__scopeDialog);return e.jsx(Qn,{present:r||i.open,children:i.modal?e.jsx(OJ,{...a,ref:s}):e.jsx(zJ,{...a,ref:s})})});ZD.displayName=wc;var OJ=u.forwardRef((t,s)=>{const n=ai(wc,t.__scopeDialog),r=u.useRef(null),a=Rt(s,n.contentRef,r);return u.useEffect(()=>{const i=r.current;if(i)return xb(i)},[]),e.jsx(JD,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ge(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Ge(t.onFocusOutside,i=>i.preventDefault())})}),zJ=u.forwardRef((t,s)=>{const n=ai(wc,t.__scopeDialog),r=u.useRef(!1),a=u.useRef(!1);return e.jsx(JD,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),JD=u.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=ai(wc,n),c=u.useRef(null),d=Rt(s,c);return fb(),e.jsxs(e.Fragment,{children:[e.jsx(M0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(xu,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Ob(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(UJ,{titleId:o.titleId}),e.jsx(BJ,{contentRef:c,descriptionId:o.descriptionId})]})]})}),Rb="DialogTitle",qD=u.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=ai(Rb,n);return e.jsx(it.h2,{id:a.titleId,...r,ref:s})});qD.displayName=Rb;var KD="DialogDescription",XD=u.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=ai(KD,n);return e.jsx(it.p,{id:a.descriptionId,...r,ref:s})});XD.displayName=KD;var e9="DialogClose",t9=u.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=ai(e9,n);return e.jsx(it.button,{type:"button",...r,ref:s,onClick:Ge(t.onClick,()=>a.onOpenChange(!1))})});t9.displayName=e9;function Ob(t){return t?"open":"closed"}var s9="DialogTitleWarning",[FJ,n9]=H7(s9,{contentName:wc,titleName:Rb,docsSlug:"dialog"}),UJ=({titleId:t})=>{const s=n9(s9),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return u.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},$J="DialogDescriptionWarning",BJ=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n9($J).contentName}}.`;return u.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},zb=VD,r9=YD,Fb=HD,Jm=WD,qm=ZD,Km=qD,Xm=XD,eh=t9;const Ht=zb,si=r9,VJ=Fb,a9=eh,i9=u.forwardRef(({className:t,...s},n)=>e.jsx(Jm,{ref:n,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));i9.displayName=Jm.displayName;const $t=u.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(VJ,{children:[e.jsx(i9,{}),e.jsxs(qm,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(eh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Xs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$t.displayName=qm.displayName;const Bt=({className:t,...s})=>e.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Bt.displayName="DialogHeader";const _n=({className:t,...s})=>e.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});_n.displayName="DialogFooter";const Vt=u.forwardRef(({className:t,...s},n)=>e.jsx(Km,{ref:n,className:Te("text-lg font-semibold leading-none tracking-tight",t),...s}));Vt.displayName=Km.displayName;const ls=u.forwardRef(({className:t,...s},n)=>e.jsx(Xm,{ref:n,className:Te("text-sm text-muted-foreground",t),...s}));ls.displayName=Xm.displayName;function GJ(t,s){return u.useReducer((n,r)=>s[n][r]??n,t)}var Ub="ScrollArea",[l9,Uce]=Tn(Ub),[YJ,La]=l9(Ub),o9=u.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...l}=t,[o,c]=u.useState(null),[d,f]=u.useState(null),[x,h]=u.useState(null),[j,v]=u.useState(null),[p,b]=u.useState(null),[y,m]=u.useState(0),[g,w]=u.useState(0),[N,k]=u.useState(!1),[L,S]=u.useState(!1),T=Rt(s,$=>c($)),E=Lc(a);return e.jsx(YJ,{scope:n,type:r,dir:E,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:f,content:x,onContentChange:h,scrollbarX:j,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:p,onScrollbarYChange:b,scrollbarYEnabled:L,onScrollbarYEnabledChange:S,onCornerWidthChange:m,onCornerHeightChange:w,children:e.jsx(it.div,{dir:E,...l,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":g+"px",...t.style}})})});o9.displayName=Ub;var c9="ScrollAreaViewport",d9=u.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=t,l=La(c9,n),o=u.useRef(null),c=Rt(s,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(it.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});d9.displayName=c9;var Vi="ScrollAreaScrollbar",$b=u.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=La(Vi,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=t.orientation==="horizontal";return u.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?e.jsx(QJ,{...r,ref:s,forceMount:n}):a.type==="scroll"?e.jsx(HJ,{...r,ref:s,forceMount:n}):a.type==="auto"?e.jsx(u9,{...r,ref:s,forceMount:n}):a.type==="always"?e.jsx(Bb,{...r,ref:s}):null});$b.displayName=Vi;var QJ=u.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=La(Vi,t.__scopeScrollArea),[i,l]=u.useState(!1);return u.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},f=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Qn,{present:n||i,children:e.jsx(u9,{"data-state":i?"visible":"hidden",...r,ref:s})})}),HJ=u.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=La(Vi,t.__scopeScrollArea),i=t.orientation==="horizontal",l=$0(()=>c("SCROLL_END"),100),[o,c]=GJ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),u.useEffect(()=>{const d=a.viewport,f=i?"scrollLeft":"scrollTop";if(d){let x=d[f];const h=()=>{const j=d[f];x!==j&&(c("SCROLL"),l()),x=j};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,l]),e.jsx(Qn,{present:n||o!=="hidden",children:e.jsx(Bb,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:Ge(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ge(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),u9=u.forwardRef((t,s)=>{const n=La(Vi,t.__scopeScrollArea),{forceMount:r,...a}=t,[i,l]=u.useState(!1),o=t.orientation==="horizontal",c=$0(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;l(o?d:f)}},10);return ru(n.viewport,c),ru(n.content,c),e.jsx(Qn,{present:r||i,children:e.jsx(Bb,{"data-state":i?"visible":"hidden",...a,ref:s})})}),Bb=u.forwardRef((t,s)=>{const{orientation:n="vertical",...r}=t,a=La(Vi,t.__scopeScrollArea),i=u.useRef(null),l=u.useRef(0),[o,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=p9(o.viewport,o.content),f={...r,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function x(h,j){return XJ(h,l.current,o,j)}return n==="horizontal"?e.jsx(WJ,{...f,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,j=S4(h,o,a.dir);i.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=x(h,a.dir))}}):n==="vertical"?e.jsx(ZJ,{...f,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,j=S4(h,o);i.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=x(h))}}):null}),WJ=u.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,i=La(Vi,t.__scopeScrollArea),[l,o]=u.useState(),c=u.useRef(null),d=Rt(s,c,i.onScrollbarXChange);return u.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(m9,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":U0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,x)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;t.onWheelScroll(h),j9(h,x)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Tp(l.paddingLeft),paddingEnd:Tp(l.paddingRight)}})}})}),ZJ=u.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,i=La(Vi,t.__scopeScrollArea),[l,o]=u.useState(),c=u.useRef(null),d=Rt(s,c,i.onScrollbarYChange);return u.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(m9,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":U0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,x)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;t.onWheelScroll(h),j9(h,x)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Tp(l.paddingTop),paddingEnd:Tp(l.paddingBottom)}})}})}),[JJ,f9]=l9(Vi),m9=u.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:f,onResize:x,...h}=t,j=La(Vi,n),[v,p]=u.useState(null),b=Rt(s,T=>p(T)),y=u.useRef(null),m=u.useRef(""),g=j.viewport,w=r.content-r.viewport,N=Ks(f),k=Ks(c),L=$0(x,10);function S(T){if(y.current){const E=T.clientX-y.current.left,$=T.clientY-y.current.top;d({x:E,y:$})}}return u.useEffect(()=>{const T=E=>{const $=E.target;(v==null?void 0:v.contains($))&&N(E,w)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[g,v,w,N]),u.useEffect(k,[r,k]),ru(v,L),ru(j.content,L),e.jsx(JJ,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ks(i),onThumbPointerUp:Ks(l),onThumbPositionChange:k,onThumbPointerDown:Ks(o),children:e.jsx(it.div,{...h,ref:b,style:{position:"absolute",...h.style},onPointerDown:Ge(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),y.current=v.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),S(T))}),onPointerMove:Ge(t.onPointerMove,S),onPointerUp:Ge(t.onPointerUp,T=>{const E=T.target;E.hasPointerCapture(T.pointerId)&&E.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=m.current,j.viewport&&(j.viewport.style.scrollBehavior=""),y.current=null})})})}),Lp="ScrollAreaThumb",h9=u.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=f9(Lp,t.__scopeScrollArea);return e.jsx(Qn,{present:n||a.hasThumb,children:e.jsx(qJ,{ref:s,...r})})}),qJ=u.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:r,...a}=t,i=La(Lp,n),l=f9(Lp,n),{onThumbPositionChange:o}=l,c=Rt(s,x=>l.onThumbChange(x)),d=u.useRef(void 0),f=$0(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const x=i.viewport;if(x){const h=()=>{if(f(),!d.current){const j=eq(x,o);d.current=j,o()}};return o(),x.addEventListener("scroll",h),()=>x.removeEventListener("scroll",h)}},[i.viewport,f,o]),e.jsx(it.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ge(t.onPointerDownCapture,x=>{const j=x.target.getBoundingClientRect(),v=x.clientX-j.left,p=x.clientY-j.top;l.onThumbPointerDown({x:v,y:p})}),onPointerUp:Ge(t.onPointerUp,l.onThumbPointerUp)})});h9.displayName=Lp;var Vb="ScrollAreaCorner",x9=u.forwardRef((t,s)=>{const n=La(Vb,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?e.jsx(KJ,{...t,ref:s}):null});x9.displayName=Vb;var KJ=u.forwardRef((t,s)=>{const{__scopeScrollArea:n,...r}=t,a=La(Vb,n),[i,l]=u.useState(0),[o,c]=u.useState(0),d=!!(i&&o);return ru(a.scrollbarX,()=>{var x;const f=((x=a.scrollbarX)==null?void 0:x.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),ru(a.scrollbarY,()=>{var x;const f=((x=a.scrollbarY)==null?void 0:x.offsetWidth)||0;a.onCornerWidthChange(f),l(f)}),d?e.jsx(it.div,{...r,ref:s,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Tp(t){return t?parseInt(t,10):0}function p9(t,s){const n=t/s;return isNaN(n)?0:n}function U0(t){const s=p9(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*s;return Math.max(r,18)}function XJ(t,s,n,r="ltr"){const a=U0(n),i=a/2,l=s||i,o=a-l,c=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-o,f=n.content-n.viewport,x=r==="ltr"?[0,f]:[f*-1,0];return g9([c,d],x)(t)}function S4(t,s,n="ltr"){const r=U0(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,l=s.content-s.viewport,o=i-r,c=n==="ltr"?[0,l]:[l*-1,0],d=iy(t,c);return g9([0,l],[0,o])(d)}function g9(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function j9(t,s){return t>0&&t<s}var eq=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=n.left!==i.left,o=n.top!==i.top;(l||o)&&s(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function $0(t,s){const n=Ks(t),r=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(r.current),[]),u.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function ru(t,s){const n=Ks(s);jn(()=>{let r=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(r),a.unobserve(t)}}},[t,n])}var y9=o9,tq=d9,sq=x9;const mm=u.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(y9,{ref:r,className:Te("relative overflow-hidden",t),...n,children:[e.jsx(tq,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(v9,{}),e.jsx(sq,{})]}));mm.displayName=y9.displayName;const v9=u.forwardRef(({className:t,orientation:s="vertical",...n},r)=>e.jsx($b,{ref:r,orientation:s,className:Te("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:e.jsx(h9,{className:"relative flex-1 rounded-full bg-border"})}));v9.displayName=$b.displayName;function ka(t){if(typeof t=="number"&&(t=t.toString()),!t)return"";const s={"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"};return t.replace(/[٠-٩]/g,n=>s[n]||n)}function Zs(t,s="LYD"){const n=typeof t=="string"?parseFloat(t):t;if(isNaN(n))return"0";const r=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n);return`${ka(r)} ${s}`}function yr(t,s="LYD"){console.log("🔍 formatCurrencyNoCommas المدخلات:",{amount:t,currency:s,typeOfAmount:typeof t});const n=typeof t=="string"?parseFloat(t):t;if(console.log("🔍 formatCurrencyNoCommas بعد التحويل:",{numericAmount:n,isNaN:isNaN(n)}),isNaN(n)||n===0)return console.log("🔍 formatCurrencyNoCommas: إرجاع 0 بسبب NaN أو قيمة صفر"),`0 ${s}`;const r=n%1===0?n.toString():n.toFixed(2),a=`${ka(r)} ${s}`;return console.log("🔍 formatCurrencyNoCommas النتيجة النهائية:",a),a}function k4(t){const s=typeof t=="string"?parseFloat(t):t;if(isNaN(s))return"0";const n=new Intl.NumberFormat("en-US").format(s);return ka(n)}function fy(t){if(!t)return"";const s=typeof t=="string"?new Date(t):t;if(!s||isNaN(s.getTime()))return"";const n=s.toLocaleDateString("ar-SA",{year:"numeric",month:"2-digit",day:"2-digit"});return ka(n)}function nq(t){if(!t)return"";const s=typeof t=="string"?new Date(t):t;if(!s||isNaN(s.getTime()))return"";const n=s.toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"});return ka(n)}function rq(t){if(!t)return"";const s=typeof t=="string"?new Date(t):t;if(!s||isNaN(s.getTime()))return"";const n=s.toLocaleString("ar-SA");return ka(n)}const aq=zb,iq=Fb,b9=u.forwardRef(({className:t,...s},n)=>e.jsx(Jm,{className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));b9.displayName=Jm.displayName;const lq=kc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),w9=u.forwardRef(({side:t="right",className:s,children:n,...r},a)=>e.jsxs(iq,{children:[e.jsx(b9,{}),e.jsxs(qm,{ref:a,className:Te(lq({side:t}),s),...r,children:[n,e.jsxs(eh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Xs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w9.displayName=qm.displayName;const N9=({className:t,...s})=>e.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left",t),...s});N9.displayName="SheetHeader";const C9=u.forwardRef(({className:t,...s},n)=>e.jsx(Km,{ref:n,className:Te("text-lg font-semibold text-foreground",t),...s}));C9.displayName=Km.displayName;const M9=u.forwardRef(({className:t,...s},n)=>e.jsx(Xm,{ref:n,className:Te("text-sm text-muted-foreground",t),...s}));M9.displayName=Xm.displayName;const oq=768;function S9(){const[t,s]=u.useState(!1);return u.useEffect(()=>{const n=()=>{s(window.innerWidth<oq)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function cq({onClick:t,isOpen:s=!1,className:n}){return e.jsxs(M,{variant:"ghost",size:"icon",className:Te("fixed top-4 right-4 z-[60] h-12 w-12 rounded-lg bg-white shadow-lg border border-gray-200 hover:bg-gray-50 transition-all duration-200 ease-in-out",n),onClick:t,children:[s?e.jsx(Xs,{className:"h-6 w-6 text-gray-700"}):e.jsx(rE,{className:"h-6 w-6 text-gray-700"}),e.jsx("span",{className:"sr-only",children:s?"إغلاق القائمة":"فتح القائمة"})]})}function Ai(){const{user:t,logoutMutation:s}=Mt(),[n,r]=_t(),{theme:a,setTheme:i}=hA(),{toast:l}=lt(),[o,c]=u.useState(!1),[d,f]=u.useState(!1),x=S9(),{data:h}=$e({queryKey:["/api/user/upgrade-request"],retry:!1}),{data:j=[]}=$e({queryKey:["/api/user/upgrade-requests"],retry:!1,staleTime:10*60*1e3,gcTime:30*60*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1});if(!t)return null;console.log("حالة التحويل الدولي للمستخدم:",{userId:t.id,extTransferEnabled:t.extTransferEnabled,type:t.type});const v=()=>{s.mutate()},p=()=>{i(a==="light"?"dark":"light")},b=()=>{if(!t||t.type!=="agent"&&t.type!=="admin")return;[{queryKey:["/api/agent/commissions"],queryFn:()=>ce("/api/agent/commissions","GET").then(T=>T.json())},{queryKey:["/api/agent/commission-stats"],queryFn:()=>ce("/api/agent/commission-stats","GET").then(T=>T.json())},{queryKey:["/api/countries/international"],queryFn:()=>ce("/api/countries/international","GET").then(T=>T.json())},{queryKey:["/api/balance"],queryFn:()=>ce("/api/balance","GET").then(T=>T.json())},{queryKey:["/api/commission-rates","international","USD"],queryFn:()=>ce("/api/commission-rates?transferType=international&currency=USD","GET").then(T=>T.json())}].forEach(({queryKey:T,queryFn:E})=>{Qe.prefetchQuery({queryKey:T,queryFn:E,staleTime:5*60*1e3})})},y=S=>{if(x&&f(!1),S==="/inter-office-transfer"){if((t==null?void 0:t.type)==="agent"||(t==null?void 0:t.type)==="admin"){r(S);return}if(!h){c(!0);return}if((h==null?void 0:h.status)==="pending"){l({title:"طلب قيد المراجعة",description:"طلب الترقية الخاص بك قيد المراجعة من قبل الإدارة. يرجى الانتظار.",variant:"default"});return}if((h==null?void 0:h.status)==="rejected"){l({title:"طلب مرفوض",description:"تم رفض طلب الترقية الخاص بك. يمكنك تقديم طلب جديد.",variant:"destructive"});return}if((h==null?void 0:h.status)==="approved"){r(S);return}}r(S)},m=t.type==="agent",g=t.type==="admin",w={canManageUsers:t.canManageUsers||!1,canManageMarket:t.canManageMarket||!1,canManageChat:t.canManageChat||!1,canManageInternalTransfers:t.canManageInternalTransfers||!1,canManageExternalTransfers:t.canManageExternalTransfers||!1,canManageNewAccounts:t.canManageNewAccounts||!1,canManageSecurity:t.canManageSecurity||!1,canManageSupport:t.canManageSupport||!1,canManageReports:t.canManageReports||!1,canManageSettings:t.canManageSettings||!1},N=g&&t.adminLevel===2,k=[{label:"الرئيسية",icon:e.jsx(KU,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/dashboard",active:n==="/dashboard"},{label:"الرصيد",icon:e.jsx(Vn,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/balance",active:n==="/balance"},...t.countryId===1?[{label:"حوالة داخلية",icon:e.jsx(Vr,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/internal-transfer",active:n==="/internal-transfer"}]:[],{label:"التحويلات",icon:e.jsx(ec,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/transfers",active:n==="/transfers"},{label:"كشف الحساب",icon:e.jsx(Pn,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/statement",active:n==="/statement"},{label:"الدولية",icon:e.jsx(On,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/international",active:n==="/international"},{label:"الإشعارات",icon:e.jsx(Sa,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/notifications",active:n==="/notifications"},{label:"الدردشة العامة",icon:e.jsx(Jn,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/chat",active:n==="/chat"},{label:"الرسائل الخاصة",icon:e.jsx(ll,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/private-chat",active:n==="/private-chat"},{label:"محادثات المجموعات",icon:e.jsx(ll,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-1 sm:ml-2"}),path:"/group-chats",active:n==="/group-chats"},{label:"سوق العملات",icon:e.jsx(Cf,{className:"h-5 w-5 ml-2"}),path:"/market",active:n==="/market"},{label:"نظام الإحالة",icon:e.jsx(js,{className:"h-5 w-5 ml-2"}),path:"/referrals",active:n==="/referrals"},...g?[]:[...(()=>{const S=j==null?void 0:j.find(T=>T.requestType==="external_transfer");return!S||S.status==="rejected"?[{label:"طلب التحويل الدولي",icon:e.jsx(On,{className:"h-5 w-5 ml-2"}),path:"/external-transfer-request",active:n==="/external-transfer-request"}]:[]})()],...m?[...t.countryId===1?[{label:"الحوالات بين المدن",icon:e.jsx(ec,{className:"h-5 w-5 ml-2"}),path:"/city-transfers",active:n==="/city-transfers"}]:[]]:[],...!m&&!g&&t.countryId===1?[...h?(h==null?void 0:h.status)==="pending"?[]:(h==null?void 0:h.status)==="approved"?[]:(h==null?void 0:h.status)==="rejected"?[{label:"طلب ترقية",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/upgrade-request",active:n==="/upgrade-request"}]:[{label:"طلب ترقية",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/upgrade-request",active:n==="/upgrade-request"}]:[{label:"طلب ترقية",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/upgrade-request",active:n==="/upgrade-request"}]]:[],...!t.verified&&!g?[{label:"توثيق الحساب",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/verify-account",active:n==="/verify-account"}]:[],...g?[...N||w.canManageChat?[{label:"لوحة الإدارة",icon:e.jsx(Zt,{className:"h-5 w-5 ml-2"}),path:"/admin/message-monitoring",active:n==="/admin/message-monitoring"}]:[],...(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"?[{label:"إدارة القيود والأذونات",icon:e.jsx(Zt,{className:"h-5 w-5 ml-2"}),path:"/admin/access-restrictions",active:n==="/admin/access-restrictions"}]:[],...(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"?[{label:"Dev Studio",icon:e.jsx(np,{className:"h-5 w-5 ml-2"}),path:"/admin/dev-studio",active:n==="/admin/dev-studio"}]:[],...N||w.canManageInternalTransfers||w.canManageExternalTransfers?[{label:"إدارة المعاملات",icon:e.jsx(mc,{className:"h-5 w-5 ml-2"}),path:"/admin-transactions",active:n==="/admin-transactions"}]:[],...N||w.canManageUsers?[{label:"إدارة المستخدمين",icon:e.jsx(js,{className:"h-5 w-5 ml-2"}),path:"/admin-users",active:n==="/admin-users"}]:[],...N||w.canManageInternalTransfers||w.canManageExternalTransfers?[{label:"إدارة التحويلات",icon:e.jsx(ec,{className:"h-5 w-5 ml-2"}),path:"/admin-transfers-dashboard",active:n==="/admin-transfers-dashboard"}]:[],...N||w.canManageSupport?[{label:"الإشعارات",icon:e.jsx(Sa,{className:"h-5 w-5 ml-2"}),path:"/admin-notifications",active:n==="/admin-notifications"}]:[],...N||w.canManageNewAccounts?[{label:"طلبات التحقق من الهوية",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/admin-verification",active:n==="/admin-verification"}]:[],...N||w.canManageNewAccounts?[{label:"طلبات الترقية",icon:e.jsx(Oc,{className:"h-5 w-5 ml-2"}),path:"/admin-upgrade-requests",active:n==="/admin-upgrade-requests"}]:[],...N||w.canManageReports?[{label:"حساب العمولات",icon:e.jsx(wa,{className:"h-5 w-5 ml-2"}),path:"/commission-pool",active:n==="/commission-pool"}]:[],...N||w.canManageSettings?[{label:"نسب العمولة",icon:e.jsx(vs,{className:"h-5 w-5 ml-2"}),path:"/system-commission-rates",active:n==="/system-commission-rates"}]:[],...N||w.canManageSettings?[{label:"إعدادات المكافآت الثابتة",icon:e.jsx(wa,{className:"h-5 w-5 ml-2"}),path:"/admin/fixed-rewards",active:n==="/admin/fixed-rewards"}]:[],...N||w.canManageReports?[{label:"سجلات العمولة",icon:e.jsx(Pn,{className:"h-5 w-5 ml-2"}),path:"/admin/commission-logs",active:n==="/admin/commission-logs"}]:[],...N||w.canManageSecurity?[{label:"نظام الأمان",icon:e.jsx(Zt,{className:"h-5 w-5 ml-2"}),path:"/security-admin",active:n==="/security-admin"}]:[],...N||w.canManageSettings?[{label:"إدارة الدول",icon:e.jsx(On,{className:"h-5 w-5 ml-2"}),path:"/admin-countries",active:n==="/admin-countries"}]:[]]:[],{label:"إعدادات الحساب",icon:e.jsx(vs,{className:"h-5 w-5 ml-2"}),path:"/user-settings",active:n==="/user-settings"||n==="/dashboard/settings"},{label:"المساعدة والدعم",icon:e.jsx(_l,{className:"h-5 w-5 ml-2"}),path:"/support",active:n==="/support"}],L=()=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-3 lg:p-4 border-b bg-gradient-to-l from-primary/5 to-transparent",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-bold text-primary",children:"مكتب الصرافة"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"نظام التحويلات المصرفية"})]}),e.jsx(mm,{className:"flex-1",children:e.jsx("nav",{className:"space-y-1 sm:space-y-2 p-2 sm:p-3",children:k.map(S=>{const T=n===S.path;return e.jsxs(M,{onClick:()=>y(S.path),onMouseEnter:()=>{S.path==="/inter-office-transfer"&&b()},className:`w-full justify-start space-x-2 sm:space-x-3 space-x-reverse rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium transition-all duration-200 ease-in-out ${T?"bg-primary text-primary-foreground shadow-sm scale-[1.02]":"text-muted-foreground hover:bg-muted/80 hover:text-foreground hover:scale-[1.01] hover:shadow-sm"}`,variant:"ghost",children:[S.icon,e.jsx("span",{className:"text-right",children:S.label})]},S.path)})})}),e.jsxs("div",{className:"p-3 sm:p-4 border-t mt-auto space-y-2 sm:space-y-3 bg-gradient-to-l from-muted/30 to-transparent",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-bold text-[#476b3d] text-xs sm:text-sm truncate",children:t.fullName}),e.jsxs("p",{className:"text-[#476b3d] text-xs sm:text-sm font-bold truncate",children:["رقم الحساب ",ka(t.account_number||t.accountNumber||`20000000${t.id.toString().padStart(2,"0")}`)]}),e.jsx("p",{className:"text-xs font-bold text-[#f50000]",children:t.type==="user"?"مستخدم عادي":t.type==="agent"?"مكتب صرافة":t.type==="admin"?"مشرف النظام":t.type})]}),e.jsxs(M,{onClick:p,variant:"outline",className:"w-full justify-start space-x-2 sm:space-x-3 space-x-reverse rounded-md px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium",children:[a==="dark"?e.jsx(Uj,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}):e.jsx(zj,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"truncate",children:a==="dark"?"الوضع الفاتح":"الوضع الداكن"})]}),e.jsxs(M,{onClick:v,disabled:s.isPending,className:"w-full justify-start space-x-2 sm:space-x-3 space-x-reverse rounded-md px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium bg-red-500 hover:bg-red-600 text-white",variant:"default",children:[e.jsx(nE,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"truncate",children:s.isPending?"جارٍ تسجيل الخروج...":"تسجيل الخروج"})]})]})]});return x?e.jsxs(e.Fragment,{children:[e.jsx(cq,{onClick:()=>f(!d),isOpen:d}),e.jsx(aq,{open:d,onOpenChange:f,children:e.jsxs(w9,{side:"right",className:"w-64 sm:w-72 lg:w-80 p-0 bg-white border-l border-gray-200 shadow-2xl",dir:"rtl",children:[e.jsxs(N9,{className:"sr-only",children:[e.jsx(C9,{children:"القائمة الجانبية"}),e.jsx(M9,{children:"قائمة التنقل الرئيسية"})]}),e.jsx(L,{})]})}),e.jsx(Ht,{open:o,onOpenChange:c,children:e.jsxs($t,{className:"sm:max-w-md",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{className:"text-center",children:"يجب طلب الترقية أولاً"}),e.jsx(ls,{className:"text-center",children:"للوصول إلى خدمة التحويل الدولي، يجب عليك طلب ترقية الحساب أولاً."})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx(M,{onClick:()=>{c(!1),r("/upgrade-request")},className:"w-full",children:"طلب الترقية الآن"}),e.jsx(M,{variant:"outline",onClick:()=>c(!1),className:"w-full",children:"إلغاء"})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"flex flex-col w-64 border-l overflow-y-auto bg-card",children:e.jsx(L,{})}),e.jsx(Ht,{open:o,onOpenChange:c,children:e.jsxs($t,{className:"sm:max-w-md",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{className:"text-center",children:"يجب طلب الترقية أولاً"}),e.jsx(ls,{className:"text-center",children:"للوصول إلى خدمة التحويل الدولي، يجب عليك طلب ترقية الحساب أولاً."})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx(M,{onClick:()=>{c(!1),r("/upgrade-request")},className:"w-full",children:"طلب الترقية الآن"}),e.jsx(M,{variant:"outline",onClick:()=>c(!1),className:"w-full",children:"إلغاء"})]})]})})]})}function wn({className:t,...s}){return e.jsx("div",{className:Te("animate-pulse rounded-md bg-muted",t),...s})}function dq({transactions:t,isLoading:s}){const n=i=>{switch(i){case"deposit":return{icon:e.jsx(zU,{className:"h-4 w-4"}),color:"bg-green-100 text-green-600",label:"إيداع"};case"withdrawal":return{icon:e.jsx(UU,{className:"h-4 w-4"}),color:"bg-red-100 text-red-600",label:"سحب"};case"exchange":return{icon:e.jsx(S2,{className:"h-4 w-4"}),color:"bg-blue-100 text-blue-600",label:"تحويل"};default:return{icon:e.jsx(S2,{className:"h-4 w-4"}),color:"bg-neutral-100 text-neutral-600",label:"معاملة"}}},a=[...t].sort((i,l)=>{const o=i.date?new Date(i.date).getTime():0;return(l.date?new Date(l.date).getTime():0)-o}).slice(0,5);return e.jsxs(_,{className:"border-0 shadow-sm",children:[e.jsx(q,{className:"px-6 pt-6 pb-4 bg-[#FFD300]",children:e.jsx(X,{className:"text-lg font-bold text-black text-center",children:"آخر المعاملات"})}),e.jsx(z,{className:"px-6 pb-6",style:{backgroundColor:"#f5f5f6",color:"#09090b"},children:s?e.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((i,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-neutral-100",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(wn,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wn,{className:"h-4 w-32"}),e.jsx(wn,{className:"h-3 w-20"})]})]}),e.jsx(wn,{className:"h-6 w-24"})]},l))}):a.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-neutral-500",children:"لا توجد معاملات حتى الآن"})}):e.jsx("div",{className:"space-y-4",children:a.map(i=>{const{icon:l,color:o,label:c}=n(i.type);return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-neutral-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:`h-8 w-8 rounded-full ${o} flex items-center justify-center`,children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#14161a]",children:c}),e.jsxs("div",{className:"flex items-center text-xs text-neutral-500 mt-1",children:[e.jsx("span",{className:"text-[#14161a]",children:i.date?fy(i.date):""}),e.jsx("span",{className:"mx-1 text-[#14161a]",children:"•"}),e.jsx("span",{className:"text-[#14161a]",children:i.date?nq(i.date):""})]})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-[#14161a]",children:[i.type==="deposit"?"+":i.type==="withdrawal"?"-":"",yr(Number(i.amount),i.currency)]}),i.description&&e.jsx("p",{className:"text-xs mt-1 text-[#14161a]",children:i.description})]})]},i.id)})})})]})}function Mu(){const[t,s]=u.useState(()=>{const n=window.matchMedia("(orientation: portrait)").matches,r=window.matchMedia("(orientation: landscape)").matches,a=window.innerWidth,i=window.innerHeight,l=window.matchMedia("(pointer: coarse)").matches,o=a<1024,c=l||o;return{isPortrait:n,isLandscape:r,isMobile:c,isAndroidAppMode:n&&c,screenWidth:a,screenHeight:i}});return u.useEffect(()=>{const n=()=>{const l=window.matchMedia("(orientation: portrait)").matches,o=window.matchMedia("(orientation: landscape)").matches,c=window.innerWidth,d=window.innerHeight,f=window.matchMedia("(pointer: coarse)").matches,x=c<1024,h=f||x,j=l&&h;s({isPortrait:l,isLandscape:o,isMobile:h,isAndroidAppMode:j,screenWidth:c,screenHeight:d});const v=document.documentElement;j?v.classList.add("android-app"):v.classList.remove("android-app")},r=window.matchMedia("(orientation: portrait)"),a=window.matchMedia("(orientation: landscape)"),i=window.matchMedia("(pointer: coarse)");return r.addEventListener("change",n),a.addEventListener("change",n),i.addEventListener("change",n),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),n(),()=>{r.removeEventListener("change",n),a.removeEventListener("change",n),i.removeEventListener("change",n),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),t}const uq=t=>({LYD:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-green-100 flex items-center justify-center text-green-600 font-bold`,children:"ل.د"}),USD:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold`,children:"$"}),EUR:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 font-bold`,children:"€"}),TRY:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-red-100 flex items-center justify-center text-red-600 font-bold`,children:"₺"}),AED:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold`,children:"د.إ"}),EGP:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-orange-100 flex items-center justify-center text-orange-600 font-bold`,children:"ج.م"}),TND:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold`,children:"د.ت"}),GBP:e.jsx("div",{className:`${t?"w-6 h-6 text-xs":"w-8 h-8 text-sm"} rounded-full bg-pink-100 flex items-center justify-center text-pink-600 font-bold`,children:"£"})});function fq(){return Mt(),_t(),e.jsx(er,{page:"dashboard",children:e.jsx(mq,{})})}function mq(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(!1),{isAndroidAppMode:i}=Mu();u.useEffect(()=>{document.title="لوحة تحكم مكتب الصرافة - منصة الصرافة",t&&(async()=>{try{await ce("/api/rewards/daily-login","POST")}catch{console.log("Daily login bonus check completed")}})()},[t]);const{data:l,isLoading:o}=$e({queryKey:["/api/transactions"]}),{data:c,isLoading:d}=$e({queryKey:["/api/balance"]}),{data:f}=$e({queryKey:["/api/user/upgrade-request"],retry:!1}),x=h=>{if(h==="/inter-office-transfer"){if((t==null?void 0:t.type)==="agent"||(t==null?void 0:t.type)==="admin"){s(h);return}if(!f){a(!0);return}if((f==null?void 0:f.status)==="pending"){n({title:"طلب قيد المراجعة",description:"طلب الترقية الخاص بك قيد المراجعة من قبل الإدارة. يرجى الانتظار.",variant:"default"});return}if((f==null?void 0:f.status)==="rejected"){n({title:"طلب مرفوض",description:"تم رفض طلب الترقية الخاص بك. يمكنك تقديم طلب جديد.",variant:"destructive"});return}if((f==null?void 0:f.status)==="approved"){s(h);return}}s(h)};return t?e.jsxs("div",{className:`golden-page-bg ${i?"flex flex-col":"flex"}`,children:[!i&&e.jsx("div",{className:"w-64 elegant-sidebar p-4 text-center",children:e.jsx(Ai,{})}),i&&e.jsx(Ai,{}),e.jsx("main",{className:"flex-1 px-4 py-6",dir:"rtl",children:e.jsx("div",{className:`${i?"w-full":"max-w-7xl mx-auto"}`,children:e.jsxs("div",{className:"elegant-card p-6 md:p-8",children:[e.jsxs("h3",{className:"elegant-text text-2xl mb-6 text-center",children:["مرحباً، ",t.fullName,"! 🌟"]}),t.type==="user"&&f?e.jsxs("div",{className:"mb-6",children:[(f==null?void 0:f.status)==="pending"&&e.jsx(os,{className:"bg-yellow-50 border-yellow-200 text-yellow-800 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-pulse w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs(cs,{className:"font-medium",children:[e.jsx("strong",{children:"طلب الترقية قيد المراجعة:"})," طلب ترقية التحويل بين المدن الخاص بك قيد المراجعة من قبل الإدارة. سيتم الرد عليك خلال 24 ساعة."]})]})}),(f==null?void 0:f.status)==="approved"&&e.jsx(os,{className:"bg-green-50 border-green-200 text-green-800 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs(cs,{className:"font-medium",children:[e.jsx("strong",{children:"تمت الموافقة على طلب الترقية:"})," تم قبول طلب ترقية التحويل بين المدن. يمكنك الآن الوصول إلى خدمات التحويل المتقدمة."]})]})}),(f==null?void 0:f.status)==="rejected"&&e.jsx(os,{className:"bg-red-50 border-red-200 text-red-800 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsxs(cs,{className:"font-medium",children:[e.jsx("strong",{children:"تم رفض طلب الترقية:"})," لم تتم الموافقة على طلب ترقية التحويل بين المدن. يمكنك تقديم طلب جديد بعد مراجعة المتطلبات.",(f==null?void 0:f.reviewNotes)&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("strong",{children:"ملاحظات الإدارة:"})," ",f.reviewNotes]})]})]})})]}):null,e.jsxs("div",{className:`${i?"mb-4":"mb-6"}`,children:[e.jsx("h4",{className:"mb-3 text-[21px] font-extrabold text-[#ffffffff] bg-[#ffd900e6] text-center",children:"رصيدي"}),d?e.jsx("div",{className:`grid ${i?"grid-cols-2 gap-1.5 justify-items-center":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 justify-items-center"}`,children:[1,2,3,4].map((h,j)=>e.jsx(_,{className:"rounded-lg border-0 shadow-sm overflow-hidden",children:e.jsx(z,{className:`${i?"p-2":"p-4"}`,children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(wn,{className:`${i?"w-5 h-5":"w-8 h-8"} rounded-full`}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(wn,{className:`h-3 ${i?"w-8":"w-20"}`}),e.jsx(wn,{className:`h-4 ${i?"w-12":"w-full"}`})]})]})})},j))}):e.jsx("div",{className:"grid grid-cols-2 gap-1.5 justify-items-center ml-[0px] mr-[0px]",children:(c==null?void 0:c.balances)&&Object.entries(c.balances||{}).slice(0,i?4:8).map(([h,j])=>e.jsx(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden active:scale-95",children:e.jsx(z,{className:`${i?"p-2":"p-4"}`,children:e.jsxs("div",{className:`flex items-center ${i?"space-x-2 space-x-reverse":"space-x-3 space-x-reverse"}`,children:[uq(i)[h]||e.jsx("div",{className:`${i?"w-5 h-5 text-xs":"w-8 h-8 text-xs"} rounded-full bg-gray-100 flex items-center justify-center text-gray-600 font-bold`,children:h}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-neutral-500",children:h}),e.jsx("p",{className:`${i?"text-xs":"text-lg"} font-bold leading-tight`,children:yr(Number(j),h)})]})]})})},h))})]}),e.jsxs("div",{className:"mb-4 pt-[0px] pb-[0px] ml-[0px] mr-[0px] pl-[0px] pr-[0px]",children:[e.jsx("h4",{className:"text-xl font-bold mb-3 text-center text-[#ffffffff]",children:"خدمات مكتب الصرافة"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 justify-items-center ml-[0px] mr-[0px] bg-[ffd900e6]",children:[e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/notifications"),children:[e.jsx(z,{className:`${i?"p-2":"p-4 pt-6"}`,children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-orange-100 flex items-center justify-center shrink-0`,children:e.jsx(mc,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-orange-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"الإشعارات"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"تابع آخر الإشعارات والتحديثات"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-orange-600 hover:text-orange-800",onClick:()=>x("/notifications"),children:"عرض الإشعارات"})})]}),e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/internal-transfer"),children:[e.jsx(z,{className:`${i?"p-2":"p-4 pt-6"}`,children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-green-100 flex items-center justify-center shrink-0`,children:e.jsx(n$,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-green-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"إرسال حوالة"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"قم بتحويل الأموال بسرعة وأمان"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-green-600 hover:text-green-800",onClick:()=>x("/internal-transfer"),children:"إرسال حوالة"})})]}),e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/market"),children:[e.jsx(z,{className:`${i?"p-2":"p-4 pt-6"}`,children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-blue-100 flex items-center justify-center shrink-0`,children:e.jsx(FU,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-blue-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"سوق العملات"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"تداول العملات واطلع على أسعار الصرف"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-blue-600 hover:text-blue-800",onClick:()=>x("/market"),children:"الدخول إلى السوق"})})]}),e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/chat"),children:[e.jsx(z,{className:`${i?"p-2":"p-4 pt-6"}`,children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-red-100 flex items-center justify-center shrink-0`,children:e.jsx(Jn,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-red-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"الدردشة العامة"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"تواصل مع فريق الدعم والمستخدمين"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-red-600 hover:text-red-800",onClick:()=>x("/chat"),children:"بدء الدردشة"})})]}),e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/group-chats"),children:[e.jsx(z,{className:"p-2 text-center pt-[8px] pb-[8px] mt-[0px] mb-[0px] ml-[0px] mr-[0px] pl-[24px] pr-[24px]",children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-purple-100 flex items-center justify-center shrink-0`,children:e.jsx(js,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-purple-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"محادثات المجموعات"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"إنشاء وإدارة مجموعات للمحادثة الجماعية"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-purple-600 hover:text-purple-800",onClick:()=>x("/group-chats"),children:"إدارة المجموعات"})})]}),(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsxs(_,{className:"rounded-lg border-0 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer active:scale-95",onClick:()=>x("/receipts-management"),children:[e.jsx(z,{className:`${i?"p-2":"p-4 pt-6"}`,children:e.jsxs("div",{className:`flex ${i?"flex-row items-center space-x-2 space-x-reverse":"flex-col items-center text-center space-y-4"}`,children:[e.jsx("div",{className:`${i?"w-7 h-7":"w-12 h-12"} rounded-full bg-green-100 flex items-center justify-center shrink-0`,children:e.jsx(Pn,{className:`${i?"h-3.5 w-3.5":"h-6 w-6"} text-green-600`})}),e.jsxs("div",{className:`${i?"flex-1":""}`,children:[e.jsx("h5",{className:`font-bold ${i?"text-xs":""}`,children:"إدارة الإيصالات"}),!i&&e.jsx("p",{className:"text-sm text-neutral-500",children:"إدارة نظام الإيصالات الرقمية والتوقيع الإلكتروني"})]})]})}),!i&&e.jsx(Os,{className:"p-4 pt-0 justify-center",children:e.jsx(M,{variant:"ghost",className:"text-green-600 hover:text-green-800",onClick:()=>x("/receipts-management"),children:"إدارة الإيصالات"})})]})]})]}),e.jsx("div",{className:`${i?"mb-4":"mb-6"}`,children:e.jsx(dq,{transactions:l||[],isLoading:o})})]})})}),e.jsx(Ht,{open:r,onOpenChange:a,children:e.jsxs($t,{className:"sm:max-w-md",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{className:"text-center",children:"يجب طلب الترقية أولاً"}),e.jsx(ls,{className:"text-center",children:"للوصول إلى خدمة التحويل الدولي، يجب عليك طلب ترقية الحساب أولاً."})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx(M,{onClick:()=>{a(!1),s("/upgrade-request")},className:"w-full",children:"طلب الترقية الآن"}),e.jsx(M,{variant:"outline",onClick:()=>a(!1),className:"w-full",children:"إلغاء"})]})]})})]}):null}const Gs=u.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:Te("w-full caption-bottom text-sm",t),...s})}));Gs.displayName="Table";const Ys=u.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:Te("[&_tr]:border-b",t),...s}));Ys.displayName="TableHeader";const Qs=u.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:Te("[&_tr:last-child]:border-0",t),...s}));Qs.displayName="TableBody";const hq=u.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));hq.displayName="TableFooter";const kt=u.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:Te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));kt.displayName="TableRow";const ae=u.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));ae.displayName="TableHead";const se=u.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));se.displayName="TableCell";const hm=u.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:Te("mt-4 text-sm text-muted-foreground",t),...s}));hm.displayName="TableCaption";function yn({className:t="",variant:s="outline",size:n="default"}){return e.jsx(Mn,{href:"/dashboard",children:e.jsxs(M,{variant:s,size:n,className:`flex items-center gap-2 ${t}`,children:[e.jsx(hl,{className:"h-4 w-4"}),e.jsx("span",{className:"text-[#f3a212]",children:"لوحة التحكم"})]})})}const pe=u.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));pe.displayName="Input";const xq=kc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ie({className:t,variant:s,...n}){return e.jsx("div",{className:Te(xq({variant:s}),t),...n})}const Io=t=>String(t),Qi=t=>{if(!t)return"";const s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>s[n])},Qu=(t,s)=>{const n=t%1===0;return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:n?0:2,maximumFractionDigits:n?0:2,useGrouping:!1}).format(t)};function pq(){const{user:t}=Mt(),{toast:s}=lt();_t();const[n,r]=u.useState(""),[a,i]=u.useState("all"),{data:l,isLoading:o}=Cu("transfers");u.useEffect(()=>{document.title="سجل الحوالات - صرافة الخليج"},[]);const{data:c,isLoading:d}=$e({queryKey:["/api/transfers"],enabled:!!t}),f=c==null?void 0:c.filter(h=>{var p;const j=n===""||h.senderName.toLowerCase().includes(n.toLowerCase())||h.receiverName.toLowerCase().includes(n.toLowerCase())||((p=h.note)==null?void 0:p.toLowerCase().includes(n.toLowerCase())),v=a==="all"||a==="sent"&&h.isSender||a==="received"&&h.isReceiver;return j&&v}),x=h=>{const j=window.open("","_blank","width=350,height=500");if(!j)return;const v=`
      <!DOCTYPE html>
      <html dir="rtl" lang="ar">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>إيصال التحويل - ${Io(h.id||"")}</title>
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          body {
            font-family: 'Arial', sans-serif;
            font-size: 10px;
            line-height: 1.3;
            color: #000;
            padding: 10px;
            background: white;
            text-align: center;
            direction: rtl;
          }
          .receipt {
            width: 80mm;
            max-width: 350px;
            margin: 0 auto;
            padding: 3mm;
            background: white;
            border: 1px solid #ccc;
            text-align: right;
            direction: rtl;
          }
          .header {
            text-align: center;
            margin-bottom: 4mm;
            padding-bottom: 3mm;
            border-bottom: 1px solid #000;
          }
          .title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 2mm;
            color: #000;
          }
          .subtitle {
            font-size: 10px;
            color: #000;
          }
          .section {
            margin: 2mm 0;
            padding: 1mm 0;
          }
          .section-title {
            font-weight: bold;
            font-size: 11px;
            margin-bottom: 2mm;
            color: #000;
            border-bottom: 1px dotted #000;
            padding-bottom: 1mm;
            text-align: center;
          }
          .row {
            display: flex;
            justify-content: space-between;
            margin: 1.5mm 0;
            font-size: 9px;
            padding: 1mm 0;
          }
          .label {
            font-weight: bold;
            color: #000;
            width: 40%;
            text-align: right;
          }
          .value {
            font-weight: normal;
            color: #000;
            width: 60%;
            text-align: left;
            word-wrap: break-word;
          }
          .amount {
            font-size: 12px;
            font-weight: bold;
            color: #000;
            text-align: center;
            padding: 3mm;
            border: 2px solid #000;
            margin: 3mm 0;
            background: #f5f5f5;
          }
          .footer {
            text-align: center;
            margin-top: 3mm;
            padding-top: 2mm;
            border-top: 1px solid #000;
            font-size: 7px;
            color: #000;
          }
          .date-time {
            font-size: 6px;
            color: #000;
          }
          .separator {
            text-align: center;
            margin: 2mm 0;
            font-size: 8px;
            color: #000;
          }
          @media print {
            @page {
              size: 80mm auto;
              margin: 2mm;
            }
            body { 
              padding: 0; 
              margin: 0;
              width: 100%;
              text-align: center;
            }
            .receipt { 
              width: 80mm;
              padding: 2mm;
              margin: 0 auto;
              border: none;
            }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <div class="title">صرافة الخليج</div>
            <div class="subtitle">إيصال تحويل مالي</div>
          </div>
          
          <div class="separator">================================</div>
          
          <div class="section">
            <div class="section-title">تفاصيل العملية</div>
            <div class="row">
              <span class="label">رقم العملية:</span>
              <span class="value">${Qi(Io(h.id||"غير متوفر"))}</span>
            </div>
            <div class="row">
              <span class="label">نوع العملية:</span>
              <span class="value">${Qi(h.isSender?"مرسلة":"مستلمة")}</span>
            </div>
            <div class="row">
              <span class="label">التاريخ:</span>
              <span class="value">${Qi(h.created_at?E2(String(h.created_at)):"غير محدد")}</span>
            </div>
            <div class="row">
              <span class="label">الوقت:</span>
              <span class="value">${Qi(h.created_at?I2(String(h.created_at)):"غير محدد")}</span>
            </div>
          </div>

          <div class="separator">- - - - - - - - - - - - - - - - -</div>

          <div class="section">
            <div class="section-title">أطراف العملية</div>
            ${h.isSender?`
              <div class="row">
                <span class="label">المرسل:</span>
                <span class="value">${Qi(h.senderName)}</span>
              </div>
              <div class="row">
                <span class="label">المستلم:</span>
                <span class="value">${Qi(h.receiverName)}</span>
              </div>
              <div class="row">
                <span class="label">حساب المستلم:</span>
                <span class="value">${Io(String(h.receiver_account_number||"غير متوفر"))}</span>
              </div>
            `:`
              <div class="row">
                <span class="label">المرسل:</span>
                <span class="value">${Qi(h.senderName)}</span>
              </div>
              <div class="row">
                <span class="label">حساب المرسل:</span>
                <span class="value">${Io(String(h.sender_account_number||"غير متوفر"))}</span>
              </div>
              <div class="row">
                <span class="label">المستلم:</span>
                <span class="value">${Qi(h.receiverName)}</span>
              </div>
            `}
          </div>

          <div class="separator">- - - - - - - - - - - - - - - - -</div>

          <div class="section">
            <div class="section-title">المبالغ</div>
            <div class="row">
              <span class="label">المبلغ:</span>
              <span class="value">${Qu(Number(h.amount),h.currency)}</span>
            </div>
            ${h.isSender&&h.commission?`
              <div class="row">
                <span class="label">العمولة:</span>
                <span class="value">${Qu(Number(h.commission),h.currency)}</span>
              </div>
            `:""}
            <div class="row">
              <span class="label">العملة:</span>
              <span class="value">${h.currency}</span>
            </div>
          </div>

          <div class="amount">
            المجموع: ${Qu(h.isSender?Number(h.amount)+Number(h.commission||0):Number(h.amount),h.currency)}
          </div>

          ${h.note?`
            <div class="section">
              <div class="section-title">ملاحظات</div>
              <div class="value" style="font-size: 7px; word-wrap: break-word;">${Qi(h.note)}</div>
            </div>
          `:""}

          <div class="footer">
            <div>شكراً لاختيارك صرافة الخليج</div>
            <div class="date-time">طُبع: ${Io(new Date().toLocaleString("ar-LY"))}</div>
          </div>
        </div>

        <script>
          window.onload = function() {
            window.print();
          }
        <\/script>
      </body>
      </html>
    `;j.document.write(v),j.document.close()};return o?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحقق من الصلاحيات..."})]})}):l!=null&&l.isBlocked?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(_,{className:"w-full max-w-md mx-4",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-destructive",children:"تم تقييد الوصول"}),e.jsx(Se,{children:"لا يمكنك الوصول إلى صفحة التحويلات"})]}),e.jsxs(z,{className:"text-center space-y-4",children:[l.reason&&e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"السبب:"}),e.jsx("p",{className:"font-medium",children:l.reason})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع الإدارة"})]}),e.jsx(Os,{children:e.jsx(Mn,{href:"/dashboard",className:"w-full",children:e.jsx(M,{className:"w-full",variant:"outline",children:"العودة للوحة التحكم"})})})]})}):t?e.jsx(er,{page:"send",children:e.jsx("div",{className:"min-h-screen bg-neutral-100",children:e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-3 sm:py-8",dir:"rtl",children:[e.jsx(yn,{variant:"ghost",className:"mb-3 sm:mb-6 text-sm sm:text-base"}),e.jsxs(_,{className:"border-0 shadow-md",children:[e.jsxs(q,{className:"pb-3 sm:pb-4 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsx(X,{className:"text-lg sm:text-2xl font-bold",children:"سجل الحوالات"}),e.jsx(Se,{className:"text-xs sm:text-sm",children:"عرض قائمة بجميع الحوالات المالية التي قمت بإرسالها أو استلامها"}),e.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-lg",children:"رقم حسابك"}),e.jsx("p",{className:"text-neutral-600 text-xs sm:text-sm hidden sm:block",children:"شارك رقم الحساب مع الآخرين ليتمكنوا من إرسال التحويلات إليك"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"bg-white p-2 px-3 sm:px-4 border-2 border-blue-300 rounded-md font-mono text-sm sm:text-xl flex-1 text-center font-bold text-blue-700",children:t!=null&&t.accountNumber?Io(t.accountNumber):"غير متوفر"}),e.jsx(M,{variant:"default",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",onClick:()=>{t!=null&&t.accountNumber&&(navigator.clipboard.writeText(t.accountNumber),s({title:"تم النسخ",description:"تم نسخ رقم الحساب إلى الحافظة"}))},children:"نسخ الرقم"})]})]})})]}),e.jsxs(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(Fn,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-neutral-400"}),e.jsx(pe,{className:"pr-9 sm:pr-10 text-xs sm:text-sm h-8 sm:h-10",placeholder:"بحث...",value:n,onChange:h=>r(h.target.value)})]}),e.jsx("div",{className:"flex space-x-2 space-x-reverse",children:e.jsxs(Nt,{value:a,onValueChange:i,children:[e.jsx(bt,{className:"w-full sm:w-36 text-xs sm:text-sm h-8 sm:h-10",children:e.jsxs(Ct,{children:[a==="all"&&"جميع المعاملات",a==="sent"&&"الحوالات المرسلة",a==="received"&&"الحوالات المستلمة"]})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع المعاملات"}),e.jsx(te,{value:"sent",children:"الحوالات المرسلة"}),e.jsx(te,{value:"received",children:"الحوالات المستلمة"})]})]})})]}),d?e.jsx("div",{className:"flex justify-center items-center py-8 sm:py-12",children:e.jsx(ft,{className:"h-6 w-6 sm:h-8 sm:w-8 animate-spin text-blue-500"})}):(c==null?void 0:c.length)===0?e.jsx("div",{className:"text-center py-8 sm:py-12",children:e.jsx("p",{className:"text-neutral-500 text-sm sm:text-base",children:"لا توجد حوالات في سجلك حتى الآن"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(hm,{className:"text-xs sm:text-sm",children:"قائمة الحوالات المالية"}),e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-right text-xs sm:text-sm",children:"النوع"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm",children:"الطرف الآخر"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm",children:"المبلغ"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm hidden sm:table-cell",children:"العمولة"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm hidden lg:table-cell",children:"العملة"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm",children:"التاريخ"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm hidden md:table-cell",children:"ملاحظة"}),e.jsx(ae,{className:"text-right text-xs sm:text-sm",children:"طباعة"})]})}),e.jsx(Qs,{children:f==null?void 0:f.map(h=>e.jsxs(kt,{children:[e.jsx(se,{className:"py-2 sm:py-4",children:e.jsx(ie,{variant:h.isSender?"destructive":"default",className:`text-xs px-1 py-0.5 sm:px-2 sm:py-1 ${h.isSender?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:h.isSender?"مرسلة":"مستلمة"})}),e.jsx(se,{className:"font-medium text-xs sm:text-sm py-2 sm:py-4",children:e.jsxs("div",{className:"truncate max-w-20 sm:max-w-none",children:[e.jsx("div",{className:"font-semibold",children:h.isSender?h.receiverName:h.senderName}),e.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["رقم الحساب: ",Io(h.isSender?h.receiver_account_number||"غير متوفر":h.sender_account_number||"غير متوفر")]})]})}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4",children:e.jsx("div",{className:"font-mono font-bold text-green-600",children:Qu(Number(h.amount),h.currency)})}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4 hidden sm:table-cell",children:e.jsx("div",{className:"font-mono",children:h.isSender?Qu(Number(h.commission||0),h.currency):"-"})}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4 hidden lg:table-cell",children:h.currency}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4",children:e.jsxs("div",{className:"flex flex-col font-mono",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:h.created_at?E2(String(h.created_at)):"غير محدد"}),e.jsx("span",{className:"text-xs text-neutral-500 hidden sm:block",children:h.created_at?I2(String(h.created_at)):""})]})}),e.jsx(se,{className:"max-w-16 sm:max-w-xs truncate text-xs sm:text-sm py-2 sm:py-4 hidden md:table-cell",children:h.note||"-"}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4",children:e.jsx(M,{variant:"outline",size:"sm",className:"h-6 w-6 sm:h-8 sm:w-8 p-1",onClick:()=>x(h),title:"طباعة إيصال",children:e.jsx(Hf,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},h.id))})]})}),e.jsx("div",{className:"flex justify-center mt-4 sm:mt-6",children:e.jsxs("nav",{className:"flex items-center gap-1",children:[e.jsx(M,{variant:"outline",size:"sm",disabled:!0,className:"h-7 w-7 sm:h-8 sm:w-8",children:e.jsx(Zd,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(M,{variant:"outline",size:"sm",className:"bg-blue-50 h-7 w-7 sm:h-8 sm:w-8 text-xs sm:text-sm",children:"1"}),e.jsx(M,{variant:"outline",size:"sm",disabled:!0,className:"h-7 w-7 sm:h-8 sm:w-8",children:e.jsx(Bv,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]})]})]})})}):null}const Un=u.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Un.displayName="Textarea";var gq="Separator",L4="horizontal",jq=["horizontal","vertical"],k9=u.forwardRef((t,s)=>{const{decorative:n,orientation:r=L4,...a}=t,i=yq(r)?r:L4,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(it.div,{"data-orientation":i,...o,...a,ref:s})});k9.displayName=gq;function yq(t){return jq.includes(t)}var L9=k9;const fs=u.forwardRef(({className:t,orientation:s="horizontal",decorative:n=!0,...r},a)=>e.jsx(L9,{ref:a,decorative:n,orientation:s,className:Te("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));fs.displayName=L9.displayName;const vq=R.object({fullName:R.string().min(3,{message:"يجب أن يكون الاسم أكثر من 3 أحرف"}),phone:R.string().min(10,{message:"يجب أن يكون رقم الهاتف صحيحًا"}),city:R.string().min(2,{message:"يرجى إدخال اسم المدينة"}),message:R.string().optional()});function bq(){const{user:t}=Mt(),{toast:s}=lt(),[,n]=_t();u.useEffect(()=>{document.title="طلب ترقية للتحويل بين المدن - صرافة الخليج"},[]),u.useEffect(()=>{t&&t.countryId!==1&&(s({title:"غير متاح",description:"طلب الترقية للتحويل بين المدن متاح للمستخدمين المسجلين في ليبيا فقط.",variant:"destructive"}),n("/dashboard"))},[t,n,s]);const{data:r,isLoading:a,refetch:i}=$e({queryKey:["/api/user/upgrade-requests"],enabled:!!t}),l=r==null?void 0:r.find(p=>p.status==="pending"),o=r==null?void 0:r.find(p=>p.status==="approved"),c=(r==null?void 0:r.filter(p=>p.status==="rejected"))||[],d=xs({resolver:ps(vq),defaultValues:{fullName:(t==null?void 0:t.fullName)||"",phone:(t==null?void 0:t.phone)||"",city:(t==null?void 0:t.cityName)||"",message:""}});u.useEffect(()=>{t&&(d.setValue("fullName",t.fullName||""),d.setValue("phone",t.phone||""),t.cityName&&d.setValue("city",t.cityName))},[t,d]);const f=Ze({mutationFn:async p=>await(await ce("/api/upgrade-requests","POST",p)).json(),onSuccess:()=>{s({title:"تم إرسال طلب ترقية التحويل بين المدن بنجاح",description:"سيتم مراجعة طلبك من قبل الإدارة في أقرب وقت"}),i(),d.reset()},onError:p=>{s({title:"فشل إرسال طلب الترقية",description:p.message,variant:"destructive"})}}),x=p=>{f.mutate(p)},h=()=>{n("/dashboard")};if(!t)return null;const j=t.type!=="office"&&!l&&!o,v=p=>{switch(p){case"pending":return e.jsxs(ie,{variant:"outline",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[e.jsx(la,{className:"h-3 w-3 mr-0 ml-1"}),"قيد المراجعة"]});case"approved":return e.jsxs(ie,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(Zr,{className:"h-3 w-3 mr-0 ml-1"}),"تمت الموافقة"]});case"rejected":return e.jsxs(ie,{variant:"outline",className:"bg-red-100 text-red-800 border-red-300",children:[e.jsx(Xs,{className:"h-3 w-3 mr-0 ml-1"}),"مرفوض"]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-neutral-100",children:e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",dir:"rtl",children:[e.jsxs(M,{variant:"ghost",className:"mb-4 sm:mb-6 flex items-center gap-2 text-sm sm:text-base",onClick:h,children:[e.jsx(Br,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"العودة إلى لوحة التحكم"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(_,{className:"border-0 shadow-md",children:[e.jsxs(q,{className:"pb-3 sm:pb-4 px-4 sm:px-6 pt-4 sm:pt-6",children:[e.jsx(X,{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:"طلب ترقية للتحويل بين المدن"}),e.jsx(Se,{className:"text-sm sm:text-base",children:"قم بترقية حسابك لتفعيل خدمة التحويل بين المدن"})]}),e.jsxs(z,{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:[t.type==="office"?e.jsxs(os,{className:"bg-green-50 text-green-800 border border-green-200",children:[e.jsx(Zr,{className:"h-5 w-5"}),e.jsx(zn,{className:"text-green-800 mb-1",children:"تم ترقية حسابك"}),e.jsx(cs,{className:"text-green-700",children:"حسابك مرقى بالفعل ويمكنك إجراء التحويلات بين المدن."})]}):l?e.jsxs(os,{className:"bg-yellow-50 text-yellow-800 border border-yellow-200",children:[e.jsx(la,{className:"h-5 w-5"}),e.jsx(zn,{className:"text-yellow-800 mb-1",children:"طلب قيد المراجعة"}),e.jsx(cs,{className:"text-yellow-700",children:"لديك طلب ترقية قيد المراجعة حالياً. سيتم إخطارك فور مراجعته من قبل الإدارة."})]}):o?e.jsxs(os,{className:"bg-green-50 text-green-800 border border-green-200",children:[e.jsx(Zr,{className:"h-5 w-5"}),e.jsx(zn,{className:"text-green-800 mb-1",children:"تمت الموافقة على طلبك"}),e.jsx(cs,{className:"text-green-700",children:"تمت الموافقة على طلب الترقية الخاص بك. قم بتسجيل الخروج وإعادة تسجيل الدخول لتفعيل الميزات الجديدة."})]}):j?e.jsx(sc,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-4 sm:space-y-6",children:[e.jsxs(Es,{children:[e.jsx(Is,{className:"text-sm sm:text-base",children:"رقم الحساب"}),e.jsx(Ss,{children:e.jsx(as,{value:(t==null?void 0:t.accountNumber)||"",disabled:!0,className:"bg-gray-50 text-gray-600 text-sm sm:text-base"})}),e.jsx(ay,{className:"text-xs sm:text-sm",children:"رقم حسابك الحالي في النظام"})]}),e.jsx(Rs,{control:d.control,name:"fullName",render:({field:p})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"الاسم الكامل"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل الاسم الكامل",...p,readOnly:!0,className:"bg-muted cursor-not-allowed"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"هذا الاسم مأخوذ من بيانات حسابك المسجل"}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:d.control,name:"phone",render:({field:p})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"رقم الهاتف"}),e.jsx(Ss,{children:e.jsx(as,{placeholder:"أدخل رقم الهاتف",type:"tel",...p,readOnly:!0,className:"bg-muted cursor-not-allowed"})}),e.jsx(ay,{children:"سيتم استخدام رقم الهاتف للتواصل معك بخصوص طلب الترقية"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"رقم الهاتف مأخوذ من بيانات حسابك المسجل"}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:d.control,name:"city",render:({field:p})=>e.jsxs(Es,{children:[e.jsx(Is,{children:"المدينة"}),e.jsx(Ss,{children:e.jsx(as,{value:(t==null?void 0:t.cityName)||"",readOnly:!0,className:"bg-muted cursor-not-allowed",dir:"rtl"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"المدينة من بيانات إنشاء الحساب"}),e.jsx(Ps,{})]})}),e.jsx(Rs,{control:d.control,name:"message",render:({field:p})=>e.jsxs(Es,{children:[e.jsx(Is,{className:"text-sm sm:text-base",children:"رسالة توضيحية (اختياري)"}),e.jsx(Ss,{children:e.jsx(Un,{placeholder:"اكتب أي معلومات إضافية ترغب في إضافتها لطلبك",className:"resize-none h-24 sm:h-32 text-sm sm:text-base",...p})}),e.jsx(Ps,{})]})}),e.jsx(M,{type:"submit",className:"w-full text-sm sm:text-base py-2 sm:py-3",disabled:f.isPending,children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4 animate-spin"}),"جارٍ الإرسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(uo,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4"}),"إرسال طلب الترقية للتحويل بين المدن"]})})]})}):null,c.length>0&&e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:"الطلبات السابقة"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:c.map(p=>e.jsxs("div",{className:"border border-red-200 rounded-lg p-3 sm:p-4 bg-red-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"font-medium text-red-800",children:["طلب مرفوض",e.jsx("div",{className:"text-sm text-neutral-500 mt-1",children:p.createdAt?new Date(p.createdAt).toLocaleDateString("ar-LY"):""})]}),v(p.status)]}),p.reviewNotes&&e.jsxs("div",{className:"mt-2 text-sm border-t border-red-200 pt-2 text-red-700",children:[e.jsx("strong",{children:"ملاحظات المراجعة:"})," ",p.reviewNotes]})]},p.id))})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(_,{className:"border-0 shadow-md",children:[e.jsx(q,{className:"pb-3 sm:pb-4 px-4 sm:px-6 pt-4 sm:pt-6",children:e.jsx(X,{className:"text-lg sm:text-xl",children:"مزايا التحويل بين المدن"})}),e.jsxs(z,{className:"space-y-4 sm:space-y-6 px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full p-2 bg-green-100 text-green-700 mt-0.5",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"تحويلات بين المدن"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"إمكانية إجراء تحويلات بين المدن الليبية المختلفة"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full p-2 bg-green-100 text-green-700 mt-0.5",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"عمولات مخفضة"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"الحصول على عمولات مخفضة للتحويلات بين المدن"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full p-2 bg-green-100 text-green-700 mt-0.5",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"سرعة في التحويل"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"تحويلات فورية بين المدن المختلفة"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full p-2 bg-green-100 text-green-700 mt-0.5",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"تغطية شاملة"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"تحويل إلى جميع المدن الليبية المدعومة"})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"text-sm bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"متطلبات الترقية:"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:"تقديم معلومات صحيحة وكاملة"}),e.jsx("li",{children:"توثيق الحساب مسبقاً"}),e.jsx("li",{children:"الالتزام بسياسات المنصة وشروط الاستخدام"}),e.jsx("li",{children:"قد تستغرق مراجعة الطلب ما بين 24-48 ساعة"})]})]})]})]})})]})]})})}const Bs=vA,T9=u.createContext({}),_e=({...t})=>e.jsx(T9.Provider,{value:{name:t.name},children:e.jsx(NA,{...t})}),B0=()=>{const t=u.useContext(T9),s=u.useContext(E9),{getFieldState:n,formState:r}=Hm(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},E9=u.createContext({}),De=u.forwardRef(({className:t,...s},n)=>{const r=u.useId();return e.jsx(E9.Provider,{value:{id:r},children:e.jsx("div",{ref:n,className:Te("space-y-2",t),...s})})});De.displayName="FormItem";const Pe=u.forwardRef(({className:t,...s},n)=>{const{error:r,formItemId:a}=B0();return e.jsx(Ce,{ref:n,className:Te(r&&"text-destructive",t),htmlFor:a,...s})});Pe.displayName="FormLabel";const Re=u.forwardRef(({...t},s)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:i}=B0();return e.jsx(d0,{ref:s,id:r,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...t})});Re.displayName="FormControl";const Kr=u.forwardRef(({className:t,...s},n)=>{const{formDescriptionId:r}=B0();return e.jsx("p",{ref:n,id:r,className:Te("text-sm text-muted-foreground",t),...s})});Kr.displayName="FormDescription";const He=u.forwardRef(({className:t,children:s,...n},r)=>{const{error:a,formMessageId:i}=B0(),l=a?String((a==null?void 0:a.message)??""):s;return l?e.jsx("p",{ref:r,id:i,className:Te("text-sm font-medium text-destructive",t),...n,children:l}):null});He.displayName="FormMessage";var Gb="Avatar",[wq,$ce]=Tn(Gb),[Nq,I9]=wq(Gb),A9=u.forwardRef((t,s)=>{const{__scopeAvatar:n,...r}=t,[a,i]=u.useState("idle");return e.jsx(Nq,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(it.span,{...r,ref:s})})});A9.displayName=Gb;var D9="AvatarImage",P9=u.forwardRef((t,s)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=t,l=I9(D9,n),o=Cq(r,i),c=Ks(d=>{a(d),l.onImageLoadingStatusChange(d)});return jn(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(it.img,{...i,ref:s,src:r}):null});P9.displayName=D9;var _9="AvatarFallback",R9=u.forwardRef((t,s)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,i=I9(_9,n),[l,o]=u.useState(r===void 0);return u.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(it.span,{...a,ref:s}):null});R9.displayName=_9;function T4(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Cq(t,{referrerPolicy:s,crossOrigin:n}){const r=Sq(),a=u.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[l,o]=u.useState(()=>T4(i,t));return jn(()=>{o(T4(i,t))},[i,t]),jn(()=>{const c=x=>()=>{o(x)};if(!i)return;const d=c("loaded"),f=c("error");return i.addEventListener("load",d),i.addEventListener("error",f),s&&(i.referrerPolicy=s),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",f)}},[i,n,s]),l}function Mq(){return()=>{}}function Sq(){return u.useSyncExternalStore(Mq,()=>!0,()=>!1)}var O9=A9,z9=P9,F9=R9;const $o=u.forwardRef(({className:t,...s},n)=>e.jsx(O9,{ref:n,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));$o.displayName=O9.displayName;const kq=u.forwardRef(({className:t,...s},n)=>e.jsx(z9,{ref:n,className:Te("aspect-square h-full w-full",t),...s}));kq.displayName=z9.displayName;const Bo=u.forwardRef(({className:t,...s},n)=>e.jsx(F9,{ref:n,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Bo.displayName=F9.displayName;var Yb="Checkbox",[Lq,Bce]=Tn(Yb),[Tq,Eq]=Lq(Yb),U9=u.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:f,...x}=t,[h,j]=u.useState(null),v=Rt(s,w=>j(w)),p=u.useRef(!1),b=h?f||!!h.closest("form"):!0,[y=!1,m]=Yr({prop:a,defaultProp:i,onChange:d}),g=u.useRef(y);return u.useEffect(()=>{const w=h==null?void 0:h.form;if(w){const N=()=>m(g.current);return w.addEventListener("reset",N),()=>w.removeEventListener("reset",N)}},[h,m]),e.jsxs(Tq,{scope:n,state:y,disabled:o,children:[e.jsx(it.button,{type:"button",role:"checkbox","aria-checked":io(y)?"mixed":y,"aria-required":l,"data-state":V9(y),"data-disabled":o?"":void 0,disabled:o,value:c,...x,ref:v,onKeyDown:Ge(t.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Ge(t.onClick,w=>{m(N=>io(N)?!0:!N),b&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),b&&e.jsx(Iq,{control:h,bubbles:!p.current,name:r,value:c,checked:y,required:l,disabled:o,form:f,style:{transform:"translateX(-100%)"},defaultChecked:io(i)?!1:i})]})});U9.displayName=Yb;var $9="CheckboxIndicator",B9=u.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,i=Eq($9,n);return e.jsx(Qn,{present:r||io(i.state)||i.state===!0,children:e.jsx(it.span,{"data-state":V9(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});B9.displayName=$9;var Iq=t=>{const{control:s,checked:n,bubbles:r=!0,defaultChecked:a,...i}=t,l=u.useRef(null),o=R0(n),c=v0(s);u.useEffect(()=>{const f=l.current,x=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(x,"checked").set;if(o!==n&&j){const v=new Event("click",{bubbles:r});f.indeterminate=io(n),j.call(f,io(n)?!1:n),f.dispatchEvent(v)}},[o,n,r]);const d=u.useRef(io(n)?!1:n);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:l,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function io(t){return t==="indeterminate"}function V9(t){return io(t)?"indeterminate":t?"checked":"unchecked"}var G9=U9,Aq=B9;const Di=u.forwardRef(({className:t,...s},n)=>e.jsx(G9,{ref:n,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Aq,{className:Te("flex items-center justify-center text-current"),children:e.jsx(vl,{className:"h-4 w-4"})})}));Di.displayName=G9.displayName;var Qb="Switch",[Dq,Vce]=Tn(Qb),[Pq,_q]=Dq(Qb),Y9=u.forwardRef((t,s)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:f,...x}=t,[h,j]=u.useState(null),v=Rt(s,g=>j(g)),p=u.useRef(!1),b=h?f||!!h.closest("form"):!0,[y=!1,m]=Yr({prop:a,defaultProp:i,onChange:d});return e.jsxs(Pq,{scope:n,checked:y,disabled:o,children:[e.jsx(it.button,{type:"button",role:"switch","aria-checked":y,"aria-required":l,"data-state":W9(y),"data-disabled":o?"":void 0,disabled:o,value:c,...x,ref:v,onClick:Ge(t.onClick,g=>{m(w=>!w),b&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})}),b&&e.jsx(Rq,{control:h,bubbles:!p.current,name:r,value:c,checked:y,required:l,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});Y9.displayName=Qb;var Q9="SwitchThumb",H9=u.forwardRef((t,s)=>{const{__scopeSwitch:n,...r}=t,a=_q(Q9,n);return e.jsx(it.span,{"data-state":W9(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:s})});H9.displayName=Q9;var Rq=t=>{const{control:s,checked:n,bubbles:r=!0,...a}=t,i=u.useRef(null),l=R0(n),o=v0(s);return u.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&x){const h=new Event("click",{bubbles:r});x.call(c,n),c.dispatchEvent(h)}},[l,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function W9(t){return t?"checked":"unchecked"}var Z9=Y9,Oq=H9;const ji=u.forwardRef(({className:t,...s},n)=>e.jsx(Z9,{className:Te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx(Oq,{className:Te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ji.displayName=Z9.displayName;var Hb="Radio",[zq,J9]=Tn(Hb),[Fq,Uq]=zq(Hb),q9=u.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:d,...f}=t,[x,h]=u.useState(null),j=Rt(s,b=>h(b)),v=u.useRef(!1),p=x?d||!!x.closest("form"):!0;return e.jsxs(Fq,{scope:n,checked:a,disabled:l,children:[e.jsx(it.button,{type:"button",role:"radio","aria-checked":a,"data-state":eP(a),"data-disabled":l?"":void 0,disabled:l,value:o,...f,ref:j,onClick:Ge(t.onClick,b=>{a||c==null||c(),p&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),p&&e.jsx($q,{control:x,bubbles:!v.current,name:r,value:o,checked:a,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});q9.displayName=Hb;var K9="RadioIndicator",X9=u.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...a}=t,i=Uq(K9,n);return e.jsx(Qn,{present:r||i.checked,children:e.jsx(it.span,{"data-state":eP(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});X9.displayName=K9;var $q=t=>{const{control:s,checked:n,bubbles:r=!0,...a}=t,i=u.useRef(null),l=R0(n),o=v0(s);return u.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&x){const h=new Event("click",{bubbles:r});x.call(c,n),c.dispatchEvent(h)}},[l,n,r]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eP(t){return t?"checked":"unchecked"}var Bq=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wb="RadioGroup",[Vq,Gce]=Tn(Wb,[bu,J9]),tP=bu(),sP=J9(),[Gq,Yq]=Vq(Wb),nP=u.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:f=!0,onValueChange:x,...h}=t,j=tP(n),v=Lc(d),[p,b]=Yr({prop:i,defaultProp:a,onChange:x});return e.jsx(Gq,{scope:n,name:r,required:l,disabled:o,value:p,onValueChange:b,children:e.jsx(mb,{asChild:!0,...j,orientation:c,dir:v,loop:f,children:e.jsx(it.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:v,...h,ref:s})})})});nP.displayName=Wb;var rP="RadioGroupItem",aP=u.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...a}=t,i=Yq(rP,n),l=i.disabled||r,o=tP(n),c=sP(n),d=u.useRef(null),f=Rt(s,d),x=i.value===a.value,h=u.useRef(!1);return u.useEffect(()=>{const j=p=>{Bq.includes(p.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",j),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",v)}},[]),e.jsx(hb,{asChild:!0,...o,focusable:!l,active:x,children:e.jsx(q9,{disabled:l,required:i.required,checked:x,...c,...a,name:i.name,ref:f,onCheck:()=>i.onValueChange(a.value),onKeyDown:Ge(j=>{j.key==="Enter"&&j.preventDefault()}),onFocus:Ge(a.onFocus,()=>{var j;h.current&&((j=d.current)==null||j.click())})})})});aP.displayName=rP;var Qq="RadioGroupIndicator",iP=u.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,a=sP(n);return e.jsx(X9,{...a,...r,ref:s})});iP.displayName=Qq;var lP=nP,oP=aP,Hq=iP;const th=u.forwardRef(({className:t,...s},n)=>e.jsx(lP,{className:Te("grid gap-2",t),...s,ref:n}));th.displayName=lP.displayName;const jl=u.forwardRef(({className:t,...s},n)=>e.jsx(oP,{ref:n,className:Te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Hq,{className:"flex items-center justify-center",children:e.jsx(XT,{className:"h-2.5 w-2.5 fill-current text-current"})})}));jl.displayName=oP.displayName;const Wq=[{title:"لوحة التحكم",href:"/admin",icon:e.jsx($v,{className:"h-5 w-5"})},{title:"مراقبة الرسائل",href:"/admin/message-monitoring",icon:e.jsx(Jn,{className:"h-5 w-5"})},{title:"إدارة القيود والأذونات",href:"/admin/access-restrictions",icon:e.jsx(Zt,{className:"h-5 w-5"})},{title:"Dev Studio",href:"/admin/dev-studio",icon:e.jsx(np,{className:"h-5 w-5"})},{title:"إدارة المعاملات",href:"/admin-transactions",icon:e.jsx(mc,{className:"h-5 w-5"})},{title:"التحويلات",href:"/admin-transfers-dashboard",icon:e.jsx(ec,{className:"h-5 w-5"})},{title:"طلبات التوثيق",href:"/admin-verification",icon:e.jsx(HU,{className:"h-5 w-5"})},{title:"إرسال إشعارات",href:"/admin-notifications",icon:e.jsx(Sa,{className:"h-5 w-5"})},{title:"إدارة المستخدمين",href:"/admin-users",icon:e.jsx(js,{className:"h-5 w-5"})},{title:"حوالات بسيطة",href:"/admin-simple-transfers",icon:e.jsx(JT,{className:"h-5 w-5"})},{title:"إعدادات عمولة متعددة العملات",href:"/admin/multi-currency-commission-settings",icon:e.jsx(Vn,{className:"h-5 w-5"})},{title:"نظام العمولة المحسن - معاينة فورية",href:"/admin/enhanced-commission-settings",icon:e.jsx(As,{className:"h-5 w-5"})},{title:"إعدادات المكافآت الثابتة",href:"/admin/fixed-rewards",icon:e.jsx(As,{className:"h-5 w-5"})}];function Nc({children:t}){var o;const[s,n]=_t(),{user:r,logoutMutation:a}=Mt();if((r==null?void 0:r.type)!=="admin")return n("/"),null;const i=(r==null?void 0:r.email)==="ss73ss73ss73@gmail.com",l=Wq.filter(c=>c.href==="/admin/access-restrictions"||c.href==="/admin/dev-studio"?i:!0);return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 flex h-16 items-center gap-4 border-b bg-background px-6 shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(Mn,{href:"/admin",children:e.jsx("a",{className:"text-xl font-bold",children:"لوحة المشرف"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xj,{}),e.jsxs(I0,{children:[e.jsx(A0,{asChild:!0,children:e.jsx(M,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsx($o,{className:"h-8 w-8",children:e.jsx(Bo,{children:((o=r.fullName)==null?void 0:o.charAt(0).toUpperCase())||"A"})})})}),e.jsxs(Ym,{className:"w-56 dir-rtl",align:"end",forceMount:!0,children:[e.jsxs(br,{children:[e.jsx(_i,{className:"ml-2 h-4 w-4"}),e.jsx("span",{children:"الملف الشخصي"})]}),e.jsxs(br,{children:[e.jsx(Vn,{className:"ml-2 h-4 w-4"}),e.jsx("span",{children:"الاشتراكات"})]}),e.jsxs(br,{children:[e.jsx(vs,{className:"ml-2 h-4 w-4"}),e.jsx("span",{children:"الإعدادات"})]}),e.jsxs(br,{onClick:()=>a.mutate(),children:[e.jsx(nE,{className:"ml-2 h-4 w-4"}),e.jsx("span",{children:"تسجيل الخروج"})]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx("aside",{className:"hidden lg:flex border-l bg-background bg-opacity-90 w-64 flex-col p-4 shadow",children:e.jsx("nav",{className:"flex flex-col gap-2",children:l.map((c,d)=>e.jsx(Mn,{href:c.href,children:e.jsxs("a",{className:`flex items-center gap-3 rounded-lg px-3 py-2 transition-all hover:bg-accent ${s===c.href?"bg-accent text-accent-foreground":"text-muted-foreground"} ${c.title==="مراقبة الرسائل"?"border border-blue-200 bg-blue-50/50 text-blue-800 font-medium":""}`,children:[c.icon,e.jsx("span",{children:c.title}),s===c.href&&e.jsx(Bv,{className:"mr-auto h-4 w-4"})]})},d))})}),e.jsx("main",{className:"flex-1",children:t})]})]})}function Zq(){const{ip:t,source:s,error:n,loading:r,timestamp:a,isStale:i,fetchIP:l}=z7(),o=$7(),c=d=>d<6e4?`${Math.round(d/1e3)} ثانية`:`${Math.round(d/6e4)} دقيقة`;return e.jsxs(_,{className:"w-full max-w-md",children:[e.jsx(q,{className:"pb-4",children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"w-5 h-5"}),"اختبار IP Detection"]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"IP العام:"}),r&&e.jsx(ie,{variant:"secondary",children:"جاري التحميل..."})]}),t?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsx("div",{className:"font-mono text-lg",children:t}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(f$,{className:"w-3 h-3"}),"المصدر: ",s]})]}):n?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:n})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-3 rounded-lg",children:e.jsx("div",{className:"text-muted-foreground text-sm",children:"لم يتم الحصول على IP بعد"})})]}),a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"معلومات التوقيت:"}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"w-3 h-3"}),"آخر تحديث: ",c(Date.now()-a)," مضت"]}),i&&e.jsx(ie,{variant:"outline",className:"text-xs",children:"البيانات قديمة"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"معلومات التخزين المؤقت:"}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg text-sm",children:o.hasCache?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:"✅ يوجد تخزين مؤقت"}),e.jsxs("div",{children:["العمر: ",c(o.age)]}),e.jsxs("div",{children:["الحالة: ",o.isExpired?"⏰ منتهي الصلاحية":"✅ صالح"]})]}):e.jsx("div",{children:"❌ لا يوجد تخزين مؤقت"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>l(!0),disabled:r,size:"sm",className:"flex-1",children:[e.jsx(ys,{className:`w-4 h-4 ml-1 ${r?"animate-spin":""}`}),"تحديث IP"]}),e.jsxs(M,{onClick:U7,variant:"outline",size:"sm",children:[e.jsx(is,{className:"w-4 h-4 ml-1"}),"مسح Cache"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("div",{children:"🔄 يتم تجربة 4 خدمات مختلفة"}),e.jsx("div",{children:"💾 التخزين المؤقت لمدة 20 دقيقة"}),e.jsx("div",{children:"⚡ استدعاء تلقائي عند بدء التطبيق"})]})]})]})}function Jq(){return e.jsx(er,{page:"admin",children:e.jsx(Nc,{children:e.jsx("div",{className:"golden-page-bg container mx-auto px-4 py-8 min-h-screen",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"لوحة التحكم - المشرف"}),e.jsx("p",{className:"text-neutral-500 mt-1",children:"إدارة شاملة للنظام والمستخدمين"})]}),e.jsxs(_,{className:"border-0 shadow-sm",children:[e.jsxs(q,{className:"pb-2",children:[e.jsx(X,{children:"لوحة إدارة النظام"}),e.jsx(Se,{children:"مرحباً بك في لوحة إدارة النظام. يمكنك الوصول إلى جميع الأقسام من القائمة الجانبية"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs(os,{className:"border-blue-200 bg-blue-50/50 text-blue-800",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(zn,{children:"إدارة النظام"}),e.jsx(cs,{children:"استخدم القائمة الجانبية للوصول إلى جميع أقسام الإدارة: إدارة المستخدمين، طلبات الترقية، التحقق من الهوية، وغيرها من الخدمات."})]}),e.jsx(Mn,{href:"/admin/message-monitoring",children:e.jsxs(M,{size:"lg",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-6 text-lg font-semibold",children:[e.jsx(Jn,{className:"ml-2 h-6 w-6"}),"مراقبة الرسائل - ميزة جديدة",e.jsx(Zd,{className:"mr-auto h-5 w-5"})]})}),e.jsx(Mn,{href:"/admin/access-restrictions",children:e.jsxs(M,{size:"lg",className:"w-full bg-red-600 hover:bg-red-700 text-white py-6 text-lg font-semibold",children:[e.jsx(Zt,{className:"ml-2 h-6 w-6"}),"إدارة القيود والأذونات - النظام الأمني",e.jsx(Zd,{className:"mr-auto h-5 w-5"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إحصائيات النظام"}),e.jsx($v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"نشط"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"النظام يعمل بكفاءة"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إدارة المستخدمين"}),e.jsx(js,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"متاح"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"جميع الميزات متاحة"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إدارة العمولات"}),e.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"محدث"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"آخر تحديث اليوم"})]})]}),e.jsx(Mn,{href:"/admin/message-monitoring",children:e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow border-blue-200 bg-blue-50/30 hover:bg-blue-50/50",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium text-blue-800",children:"مراقبة الرسائل"}),e.jsx(Jn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"جديد"}),e.jsx("p",{className:"text-xs text-blue-600",children:"اضغط للوصول للصفحة"})]})]})})]}),e.jsxs(_,{className:"border-green-200 bg-green-50/30",children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"الاختبارات التقنية"]}),e.jsx(Se,{children:"أدوات اختبار للتحقق من عمل الأنظمة التقنية"})]}),e.jsx(z,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(Zq,{})})})]})]})})})})}function E4(){const[t,s]=u.useState(""),[n,r]=u.useState("all"),[a,i]=u.useState(!1),[l,o]=u.useState(null),[c,d]=u.useState("approve"),[f,x]=u.useState(""),[h,j]=u.useState(!1),[v,p]=u.useState(null),[b,y]=u.useState("approve"),[m,g]=u.useState(""),[w,N]=u.useState({daily:5e4,monthly:2e5,currencies:["USD","EUR","LYD"],countries:[]}),{toast:k}=lt(),L=$n(),{data:S,isLoading:T}=$e({queryKey:["/api/admin/upgrade-requests"]}),{data:E,isLoading:$}=$e({queryKey:["/api/admin/upgrade/external-transfer/requests"]}),F=Ze({mutationFn:async({id:J,status:Fe,notes:Oe})=>{await ce(`/api/admin/upgrade-requests/${J}`,"PATCH",{status:Fe,notes:Oe})},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/upgrade-requests"]}),L.invalidateQueries({queryKey:["/api/user"]}),i(!1),x(""),k({title:"نجح التحديث",description:"تم تحديث حالة الطلب بنجاح"})},onError:J=>{k({title:"خطأ",description:J.message||"حدث خطأ أثناء تحديث الطلب",variant:"destructive"})}}),Z=Ze({mutationFn:async({id:J,daily:Fe,monthly:Oe,currencies:Ve,countries:Ne})=>{await ce(`/api/admin/upgrade/external-transfer/requests/${J}/approve`,"POST",{daily:Fe,monthly:Oe,currencies:Ve,countries:Ne})},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/upgrade/external-transfer/requests"]}),L.invalidateQueries({queryKey:["/api/user"]}),j(!1),g(""),k({title:"تمت الموافقة",description:"تم قبول طلب التحويل الخارجي وتفعيل الصلاحية"})},onError:J=>{k({title:"خطأ",description:J.message||"حدث خطأ أثناء موافقة الطلب",variant:"destructive"})}}),G=Ze({mutationFn:async({id:J,reason:Fe})=>{await ce(`/api/admin/upgrade/external-transfer/requests/${J}/reject`,"POST",{reason:Fe})},onSuccess:()=>{L.invalidateQueries({queryKey:["/api/admin/upgrade/external-transfer/requests"]}),j(!1),g(""),k({title:"تم الرفض",description:"تم رفض طلب التحويل الخارجي"})},onError:J=>{k({title:"خطأ",description:J.message||"حدث خطأ أثناء رفض الطلب",variant:"destructive"})}}),D=(S||[]).filter(J=>{const Fe=J.fullName.toLowerCase().includes(t.toLowerCase())||J.userEmail.toLowerCase().includes(t.toLowerCase())||J.city.toLowerCase().includes(t.toLowerCase()),Oe=n==="all"||J.status===n;return Fe&&Oe}),B=(E||[]).filter(J=>{const Fe=J.userFullName.toLowerCase().includes(t.toLowerCase())||J.userEmail.toLowerCase().includes(t.toLowerCase())||J.city.toLowerCase().includes(t.toLowerCase()),Oe=n==="all"||J.status===n;return Fe&&Oe}),de=(J,Fe)=>{o(J),d(Fe),i(!0)},U=(J,Fe)=>{p(J),y(Fe),N({daily:J.requestedLimits.daily,monthly:J.requestedLimits.monthly,currencies:J.requestedLimits.currencies,countries:J.requestedLimits.countries}),j(!0)},W=()=>{if(!l)return;const J=c==="approve"?"approved":"rejected";F.mutate({id:l.id,status:J,notes:f})},re=()=>{if(v)if(b==="approve"){const J={id:v.id,daily:Number(w.daily)||5e4,monthly:Number(w.monthly)||2e5,currencies:Array.isArray(w.currencies)&&w.currencies.length>0?w.currencies:["USD","EUR","LYD"],countries:[]};console.log("إرسال بيانات الموافقة:",J),Z.mutate(J)}else G.mutate({id:v.id,reason:m})},we=J=>{switch(J){case"pending":return e.jsx(ie,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"قيد المراجعة"});case"approved":return e.jsx(ie,{variant:"default",className:"bg-green-100 text-green-800",children:"تمت الموافقة"});case"rejected":return e.jsx(ie,{variant:"destructive",className:"bg-red-100 text-red-800",children:"مرفوض"});default:return e.jsx(ie,{variant:"outline",children:J})}},be=J=>new Date(J).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",numberingSystem:"latn"});return e.jsxs("div",{className:"container mx-auto p-6",dir:"rtl",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"إدارة الطلبات"}),e.jsx("p",{className:"text-muted-foreground",children:"إدارة طلبات ترقية المستخدمين وطلبات التحويل الخارجي"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative w-full md:max-w-sm",children:[e.jsx(Fn,{className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-500"}),e.jsx(pe,{placeholder:"البحث عن طلبات...",value:t,onChange:J=>s(J.target.value),className:"pr-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Om,{className:"h-4 w-4 text-neutral-500"}),e.jsxs("select",{value:n,onChange:J=>r(J.target.value),className:"border rounded-md px-2 py-1.5 text-sm",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"pending",children:"قيد المراجعة"}),e.jsx("option",{value:"approved",children:"تمت الموافقة"}),e.jsx("option",{value:"rejected",children:"مرفوض"})]})]})]}),e.jsxs(cr,{defaultValue:"upgrade",className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ot,{value:"upgrade",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"طلبات التحويل بين المدن"]}),e.jsxs(Ot,{value:"external",className:"flex items-center gap-2",children:[e.jsx(On,{className:"h-4 w-4"}),"طلبات التحويل الخارجي"]})]}),e.jsx(Kt,{value:"upgrade",className:"mt-6",children:e.jsxs(_,{className:"border-0 shadow-sm",children:[e.jsxs(q,{className:"pb-2",children:[e.jsx(X,{children:"إدارة طلبات ترقية المستخدمين"}),e.jsx(Se,{children:"عرض وإدارة طلبات ترقية المستخدمين إلى وكلاء صرافة"})]}),e.jsx(z,{children:T?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(ft,{className:"h-8 w-8 animate-spin text-neutral-500"})}):S!=null&&S.length?D!=null&&D.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(hm,{children:"قائمة طلبات ترقية المستخدمين"}),e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-left",children:"الاسم"}),e.jsx(ae,{className:"text-left",children:"البريد الإلكتروني"}),e.jsx(ae,{className:"text-left",children:"الهاتف"}),e.jsx(ae,{className:"text-left",children:"المدينة"}),e.jsx(ae,{className:"text-left",children:"العمولة"}),e.jsx(ae,{className:"text-left",children:"الحالة"}),e.jsx(ae,{className:"text-left",children:"تاريخ الطلب"}),e.jsx(ae,{className:"text-left",children:"إجراءات"})]})}),e.jsx(Qs,{children:D==null?void 0:D.map(J=>e.jsxs(kt,{className:"group",children:[e.jsx(se,{className:"font-medium text-left",children:J.fullName}),e.jsx(se,{className:"text-left",children:J.userEmail}),e.jsx(se,{className:"text-left",children:J.phone}),e.jsx(se,{className:"text-left",children:J.city}),e.jsx(se,{className:"text-left",children:J.commissionRate?`${J.commissionRate}%`:"—"}),e.jsx(se,{className:"text-left",children:we(J.status)}),e.jsx(se,{className:"text-left",children:be(J.createdAt)}),e.jsx(se,{className:"text-left",children:J.status==="pending"?e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(M,{size:"sm",variant:"outline",className:"h-8 border-green-500 text-green-500 hover:bg-green-50",onClick:()=>de(J,"approve"),children:[e.jsx(ks,{className:"h-4 w-4 ml-1"}),"قبول"]}),e.jsxs(M,{size:"sm",variant:"outline",className:"h-8 border-red-500 text-red-500 hover:bg-red-50",onClick:()=>de(J,"reject"),children:[e.jsx(Xs,{className:"h-4 w-4 ml-1"}),"رفض"]})]}):e.jsx("span",{className:"text-sm text-neutral-500",children:J.status==="approved"?"تمت الموافقة":"تم الرفض"})})]},J.id))})]})}):e.jsxs(os,{className:"border-amber-200 bg-amber-50/50 text-amber-800",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(zn,{children:"لا توجد نتائج"}),e.jsx(cs,{children:"لا توجد طلبات تطابق معايير البحث الحالية."})]}):e.jsxs(os,{className:"border-blue-200 bg-blue-50/50 text-blue-800",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(zn,{children:"لا توجد طلبات"}),e.jsx(cs,{children:"لا توجد طلبات ترقية مستخدمين في الوقت الحالي."})]})})]})}),e.jsx(Kt,{value:"external",className:"mt-6",children:e.jsxs(_,{className:"border-0 shadow-sm",children:[e.jsxs(q,{className:"flex flex-col space-y-1.5 p-6 pl-[575px] pr-[575px] pt-[16px] pb-[16px]",children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"h-5 w-5"}),"إدارة طلبات التحويل الخارجي"]}),e.jsx(Se,{className:"text-center",children:"عرض وإدارة طلبات تفعيل التحويل الخارجي"})]}),e.jsx(z,{children:$?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(ft,{className:"h-8 w-8 animate-spin text-neutral-500"})}):E!=null&&E.length?B!=null&&B.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsxs(hm,{className:"text-right",children:["عدد الطلبات: ",B.length]}),e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-center",children:"الإجراءات"}),e.jsx(ae,{className:"text-center",children:"البريد الإلكتروني"}),e.jsx(ae,{className:"text-center",children:"نوع الحساب"}),e.jsx(ae,{className:"text-center",children:"الحدود المطلوبة"}),e.jsx(ae,{className:"text-center",children:"العملات"}),e.jsx(ae,{className:"text-center",children:"الدولة"}),e.jsx(ae,{className:"text-center",children:"تاريخ الطلب"}),e.jsx(ae,{className:"text-center",children:"الحالة"}),e.jsx(ae,{className:"text-center",children:"الاسم"})]})}),e.jsx(Qs,{children:B.map(J=>{var Fe,Oe,Ve,Ne,qe,ve,Ee,ne;return e.jsxs(kt,{className:"hover:bg-gray-50/50",children:[e.jsx(se,{className:"text-right",children:J.status==="pending"?e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(M,{size:"sm",variant:"outline",className:"h-8 border-green-500 text-green-500 hover:bg-green-50",onClick:()=>U(J,"approve"),children:[e.jsx(ks,{className:"h-4 w-4 ml-1"}),"قبول"]}),e.jsxs(M,{size:"sm",variant:"outline",className:"h-8 border-red-500 text-red-500 hover:bg-red-50",onClick:()=>U(J,"reject"),children:[e.jsx(Xs,{className:"h-4 w-4 ml-1"}),"رفض"]})]}):e.jsx("span",{className:"text-sm text-neutral-500",children:J.status==="approved"?"تمت الموافقة":"تم الرفض"})}),e.jsx(se,{className:"text-center",children:J.userEmail}),e.jsx(se,{className:"text-center",children:e.jsx(ie,{variant:"outline",children:J.userType})}),e.jsx(se,{className:"text-center",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["يومي: ",(Fe=J.requestedLimits)!=null&&Fe.daily?ka(J.requestedLimits.daily.toString()):"غير محدد"]}),e.jsxs("div",{children:["شهري: ",(Oe=J.requestedLimits)!=null&&Oe.monthly?ka(J.requestedLimits.monthly.toString()):"غير محدد"]})]})}),e.jsx(se,{className:"text-center",children:e.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:((Ne=(Ve=J.requestedLimits)==null?void 0:Ve.currencies)==null?void 0:Ne.map(ke=>e.jsx(ie,{variant:"secondary",className:"text-xs",children:ke},ke)))||e.jsx("span",{className:"text-sm text-muted-foreground",children:"غير محدد"})})}),e.jsx(se,{className:"text-center",children:e.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[((ve=(qe=J.requestedLimits)==null?void 0:qe.countries)==null?void 0:ve.slice(0,3).map(ke=>e.jsx(ie,{variant:"secondary",className:"text-xs",children:ke},ke)))||e.jsx("span",{className:"text-sm text-muted-foreground",children:"غير محدد"}),((ne=(Ee=J.requestedLimits)==null?void 0:Ee.countries)==null?void 0:ne.length)>3&&e.jsxs(ie,{variant:"secondary",className:"text-xs",children:["+",J.requestedLimits.countries.length-3]})]})}),e.jsx(se,{className:"text-xs text-center",children:be(J.createdAt)}),e.jsx(se,{className:"text-center",children:we(J.status)}),e.jsx(se,{className:"font-medium text-center",children:J.userFullName})]},J.id)})})]})}):e.jsxs(os,{className:"border-amber-200 bg-amber-50/50 text-amber-800",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(zn,{children:"لا توجد نتائج"}),e.jsx(cs,{children:"لا توجد طلبات تطابق معايير البحث الحالية."})]}):e.jsxs(os,{className:"border-blue-200 bg-blue-50/50 text-blue-800",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(zn,{children:"لا توجد طلبات"}),e.jsx(cs,{children:"لا توجد طلبات تحويل خارجي في الوقت الحالي."})]})})]})})]})]}),e.jsx(Ht,{open:a,onOpenChange:i,children:e.jsxs($t,{className:"sm:max-w-md",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:c==="approve"?"الموافقة على طلب ترقية التحويل بين المدن":"رفض طلب ترقية التحويل بين المدن"}),e.jsx(ls,{children:c==="approve"?"هل أنت متأكد من الموافقة على طلب ترقية هذا الحساب؟":"هل أنت متأكد من رفض طلب ترقية هذا الحساب؟"})]}),l&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"الاسم: "}),e.jsx("span",{children:l.fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"البريد الإلكتروني: "}),e.jsx("span",{children:l.userEmail})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"الهاتف: "}),e.jsx("span",{children:l.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"المدينة: "}),e.jsx("span",{children:l.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"نسبة العمولة: "}),e.jsx("span",{children:l.commissionRate?`${l.commissionRate}%`:"غير محدد"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"ملاحظات المراجعة (اختياري):"}),e.jsx(Un,{placeholder:"أضف ملاحظات حول قرار الموافقة أو الرفض...",value:f,onChange:J=>x(J.target.value),className:"resize-none h-24"})]})]}),e.jsxs(_n,{className:"sm:justify-start",children:[e.jsx(M,{type:"button",variant:c==="approve"?"default":"destructive",onClick:W,disabled:F.isPending,children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جارٍ التنفيذ..."]}):c==="approve"?"موافقة":"رفض"}),e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:F.isPending,children:"إلغاء"})]})]})}),e.jsx(Ht,{open:h,onOpenChange:j,children:e.jsxs($t,{className:"sm:max-w-2xl",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"h-5 w-5"}),b==="approve"?"الموافقة على طلب التحويل الخارجي":"رفض طلب التحويل الخارجي"]}),e.jsx(ls,{children:b==="approve"?"راجع التفاصيل وحدد الحدود النهائية للموافقة على الطلب":"هل أنت متأكد من رفض طلب التحويل الخارجي؟"})]}),v&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"اسم المستخدم: "}),e.jsx("span",{children:v.userFullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"البريد الإلكتروني: "}),e.jsx("span",{children:v.userEmail})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"نوع الحساب: "}),e.jsx("span",{children:v.userType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"تاريخ الطلب: "}),e.jsx("span",{children:be(v.createdAt)})]})]}),v.message&&e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block mb-2",children:"رسالة المستخدم:"}),e.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded",children:v.message})]}),b==="approve"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"تحديد الحدود والعملات المسموحة:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"الحد اليومي:"}),e.jsx(pe,{type:"number",value:w.daily,onChange:J=>N(Fe=>({...Fe,daily:parseInt(J.target.value)||0})),min:"100",max:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"الحد الشهري:"}),e.jsx(pe,{type:"number",value:w.monthly,onChange:J=>N(Fe=>({...Fe,monthly:parseInt(J.target.value)||0})),min:"1000",max:"200000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"العملات المسموحة:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["USD","EUR","TRY","EGP","TND","AED","SAR","GBP"].map(J=>{var Fe;return e.jsx(ie,{variant:(Fe=w.currencies)!=null&&Fe.includes(J)?"default":"outline",className:"cursor-pointer",onClick:()=>{N(Oe=>({...Oe,currencies:(Oe.currencies||[]).includes(J)?(Oe.currencies||[]).filter(Ve=>Ve!==J):[...Oe.currencies||[],J]}))},children:J},J)})})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-green-800",children:"الدول المسموحة:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(On,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"جميع البلدان المتاحة في النظام ✓"})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"الوكيل الدولي سيتمكن من إجراء التحويلات إلى جميع البلدان المدعومة في المنصة"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"سبب الرفض:"}),e.jsx(Un,{placeholder:"أدخل سبب رفض الطلب...",value:m,onChange:J=>g(J.target.value),className:"resize-none h-24"})]})]}),e.jsxs(_n,{className:"sm:justify-start",children:[e.jsx(M,{type:"button",variant:b==="approve"?"default":"destructive",onClick:re,disabled:Z.isPending||G.isPending,children:Z.isPending||G.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جارٍ التنفيذ..."]}):b==="approve"?"موافقة وتفعيل":"رفض الطلب"}),e.jsx(M,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:Z.isPending||G.isPending,children:"إلغاء"})]})]})})]})}const Fi=Object.create(null);Fi.open="0";Fi.close="1";Fi.ping="2";Fi.pong="3";Fi.message="4";Fi.upgrade="5";Fi.noop="6";const yx=Object.create(null);Object.keys(Fi).forEach(t=>{yx[Fi[t]]=t});const my={type:"error",data:"parser error"},cP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",dP=typeof ArrayBuffer=="function",uP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Zb=({type:t,data:s},n,r)=>cP&&s instanceof Blob?n?r(s):I4(s,r):dP&&(s instanceof ArrayBuffer||uP(s))?n?r(s):I4(new Blob([s]),r):r(Fi[t]+(s||"")),I4=(t,s)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];s("b"+(r||""))},n.readAsDataURL(t)};function A4(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let r1;function qq(t,s){if(cP&&t.data instanceof Blob)return t.data.arrayBuffer().then(A4).then(s);if(dP&&(t.data instanceof ArrayBuffer||uP(t.data)))return s(A4(t.data));Zb(t,!1,n=>{r1||(r1=new TextEncoder),s(r1.encode(n))})}const D4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",df=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<D4.length;t++)df[D4.charCodeAt(t)]=t;const Kq=t=>{let s=t.length*.75,n=t.length,r,a=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),f=new Uint8Array(d);for(r=0;r<n;r+=4)i=df[t.charCodeAt(r)],l=df[t.charCodeAt(r+1)],o=df[t.charCodeAt(r+2)],c=df[t.charCodeAt(r+3)],f[a++]=i<<2|l>>4,f[a++]=(l&15)<<4|o>>2,f[a++]=(o&3)<<6|c&63;return d},Xq=typeof ArrayBuffer=="function",Jb=(t,s)=>{if(typeof t!="string")return{type:"message",data:fP(t,s)};const n=t.charAt(0);return n==="b"?{type:"message",data:eK(t.substring(1),s)}:yx[n]?t.length>1?{type:yx[n],data:t.substring(1)}:{type:yx[n]}:my},eK=(t,s)=>{if(Xq){const n=Kq(t);return fP(n,s)}else return{base64:!0,data:t}},fP=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},mP="",tK=(t,s)=>{const n=t.length,r=new Array(n);let a=0;t.forEach((i,l)=>{Zb(i,!1,o=>{r[l]=o,++a===n&&s(r.join(mP))})})},sK=(t,s)=>{const n=t.split(mP),r=[];for(let a=0;a<n.length;a++){const i=Jb(n[a],s);if(r.push(i),i.type==="error")break}return r};function nK(){return new TransformStream({transform(t,s){qq(t,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(a[0]|=128),s.enqueue(a),s.enqueue(n)})}})}let a1;function Fh(t){return t.reduce((s,n)=>s+n.length,0)}function Uh(t,s){if(t[0].length===s)return t.shift();const n=new Uint8Array(s);let r=0;for(let a=0;a<s;a++)n[a]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function rK(t,s){a1||(a1=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(r===0){if(Fh(n)<1)break;const c=Uh(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Fh(n)<2)break;const c=Uh(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Fh(n)<8)break;const c=Uh(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){o.enqueue(my);break}a=f*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Fh(n)<a)break;const c=Uh(n,a);o.enqueue(Jb(i?c:a1.decode(c),s)),r=0}if(a===0||a>t){o.enqueue(my);break}}}})}const hP=4;function Sn(t){if(t)return aK(t)}function aK(t){for(var s in Sn.prototype)t[s]=Sn.prototype[s];return t}Sn.prototype.on=Sn.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};Sn.prototype.once=function(t,s){function n(){this.off(t,n),s.apply(this,arguments)}return n.fn=s,this.on(t,n),this};Sn.prototype.off=Sn.prototype.removeListener=Sn.prototype.removeAllListeners=Sn.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===s||r.fn===s){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Sn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)s[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,s)}return this};Sn.prototype.emitReserved=Sn.prototype.emit;Sn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Sn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const V0=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,n)=>n(s,0),ja=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),iK="arraybuffer";function xP(t,...s){return s.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const lK=ja.setTimeout,oK=ja.clearTimeout;function G0(t,s){s.useNativeTimers?(t.setTimeoutFn=lK.bind(ja),t.clearTimeoutFn=oK.bind(ja)):(t.setTimeoutFn=ja.setTimeout.bind(ja),t.clearTimeoutFn=ja.clearTimeout.bind(ja))}const cK=1.33;function dK(t){return typeof t=="string"?uK(t):Math.ceil((t.byteLength||t.size)*cK)}function uK(t){let s=0,n=0;for(let r=0,a=t.length;r<a;r++)s=t.charCodeAt(r),s<128?n+=1:s<2048?n+=2:s<55296||s>=57344?n+=3:(r++,n+=4);return n}function pP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function fK(t){let s="";for(let n in t)t.hasOwnProperty(n)&&(s.length&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return s}function mK(t){let s={},n=t.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class hK extends Error{constructor(s,n,r){super(s),this.description=n,this.context=r,this.type="TransportError"}}class qb extends Sn{constructor(s){super(),this.writable=!1,G0(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,n,r){return super.emitReserved("error",new hK(s,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const n=Jb(s,this.socket.binaryType);this.onPacket(n)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,n={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const n=fK(s);return n.length?"?"+n:""}}class xK extends qb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const n=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};sK(s,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,tK(s,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=pP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(s,n)}}let gP=!1;try{gP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const pK=gP;function gK(){}class jK extends xK{constructor(s){if(super(s),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||r!==s.port}}doWrite(s,n){const r=this.request({method:"POST",data:s});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=s}}class Pi extends Sn{constructor(s,n,r){super(),this.createRequest=s,G0(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var s;const n=xP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Pi.requestsCount++,Pi.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gK,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pi.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pi.requestsCount=0;Pi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",P4);else if(typeof addEventListener=="function"){const t="onpagehide"in ja?"pagehide":"unload";addEventListener(t,P4,!1)}}function P4(){for(let t in Pi.requests)Pi.requests.hasOwnProperty(t)&&Pi.requests[t].abort()}const yK=function(){const t=jP({xdomain:!1});return t&&t.responseType!==null}();class vK extends jK{constructor(s){super(s);const n=s&&s.forceBase64;this.supportsBinary=yK&&!n}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new Pi(jP,this.uri(),s)}}function jP(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||pK))return new XMLHttpRequest}catch{}if(!s)try{return new ja[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bK extends qb{get name(){return"websocket"}doOpen(){const s=this.uri(),n=this.opts.protocols,r=yP?{}:xP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let n=0;n<s.length;n++){const r=s[n],a=n===s.length-1;Zb(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&V0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=pP()),this.supportsBinary||(n.b64=1),this.createUri(s,n)}}const i1=ja.WebSocket||ja.MozWebSocket;class wK extends bK{createSocket(s,n,r){return yP?new i1(s,n,r):n?new i1(s,n):new i1(s)}doWrite(s,n){this.ws.send(n)}}class NK extends qb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const n=rK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=s.readable.pipeThrough(n).getReader(),a=nK();a.readable.pipeTo(s.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let n=0;n<s.length;n++){const r=s[n],a=n===s.length-1;this._writer.write(r).then(()=>{a&&V0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const CK={websocket:wK,webtransport:NK,polling:vK},MK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,SK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hy(t){if(t.length>8e3)throw"URI too long";const s=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let a=MK.exec(t||""),i={},l=14;for(;l--;)i[SK[l]]=a[l]||"";return n!=-1&&r!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=kK(i,i.path),i.queryKey=LK(i,i.query),i}function kK(t,s){const n=/\/{2,9}/g,r=s.replace(n,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&r.splice(0,1),s.slice(-1)=="/"&&r.splice(r.length-1,1),r}function LK(t,s){const n={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const xy=typeof addEventListener=="function"&&typeof removeEventListener=="function",vx=[];xy&&addEventListener("offline",()=>{vx.forEach(t=>t())},!1);class lo extends Sn{constructor(s,n){if(super(),this.binaryType=iK,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(n=s,s=null),s){const r=hy(s);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hy(n.host).host);G0(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mK(this.opts.query)),xy&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const n=Object.assign({},this.opts.query);n.EIO=hP,n.transport=s,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&lo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(s);n.open(),this.setTransport(n)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",lo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=s.data,this._onError(n);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=dK(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,V0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,n,r){return this._sendPacket("message",s,n,r),this}send(s,n,r){return this._sendPacket("message",s,n,r),this}_sendPacket(s,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:s,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),s()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():s()}):this.upgrading?r():s()),this}_onError(s){if(lo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),xy&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=vx.indexOf(this._offlineEventListener);r!==-1&&vx.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,n),this.writeBuffer=[],this._prevBufferLen=0}}}lo.protocol=hP;class TK extends lo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let n=this.createTransport(s),r=!1;lo.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",x=>{if(!r)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;lo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function i(){r||(r=!0,f(),n.close(),n=null)}const l=x=>{const h=new Error("probe error: "+x);h.transport=n.name,i(),this.emitReserved("upgradeError",h)};function o(){l("transport closed")}function c(){l("socket closed")}function d(x){n&&x.name!==n.name&&i()}const f=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const n=[];for(let r=0;r<s.length;r++)~this.transports.indexOf(s[r])&&n.push(s[r]);return n}}let EK=class extends TK{constructor(s,n={}){const r=typeof s=="object"?s:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>CK[a]).filter(a=>!!a)),super(s,r)}};function IK(t,s="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hy(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+s,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const AK=typeof ArrayBuffer=="function",DK=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,vP=Object.prototype.toString,PK=typeof Blob=="function"||typeof Blob<"u"&&vP.call(Blob)==="[object BlobConstructor]",_K=typeof File=="function"||typeof File<"u"&&vP.call(File)==="[object FileConstructor]";function Kb(t){return AK&&(t instanceof ArrayBuffer||DK(t))||PK&&t instanceof Blob||_K&&t instanceof File}function bx(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(bx(t[n]))return!0;return!1}if(Kb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return bx(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&bx(t[n]))return!0;return!1}function RK(t){const s=[],n=t.data,r=t;return r.data=py(n,s),r.attachments=s.length,{packet:r,buffers:s}}function py(t,s){if(!t)return t;if(Kb(t)){const n={_placeholder:!0,num:s.length};return s.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=py(t[r],s);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=py(t[r],s));return n}return t}function OK(t,s){return t.data=gy(t.data,s),delete t.attachments,t}function gy(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=gy(t[n],s);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=gy(t[n],s));return t}const zK=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],FK=5;var rs;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(rs||(rs={}));class UK{constructor(s){this.replacer=s}encode(s){return(s.type===rs.EVENT||s.type===rs.ACK)&&bx(s)?this.encodeAsBinary({type:s.type===rs.EVENT?rs.BINARY_EVENT:rs.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let n=""+s.type;return(s.type===rs.BINARY_EVENT||s.type===rs.BINARY_ACK)&&(n+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(n+=s.nsp+","),s.id!=null&&(n+=s.id),s.data!=null&&(n+=JSON.stringify(s.data,this.replacer)),n}encodeAsBinary(s){const n=RK(s),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}function _4(t){return Object.prototype.toString.call(t)==="[object Object]"}class Xb extends Sn{constructor(s){super(),this.reviver=s}add(s){let n;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(s);const r=n.type===rs.BINARY_EVENT;r||n.type===rs.BINARY_ACK?(n.type=r?rs.EVENT:rs.ACK,this.reconstructor=new $K(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Kb(s)||s.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(s),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let n=0;const r={type:Number(s.charAt(0))};if(rs[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===rs.BINARY_EVENT||r.type===rs.BINARY_ACK){const i=n+1;for(;s.charAt(++n)!=="-"&&n!=s.length;);const l=s.substring(i,n);if(l!=Number(l)||s.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(s.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(s.charAt(n)===","||n===s.length););r.nsp=s.substring(i,n)}else r.nsp="/";const a=s.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const l=s.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===s.length)break}r.id=Number(s.substring(i,n+1))}if(s.charAt(++n)){const i=this.tryParse(s.substr(n));if(Xb.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,n){switch(s){case rs.CONNECT:return _4(n);case rs.DISCONNECT:return n===void 0;case rs.CONNECT_ERROR:return typeof n=="string"||_4(n);case rs.EVENT:case rs.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&zK.indexOf(n[0])===-1);case rs.ACK:case rs.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $K{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const n=OK(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const BK=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xb,Encoder:UK,get PacketType(){return rs},protocol:FK},Symbol.toStringTag,{value:"Module"}));function Fa(t,s,n){return t.on(s,n),function(){t.off(s,n)}}const VK=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bP extends Sn{constructor(s,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Fa(s,"open",this.onopen.bind(this)),Fa(s,"packet",this.onpacket.bind(this)),Fa(s,"error",this.onerror.bind(this)),Fa(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...n){var r,a,i;if(VK.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(n.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:rs.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,x=n.pop();this._registerAckCallback(f,x),l.id=f}const o=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[s]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},a),l=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...n){return new Promise((r,a)=>{const i=(l,o)=>l?a(l):r(o);i.withError=!0,n.push(i),this.emit(s,...n)})}_addToQueue(s){let n;typeof s[s.length-1]=="function"&&(n=s.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((a,...i)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!s||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:rs.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(r=>String(r.id)===s)){const r=this.acks[s];delete this.acks[s],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case rs.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rs.EVENT:case rs.BINARY_EVENT:this.onevent(s);break;case rs.ACK:case rs.BINARY_ACK:this.onack(s);break;case rs.DISCONNECT:this.ondisconnect();break;case rs.CONNECT_ERROR:this.destroy();const r=new Error(s.data.message);r.data=s.data.data,this.emitReserved("connect_error",r);break}}onevent(s){const n=s.data||[];s.id!=null&&n.push(this.ack(s.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:rs.ACK,id:s,data:a}))}}onack(s){const n=this.acks[s.id];typeof n=="function"&&(delete this.acks[s.id],n.withError&&s.data.unshift(null),n.apply(this,s.data))}onconnect(s,n){this.id=s,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rs.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(s===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(s===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,s.data)}}}function Su(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Su.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),n=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Su.prototype.reset=function(){this.attempts=0};Su.prototype.setMin=function(t){this.ms=t};Su.prototype.setMax=function(t){this.max=t};Su.prototype.setJitter=function(t){this.jitter=t};class jy extends Sn{constructor(s,n){var r;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(n=s,s=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,G0(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Su({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=s;const a=n.parser||BK;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var n;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(n=this.backoff)===null||n===void 0||n.setMin(s),this)}randomizationFactor(s){var n;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(n=this.backoff)===null||n===void 0||n.setJitter(s),this)}reconnectionDelayMax(s){var n;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(n=this.backoff)===null||n===void 0||n.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new EK(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Fa(n,"open",function(){r.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Fa(n,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Fa(s,"ping",this.onping.bind(this)),Fa(s,"data",this.ondata.bind(this)),Fa(s,"error",this.onerror.bind(this)),Fa(s,"close",this.onclose.bind(this)),Fa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(n){this.onclose("parse error",n)}}ondecoded(s){V0(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,n){let r=this.nsps[s];return r?this._autoConnect&&!r.active&&r.connect():(r=new bP(this,s,n),this.nsps[s]=r),r}_destroy(s){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(s){const n=this.encoder.encode(s);for(let r=0;r<n.length;r++)this.engine.write(n[r],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(a=>{a?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",a)):s.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Hu={};function nc(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const n=IK(t,s.path||"/socket.io"),r=n.source,a=n.id,i=n.path,l=Hu[a]&&i in Hu[a].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new jy(r,s):(Hu[a]||(Hu[a]=new jy(r,s)),c=Hu[a]),n.query&&!s.query&&(s.query=n.queryKey),c.socket(n.path,s)}Object.assign(nc,{Manager:jy,Socket:bP,io:nc,connect:nc});class GK{constructor(){this.socket=null,this.authenticated=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.eventListeners=new Map}connect(s){var n;return(n=this.socket)!=null&&n.connected?this.socket:(this.socket=nc("/",{transports:["websocket","polling"],timeout:1e4,forceNew:!1,reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),this.setupEventHandlers(),s&&this.authenticate(s),this.socket)}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{console.log("🟢 تم الاتصال بخادم Socket.IO"),this.reconnectAttempts=0;const s=localStorage.getItem("token");s&&!this.authenticated&&this.authenticate(s)}),this.socket.on("disconnect",s=>{console.log("🔴 انقطع الاتصال مع خادم Socket.IO:",s),this.authenticated=!1}),this.socket.on("connect_error",s=>{console.error("❌ خطأ في الاتصال مع Socket.IO:",s),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&console.error("❌ فشل في الاتصال بعد عدة محاولات")}),this.setupCustomEventHandlers())}setupCustomEventHandlers(){this.socket&&(this.socket.on("market.order.created",s=>{console.log("🚀 عرض جديد تم إنشاؤه:",s),this.emitToListeners("market.order.created",s)}),this.socket.on("market.order.canceled",s=>{console.log("❌ تم إلغاء العرض:",s),this.emitToListeners("market.order.canceled",s)}),this.socket.on("market.trade.executed",s=>{console.log("💰 تم تنفيذ الصفقة:",s),this.emitToListeners("market.trade.executed",s)}),this.socket.on("market.orderbook.updated",s=>{console.log("📊 تحديث دفتر الأوامر:",s),this.emitToListeners("market.orderbook.updated",s)}),this.socket.on("balance.updated",s=>{console.log("💳 تحديث الرصيد:",s),this.emitToListeners("balance.updated",s)}),this.socket.on("notification.created",s=>{console.log("🔔 إشعار جديد:",s),this.emitToListeners("notification.created",s)}),this.socket.on("newMessage",s=>{this.emitToListeners("newMessage",s)}),this.socket.on("messageDeleted",s=>{this.emitToListeners("messageDeleted",s)}),this.socket.on("messageEdited",s=>{this.emitToListeners("messageEdited",s)}),this.socket.on("userTyping",s=>{this.emitToListeners("userTyping",s)}),this.socket.on("userStoppedTyping",s=>{this.emitToListeners("userStoppedTyping",s)}),this.socket.on("messageLiked",s=>{this.emitToListeners("messageLiked",s)}))}authenticate(s){if(!this.socket){console.error("❌ لا يوجد اتصال Socket.IO للمصادقة");return}this.socket.emit("authenticate",s),this.authenticated=!0,console.log("🔑 تم إرسال رمز المصادقة")}joinRoom(s){if(!this.socket||!this.authenticated){console.error("❌ يجب المصادقة أولاً قبل الانضمام للغرف");return}this.socket.emit("joinRoom",s),console.log(`🏠 انضم للغرفة: ${s}`)}leaveRoom(s){this.socket&&(this.socket.emit("leaveRoom",s),console.log(`🚪 غادر الغرفة: ${s}`))}on(s,n){this.eventListeners.has(s)||this.eventListeners.set(s,[]),this.eventListeners.get(s).push(n)}off(s,n){const r=this.eventListeners.get(s);if(r){const a=r.indexOf(n);a>-1&&r.splice(a,1)}}emitToListeners(s,n){const r=this.eventListeners.get(s);r&&r.forEach(a=>{try{a(n)}catch(i){console.error(`خطأ في معالج الحدث ${s}:`,i)}})}getSocket(){return this.socket}isConnected(){var s;return((s=this.socket)==null?void 0:s.connected)||!1}isAuthenticated(){return this.authenticated}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.authenticated=!1,this.eventListeners.clear(),console.log("🔴 تم قطع اتصال Socket.IO"))}}const oi=new GK;function ew(){$n(),lt();const[t,s]=u.useState(!1),[n,r]=u.useState(!1),a=u.useRef(!1),i=u.useRef(!1),l=u.useCallback(j=>{try{const v=oi.connect(j);v&&(v.on("connect",()=>{console.log("🟢 Socket.IO متصل"),s(!0),a.current=!0,j&&(console.log("🔑 إرسال رمز المصادقة..."),oi.authenticate(j),r(!0),i.current=!0)}),v.on("disconnect",()=>{console.log("🔴 Socket.IO منقطع"),s(!1),r(!1),a.current=!1,i.current=!1}),v.connected&&j&&(console.log("🔗 Socket.IO متصل بالفعل، إرسال المصادقة..."),oi.authenticate(j),s(!0),r(!0),a.current=!0,i.current=!0))}catch(v){console.error("خطأ في الاتصال بـ Socket.IO:",v)}},[]),o=u.useCallback(()=>{oi.disconnect(),s(!1),r(!1),a.current=!1,i.current=!1},[]),c=u.useCallback(j=>{a.current&&i.current&&oi.joinRoom(j)},[]),d=u.useCallback(j=>{oi.leaveRoom(j)},[]),f=u.useCallback((j,v)=>{oi.on(j,v)},[]),x=u.useCallback((j,v)=>{oi.off(j,v)},[]),h=u.useCallback(()=>oi.getSocket(),[]);return{isConnected:t,isAuthenticated:n,connect:l,disconnect:o,joinRoom:c,leaveRoom:d,on:f,off:x,getSocket:h}}function YK(){const{on:t,off:s,joinRoom:n}=ew(),r=$n(),{toast:a}=lt();return u.useEffect(()=>{n("market-general"),n("market-USD-LYD"),n("market-LYD-USD"),console.log("🏠 انضم لغرف السوق");const i=d=>{console.log("🚀 عرض جديد تم استلامه:",d),r.invalidateQueries({queryKey:["/api/market"]}),r.invalidateQueries({queryKey:["/api/market/offers"]}),r.invalidateQueries({queryKey:["/api/market/my-offers"]}),a({title:"عرض جديد",description:`تم إنشاء عرض ${d.side==="buy"?"شراء":"بيع"} ${d.amount} ${d.baseCurrency}`,duration:3e3})},l=d=>{console.log("❌ إلغاء عرض:",d),r.invalidateQueries({queryKey:["/api/market"]}),r.invalidateQueries({queryKey:["/api/market/offers"]}),r.invalidateQueries({queryKey:["/api/market/my-offers"]})},o=d=>{console.log("💰 صفقة منفذة:",d),r.invalidateQueries({queryKey:["/api/market"]}),r.invalidateQueries({queryKey:["/api/market/offers"]}),r.invalidateQueries({queryKey:["/api/market/my-offers"]}),r.invalidateQueries({queryKey:["/api/balance"]}),a({title:"تم تنفيذ الصفقة",description:`صفقة ${d.amount} ${d.baseCurrency} بسعر ${d.price}`,duration:5e3})},c=d=>{console.log("📊 تحديث دفتر الأوامر:",d),r.invalidateQueries({queryKey:["/api/market"]}),r.invalidateQueries({queryKey:["/api/market/offers"]})};return t("market.order.created",i),t("market.order.canceled",l),t("market.trade.executed",o),t("market.orderbook.updated",c),()=>{s("market.order.created",i),s("market.order.canceled",l),s("market.trade.executed",o),s("market.orderbook.updated",c)}},[t,s,r,a]),{}}function QK(){const{on:t,off:s}=ew(),n=$n(),{toast:r}=lt();return u.useEffect(()=>{const a=i=>{console.log("💳 تحديث الرصيد تم استلامه:",i),n.invalidateQueries({queryKey:["/api/balance"]}),r({title:"تحديث الرصيد",description:`${i.currency}: ${i.amount}`,duration:2e3})};return t("balance.updated",a),()=>{s("balance.updated",a)}},[t,s,n,r]),{}}const Me=Symbol.for("drizzle:entityKind");function bn(t,s){if(!t||typeof t!="object")return!1;if(t instanceof s)return!0;if(!Object.prototype.hasOwnProperty.call(s,Me))throw new Error(`Class "${s.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(Me in n&&n[Me]===s[Me])return!0;n=Object.getPrototypeOf(n)}return!1}var ZC;ZC=Me;class au{constructor(s,n){K(this,"name");K(this,"keyAsName");K(this,"primary");K(this,"notNull");K(this,"default");K(this,"defaultFn");K(this,"onUpdateFn");K(this,"hasDefault");K(this,"isUnique");K(this,"uniqueName");K(this,"uniqueType");K(this,"dataType");K(this,"columnType");K(this,"enumValues");K(this,"generated");K(this,"generatedIdentity");K(this,"config");this.table=s,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(s){return s}mapToDriverValue(s){return s}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}K(au,ZC,"Column");var JC;JC=Me;class wP{constructor(s,n,r){K(this,"config");K(this,"$default",this.$defaultFn);K(this,"$onUpdate",this.$onUpdateFn);this.config={name:s,keyAsName:s==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(s){return this.config.default=s,this.config.hasDefault=!0,this}$defaultFn(s){return this.config.defaultFn=s,this.config.hasDefault=!0,this}$onUpdateFn(s){return this.config.onUpdateFn=s,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(s){this.config.name===""&&(this.config.name=s)}}K(wP,JC,"ColumnBuilder");const bd=Symbol.for("drizzle:Name");var qC;qC=Me;class NP{constructor(s,n){K(this,"reference");K(this,"_onUpdate","no action");K(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:a,foreignColumns:i}=s();return{name:r,columns:a,foreignTable:i[0].table,foreignColumns:i}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(s){return this._onUpdate=s===void 0?"no action":s,this}onDelete(s){return this._onDelete=s===void 0?"no action":s,this}build(s){return new CP(s,this)}}K(NP,qC,"PgForeignKeyBuilder");var KC;KC=Me;class CP{constructor(s,n){K(this,"reference");K(this,"onUpdate");K(this,"onDelete");this.table=s,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:s,columns:n,foreignColumns:r}=this.reference(),a=n.map(o=>o.name),i=r.map(o=>o.name),l=[this.table[bd],...a,r[0].table[bd],...i];return s??`${l.join("_")}_fk`}}K(CP,KC,"PgForeignKey");function HK(t,...s){return t(...s)}function Ir(t){return new kP(t)}function MP(t,s){return`${t[bd]}_${s.join("_")}_unique`}var XC;XC=Me;class SP{constructor(s,n){K(this,"columns");K(this,"nullsNotDistinctConfig",!1);this.name=n,this.columns=s}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(s){return new LP(s,this.columns,this.nullsNotDistinctConfig,this.name)}}K(SP,XC,"PgUniqueConstraintBuilder");var e3;e3=Me;class kP{constructor(s){K(this,"name");this.name=s}on(...s){return new SP(s,this.name)}}K(kP,e3,"PgUniqueOnConstraintBuilder");var t3;t3=Me;class LP{constructor(s,n,r,a){K(this,"columns");K(this,"name");K(this,"nullsNotDistinct",!1);this.table=s,this.columns=n,this.name=a??MP(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=r}getName(){return this.name}}K(LP,t3,"PgUniqueConstraint");function R4(t,s,n){for(let r=s;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(s,r).replace(/\\/g,""),r+1];if(!n&&(a===","||a==="}"))return[t.slice(s,r).replace(/\\/g,""),r]}return[t.slice(s).replace(/\\/g,""),t.length]}function TP(t,s=0){const n=[];let r=s,a=!1;for(;r<t.length;){const i=t[r];if(i===","){(a||r===s)&&n.push(""),a=!0,r++;continue}if(a=!1,i==="\\"){r+=2;continue}if(i==='"'){const[c,d]=R4(t,r+1,!0);n.push(c),r=d;continue}if(i==="}")return[n,r+1];if(i==="{"){const[c,d]=TP(t,r+1);n.push(c),r=d;continue}const[l,o]=R4(t,r,!1);n.push(l),r=o}return[n,r]}function WK(t){const[s]=TP(t,1);return s}function EP(t){return`{${t.map(s=>Array.isArray(s)?EP(s):typeof s=="string"?`"${s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${s}`).join(",")}}`}var s3,n3;class ms extends(n3=wP,s3=Me,n3){constructor(){super(...arguments);K(this,"foreignKeyConfigs",[])}array(n){return new AP(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>HK((l,o)=>{const c=new NP(()=>{const d=l();return{columns:[n],foreignColumns:[d]}});return o.onUpdate&&c.onUpdate(o.onUpdate),o.onDelete&&c.onDelete(o.onDelete),c.build(r)},a,i))}buildExtraConfigColumn(n){return new IP(n,this.config)}}K(ms,s3,"PgColumnBuilder");var r3,a3;class Yt extends(a3=au,r3=Me,a3){constructor(s,n){n.uniqueName||(n.uniqueName=MP(s,[n.name])),super(s,n),this.table=s}}K(Yt,r3,"PgColumn");var i3,l3;class IP extends(l3=Yt,i3=Me,l3){constructor(){super(...arguments);K(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});K(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}K(IP,i3,"ExtraConfigColumn");var o3;o3=Me;class wx{constructor(s,n,r,a){K(this,"name");K(this,"keyAsName");K(this,"type");K(this,"indexConfig");this.name=s,this.keyAsName=n,this.type=r,this.indexConfig=a}}K(wx,o3,"IndexedColumn");var c3,d3;class AP extends(d3=ms,c3=Me,d3){constructor(s,n,r){super(s,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(s){const n=this.config.baseBuilder.build(s);return new yy(s,this.config,n)}}K(AP,c3,"PgArrayBuilder");var u3,f3;const Qp=class Qp extends(f3=Yt,u3=Me,f3){constructor(n,r,a,i){super(n,r);K(this,"size");this.baseColumn=a,this.range=i,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=WK(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const a=n.map(i=>i===null?null:bn(this.baseColumn,Qp)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?a:EP(a)}};K(Qp,u3,"PgArray");let yy=Qp;const O4=Symbol.for("drizzle:isPgEnum");function ZK(t){return!!t&&typeof t=="function"&&O4 in t&&t[O4]===!0}var m3;m3=Me;class tw{constructor(s,n,r,a=!1){this._={brand:"Subquery",sql:s,selectedFields:n,alias:r,isWith:a}}}K(tw,m3,"Subquery");const JK={startActiveSpan(t,s){return s()}},wd=Symbol.for("drizzle:ViewBaseConfig"),l1=Symbol.for("drizzle:Schema"),z4=Symbol.for("drizzle:Columns"),F4=Symbol.for("drizzle:ExtraConfigColumns"),o1=Symbol.for("drizzle:OriginalName"),c1=Symbol.for("drizzle:BaseName"),Ep=Symbol.for("drizzle:IsAlias"),U4=Symbol.for("drizzle:ExtraConfigBuilder"),DP=Symbol.for("drizzle:IsDrizzleTable");var h3,x3,p3,g3,j3,y3,v3,b3,w3,N3;N3=Me,w3=bd,b3=o1,v3=l1,y3=z4,j3=F4,g3=c1,p3=Ep,x3=DP,h3=U4;class vr{constructor(s,n,r){K(this,w3);K(this,b3);K(this,v3);K(this,y3);K(this,j3);K(this,g3);K(this,p3,!1);K(this,x3,!0);K(this,h3);this[bd]=this[o1]=s,this[l1]=n,this[c1]=r}}K(vr,N3,"Table"),K(vr,"Symbol",{Name:bd,Schema:l1,OriginalName:o1,Columns:z4,ExtraConfigColumns:F4,BaseName:c1,IsAlias:Ep,ExtraConfigBuilder:U4});function PP(t){return typeof t=="object"&&t!==null&&DP in t}function qK(t){return t!=null&&typeof t.getSQL=="function"}function KK(t){var n;const s={sql:"",params:[]};for(const r of t)s.sql+=r.sql,s.params.push(...r.params),(n=r.typings)!=null&&n.length&&(s.typings||(s.typings=[]),s.typings.push(...r.typings));return s}var C3;C3=Me;class xa{constructor(s){K(this,"value");this.value=Array.isArray(s)?s:[s]}getSQL(){return new un([this])}}K(xa,C3,"StringChunk");var M3;M3=Me;const Ro=class Ro{constructor(s){K(this,"decoder",_P);K(this,"shouldInlineParams",!1);this.queryChunks=s}append(s){return this.queryChunks.push(...s.queryChunks),this}toQuery(s){return JK.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,s);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(s,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:l,prepareTyping:o,inlineParams:c,paramStartIndex:d}=r;return KK(s.map(f=>{var x;if(bn(f,xa))return{sql:f.value.join(""),params:[]};if(bn(f,Ip))return{sql:i(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const h=[new xa("(")];for(const[j,v]of f.entries())h.push(v),j<f.length-1&&h.push(new xa(", "));return h.push(new xa(")")),this.buildQueryFromSourceParams(h,r)}if(bn(f,Ro))return this.buildQueryFromSourceParams(f.queryChunks,{...r,inlineParams:c||f.shouldInlineParams});if(bn(f,vr)){const h=f[vr.Symbol.Schema],j=f[vr.Symbol.Name];return{sql:h===void 0||f[Ep]?i(j):i(h)+"."+i(j),params:[]}}if(bn(f,au)){const h=a.getColumnCasing(f);if(n.invokeSource==="indexes")return{sql:i(h),params:[]};const j=f.table[vr.Symbol.Schema];return{sql:f.table[Ep]||j===void 0?i(f.table[vr.Symbol.Name])+"."+i(h):i(j)+"."+i(f.table[vr.Symbol.Name])+"."+i(h),params:[]}}if(bn(f,zP)){const h=f[wd].schema,j=f[wd].name;return{sql:h===void 0||f[wd].isAlias?i(j):i(h)+"."+i(j),params:[]}}if(bn(f,sw)){if(bn(f.value,Dp))return{sql:l(d.value++,f),params:[f],typings:["none"]};const h=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(bn(h,Ro))return this.buildQueryFromSourceParams([h],r);if(c)return{sql:this.mapInlineParam(h,r),params:[]};let j=["none"];return o&&(j=[o(f.encoder)]),{sql:l(d.value++,h),params:[h],typings:j}}return bn(f,Dp)?{sql:l(d.value++,f),params:[f],typings:["none"]}:bn(f,Ro.Aliased)&&f.fieldAlias!==void 0?{sql:i(f.fieldAlias),params:[]}:bn(f,tw)?f._.isWith?{sql:i(f._.alias),params:[]}:this.buildQueryFromSourceParams([new xa("("),f._.sql,new xa(") "),new Ip(f._.alias)],r):ZK(f)?f.schema?{sql:i(f.schema)+"."+i(f.enumName),params:[]}:{sql:i(f.enumName),params:[]}:qK(f)?(x=f.shouldOmitSQLParens)!=null&&x.call(f)?this.buildQueryFromSourceParams([f.getSQL()],r):this.buildQueryFromSourceParams([new xa("("),f.getSQL(),new xa(")")],r):c?{sql:this.mapInlineParam(f,r),params:[]}:{sql:l(d.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(s,{escapeString:n}){if(s===null)return"null";if(typeof s=="number"||typeof s=="boolean")return s.toString();if(typeof s=="string")return n(s);if(typeof s=="object"){const r=s.toString();return n(r==="[object Object]"?JSON.stringify(s):r)}throw new Error("Unexpected param value: "+s)}getSQL(){return this}as(s){return s===void 0?this:new Ro.Aliased(this,s)}mapWith(s){return this.decoder=typeof s=="function"?{mapFromDriverValue:s}:s,this}inlineParams(){return this.shouldInlineParams=!0,this}if(s){return s?this:void 0}};K(Ro,M3,"SQL");let un=Ro;var S3;S3=Me;class Ip{constructor(s){K(this,"brand");this.value=s}getSQL(){return new un([this])}}K(Ip,S3,"Name");const _P={mapFromDriverValue:t=>t},RP={mapToDriverValue:t=>t};({..._P,...RP});var k3;k3=Me;class sw{constructor(s,n=RP){K(this,"brand");this.value=s,this.encoder=n}getSQL(){return new un([this])}}K(sw,k3,"Param");function Ap(t,...s){const n=[];(s.length>0||t.length>0&&t[0]!=="")&&n.push(new xa(t[0]));for(const[r,a]of s.entries())n.push(a,new xa(t[r+1]));return new un(n)}(t=>{function s(){return new un([])}t.empty=s;function n(c){return new un(c)}t.fromList=n;function r(c){return new un([new xa(c)])}t.raw=r;function a(c,d){const f=[];for(const[x,h]of c.entries())x>0&&d!==void 0&&f.push(d),f.push(h);return new un(f)}t.join=a;function i(c){return new Ip(c)}t.identifier=i;function l(c){return new Dp(c)}t.placeholder=l;function o(c,d){return new sw(c,d)}t.param=o})(Ap||(Ap={}));(t=>{var n;n=Me;const r=class r{constructor(i,l){K(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};K(r,n,"SQL.Aliased");let s=r;t.Aliased=s})(un||(un={}));var L3;L3=Me;class Dp{constructor(s){this.name=s}getSQL(){return new un([this])}}K(Dp,L3,"Placeholder");const OP=Symbol.for("drizzle:IsDrizzleView");var T3,E3,I3;I3=Me,E3=wd,T3=OP;class zP{constructor({name:s,schema:n,selectedFields:r,query:a}){K(this,E3);K(this,T3,!0);this[wd]={name:s,originalName:s,schema:n,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new un([this])}}K(zP,I3,"View");function XK(t){return typeof t=="object"&&t!==null&&OP in t}au.prototype.getSQL=function(){return new un([this])};vr.prototype.getSQL=function(){return new un([this])};tw.prototype.getSQL=function(){return new un([this])};function eX(t){return t[vr.Symbol.Columns]}function tX(t){return t[wd].selectedFields}function Hn(t,s){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:s}}var A3,D3;class sh extends(D3=ms,A3=Me,D3){generatedAlwaysAsIdentity(s){if(s){const{name:n,...r}=s;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(s){if(s){const{name:n,...r}=s;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}K(sh,A3,"PgIntColumnBaseBuilder");var P3,_3;class FP extends(_3=sh,P3=Me,_3){constructor(s){super(s,"number","PgBigInt53")}build(s){return new UP(s,this.config)}}K(FP,P3,"PgBigInt53Builder");var R3,O3;class UP extends(O3=Yt,R3=Me,O3){getSQLType(){return"bigint"}mapFromDriverValue(s){return typeof s=="number"?s:Number(s)}}K(UP,R3,"PgBigInt53");var z3,F3;class $P extends(F3=sh,z3=Me,F3){constructor(s){super(s,"bigint","PgBigInt64")}build(s){return new BP(s,this.config)}}K($P,z3,"PgBigInt64Builder");var U3,$3;class BP extends($3=Yt,U3=Me,$3){getSQLType(){return"bigint"}mapFromDriverValue(s){return BigInt(s)}}K(BP,U3,"PgBigInt64");function sX(t,s){const{name:n,config:r}=Hn(t,s);return r.mode==="number"?new FP(n):new $P(n)}var B3,V3;class VP extends(V3=ms,B3=Me,V3){constructor(s){super(s,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new GP(s,this.config)}}K(VP,B3,"PgBigSerial53Builder");var G3,Y3;class GP extends(Y3=Yt,G3=Me,Y3){getSQLType(){return"bigserial"}mapFromDriverValue(s){return typeof s=="number"?s:Number(s)}}K(GP,G3,"PgBigSerial53");var Q3,H3;class YP extends(H3=ms,Q3=Me,H3){constructor(s){super(s,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(s){return new QP(s,this.config)}}K(YP,Q3,"PgBigSerial64Builder");var W3,Z3;class QP extends(Z3=Yt,W3=Me,Z3){getSQLType(){return"bigserial"}mapFromDriverValue(s){return BigInt(s)}}K(QP,W3,"PgBigSerial64");function nX(t,s){const{name:n,config:r}=Hn(t,s);return r.mode==="number"?new VP(n):new YP(n)}var J3,q3;class HP extends(q3=ms,J3=Me,q3){constructor(s){super(s,"boolean","PgBoolean")}build(s){return new WP(s,this.config)}}K(HP,J3,"PgBooleanBuilder");var K3,X3;class WP extends(X3=Yt,K3=Me,X3){getSQLType(){return"boolean"}}K(WP,K3,"PgBoolean");function Tt(t){return new HP(t??"")}var eM,tM;class ZP extends(tM=ms,eM=Me,tM){constructor(s,n){super(s,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(s){return new JP(s,this.config)}}K(ZP,eM,"PgCharBuilder");var sM,nM;class JP extends(nM=Yt,sM=Me,nM){constructor(){super(...arguments);K(this,"length",this.config.length);K(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}K(JP,sM,"PgChar");function rX(t,s={}){const{name:n,config:r}=Hn(t,s);return new ZP(n,r)}var rM,aM;class qP extends(aM=ms,rM=Me,aM){constructor(s){super(s,"string","PgCidr")}build(s){return new KP(s,this.config)}}K(qP,rM,"PgCidrBuilder");var iM,lM;class KP extends(lM=Yt,iM=Me,lM){getSQLType(){return"cidr"}}K(KP,iM,"PgCidr");function aX(t){return new qP(t??"")}var oM,cM;class XP extends(cM=ms,oM=Me,cM){constructor(s,n,r){super(s,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(s){return new e5(s,this.config)}}K(XP,oM,"PgCustomColumnBuilder");var dM,uM;class e5 extends(uM=Yt,dM=Me,uM){constructor(n,r){super(n,r);K(this,"sqlName");K(this,"mapTo");K(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}K(e5,dM,"PgCustomColumn");function iX(t){return(s,n)=>{const{name:r,config:a}=Hn(s,n);return new XP(r,a,t)}}var fM,mM;class ku extends(mM=ms,fM=Me,mM){defaultNow(){return this.default(Ap`now()`)}}K(ku,fM,"PgDateColumnBaseBuilder");var hM,xM;class t5 extends(xM=ku,hM=Me,xM){constructor(s){super(s,"date","PgDate")}build(s){return new s5(s,this.config)}}K(t5,hM,"PgDateBuilder");var pM,gM;class s5 extends(gM=Yt,pM=Me,gM){getSQLType(){return"date"}mapFromDriverValue(s){return new Date(s)}mapToDriverValue(s){return s.toISOString()}}K(s5,pM,"PgDate");var jM,yM;class n5 extends(yM=ku,jM=Me,yM){constructor(s){super(s,"string","PgDateString")}build(s){return new r5(s,this.config)}}K(n5,jM,"PgDateStringBuilder");var vM,bM;class r5 extends(bM=Yt,vM=Me,bM){getSQLType(){return"date"}}K(r5,vM,"PgDateString");function lX(t,s){const{name:n,config:r}=Hn(t,s);return(r==null?void 0:r.mode)==="date"?new t5(n):new n5(n)}var wM,NM;class a5 extends(NM=ms,wM=Me,NM){constructor(s){super(s,"number","PgDoublePrecision")}build(s){return new i5(s,this.config)}}K(a5,wM,"PgDoublePrecisionBuilder");var CM,MM;class i5 extends(MM=Yt,CM=Me,MM){getSQLType(){return"double precision"}mapFromDriverValue(s){return typeof s=="string"?Number.parseFloat(s):s}}K(i5,CM,"PgDoublePrecision");function oX(t){return new a5(t??"")}var SM,kM;class l5 extends(kM=ms,SM=Me,kM){constructor(s){super(s,"string","PgInet")}build(s){return new o5(s,this.config)}}K(l5,SM,"PgInetBuilder");var LM,TM;class o5 extends(TM=Yt,LM=Me,TM){getSQLType(){return"inet"}}K(o5,LM,"PgInet");function cX(t){return new l5(t??"")}var EM,IM;class c5 extends(IM=sh,EM=Me,IM){constructor(s){super(s,"number","PgInteger")}build(s){return new d5(s,this.config)}}K(c5,EM,"PgIntegerBuilder");var AM,DM;class d5 extends(DM=Yt,AM=Me,DM){getSQLType(){return"integer"}mapFromDriverValue(s){return typeof s=="string"?Number.parseInt(s):s}}K(d5,AM,"PgInteger");function he(t){return new c5(t??"")}var PM,_M;class u5 extends(_M=ms,PM=Me,_M){constructor(s,n){super(s,"string","PgInterval"),this.config.intervalConfig=n}build(s){return new f5(s,this.config)}}K(u5,PM,"PgIntervalBuilder");var RM,OM;class f5 extends(OM=Yt,RM=Me,OM){constructor(){super(...arguments);K(this,"fields",this.config.intervalConfig.fields);K(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}K(f5,RM,"PgInterval");function dX(t,s={}){const{name:n,config:r}=Hn(t,s);return new u5(n,r)}var zM,FM;class m5 extends(FM=ms,zM=Me,FM){constructor(s){super(s,"json","PgJson")}build(s){return new h5(s,this.config)}}K(m5,zM,"PgJsonBuilder");var UM,$M;class h5 extends($M=Yt,UM=Me,$M){constructor(s,n){super(s,n)}getSQLType(){return"json"}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s}}K(h5,UM,"PgJson");function Ln(t){return new m5(t??"")}var BM,VM;class x5 extends(VM=ms,BM=Me,VM){constructor(s){super(s,"json","PgJsonb")}build(s){return new p5(s,this.config)}}K(x5,BM,"PgJsonbBuilder");var GM,YM;class p5 extends(YM=Yt,GM=Me,YM){constructor(s,n){super(s,n)}getSQLType(){return"jsonb"}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s}}K(p5,GM,"PgJsonb");function uX(t){return new x5(t??"")}var QM,HM;class g5 extends(HM=ms,QM=Me,HM){constructor(s){super(s,"array","PgLine")}build(s){return new j5(s,this.config)}}K(g5,QM,"PgLineBuilder");var WM,ZM;class j5 extends(ZM=Yt,WM=Me,ZM){getSQLType(){return"line"}mapFromDriverValue(s){const[n,r,a]=s.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(s){return`{${s[0]},${s[1]},${s[2]}}`}}K(j5,WM,"PgLine");var JM,qM;class y5 extends(qM=ms,JM=Me,qM){constructor(s){super(s,"json","PgLineABC")}build(s){return new v5(s,this.config)}}K(y5,JM,"PgLineABCBuilder");var KM,XM;class v5 extends(XM=Yt,KM=Me,XM){getSQLType(){return"line"}mapFromDriverValue(s){const[n,r,a]=s.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(s){return`{${s.a},${s.b},${s.c}}`}}K(v5,KM,"PgLineABC");function fX(t,s){const{name:n,config:r}=Hn(t,s);return!(r!=null&&r.mode)||r.mode==="tuple"?new g5(n):new y5(n)}var eS,tS;class b5 extends(tS=ms,eS=Me,tS){constructor(s){super(s,"string","PgMacaddr")}build(s){return new w5(s,this.config)}}K(b5,eS,"PgMacaddrBuilder");var sS,nS;class w5 extends(nS=Yt,sS=Me,nS){getSQLType(){return"macaddr"}}K(w5,sS,"PgMacaddr");function mX(t){return new b5(t??"")}var rS,aS;class N5 extends(aS=ms,rS=Me,aS){constructor(s){super(s,"string","PgMacaddr8")}build(s){return new C5(s,this.config)}}K(N5,rS,"PgMacaddr8Builder");var iS,lS;class C5 extends(lS=Yt,iS=Me,lS){getSQLType(){return"macaddr8"}}K(C5,iS,"PgMacaddr8");function hX(t){return new N5(t??"")}var oS,cS;class M5 extends(cS=ms,oS=Me,cS){constructor(s,n,r){super(s,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(s){return new S5(s,this.config)}}K(M5,oS,"PgNumericBuilder");var dS,uS;class S5 extends(uS=Yt,dS=Me,uS){constructor(n,r){super(n,r);K(this,"precision");K(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}K(S5,dS,"PgNumeric");function vt(t,s){const{name:n,config:r}=Hn(t,s);return new M5(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var fS,mS;class k5 extends(mS=ms,fS=Me,mS){constructor(s){super(s,"array","PgPointTuple")}build(s){return new L5(s,this.config)}}K(k5,fS,"PgPointTupleBuilder");var hS,xS;class L5 extends(xS=Yt,hS=Me,xS){getSQLType(){return"point"}mapFromDriverValue(s){if(typeof s=="string"){const[n,r]=s.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[s.x,s.y]}mapToDriverValue(s){return`(${s[0]},${s[1]})`}}K(L5,hS,"PgPointTuple");var pS,gS;class T5 extends(gS=ms,pS=Me,gS){constructor(s){super(s,"json","PgPointObject")}build(s){return new E5(s,this.config)}}K(T5,pS,"PgPointObjectBuilder");var jS,yS;class E5 extends(yS=Yt,jS=Me,yS){getSQLType(){return"point"}mapFromDriverValue(s){if(typeof s=="string"){const[n,r]=s.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return s}mapToDriverValue(s){return`(${s.x},${s.y})`}}K(E5,jS,"PgPointObject");function xX(t,s){const{name:n,config:r}=Hn(t,s);return!(r!=null&&r.mode)||r.mode==="tuple"?new k5(n):new T5(n)}function pX(t){const s=[];for(let n=0;n<t.length;n+=2)s.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(s)}function $4(t,s){const n=new ArrayBuffer(8),r=new DataView(n);for(let a=0;a<8;a++)r.setUint8(a,t[s+a]);return r.getFloat64(0,!0)}function I5(t){const s=pX(t);let n=0;const r=s[n];n+=1;const a=new DataView(s.buffer),i=a.getUint32(n,r===1);if(n+=4,i&536870912&&(a.getUint32(n,r===1),n+=4),(i&65535)===1){const l=$4(s,n);n+=8;const o=$4(s,n);return n+=8,[l,o]}throw new Error("Unsupported geometry type")}var vS,bS;class A5 extends(bS=ms,vS=Me,bS){constructor(s){super(s,"array","PgGeometry")}build(s){return new D5(s,this.config)}}K(A5,vS,"PgGeometryBuilder");var wS,NS;class D5 extends(NS=Yt,wS=Me,NS){getSQLType(){return"geometry(point)"}mapFromDriverValue(s){return I5(s)}mapToDriverValue(s){return`point(${s[0]} ${s[1]})`}}K(D5,wS,"PgGeometry");var CS,MS;class P5 extends(MS=ms,CS=Me,MS){constructor(s){super(s,"json","PgGeometryObject")}build(s){return new _5(s,this.config)}}K(P5,CS,"PgGeometryObjectBuilder");var SS,kS;class _5 extends(kS=Yt,SS=Me,kS){getSQLType(){return"geometry(point)"}mapFromDriverValue(s){const n=I5(s);return{x:n[0],y:n[1]}}mapToDriverValue(s){return`point(${s.x} ${s.y})`}}K(_5,SS,"PgGeometryObject");function gX(t,s){const{name:n,config:r}=Hn(t,s);return!(r!=null&&r.mode)||r.mode==="tuple"?new A5(n):new P5(n)}var LS,TS;class R5 extends(TS=ms,LS=Me,TS){constructor(s,n){super(s,"number","PgReal"),this.config.length=n}build(s){return new O5(s,this.config)}}K(R5,LS,"PgRealBuilder");var ES,IS;class O5 extends(IS=Yt,ES=Me,IS){constructor(n,r){super(n,r);K(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}K(O5,ES,"PgReal");function jX(t){return new R5(t??"")}var AS,DS;class z5 extends(DS=ms,AS=Me,DS){constructor(s){super(s,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new F5(s,this.config)}}K(z5,AS,"PgSerialBuilder");var PS,_S;class F5 extends(_S=Yt,PS=Me,_S){getSQLType(){return"serial"}}K(F5,PS,"PgSerial");function pt(t){return new z5(t??"")}var RS,OS;class U5 extends(OS=sh,RS=Me,OS){constructor(s){super(s,"number","PgSmallInt")}build(s){return new $5(s,this.config)}}K(U5,RS,"PgSmallIntBuilder");var zS,FS;class $5 extends(FS=Yt,zS=Me,FS){constructor(){super(...arguments);K(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}K($5,zS,"PgSmallInt");function yX(t){return new U5(t??"")}var US,$S;class B5 extends($S=ms,US=Me,$S){constructor(s){super(s,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(s){return new V5(s,this.config)}}K(B5,US,"PgSmallSerialBuilder");var BS,VS;class V5 extends(VS=Yt,BS=Me,VS){getSQLType(){return"smallserial"}}K(V5,BS,"PgSmallSerial");function vX(t){return new B5(t??"")}var GS,YS;class G5 extends(YS=ms,GS=Me,YS){constructor(s,n){super(s,"string","PgText"),this.config.enumValues=n.enum}build(s){return new Y5(s,this.config)}}K(G5,GS,"PgTextBuilder");var QS,HS;class Y5 extends(HS=Yt,QS=Me,HS){constructor(){super(...arguments);K(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}K(Y5,QS,"PgText");function A(t,s={}){const{name:n,config:r}=Hn(t,s);return new G5(n,r)}var WS,ZS;class Q5 extends(ZS=ku,WS=Me,ZS){constructor(s,n,r){super(s,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(s){return new H5(s,this.config)}}K(Q5,WS,"PgTimeBuilder");var JS,qS;class H5 extends(qS=Yt,JS=Me,qS){constructor(n,r){super(n,r);K(this,"withTimezone");K(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}K(H5,JS,"PgTime");function bX(t,s={}){const{name:n,config:r}=Hn(t,s);return new Q5(n,r.withTimezone??!1,r.precision)}var KS,XS;class W5 extends(XS=ku,KS=Me,XS){constructor(s,n,r){super(s,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(s){return new Z5(s,this.config)}}K(W5,KS,"PgTimestampBuilder");var ek,tk;class Z5 extends(tk=Yt,ek=Me,tk){constructor(n,r){super(n,r);K(this,"withTimezone");K(this,"precision");K(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));K(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}K(Z5,ek,"PgTimestamp");var sk,nk;class J5 extends(nk=ku,sk=Me,nk){constructor(s,n,r){super(s,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(s){return new q5(s,this.config)}}K(J5,sk,"PgTimestampStringBuilder");var rk,ak;class q5 extends(ak=Yt,rk=Me,ak){constructor(n,r){super(n,r);K(this,"withTimezone");K(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}K(q5,rk,"PgTimestampString");function ge(t,s={}){const{name:n,config:r}=Hn(t,s);return(r==null?void 0:r.mode)==="string"?new J5(n,r.withTimezone??!1,r.precision):new W5(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var ik,lk;class K5 extends(lk=ms,ik=Me,lk){constructor(s){super(s,"string","PgUUID")}defaultRandom(){return this.default(Ap`gen_random_uuid()`)}build(s){return new X5(s,this.config)}}K(K5,ik,"PgUUIDBuilder");var ok,ck;class X5 extends(ck=Yt,ok=Me,ck){getSQLType(){return"uuid"}}K(X5,ok,"PgUUID");function vn(t){return new K5(t??"")}var dk,uk;class e_ extends(uk=ms,dk=Me,uk){constructor(s,n){super(s,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(s){return new t_(s,this.config)}}K(e_,dk,"PgVarcharBuilder");var fk,mk;class t_ extends(mk=Yt,fk=Me,mk){constructor(){super(...arguments);K(this,"length",this.config.length);K(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}K(t_,fk,"PgVarchar");function wX(t,s={}){const{name:n,config:r}=Hn(t,s);return new e_(n,r)}var hk,xk;class s_ extends(xk=ms,hk=Me,xk){constructor(s,n){super(s,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(s){return new n_(s,this.config)}}K(s_,hk,"PgBinaryVectorBuilder");var pk,gk;class n_ extends(gk=Yt,pk=Me,gk){constructor(){super(...arguments);K(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}K(n_,pk,"PgBinaryVector");function NX(t,s){const{name:n,config:r}=Hn(t,s);return new s_(n,r)}var jk,yk;class r_ extends(yk=ms,jk=Me,yk){constructor(s,n){super(s,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(s){return new a_(s,this.config)}}K(r_,jk,"PgHalfVectorBuilder");var vk,bk;class a_ extends(bk=Yt,vk=Me,bk){constructor(){super(...arguments);K(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}K(a_,vk,"PgHalfVector");function CX(t,s){const{name:n,config:r}=Hn(t,s);return new r_(n,r)}var wk,Nk;class i_ extends(Nk=ms,wk=Me,Nk){constructor(s,n){super(s,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(s){return new l_(s,this.config)}}K(i_,wk,"PgSparseVectorBuilder");var Ck,Mk;class l_ extends(Mk=Yt,Ck=Me,Mk){constructor(){super(...arguments);K(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}K(l_,Ck,"PgSparseVector");function MX(t,s){const{name:n,config:r}=Hn(t,s);return new i_(n,r)}var Sk,kk;class o_ extends(kk=ms,Sk=Me,kk){constructor(s,n){super(s,"array","PgVector"),this.config.dimensions=n.dimensions}build(s){return new c_(s,this.config)}}K(o_,Sk,"PgVectorBuilder");var Lk,Tk;class c_ extends(Tk=Yt,Lk=Me,Tk){constructor(){super(...arguments);K(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}K(c_,Lk,"PgVector");function SX(t,s){const{name:n,config:r}=Hn(t,s);return new o_(n,r)}function kX(){return{bigint:sX,bigserial:nX,boolean:Tt,char:rX,cidr:aX,customType:iX,date:lX,doublePrecision:oX,inet:cX,integer:he,interval:dX,json:Ln,jsonb:uX,line:fX,macaddr:mX,macaddr8:hX,numeric:vt,point:xX,geometry:gX,real:jX,serial:pt,smallint:yX,smallserial:vX,text:A,time:bX,timestamp:ge,uuid:vn,varchar:wX,bit:NX,halfvec:CX,sparsevec:MX,vector:SX}}const vy=Symbol.for("drizzle:PgInlineForeignKeys"),B4=Symbol.for("drizzle:EnableRLS");var Ek,Ik,Ak,Dk,Pk;class kf extends(Pk=vr,Dk=Me,Ak=vy,Ik=B4,Ek=vr.Symbol.ExtraConfigBuilder,Pk){constructor(){super(...arguments);K(this,Ak,[]);K(this,Ik,!1);K(this,Ek)}}K(kf,Dk,"PgTable"),K(kf,"Symbol",Object.assign({},vr.Symbol,{InlineForeignKeys:vy,EnableRLS:B4}));function LX(t,s,n,r,a=t){const i=new kf(t,r,a),l=typeof s=="function"?s(kX()):s,o=Object.fromEntries(Object.entries(l).map(([f,x])=>{const h=x;h.setName(f);const j=h.build(i);return i[vy].push(...h.buildForeignKeys(j,i)),[f,j]})),c=Object.fromEntries(Object.entries(l).map(([f,x])=>{const h=x;h.setName(f);const j=h.buildExtraConfigColumn(i);return[f,j]})),d=Object.assign(i,o);return d[vr.Symbol.Columns]=o,d[vr.Symbol.ExtraConfigColumns]=c,n&&(d[kf.Symbol.ExtraConfigBuilder]=n),Object.assign(d,{enableRLS:()=>(d[kf.Symbol.EnableRLS]=!0,d)})}const Je=(t,s,n)=>LX(t,s,n,void 0);var _k;_k=Me;class d_{constructor(s,n){this.unique=s,this.name=n}on(...s){return new Nx(s.map(n=>{if(bn(n,un))return n;n=n;const r=new wx(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...s){return new Nx(s.map(n=>{if(bn(n,un))return n;n=n;const r=new wx(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(s,...n){return new Nx(n.map(r=>{if(bn(r,un))return r;r=r;const a=new wx(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),a}),this.unique,!0,this.name,s)}}K(d_,_k,"PgIndexBuilderOn");var Rk;Rk=Me;class Nx{constructor(s,n,r,a,i="btree"){K(this,"config");this.config={name:a,columns:s,unique:n,only:r,method:i}}concurrently(){return this.config.concurrently=!0,this}with(s){return this.config.with=s,this}where(s){return this.config.where=s,this}build(s){return new u_(this.config,s)}}K(Nx,Rk,"PgIndexBuilder");var Ok;Ok=Me;class u_{constructor(s,n){K(this,"config");this.config={...s,table:n}}}K(u_,Ok,"PgIndex");function _r(t){return new d_(!1,t)}const tn={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function hn(t,s){return s.includes(t.columnType)}function TX(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const EX=R.union([R.string(),R.number(),R.boolean(),R.null()]),IX=R.union([EX,R.record(R.any()),R.array(R.any())]),AX=R.custom(t=>t instanceof Buffer);function f_(t,s){const n=(s==null?void 0:s.zodInstance)??R,r=(s==null?void 0:s.coerce)??{};let a;return TX(t)&&(a=t.enumValues.length?n.enum(t.enumValues):n.string()),a||(hn(t,["PgGeometry","PgPointTuple"])?a=n.tuple([n.number(),n.number()]):hn(t,["PgGeometryObject","PgPointObject"])?a=n.object({x:n.number(),y:n.number()}):hn(t,["PgHalfVector","PgVector"])?(a=n.array(n.number()),a=t.dimensions?a.length(t.dimensions):a):hn(t,["PgLine"])?a=n.tuple([n.number(),n.number(),n.number()]):hn(t,["PgLineABC"])?a=n.object({a:n.number(),b:n.number(),c:n.number()}):hn(t,["PgArray"])?(a=n.array(f_(t.baseColumn,n)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=n.array(n.any()):t.dataType==="number"?a=DX(t,n,r):t.dataType==="bigint"?a=PX(t,n,r):t.dataType==="boolean"?a=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?a=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?a=_X(t,n,r):t.dataType==="json"?a=IX:t.dataType==="custom"?a=n.any():t.dataType==="buffer"&&(a=AX)),a||(a=n.any()),a}function DX(t,s,n){let r=t.getSQLType().includes("unsigned"),a,i,l=!1;hn(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:tn.INT8_MIN,i=r?tn.INT8_UNSIGNED_MAX:tn.INT8_MAX,l=!0):hn(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:tn.INT16_MIN,i=r?tn.INT16_UNSIGNED_MAX:tn.INT16_MAX,l=!0):hn(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:tn.INT24_MIN,i=r?tn.INT24_UNSIGNED_MAX:tn.INT24_MAX,l=hn(t,["MySqlMediumInt","SingleStoreMediumInt"])):hn(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:tn.INT32_MIN,i=r?tn.INT32_UNSIGNED_MAX:tn.INT32_MAX,l=!0):hn(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:tn.INT48_MIN,i=r?tn.INT48_UNSIGNED_MAX:tn.INT48_MAX):hn(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||hn(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,l=!0):hn(t,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,l=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let o=n===!0||n!=null&&n.number?s.coerce.number():s.number();return o=o.min(a).max(i),l?o.int():o}function PX(t,s,n){const r=t.getSQLType().includes("unsigned"),a=r?0n:tn.INT64_MIN,i=r?tn.INT64_UNSIGNED_MAX:tn.INT64_MAX;return(n===!0||n!=null&&n.bigint?s.coerce.bigint():s.bigint()).min(a).max(i)}function _X(t,s,n){if(hn(t,["PgUUID"]))return s.string().uuid();let r,a,i=!1;hn(t,["PgVarchar","SQLiteText"])?r=t.length:hn(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??tn.INT16_UNSIGNED_MAX:hn(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=tn.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=tn.INT24_UNSIGNED_MAX:t.textType==="text"?r=tn.INT16_UNSIGNED_MAX:r=tn.INT8_UNSIGNED_MAX),hn(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,i=!0),hn(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let l=n===!0||n!=null&&n.string?s.coerce.string():s.string();return l=a?l.regex(a):l,r&&i?l.length(r):r?l.max(r):l}function m_(t){return PP(t)?eX(t):tX(t)}function h_(t,s,n,r){const a={};for(const[i,l]of Object.entries(t)){if(!bn(l,au)&&!bn(l,un)&&!bn(l,un.Aliased)&&typeof l=="object"){const x=PP(l)||XK(l)?m_(l):l;a[i]=h_(x,s[i]??{},n,r);continue}const o=s[i];if(o!==void 0&&typeof o!="function"){a[i]=o;continue}const c=bn(l,au)?l:void 0,d=c?f_(c,r):R.any(),f=typeof o=="function"?o(d):d;n.never(c)||(a[i]=f,c&&(n.nullable(c)&&(a[i]=a[i].nullable()),n.optional(c)&&(a[i]=a[i].optional())))}return R.object(a)}const RX={never:t=>{var s,n;return((s=t==null?void 0:t.generated)==null?void 0:s.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},ot=(t,s)=>{const n=m_(t);return h_(n,s??{},RX)},mt=Je("users",{id:pt("id").primaryKey(),fullName:A("full_name").notNull(),officeName:A("office_name").notNull(),officeAddress:A("office_address"),countryId:he("country_id").references(()=>Lu.id),countryName:A("country_name"),cityId:he("city_id").references(()=>x_.id),cityName:A("city_name"),email:A("email").notNull().unique(),phone:A("phone"),accountNumber:A("account_number").unique(),password:A("password").notNull(),type:A("type").notNull().default("user"),adminLevel:he("admin_level").default(0),canManageUsers:Tt("can_manage_users").default(!1),canManageMarket:Tt("can_manage_market").default(!1),canManageChat:Tt("can_manage_chat").default(!1),canManageInternalTransfers:Tt("can_manage_internal_transfers").default(!1),canManageExternalTransfers:Tt("can_manage_external_transfers").default(!1),canManageNewAccounts:Tt("can_manage_new_accounts").default(!1),canManageSecurity:Tt("can_manage_security").default(!1),canManageSupport:Tt("can_manage_support").default(!1),canManageReports:Tt("can_manage_reports").default(!1),canManageSettings:Tt("can_manage_settings").default(!1),referralCode:A("referral_code").unique(),referredBy:he("referred_by").references(()=>mt.id),referredAt:ge("referred_at"),city:A("city"),commissionRate:vt("commission_rate").default("1"),countriesSupported:A("countries_supported").array(),verified:Tt("verified").default(!1),active:Tt("active").default(!0),avatarUrl:A("avatar_url"),extTransferEnabled:Tt("ext_transfer_enabled").default(!1),extDailyLimit:vt("ext_daily_limit").default("0"),extMonthlyLimit:vt("ext_monthly_limit").default("0"),extAllowedCurrencies:A("ext_allowed_currencies").array().default([]),extAllowedCountries:A("ext_allowed_countries").array().default([]),createdAt:ge("created_at").defaultNow()}),OX=Je("user_settings",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id).unique(),language:A("language").default("ar"),theme:A("theme").default("auto"),timezone:A("timezone").default("Africa/Tripoli"),baseCurrency:A("base_currency").default("LYD"),notifications:Ln("notifications").default({email:!0,push:!0,security:!0,marketing:!1}),updatedAt:ge("updated_at").defaultNow()}),zX=Je("user_2fa",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id).unique(),isEnabled:Tt("is_enabled").default(!1),secret:A("secret"),backupCodes:A("backup_codes").array().default([]),lastUsedAt:ge("last_used_at"),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()}),FX=Je("admin_transactions",{id:vn("id").primaryKey().defaultRandom(),refNo:A("ref_no").notNull().unique(),type:A("type").notNull(),status:A("status").notNull().default("PENDING"),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow(),executedAt:ge("executed_at"),fromAccountId:A("from_account_id"),toAccountId:A("to_account_id"),userId:he("user_id").notNull().references(()=>mt.id),officeId:he("office_id"),cityFrom:A("city_from"),cityTo:A("city_to"),currency:A("currency").notNull(),amount:vt("amount").notNull(),rate:vt("rate"),feeSystem:vt("fee_system"),feeRecipient:vt("fee_recipient"),netAmount:vt("net_amount").notNull(),channel:A("channel").notNull().default("WEB"),createdBy:he("created_by").notNull().references(()=>mt.id),approvedBy:he("approved_by").references(()=>mt.id),kycLevel:he("kyc_level"),riskScore:he("risk_score"),flags:Ln("flags"),parentTxnId:vn("parent_txn_id").references(()=>FX.id),externalProvider:A("external_provider"),externalRef:A("external_ref"),notes:A("notes"),meta:Ln("meta")},t=>({refNoIdx:_r("admin_transactions_ref_no_idx").on(t.refNo),typeCreatedAtIdx:_r("admin_transactions_type_created_at_idx").on(t.type,t.createdAt),statusCreatedAtIdx:_r("admin_transactions_status_created_at_idx").on(t.status,t.createdAt),userIdCreatedAtIdx:_r("admin_transactions_user_id_created_at_idx").on(t.userId,t.createdAt),fromAccountIdIdx:_r("admin_transactions_from_account_id_idx").on(t.fromAccountId),toAccountIdIdx:_r("admin_transactions_to_account_id_idx").on(t.toAccountId),executedAtIdx:_r("admin_transactions_executed_at_idx").on(t.executedAt)})),UX=Je("transactions",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),type:A("type").notNull(),amount:A("amount").notNull(),currency:A("currency").notNull(),description:A("description"),referenceNumber:A("reference_number"),date:ge("date").defaultNow()}),$X=Je("balances",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),currency:A("currency").notNull(),amount:vt("amount").notNull().default("0")},t=>({userCurrencyUnique:Ir().on(t.userId,t.currency)})),nw=Je("transfers",{id:pt("id").primaryKey(),senderId:he("sender_id").notNull().references(()=>mt.id),receiverId:he("receiver_id").notNull().references(()=>mt.id),amount:vt("amount").notNull(),commission:vt("commission").notNull(),currency:A("currency").notNull().default("LYD"),referenceNumber:A("reference_number").unique(),note:A("note"),transferKind:A("transfer_kind").notNull().default("internal"),destinationCountry:A("destination_country"),createdAt:ge("created_at").defaultNow()}),BX=Je("internal_transfer_logs",{id:pt("id").primaryKey(),transferId:he("transfer_id").notNull().references(()=>nw.id),referenceNumber:A("reference_number"),senderName:A("sender_name").notNull(),senderAccountNumber:A("sender_account_number").notNull(),receiverName:A("receiver_name").notNull(),receiverAccountNumber:A("receiver_account_number").notNull(),amount:vt("amount").notNull(),commission:vt("commission").notNull(),currency:A("currency").notNull(),note:A("note"),status:A("status").notNull().default("completed"),ipAddress:A("ip_address"),userAgent:A("user_agent"),createdAt:ge("created_at").defaultNow()}),x_=Je("cities",{id:pt("id").primaryKey(),countryId:he("country_id").notNull().references(()=>Lu.id),nameAr:A("name_ar").notNull(),nameEn:A("name_en"),isActive:Tt("is_active").notNull().default(!0)}),VX=Je("upgrade_requests",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),requestType:A("request_type").notNull(),fullName:A("full_name"),phone:A("phone"),city:A("city"),commissionRate:vt("commission_rate").default("0"),countryId:he("country_id").references(()=>Lu.id),cityId:he("city_id").references(()=>x_.id),cityNameManual:A("city_name_manual"),message:A("message"),requestedLimits:Ln("requested_limits"),documents:Ln("documents"),status:A("status").notNull().default("pending"),createdAt:ge("created_at").defaultNow(),decidedAt:ge("decided_at"),decidedBy:he("decided_by").references(()=>mt.id),reviewNotes:A("review_notes")}),GX=Je("market_channels",{id:pt("id").primaryKey(),name:A("name").notNull(),description:A("description"),isActive:Tt("is_active").default(!0),createdAt:ge("created_at").defaultNow()}),nh=Je("market_offers",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),side:A("side").notNull(),baseCurrency:A("base_currency").notNull(),quoteCurrency:A("quote_currency").notNull(),price:vt("price",{precision:15,scale:6}).notNull(),minAmount:vt("min_amount",{precision:15,scale:2}).notNull(),maxAmount:vt("max_amount",{precision:15,scale:2}).notNull(),remainingAmount:vt("remaining_amount",{precision:15,scale:2}).notNull(),city:A("city"),deliverType:A("deliver_type").default("internal_transfer"),terms:A("terms"),status:A("status").default("open"),commissionDeducted:Tt("commission_deducted").default(!1),expiresAt:ge("expires_at"),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()}),p_=Je("market_bids",{id:pt("id").primaryKey(),offerId:he("offer_id").notNull().references(()=>nh.id),userId:he("user_id").notNull().references(()=>mt.id),amount:vt("amount",{precision:15,scale:2}).notNull(),price:vt("price",{precision:15,scale:6}).notNull(),message:A("message"),status:A("status").default("pending"),createdAt:ge("created_at").defaultNow(),expiresAt:ge("expires_at")}),YX=Je("market_deals",{id:pt("id").primaryKey(),offerId:he("offer_id").notNull().references(()=>nh.id),bidId:he("bid_id").references(()=>p_.id),sellerId:he("seller_id").notNull().references(()=>mt.id),buyerId:he("buyer_id").notNull().references(()=>mt.id),amount:vt("amount",{precision:15,scale:2}).notNull(),price:vt("price",{precision:15,scale:6}).notNull(),totalValue:vt("total_value",{precision:15,scale:2}).notNull(),baseCurrency:A("base_currency").notNull(),quoteCurrency:A("quote_currency").notNull(),status:A("status").default("pending"),escrowReleased:Tt("escrow_released").default(!1),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")});Je("market_messages",{id:pt("id").primaryKey(),channelId:he("channel_id").default(1).references(()=>GX.id),userId:he("user_id").notNull().references(()=>mt.id),type:A("type").default("MESSAGE"),content:A("content").notNull(),offerId:he("offer_id").references(()=>nh.id),bidId:he("bid_id").references(()=>p_.id),dealId:he("deal_id").references(()=>YX.id),createdAt:ge("created_at").defaultNow()});const g_=Je("market_transactions",{id:pt("id").primaryKey(),buyerId:he("buyer_id").notNull().references(()=>mt.id),offerId:he("offer_id").notNull().references(()=>nh.id),amount:vt("amount").notNull(),totalCost:vt("total_cost").notNull(),commission:vt("commission").notNull(),createdAt:ge("created_at").defaultNow()}),j_=Je("city_transfers",{id:pt("id").primaryKey(),senderId:he("sender_id").notNull().references(()=>mt.id),receiverOfficeId:he("receiver_office_id").notNull().references(()=>mt.id),recipientName:A("recipient_name"),amount:vt("amount").notNull(),commissionForReceiver:vt("commission_for_receiver").notNull(),commissionForSystem:vt("commission_for_system").notNull(),currency:A("currency").notNull().default("LYD"),code:A("code").notNull().unique(),status:A("status").notNull().default("pending"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")}),QX=Je("international_transfers_new",{id:pt("id").primaryKey(),senderAgentId:he("sender_agent_id").notNull().references(()=>mt.id),receiverOfficeId:he("receiver_office_id").notNull().references(()=>mt.id),currencyCode:A("currency_code").notNull(),amountOriginal:vt("amount_original").notNull(),commissionSystem:vt("commission_system").notNull(),commissionRecipient:vt("commission_recipient").notNull(),amountPending:vt("amount_pending").notNull(),status:A("status").notNull().default("pending"),transferCode:A("transfer_code").notNull().unique(),note:A("note"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")}),y_=Je("international_transfers",{id:pt("id").primaryKey(),senderId:he("sender_id").notNull().references(()=>mt.id),receiverOfficeId:he("receiver_office_id").notNull().references(()=>mt.id),sendingCountry:A("sending_country").notNull(),receivingCountry:A("receiving_country").notNull(),amount:vt("amount").notNull(),currency:A("currency").notNull().default("USD"),commissionForReceiver:vt("commission_for_receiver").notNull(),commissionForSystem:vt("commission_for_system").notNull(),code:A("code").notNull().unique(),status:A("status").notNull().default("pending"),note:A("note"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")}),HX=Je("office_commissions",{id:pt("id").primaryKey(),officeId:he("office_id").notNull().references(()=>mt.id),city:A("city").notNull(),commissionRate:vt("commission_rate").notNull()},t=>({uniqueOfficeCity:Ir().on(t.officeId,t.city)})),WX=Je("office_country_commissions",{id:pt("id").primaryKey(),officeId:he("office_id").notNull().references(()=>mt.id),country:A("country").notNull(),commissionRate:vt("commission_rate").notNull()},t=>({uniqueOfficeCountry:Ir().on(t.officeId,t.country)})),ZX=Je("admin_settings",{id:pt("id").primaryKey(),key:A("key").notNull().unique(),value:A("value").notNull(),description:A("description"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),JX=Je("user_notifications",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),title:A("title").notNull(),body:A("body"),type:A("type").notNull().default("info"),isRead:Tt("is_read").notNull().default(!1),createdAt:ge("created_at").defaultNow().notNull()}),qX=Je("verification_requests",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),idPhotoUrl:A("id_photo_url").notNull(),proofOfAddressUrl:A("proof_of_address_url").notNull(),status:A("status").notNull().default("pending"),notes:A("notes"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at")}),rw=Je("agent_transfers",{id:pt("id").primaryKey(),senderId:he("sender_id").notNull().references(()=>mt.id),receiverId:he("receiver_id"),agentId:he("agent_id").notNull().references(()=>mt.id),destinationAgentId:he("destination_agent_id").references(()=>mt.id),amount:vt("amount").notNull(),commission:vt("commission").notNull(),currency:A("currency").notNull(),transferCode:A("transfer_code"),note:A("note"),status:A("status").notNull().default("pending"),type:A("type").notNull(),country:A("country"),city:A("city"),recipientName:A("recipient_name").notNull(),recipientPhone:A("recipient_phone"),recipientId:A("recipient_id"),amountOriginal:vt("amount_original"),commissionSystem:vt("commission_system"),commissionRecipient:vt("commission_recipient"),amountPending:vt("amount_pending"),receiverCode:A("receiver_code"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")}),KX=Je("transaction_logs",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),ts:ge("ts").defaultNow().notNull(),type:A("type").notNull(),currency:A("currency").notNull(),amount:vt("amount",{precision:18,scale:4}).notNull(),commission:vt("commission",{precision:18,scale:4}).default("0"),direction:A("direction").notNull(),counterparty:A("counterparty"),ref:A("ref"),referenceNumber:A("reference_number"),status:A("status").notNull().default("completed"),note:A("note"),transferId:he("transfer_id").references(()=>nw.id),cityTransferId:he("city_transfer_id").references(()=>j_.id),agentTransferId:he("agent_transfer_id").references(()=>rw.id),marketTransactionId:he("market_transaction_id").references(()=>g_.id),internationalTransferId:he("international_transfer_id").references(()=>y_.id),metadata:Ln("metadata"),createdAt:ge("created_at").defaultNow()}),XX=Je("exchange_rates",{id:pt("id").primaryKey(),fromCurrency:A("from_currency").notNull(),toCurrency:A("to_currency").notNull(),rate:vt("rate",{precision:18,scale:8}).notNull(),fetchedAt:ge("fetched_at").defaultNow().notNull()},t=>({uniqueCurrencyPair:Ir().on(t.fromCurrency,t.toCurrency,t.fetchedAt)})),eee=Je("export_jobs",{id:vn("id").primaryKey().defaultRandom(),userId:he("user_id").notNull().references(()=>mt.id),type:A("type").notNull(),status:A("status").notNull().default("pending"),params:Ln("params").notNull(),filePath:A("file_path"),downloadUrl:A("download_url"),expiresAt:ge("expires_at"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at"),errorMessage:A("error_message")});ot(mt).pick({fullName:!0,officeName:!0,officeAddress:!0,countryId:!0,countryName:!0,cityId:!0,cityName:!0,email:!0,phone:!0,accountNumber:!0,password:!0});ot(UX).pick({userId:!0,type:!0,amount:!0,currency:!0,description:!0,referenceNumber:!0});ot($X).pick({userId:!0,currency:!0,amount:!0});ot(nw).pick({senderId:!0,receiverId:!0,amount:!0,commission:!0,currency:!0,note:!0});const tee=ot(VX).pick({userId:!0,fullName:!0,phone:!0,city:!0,commissionRate:!0,message:!0});ot(nh).extend({offerType:R.enum(["buy","sell"]).optional(),fromCurrency:R.string().optional(),toCurrency:R.string().optional(),rate:R.string().optional(),amount:R.string().optional(),available:R.string().optional(),expirationHours:R.number().min(1).max(720).optional()}).pick({userId:!0,side:!0,baseCurrency:!0,quoteCurrency:!0,price:!0,minAmount:!0,maxAmount:!0,remainingAmount:!0,city:!0,deliverType:!0,terms:!0,expiresAt:!0,offerType:!0,fromCurrency:!0,toCurrency:!0,rate:!0,amount:!0,available:!0,expirationHours:!0});ot(g_).pick({buyerId:!0,offerId:!0,amount:!0,totalCost:!0,commission:!0});ot(j_).pick({senderId:!0,receiverOfficeId:!0,amount:!0,commissionForReceiver:!0,commissionForSystem:!0,currency:!0,code:!0,status:!0});ot(y_).pick({senderId:!0,receiverOfficeId:!0,sendingCountry:!0,receivingCountry:!0,amount:!0,currency:!0,commissionForReceiver:!0,commissionForSystem:!0,code:!0,note:!0});ot(QX).pick({senderAgentId:!0,receiverOfficeId:!0,currencyCode:!0,amountOriginal:!0,commissionSystem:!0,commissionRecipient:!0,amountPending:!0,transferCode:!0,note:!0});ot(rw).pick({senderId:!0,receiverId:!0,agentId:!0,destinationAgentId:!0,amount:!0,commission:!0,currency:!0,transferCode:!0,note:!0,status:!0,type:!0,country:!0,city:!0,recipientName:!0,recipientPhone:!0,recipientId:!0,amountOriginal:!0,commissionSystem:!0,commissionRecipient:!0,amountPending:!0,receiverCode:!0});ot(qX).pick({userId:!0,idPhotoUrl:!0,proofOfAddressUrl:!0,status:!0});ot(KX).pick({userId:!0,ts:!0,type:!0,currency:!0,amount:!0,commission:!0,direction:!0,counterparty:!0,ref:!0,referenceNumber:!0,status:!0,note:!0,transferId:!0,cityTransferId:!0,agentTransferId:!0,marketTransactionId:!0,internationalTransferId:!0,metadata:!0});ot(XX).pick({fromCurrency:!0,toCurrency:!0,rate:!0,fetchedAt:!0});ot(eee).pick({userId:!0,type:!0,params:!0});R.object({fullName:R.string().min(3,{message:"يجب أن يكون الاسم أكثر من 3 أحرف"}),phone:R.string().min(10,{message:"يجب أن يكون رقم الهاتف صحيحًا"}),city:R.string().min(2,{message:"يرجى إدخال اسم المدينة"}),message:R.string().optional()});R.object({idPhotoUrl:R.string().min(1,{message:"يجب رفع صورة الهوية"}),proofOfAddressUrl:R.string().min(1,{message:"يجب رفع إثبات العنوان"})});const see=R.object({side:R.enum(["sell","buy"],{errorMap:()=>({message:"نوع العرض يجب أن يكون بيع أو شراء"})}),baseCurrency:R.string().min(1,{message:"يجب اختيار العملة المصدر"}),quoteCurrency:R.string().min(1,{message:"يجب اختيار العملة الهدف"}),minAmount:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن تكون الكمية الدنيا أكبر من صفر"}),maxAmount:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن تكون الكمية العليا أكبر من صفر"}),price:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن يكون سعر الصرف أكبر من صفر"}),expirationMinutes:R.number().min(5,{message:"يجب أن تكون المدة 5 دقائق على الأقل"}).max(43200,{message:"لا يمكن أن تتجاوز المدة 30 يوماً"}).optional(),city:R.string().optional(),deliverType:R.string().optional(),terms:R.string().optional()}).refine(t=>Number(t.minAmount)<=Number(t.maxAmount),{message:"الكمية الدنيا يجب أن تكون أقل من أو تساوي الكمية العليا",path:["minAmount"]});R.object({receiver:R.string().min(1,{message:"يجب إدخال رقم حساب المستلم أو رقم الهاتف"}),amount:R.string().or(R.number()).refine(t=>Number(t)>0,{message:"يجب أن يكون المبلغ أكبر من صفر"}),note:R.string().optional()});R.object({email:R.string().email(),password:R.string(),fingerprint:R.string().optional(),userAgent:R.string().optional(),platform:R.string().optional(),language:R.string().optional(),screen:R.string().optional(),timezone:R.string().optional(),timestamp:R.string().optional()});const aw=Je("chat_rooms",{id:pt("id").primaryKey(),name:A("name").notNull(),description:A("description"),isPublic:Tt("is_public").default(!0),createdAt:ge("created_at").defaultNow()}),Y0=Je("chat_messages",{id:pt("id").primaryKey(),roomId:he("room_id").notNull().references(()=>aw.id),senderId:he("sender_id").notNull().references(()=>mt.id),content:A("content").notNull(),fileUrl:A("file_url"),fileType:A("file_type"),voiceId:A("voice_id"),voiceDuration:he("voice_duration"),createdAt:ge("created_at").defaultNow(),isEdited:Tt("is_edited").default(!1),editedAt:ge("edited_at"),isDeleted:Tt("is_deleted").default(!1),deletedBy:he("deleted_by"),deletedAt:ge("deleted_at")}),nee=Je("message_likes",{id:pt("id").primaryKey(),messageId:he("message_id").notNull().references(()=>Y0.id),userId:he("user_id").notNull().references(()=>mt.id),createdAt:ge("created_at").defaultNow()},t=>({uniqueUserMessage:Ir().on(t.messageId,t.userId)}));Je("chat_message_reads",{messageId:he("message_id").notNull().references(()=>Y0.id),userId:he("user_id").notNull().references(()=>mt.id),readAt:ge("read_at").defaultNow()},t=>({messageUserUnique:Ir().on(t.messageId,t.userId)}));const iw=Je("private_chats",{id:pt("id").primaryKey(),user1Id:he("user1_id").notNull().references(()=>mt.id),user2Id:he("user2_id").notNull().references(()=>mt.id),lastMessageAt:ge("last_message_at").defaultNow(),createdAt:ge("created_at").defaultNow()},t=>({usersPair:Ir().on(t.user1Id,t.user2Id)})),v_=Je("private_messages",{id:pt("id").primaryKey(),chatId:he("chat_id").notNull().references(()=>iw.id),senderId:he("sender_id").notNull().references(()=>mt.id),content:A("content").notNull(),fileUrl:A("file_url"),fileType:A("file_type"),voiceId:A("voice_id"),voiceDuration:he("voice_duration"),isRead:Tt("is_read").default(!1),isEdited:Tt("is_edited").default(!1),createdAt:ge("created_at").defaultNow(),editedAt:ge("edited_at"),isDeleted:Tt("is_deleted").default(!1),deletedBy:he("deleted_by"),deletedAt:ge("deleted_at"),isForwarded:Tt("is_forwarded").default(!1),originalSenderId:he("original_sender_id").references(()=>mt.id),forwardedFromSender:A("forwarded_from_sender")}),lw=Je("group_chats",{id:pt("id").primaryKey(),name:A("name").notNull(),creatorId:he("creator_id").notNull().references(()=>mt.id),isPrivate:Tt("is_private").default(!1),description:A("description"),createdAt:ge("created_at").defaultNow()}),ree=Je("group_members",{id:pt("id").primaryKey(),groupId:he("group_id").notNull().references(()=>lw.id),userId:he("user_id").notNull().references(()=>mt.id),role:A("role").default("member"),mutedUntil:ge("muted_until"),isBanned:Tt("is_banned").default(!1),bannedBy:he("banned_by").references(()=>mt.id),bannedAt:ge("banned_at"),banReason:A("ban_reason"),joinedAt:ge("joined_at").defaultNow()},t=>({userGroupUnique:Ir().on(t.groupId,t.userId)})),aee=Je("group_messages",{id:pt("id").primaryKey(),groupId:he("group_id").notNull().references(()=>lw.id),senderId:he("sender_id").notNull().references(()=>mt.id),content:A("content").notNull(),fileUrl:A("file_url"),fileType:A("file_type"),createdAt:ge("created_at").defaultNow(),editedAt:ge("edited_at"),isEdited:Tt("is_edited").default(!1),isDeleted:Tt("is_deleted").default(!1),deletedForUsers:he("deleted_for_users").array()});ot(aw);ot(Y0);ot(iw).omit({lastMessageAt:!0,createdAt:!0});ot(v_).omit({createdAt:!0});ot(nee).omit({id:!0,createdAt:!0});ot(lw).omit({id:!0,createdAt:!0});ot(ree).omit({id:!0,joinedAt:!0,mutedUntil:!0,isBanned:!0,bannedBy:!0,bannedAt:!0,banReason:!0});ot(aee).omit({id:!0,createdAt:!0});ot(HX).pick({officeId:!0,city:!0,commissionRate:!0});ot(WX).pick({officeId:!0,country:!0,commissionRate:!0});ot(ZX).pick({key:!0,value:!0,description:!0});ot(JX).omit({id:!0,createdAt:!0});R.object({receiverOfficeId:R.number().int().positive({message:"يرجى اختيار مكتب الصرافة المستلم"}),amount:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن يكون المبلغ أكبر من صفر"}),currency:R.string().default("LYD")});const iee=Je("agent_commissions",{id:pt("id").primaryKey(),agentId:he("agent_id").notNull(),currencyCode:A("currency_code").notNull(),type:A("type").notNull(),value:A("value").notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()});ot(iee,{agentId:R.number().int().positive(),currencyCode:R.string().min(2).max(10),type:R.enum(["percentage","fixed"]),value:R.string().refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن تكون القيمة رقماً موجباً")});const lee=Je("city_transfer_commissions",{id:pt("id").primaryKey(),agentId:he("agent_id").notNull().references(()=>mt.id),originCity:A("origin_city"),destinationCity:A("destination_city"),minAmount:A("min_amount").notNull(),maxAmount:A("max_amount"),commission:A("commission"),perMilleRate:A("per_mille_rate"),currencyCode:A("currency_code").notNull().default("LYD"),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()});ot(lee,{agentId:R.number().int().positive(),minAmount:R.string().refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>=0},"يجب أن يكون المبلغ الأدنى رقماً صحيحاً"),maxAmount:R.string().optional().refine(t=>{if(!t)return!0;const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن يكون المبلغ الأقصى رقماً موجباً"),commission:R.string().optional().refine(t=>{if(!t)return!0;const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن تكون العمولة رقماً موجباً"),perMilleRate:R.string().optional().refine(t=>{if(!t)return!0;const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن تكون النسبة في الألف رقماً موجباً"),currencyCode:R.string().min(2).max(10)});const oee=Je("commission_pool_transactions",{id:pt("id").primaryKey(),sourceType:A("source_type").notNull(),sourceId:he("source_id"),sourceName:A("source_name"),currencyCode:A("currency_code").notNull(),amount:A("amount").notNull(),transactionType:A("transaction_type").notNull(),relatedTransactionId:he("related_transaction_id"),description:A("description"),createdAt:ge("created_at").defaultNow().notNull()});ot(oee,{sourceType:R.enum(["agent","user","system"]),currencyCode:R.string().min(2).max(10),amount:R.string().refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن يكون المبلغ رقماً موجباً"),transactionType:R.enum(["credit","withdrawal"])});Je("system_commission_rates",{id:pt("id").primaryKey(),transferType:A("transfer_type").notNull(),currency:A("currency").notNull(),commissionRate:vt("commission_rate",{precision:5,scale:4}).notNull(),perMilleRate:vt("per_mille_rate",{precision:5,scale:4}),fixedAmount:vt("fixed_amount",{precision:12,scale:2}),isActive:Tt("is_active").default(!0).notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()});Je("password_reset_requests",{id:pt("id").primaryKey(),email:A("email").notNull(),token:A("token").notNull().unique(),expiresAt:ge("expires_at").notNull(),used:Tt("used").default(!1),createdAt:ge("created_at").defaultNow()});ot(OX,{language:R.enum(["ar","en"]).default("ar"),theme:R.enum(["light","dark","auto"]).default("auto"),timezone:R.string().default("Africa/Tripoli"),baseCurrency:R.string().default("LYD"),notifications:R.object({email:R.boolean().default(!0),push:R.boolean().default(!0),security:R.boolean().default(!0),marketing:R.boolean().default(!1)})}).omit({id:!0,updatedAt:!0});R.object({fullName:R.string().min(2).max(100).optional(),phone:R.string().min(8).max(20).optional(),city:R.string().min(2).max(50).optional()});R.object({currentPassword:R.string().min(1,"كلمة المرور الحالية مطلوبة"),newPassword:R.string().min(8,"كلمة المرور الجديدة يجب أن تكون 8 أحرف على الأقل").max(64,"كلمة المرور طويلة جداً").regex(/[A-Z]/,"يجب أن تحتوي على حرف كبير").regex(/[a-z]/,"يجب أن تحتوي على حرف صغير").regex(/[0-9]/,"يجب أن تحتوي على رقم").regex(/[^A-Za-z0-9]/,"يجب أن تحتوي على رمز خاص"),confirmPassword:R.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"كلمة المرور الجديدة وتأكيدها غير متطابقين",path:["confirmPassword"]});R.object({email:R.string().email("عنوان بريد إلكتروني غير صالح")});R.object({token:R.string().min(1,"رمز التحقق مطلوب"),newPassword:R.string().min(8,"كلمة المرور يجب أن تكون 8 أحرف على الأقل").max(64,"كلمة المرور طويلة جداً").regex(/[A-Z]/,"يجب أن تحتوي على حرف كبير").regex(/[a-z]/,"يجب أن تحتوي على حرف صغير").regex(/[0-9]/,"يجب أن تحتوي على رقم").regex(/[^A-Za-z0-9]/,"يجب أن تحتوي على رمز خاص"),confirmPassword:R.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"كلمة المرور وتأكيدها غير متطابقين",path:["confirmPassword"]});ot(zX,{isEnabled:R.boolean().default(!1),secret:R.string().min(16).optional(),backupCodes:R.array(R.string()).default([])});R.object({token:R.string().length(6,"رمز التحقق يجب أن يكون 6 أرقام")});R.object({token:R.string().length(6,"رمز التحقق يجب أن يكون 6 أرقام")});R.object({currentPassword:R.string().min(1,"كلمة المرور الحالية مطلوبة"),token:R.string().length(6,"رمز التحقق يجب أن يكون 6 أرقام")});const Lu=Je("countries",{id:pt("id").primaryKey(),name:A("name").notNull(),code:A("code").notNull().unique(),currency:A("currency").notNull(),phoneCode:A("phone_code"),isActive:Tt("is_active").notNull().default(!0),createdAt:ge("created_at").defaultNow()}),cee=Je("agent_offices",{id:pt("id").primaryKey(),agentId:he("agent_id").notNull().references(()=>mt.id),countryCode:A("country_code").notNull().references(()=>Lu.code),city:A("city").notNull(),officeCode:A("office_code").notNull().unique(),officeName:A("office_name").notNull(),contactInfo:A("contact_info"),address:A("address"),isActive:Tt("is_active").notNull().default(!0),createdAt:ge("created_at").defaultNow()});Je("international_transfers",{id:pt("id").primaryKey(),agentId:he("agent_id").notNull().references(()=>mt.id),currencyCode:A("currency_code").notNull(),amount:vt("amount",{precision:12,scale:2}).notNull(),originCountry:A("origin_country").notNull(),destinationCountry:A("destination_country").notNull().references(()=>Lu.code),receivingOfficeId:he("receiving_office_id").notNull().references(()=>cee.id),senderName:A("sender_name").notNull(),senderPhone:A("sender_phone"),receiverName:A("receiver_name").notNull(),receiverPhone:A("receiver_phone"),receiverCode:A("receiver_code"),transferCode:A("transfer_code").notNull().unique(),commissionAmount:vt("commission_amount",{precision:12,scale:2}).notNull(),status:A("status").notNull().default("pending"),notes:A("notes"),createdAt:ge("created_at").defaultNow(),completedAt:ge("completed_at")});const dee=Je("user_receive_settings",{id:pt("id").primaryKey(),userId:he("user_id").references(()=>mt.id).notNull(),countryId:he("country_id").references(()=>Lu.id).notNull(),commissionRate:vt("commission_rate",{precision:5,scale:4}).notNull(),isActive:Tt("is_active").default(!0).notNull(),createdAt:ge("created_at").defaultNow().notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),uee=Je("push_subscriptions",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),endpoint:A("endpoint").notNull(),keysP256dh:A("keys_p256dh").notNull(),keysAuth:A("keys_auth").notNull(),createdAt:ge("created_at").defaultNow()},t=>({userEndpointUnique:Ir().on(t.userId,t.endpoint)}));ot(dee).omit({id:!0,createdAt:!0,updatedAt:!0});ot(uee).omit({id:!0,createdAt:!0});const fee=Je("system_commission_settings",{id:pt("id").primaryKey(),type:A("type").notNull(),value:vt("value",{precision:10,scale:6}).notNull(),currency:A("currency").notNull(),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow(),updatedBy:he("updated_by").references(()=>mt.id)},t=>({uniqueCurrencyConstraint:Ir("unique_commission_per_currency").on(t.currency)}));ot(fee).omit({id:!0,createdAt:!0,updatedAt:!0});const mee=R.object({type:R.enum(["percentage","fixed"],{errorMap:()=>({message:"نوع العمولة يجب أن يكون نسبة مئوية أو ثابت"})}),value:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن تكون قيمة العمولة أكبر من صفر"}),currency:R.enum(["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"],{errorMap:()=>({message:"يجب اختيار عملة صحيحة"})})});R.object({settings:R.array(mee).min(1,{message:"يجب تحديد إعدادات عمولة لعملة واحدة على الأقل"})}).refine(t=>{const s=t.settings.map(r=>r.currency),n=new Set(s);return s.length===n.size},{message:"لا يمكن تكرار العملة في إعدادات العمولة",path:["settings"]});const hee=Je("commission_logs",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),userName:A("user_name").notNull(),offerType:A("offer_type").notNull(),commissionAmount:vt("commission_amount",{precision:12,scale:2}).notNull(),commissionCurrency:A("commission_currency").notNull(),sourceId:he("source_id").notNull(),sourceType:A("source_type").notNull().default("market_offer"),action:A("action").notNull(),description:A("description"),createdAt:ge("created_at").defaultNow()});ot(hee).omit({id:!0,createdAt:!0});const xee=Je("system_settings",{key:A("key").primaryKey(),value:Ln("value").notNull(),updatedAt:ge("updated_at").defaultNow().notNull()}),pee=Je("referral_rewards",{id:pt("id").primaryKey(),txId:he("tx_id").notNull(),referrerId:he("referrer_id").notNull().references(()=>mt.id),referredUserId:he("referred_user_id").notNull().references(()=>mt.id),commissionBase:vt("commission_base",{precision:18,scale:6}).notNull(),rewardAmount:vt("reward_amount",{precision:18,scale:6}).notNull(),currency:A("currency").notNull(),status:A("status").notNull().default("paid"),operationType:A("operation_type"),deductedFromCommission:vt("deducted_from_commission",{precision:18,scale:6}),createdAt:ge("created_at").defaultNow().notNull(),paidAt:ge("paid_at")},t=>({uniqueTxConstraint:Ir("unique_referral_reward_tx").on(t.txId)}));Je("referral_balances",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),currency:A("currency").notNull(),amount:vt("amount",{precision:18,scale:6}).notNull().default("0")},t=>({userCurrencyUnique:Ir().on(t.userId,t.currency)}));ot(pee,{rewardAmount:R.string().refine(t=>!isNaN(Number(t))&&Number(t)>=0,{message:"مبلغ المكافأة يجب أن يكون رقماً صحيحاً أكبر من أو يساوي صفر"}),commissionBase:R.string().refine(t=>!isNaN(Number(t))&&Number(t)>0,{message:"قيمة العمولة الأساسية يجب أن تكون أكبر من صفر"})}).omit({id:!0,createdAt:!0});ot(xee,{key:R.string().min(1,"مفتاح الإعداد لا يمكن أن يكون فارغاً")}).omit({updatedAt:!0});ot(BX).omit({id:!0,createdAt:!0});const b_=Je("receipts",{id:A("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),txnId:A("txn_id").notNull(),version:he("version").notNull().default(1),locale:A("locale").notNull().default("ar"),storagePath:A("storage_path").notNull(),sha256Base64url:A("sha256_base64url").notNull(),jwsToken:A("jws_token").notNull(),pdfSigned:Tt("pdf_signed").notNull().default(!1),pdfSignAlgo:A("pdf_sign_algo"),pdfCertSerial:A("pdf_cert_serial"),revoked:Tt("revoked").notNull().default(!1),createdAt:ge("created_at").defaultNow(),createdBy:A("created_by"),verifiedAt:ge("verified_at"),publicCopy:Tt("public_copy").notNull().default(!0)},t=>({txnIdIdx:_r("receipts_txn_id_idx").on(t.txnId),createdAtIdx:_r("receipts_created_at_idx").on(t.createdAt),revokedIdx:_r("receipts_revoked_idx").on(t.revoked)}));ot(b_).omit({id:!0,createdAt:!0});const gee=Je("receipt_audit_log",{id:pt("id").primaryKey(),receiptId:A("receipt_id").notNull().references(()=>b_.id),action:A("action").notNull(),userId:A("user_id"),metadata:Ln("metadata"),ipAddress:A("ip_address"),userAgent:A("user_agent"),timestamp:ge("timestamp").defaultNow().notNull()},t=>({receiptIdIdx:_r("receipt_audit_receipt_id_idx").on(t.receiptId),timestampIdx:_r("receipt_audit_timestamp_idx").on(t.timestamp)}));ot(gee).omit({id:!0,timestamp:!0});const jee=Je("signing_keys",{id:pt("id").primaryKey(),kid:A("kid").notNull().unique(),algorithm:A("algorithm").notNull().default("RS256"),publicKey:A("public_key").notNull(),privateKey:A("private_key"),active:Tt("active").notNull().default(!0),createdAt:ge("created_at").defaultNow(),expiresAt:ge("expires_at")},t=>({kidIdx:_r("signing_keys_kid_idx").on(t.kid),activeIdx:_r("signing_keys_active_idx").on(t.active)}));ot(jee).omit({id:!0,createdAt:!0});const yee=Je("receipt_settings",{id:pt("id").primaryKey(),key:A("key").notNull().unique(),value:A("value").notNull(),description:A("description"),updatedAt:ge("updated_at").defaultNow(),updatedBy:A("updated_by")});ot(yee).omit({id:!0,updatedAt:!0});const vee=Je("message_voices",{id:vn("id").primaryKey().defaultRandom(),messageId:he("message_id").references(()=>Y0.id,{onDelete:"cascade"}),privateMessageId:he("private_message_id").references(()=>v_.id,{onDelete:"cascade"}),senderId:he("sender_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),roomId:he("room_id").references(()=>aw.id,{onDelete:"cascade"}),privateRoomId:he("private_room_id").references(()=>iw.id,{onDelete:"cascade"}),storageKey:A("storage_key").notNull(),mimeType:A("mime_type").notNull(),durationSeconds:he("duration_seconds").notNull(),fileSizeBytes:he("file_size_bytes").notNull(),waveformPeaks:Ln("waveform_peaks"),transcript:A("transcript"),transcriptLang:A("transcript_lang"),status:A("status").notNull().default("ready"),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()}),bee=Je("voice_settings",{id:vn("id").primaryKey().defaultRandom(),maxDurationSeconds:he("max_duration_seconds").notNull().default(120),maxFileSizeMb:he("max_file_size_mb").notNull().default(10),enabled:Tt("enabled").notNull().default(!0),transcriptionEnabled:Tt("transcription_enabled").notNull().default(!0),allowedMimeTypes:A("allowed_mime_types").array().default(["audio/ogg","audio/mpeg","audio/mp4","audio/webm"])}),wee=Je("voice_rate_limits",{id:vn("id").primaryKey().defaultRandom(),userId:he("user_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),messageCount:he("message_count").notNull().default(0),windowStartTime:ge("window_start_time").defaultNow(),lastResetAt:ge("last_reset_at").defaultNow()});ot(vee).pick({messageId:!0,privateMessageId:!0,senderId:!0,roomId:!0,privateRoomId:!0,storageKey:!0,mimeType:!0,durationSeconds:!0,fileSizeBytes:!0,waveformPeaks:!0,transcript:!0,transcriptLang:!0,status:!0});ot(bee).pick({maxDurationSeconds:!0,maxFileSizeMb:!0,enabled:!0,transcriptionEnabled:!0,allowedMimeTypes:!0});ot(wee).pick({userId:!0,messageCount:!0,windowStartTime:!0,lastResetAt:!0});tee.extend({requestType:R.literal("external_transfer"),countryId:R.number().min(1,"اختيار الدولة مطلوب"),cityId:R.number().optional(),cityNameManual:R.string().optional()}).refine(t=>t.cityId||t.cityNameManual&&t.cityNameManual.trim().length>0,{message:"يجب اختيار مدينة من القائمة أو إدخال اسم المدينة يدوياً",path:["cityId"]});R.object({extDailyLimit:R.string().min(1,"الحد اليومي مطلوب"),extMonthlyLimit:R.string().min(1,"الحد الشهري مطلوب"),extAllowedCurrencies:R.array(R.string()).min(1,"يجب اختيار عملة واحدة على الأقل"),extAllowedCountries:R.array(R.string()).min(1,"يجب اختيار دولة واحدة على الأقل")});const Nee=Je("hidden_transfers",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id),transferId:he("transfer_id").notNull().references(()=>rw.id),hiddenAt:ge("hidden_at").defaultNow()},t=>({uniqueUserTransfer:Ir().on(t.userId,t.transferId)}));ot(Nee).pick({userId:!0,transferId:!0});const w_=Je("badge_types",{id:pt("id").primaryKey(),name:A("name").notNull().unique(),nameAr:A("name_ar").notNull(),description:A("description").notNull(),descriptionAr:A("description_ar").notNull(),icon:A("icon").notNull(),color:A("color").notNull().default("blue"),rarity:A("rarity").notNull().default("common"),pointsRequired:he("points_required").notNull().default(0),category:A("category").notNull().default("general"),condition:Ln("condition"),active:Tt("active").default(!0),createdAt:ge("created_at").defaultNow()}),Cee=Je("user_points",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),totalPoints:he("total_points").notNull().default(0),availablePoints:he("available_points").notNull().default(0),level:he("level").notNull().default(1),streakDays:he("streak_days").notNull().default(0),lastActivityDate:ge("last_activity_date").defaultNow(),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()},t=>({userUnique:Ir().on(t.userId)})),Mee=Je("user_badges",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),badgeTypeId:he("badge_type_id").notNull().references(()=>w_.id,{onDelete:"cascade"}),earnedAt:ge("earned_at").defaultNow(),isVisible:Tt("is_visible").default(!0),notificationSent:Tt("notification_sent").default(!1)},t=>({userBadgeUnique:Ir().on(t.userId,t.badgeTypeId)})),See=Je("points_history",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),points:he("points").notNull(),action:A("action").notNull(),description:A("description").notNull(),descriptionAr:A("description_ar").notNull(),referenceId:A("reference_id"),referenceType:A("reference_type"),createdAt:ge("created_at").defaultNow()}),N_=Je("rewards",{id:pt("id").primaryKey(),name:A("name").notNull(),nameAr:A("name_ar").notNull(),description:A("description").notNull(),descriptionAr:A("description_ar").notNull(),icon:A("icon").notNull(),pointsCost:he("points_cost").notNull(),rewardType:A("reward_type").notNull(),rewardValue:A("reward_value"),maxRedemptions:he("max_redemptions"),currentRedemptions:he("current_redemptions").default(0),validUntil:ge("valid_until"),active:Tt("active").default(!0),createdAt:ge("created_at").defaultNow()}),kee=Je("user_rewards",{id:pt("id").primaryKey(),userId:he("user_id").notNull().references(()=>mt.id,{onDelete:"cascade"}),rewardId:he("reward_id").notNull().references(()=>N_.id,{onDelete:"cascade"}),pointsSpent:he("points_spent").notNull(),status:A("status").notNull().default("pending"),redemptionCode:A("redemption_code"),usedAt:ge("used_at"),expiresAt:ge("expires_at"),redeemedAt:ge("redeemed_at").defaultNow()}),Lee=Je("reward_settings",{id:pt("id").primaryKey(),transferPoints:he("transfer_points").default(1),loginPoints:he("login_points").default(5),streakBonusPoints:he("streak_bonus_points").default(10),levelUpBonus:he("level_up_bonus").default(50),pointsPerLevel:he("points_per_level").default(1e3),maxStreakDays:he("max_streak_days").default(30),systemActive:Tt("system_active").default(!0),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()});ot(w_).pick({name:!0,nameAr:!0,description:!0,descriptionAr:!0,icon:!0,color:!0,rarity:!0,pointsRequired:!0,category:!0,condition:!0,active:!0});ot(Cee).pick({userId:!0,totalPoints:!0,availablePoints:!0,level:!0,streakDays:!0,lastActivityDate:!0});ot(Mee).pick({userId:!0,badgeTypeId:!0,isVisible:!0});ot(See).pick({userId:!0,points:!0,action:!0,description:!0,descriptionAr:!0,referenceId:!0,referenceType:!0});ot(N_).pick({name:!0,nameAr:!0,description:!0,descriptionAr:!0,icon:!0,pointsCost:!0,rewardType:!0,rewardValue:!0,maxRedemptions:!0,validUntil:!0,active:!0});ot(kee).pick({userId:!0,rewardId:!0,pointsSpent:!0,status:!0,redemptionCode:!0,expiresAt:!0});ot(Lee).pick({transferPoints:!0,loginPoints:!0,streakBonusPoints:!0,levelUpBonus:!0,pointsPerLevel:!0,maxStreakDays:!0,systemActive:!0});const Tee=Je("page_restrictions",{id:pt("id").primaryKey(),userId:he("user_id").references(()=>mt.id,{onDelete:"cascade"}),accountNumber:A("account_number"),pageKey:A("page_key").notNull(),scope:A("scope").notNull().default("page"),reason:A("reason"),isActive:Tt("is_active").notNull().default(!0),expiresAt:ge("expires_at"),createdBy:he("created_by").notNull().references(()=>mt.id,{onDelete:"cascade"}),createdAt:ge("created_at").defaultNow()},t=>({})),Eee=Je("audit_logs",{id:pt("id").primaryKey(),actorId:he("actor_id").references(()=>mt.id),action:A("action").notNull(),entity:A("entity").notNull(),entityId:he("entity_id"),data:Ln("data"),createdAt:ge("created_at").defaultNow()});ot(Tee);ot(Eee);const C_=Je("dev_pages",{id:vn("id").primaryKey().defaultRandom(),route:A("route").notNull().unique(),titleAr:A("title_ar").notNull(),layout:A("layout").default("default"),status:A("status").notNull().default("draft"),visibility:A("visibility").default("public"),allowedRoles:A("allowed_roles").array().default([]),createdBy:A("created_by").notNull(),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()}),Iee=Je("dev_blocks",{id:vn("id").primaryKey().defaultRandom(),pageId:vn("page_id").notNull().references(()=>C_.id,{onDelete:"cascade"}),slot:A("slot").notNull(),componentKey:A("component_key").notNull(),props:Ln("props").default({}),orderIndex:he("order_index").default(0),createdAt:ge("created_at").defaultNow()}),M_=Je("dev_components",{key:A("key").primaryKey(),displayName:A("display_name").notNull(),schema:Ln("schema").notNull(),category:A("category").default("general"),isCore:Tt("is_core").default(!0),createdAt:ge("created_at").defaultNow()});Je("dev_component_versions",{id:vn("id").primaryKey().defaultRandom(),componentKey:A("component_key").notNull().references(()=>M_.key),version:A("version").notNull(),sourceJs:A("source_js"),changelog:A("changelog"),createdAt:ge("created_at").defaultNow()});const S_=Je("dev_functions",{name:A("name").primaryKey(),type:A("type").notNull(),description:A("description"),createdAt:ge("created_at").defaultNow()});Je("dev_function_versions",{id:vn("id").primaryKey().defaultRandom(),functionName:A("function_name").notNull().references(()=>S_.name),version:A("version").notNull(),source:A("source").notNull(),tests:A("tests"),createdAt:ge("created_at").defaultNow()});const Aee=Je("dev_themes",{id:vn("id").primaryKey().defaultRandom(),name:A("name").notNull().unique(),tokens:Ln("tokens").notNull(),isActive:Tt("is_active").default(!1),createdAt:ge("created_at").defaultNow()}),Dee=Je("dev_feature_flags",{key:A("key").primaryKey(),description:A("description"),enabled:Tt("enabled").default(!1),perAccount:Ln("per_account").default({}),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()}),Pee=Je("dev_nav_items",{id:vn("id").primaryKey().defaultRandom(),labelAr:A("label_ar").notNull(),route:A("route").notNull(),icon:A("icon"),orderIndex:he("order_index").default(0),roles:A("roles").array().default([]),parentId:vn("parent_id"),createdAt:ge("created_at").defaultNow()}),_ee=Je("dev_assets",{id:vn("id").primaryKey().defaultRandom(),path:A("path").notNull().unique(),alt:A("alt"),meta:Ln("meta").default({}),createdAt:ge("created_at").defaultNow()}),k_=Je("dev_releases",{id:vn("id").primaryKey().defaultRandom(),tag:A("tag").notNull().unique(),notes:A("notes"),createdBy:A("created_by").notNull(),createdAt:ge("created_at").defaultNow()});Je("dev_release_items",{id:vn("id").primaryKey().defaultRandom(),releaseId:vn("release_id").notNull().references(()=>k_.id,{onDelete:"cascade"}),entity:A("entity").notNull(),entityKey:A("entity_key").notNull(),fromVersion:A("from_version"),toVersion:A("to_version"),createdAt:ge("created_at").defaultNow()});const Ree=Je("dev_audit_logs",{id:vn("id").primaryKey().defaultRandom(),actorEmail:A("actor_email").notNull(),action:A("action").notNull(),entity:A("entity").notNull(),entityId:A("entity_id").notNull(),data:Ln("data").default({}),createdAt:ge("created_at").defaultNow()});ot(C_);ot(Iee);ot(M_);ot(S_);ot(Aee);ot(Dee);ot(Pee);ot(_ee);ot(k_);ot(Ree);const Oee=Je("security_logs",{id:vn("id").primaryKey().defaultRandom(),email:A("email"),username:A("username"),eventType:A("event_type").notNull(),fingerprint:A("fingerprint").notNull(),ipAddress:A("ip_address"),userAgent:A("user_agent"),country:A("country"),city:A("city"),platform:A("platform"),language:A("language"),screen:A("screen"),timezone:A("timezone"),attempts:he("attempts").default(1),imageFilename:A("image_filename"),blocked:Tt("blocked").default(!1),reportType:A("report_type").default("failed_login"),metadata:Ln("metadata").default({}),createdAt:ge("created_at").defaultNow(),updatedAt:ge("updated_at").defaultNow()});ot(Oee).omit({id:!0,createdAt:!0,updatedAt:!0});function Ls(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function ni(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function zee(t,s){const n=Ls(t);return isNaN(s)?ni(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function Fee(t,s){const n=Ls(t);if(isNaN(s))return ni(t,NaN);if(!s)return n;const r=n.getDate(),a=ni(t,n.getTime());a.setMonth(n.getMonth()+s+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const L_=6048e5,Uee=864e5,$h=43200,V4=1440;let $ee={};function rh(){return $ee}function xm(t,s){var o,c,d,f;const n=rh(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,a=Ls(t),i=a.getDay(),l=(i<r?7:0)+i-r;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Pp(t){return xm(t,{weekStartsOn:1})}function T_(t){const s=Ls(t),n=s.getFullYear(),r=ni(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Pp(r),i=ni(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Pp(i);return s.getTime()>=a.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function G4(t){const s=Ls(t);return s.setHours(0,0,0,0),s}function _p(t){const s=Ls(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function Bee(t,s){const n=G4(t),r=G4(s),a=+n-_p(n),i=+r-_p(r);return Math.round((a-i)/Uee)}function Vee(t){const s=T_(t),n=ni(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),Pp(n)}function Cx(t,s){const n=Ls(t),r=Ls(s),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function Gee(t){return ni(t,Date.now())}function Yee(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Qee(t){if(!Yee(t)&&typeof t!="number")return!1;const s=Ls(t);return!isNaN(Number(s))}function Hee(t,s){const n=Ls(t),r=Ls(s),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return a*12+i}function Wee(t){return s=>{const r=(t?Math[t]:Math.trunc)(s);return r===0?0:r}}function Zee(t,s){return+Ls(t)-+Ls(s)}function Jee(t){const s=Ls(t);return s.setHours(23,59,59,999),s}function qee(t){const s=Ls(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function Kee(t){const s=Ls(t);return+Jee(s)==+qee(s)}function Xee(t,s){const n=Ls(t),r=Ls(s),a=Cx(n,r),i=Math.abs(Hee(n,r));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let o=Cx(n,r)===-a;Kee(Ls(t))&&i===1&&Cx(t,r)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function ete(t,s,n){const r=Zee(t,s)/1e3;return Wee(n==null?void 0:n.roundingMethod)(r)}function tte(t){const s=Ls(t),n=ni(t,0);return n.setFullYear(s.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ste={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nte=(t,s,n)=>{let r;const a=ste[t];return typeof a=="string"?r=a:s===1?r=a.one:r=a.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Nd(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const rte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ate={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ite={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lte={date:Nd({formats:rte,defaultWidth:"full"}),time:Nd({formats:ate,defaultWidth:"full"}),dateTime:Nd({formats:ite,defaultWidth:"full"})},ote={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cte=(t,s,n,r)=>ote[t];function xi(t){return(s,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):l;a=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const dte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ute={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pte=(t,s)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},gte={ordinalNumber:pte,era:xi({values:dte,defaultWidth:"wide"}),quarter:xi({values:ute,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xi({values:fte,defaultWidth:"wide"}),day:xi({values:mte,defaultWidth:"wide"}),dayPeriod:xi({values:hte,defaultWidth:"wide",formattingValues:xte,defaultFormattingWidth:"wide"})};function pi(t){return(s,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const l=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?yte(o,x=>x.test(l)):jte(o,x=>x.test(l));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=s.slice(l.length);return{value:d,rest:f}}}function jte(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function yte(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function E_(t){return(s,n={})=>{const r=s.match(t.matchPattern);if(!r)return null;const a=r[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const o=s.slice(a.length);return{value:l,rest:o}}}const vte=/^(\d+)(th|st|nd|rd)?/i,bte=/\d+/i,wte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nte={any:[/^b/i,/^(a|c)/i]},Cte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mte={any:[/1/i,/2/i,/3/i,/4/i]},Ste={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Lte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ete={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ite={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ate={ordinalNumber:E_({matchPattern:vte,parsePattern:bte,valueCallback:t=>parseInt(t,10)}),era:pi({matchPatterns:wte,defaultMatchWidth:"wide",parsePatterns:Nte,defaultParseWidth:"any"}),quarter:pi({matchPatterns:Cte,defaultMatchWidth:"wide",parsePatterns:Mte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pi({matchPatterns:Ste,defaultMatchWidth:"wide",parsePatterns:kte,defaultParseWidth:"any"}),day:pi({matchPatterns:Lte,defaultMatchWidth:"wide",parsePatterns:Tte,defaultParseWidth:"any"}),dayPeriod:pi({matchPatterns:Ete,defaultMatchWidth:"any",parsePatterns:Ite,defaultParseWidth:"any"})},I_={code:"en-US",formatDistance:nte,formatLong:lte,formatRelative:cte,localize:gte,match:Ate,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dte(t){const s=Ls(t);return Bee(s,tte(s))+1}function Pte(t){const s=Ls(t),n=+Pp(s)-+Vee(s);return Math.round(n/L_)+1}function A_(t,s){var f,x,h,j;const n=Ls(t),r=n.getFullYear(),a=rh(),i=(s==null?void 0:s.firstWeekContainsDate)??((x=(f=s==null?void 0:s.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(h=a.locale)==null?void 0:h.options)==null?void 0:j.firstWeekContainsDate)??1,l=ni(t,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const o=xm(l,s),c=ni(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const d=xm(c,s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function _te(t,s){var o,c,d,f;const n=rh(),r=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=A_(t,s),i=ni(t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),xm(i,s)}function Rte(t,s){const n=Ls(t),r=+xm(n,s)-+_te(n,s);return Math.round(r/L_)+1}function Ms(t,s){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return n+r}const Tl={y(t,s){const n=t.getFullYear(),r=n>0?n:1-n;return Ms(s==="yy"?r%100:r,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):Ms(n+1,2)},d(t,s){return Ms(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return Ms(t.getHours()%12||12,s.length)},H(t,s){return Ms(t.getHours(),s.length)},m(t,s){return Ms(t.getMinutes(),s.length)},s(t,s){return Ms(t.getSeconds(),s.length)},S(t,s){const n=s.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return Ms(a,s.length)}},Qc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Y4={G:function(t,s,n){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Tl.y(t,s)},Y:function(t,s,n,r){const a=A_(t,r),i=a>0?a:1-a;if(s==="YY"){const l=i%100;return Ms(l,2)}return s==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ms(i,s.length)},R:function(t,s){const n=T_(t);return Ms(n,s.length)},u:function(t,s){const n=t.getFullYear();return Ms(n,s.length)},Q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return Ms(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return Ms(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,n){const r=t.getMonth();switch(s){case"M":case"MM":return Tl.M(t,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,n){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return Ms(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,n,r){const a=Rte(t,r);return s==="wo"?n.ordinalNumber(a,{unit:"week"}):Ms(a,s.length)},I:function(t,s,n){const r=Pte(t);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):Ms(r,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Tl.d(t,s)},D:function(t,s,n){const r=Dte(t);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ms(r,s.length)},E:function(t,s,n){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Ms(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Ms(i,s.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,n){const r=t.getDay(),a=r===0?7:r;switch(s){case"i":return String(a);case"ii":return Ms(a,s.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,n){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,n){const r=t.getHours();let a;switch(r===12?a=Qc.noon:r===0?a=Qc.midnight:a=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,n){const r=t.getHours();let a;switch(r>=17?a=Qc.evening:r>=12?a=Qc.afternoon:r>=4?a=Qc.morning:a=Qc.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Tl.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Tl.H(t,s)},K:function(t,s,n){const r=t.getHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ms(r,s.length)},k:function(t,s,n){let r=t.getHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ms(r,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Tl.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Tl.s(t,s)},S:function(t,s){return Tl.S(t,s)},X:function(t,s,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return H4(r);case"XXXX":case"XX":return _o(r);case"XXXXX":case"XXX":default:return _o(r,":")}},x:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"x":return H4(r);case"xxxx":case"xx":return _o(r);case"xxxxx":case"xxx":default:return _o(r,":")}},O:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Q4(r,":");case"OOOO":default:return"GMT"+_o(r,":")}},z:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Q4(r,":");case"zzzz":default:return"GMT"+_o(r,":")}},t:function(t,s,n){const r=Math.trunc(t.getTime()/1e3);return Ms(r,s.length)},T:function(t,s,n){const r=t.getTime();return Ms(r,s.length)}};function Q4(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+s+Ms(i,2)}function H4(t,s){return t%60===0?(t>0?"-":"+")+Ms(Math.abs(t)/60,2):_o(t,s)}function _o(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Ms(Math.trunc(r/60),2),i=Ms(r%60,2);return n+a+s+i}const W4=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},D_=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},Ote=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return W4(t,s);let i;switch(r){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",W4(r,s)).replace("{{time}}",D_(a,s))},zte={p:D_,P:Ote},Fte=/^D+$/,Ute=/^Y+$/,$te=["D","DD","YY","YYYY"];function Bte(t){return Fte.test(t)}function Vte(t){return Ute.test(t)}function Gte(t,s,n){const r=Yte(t,s,n);if(console.warn(r),$te.includes(t))throw new RangeError(r)}function Yte(t,s,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wte=/^'([^]*?)'?$/,Zte=/''/g,Jte=/[a-zA-Z]/;function Bn(t,s,n){var f,x,h,j,v,p,b,y;const r=rh(),a=(n==null?void 0:n.locale)??r.locale??I_,i=(n==null?void 0:n.firstWeekContainsDate)??((x=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??r.firstWeekContainsDate??((j=(h=r.locale)==null?void 0:h.options)==null?void 0:j.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((p=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((y=(b=r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,o=Ls(t);if(!Qee(o))throw new RangeError("Invalid time value");let c=s.match(Hte).map(m=>{const g=m[0];if(g==="p"||g==="P"){const w=zte[g];return w(m,a.formatLong)}return m}).join("").match(Qte).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:qte(m)};if(Y4[g])return{isToken:!0,value:m};if(g.match(Jte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Vte(g)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Bte(g))&&Gte(g,s,String(t));const w=Y4[g[0]];return w(o,g,a.localize,d)}).join("")}function qte(t){const s=t.match(Wte);return s?s[1].replace(Zte,"'"):t}function Kte(t,s,n){const r=rh(),a=(n==null?void 0:n.locale)??r.locale??I_,i=2520,l=Cx(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let c,d;l>0?(c=Ls(s),d=Ls(t)):(c=Ls(t),d=Ls(s));const f=ete(d,c),x=(_p(d)-_p(c))/1e3,h=Math.round((f-x)/60);let j;if(h<2)return n!=null&&n.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,o):f<10?a.formatDistance("lessThanXSeconds",10,o):f<20?a.formatDistance("lessThanXSeconds",20,o):f<40?a.formatDistance("halfAMinute",0,o):f<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):h===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",h,o);if(h<45)return a.formatDistance("xMinutes",h,o);if(h<90)return a.formatDistance("aboutXHours",1,o);if(h<V4){const v=Math.round(h/60);return a.formatDistance("aboutXHours",v,o)}else{if(h<i)return a.formatDistance("xDays",1,o);if(h<$h){const v=Math.round(h/V4);return a.formatDistance("xDays",v,o)}else if(h<$h*2)return j=Math.round(h/$h),a.formatDistance("aboutXMonths",j,o)}if(j=Xee(d,c),j<12){const v=Math.round(h/$h);return a.formatDistance("xMonths",v,o)}else{const v=j%12,p=Math.trunc(j/12);return v<3?a.formatDistance("aboutXYears",p,o):v<9?a.formatDistance("overXYears",p,o):a.formatDistance("almostXYears",p+1,o)}}function P_(t,s){return Kte(t,Gee(t),s)}function d1(t,s){return zee(t,-s)}function Bh(t,s){return Fee(t,-s)}const Xte={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},ese=(t,s,n)=>{const r=Xte[t];let a;return typeof r=="string"?a=r:s===1?a=r.one:s===2?a=r.two:s<=10?a=r.threeToTen.replace("{{count}}",String(s)):a=r.other.replace("{{count}}",String(s)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"خلال "+a:"منذ "+a:a},tse={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},sse={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},nse={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rse={date:Nd({formats:tse,defaultWidth:"full"}),time:Nd({formats:sse,defaultWidth:"full"}),dateTime:Nd({formats:nse,defaultWidth:"full"})},ase={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},ise=t=>ase[t],lse={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},ose={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},cse={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},dse={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},use={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},fse={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},mse=t=>String(t),hse={ordinalNumber:mse,era:xi({values:lse,defaultWidth:"wide"}),quarter:xi({values:ose,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xi({values:cse,defaultWidth:"wide"}),day:xi({values:dse,defaultWidth:"wide"}),dayPeriod:xi({values:use,defaultWidth:"wide",formattingValues:fse,defaultFormattingWidth:"wide"})},xse=/^(\d+)(th|st|nd|rd)?/i,pse=/\d+/i,gse={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},jse={any:[/قبل/,/بعد/]},yse={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},vse={any:[/1/i,/2/i,/3/i,/4/i]},bse={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},wse={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},Nse={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Cse={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Mse={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},Sse={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},kse={ordinalNumber:E_({matchPattern:xse,parsePattern:pse,valueCallback:t=>parseInt(t,10)}),era:pi({matchPatterns:gse,defaultMatchWidth:"wide",parsePatterns:jse,defaultParseWidth:"any"}),quarter:pi({matchPatterns:yse,defaultMatchWidth:"wide",parsePatterns:vse,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pi({matchPatterns:bse,defaultMatchWidth:"wide",parsePatterns:wse,defaultParseWidth:"any"}),day:pi({matchPatterns:Nse,defaultMatchWidth:"wide",parsePatterns:Cse,defaultParseWidth:"any"}),dayPeriod:pi({matchPatterns:Mse,defaultMatchWidth:"any",parsePatterns:Sse,defaultParseWidth:"any"})},ol={code:"ar",formatDistance:ese,formatLong:rse,formatRelative:ise,localize:hse,match:kse,options:{weekStartsOn:6,firstWeekContainsDate:1}},Vh=["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"];function Lse(){const{user:t}=Mt();S9();const{toast:s}=lt(),n=$n(),r=ew();YK(),QK();const[a,i]=u.useState("market"),[l,o]=u.useState(!1),[c,d]=u.useState(!1),[f,x]=u.useState(null),[h,j]=u.useState({offerType:"",fromCurrency:"",toCurrency:""}),v=u.useRef(null),[p,b]=u.useState(""),[y,m]=u.useState(null),[g,w]=u.useState(null),[N,k]=u.useState(""),[L,S]=u.useState(""),{data:T=[],isLoading:E,refetch:$}=$e({queryKey:["/api/market"],queryFn:xd({on401:"throw"}),staleTime:30*1e3,refetchInterval:1e4}),{data:F=[],isLoading:Z,refetch:G}=$e({queryKey:["/api/market/my-offers"],queryFn:xd({on401:"throw"})}),{data:D,isLoading:B}=$e({queryKey:["/api/balance"],queryFn:xd({on401:"throw"})}),{data:de}=$e({queryKey:["/api/commission/earnings"]}),{data:U,isLoading:W}=$e({queryKey:["/api/market/messages"],staleTime:30*1e3,refetchInterval:1e4}),{data:re,isLoading:we}=$e({queryKey:["/api/market/offers"],staleTime:30*1e3,refetchInterval:1e4});Cu("market"),u.useEffect(()=>{console.log("🔧 تهيئة Socket.IO في صفحة السوق...");const O=localStorage.getItem("token");return O?(console.log("🔑 رمز المصادقة موجود، بدء الاتصال..."),r.connect(O),setTimeout(()=>{r.isConnected?(r.joinRoom("market-general"),r.joinRoom("market-USD-LYD"),console.log("🏠 انضم لغرف السوق: market-general, market-USD-LYD")):console.warn("⚠️ Socket.IO غير متصل بعد المهلة الزمنية")},2e3)):console.error("❌ لا يوجد رمز مصادقة في localStorage"),()=>{r.isConnected&&(r.leaveRoom("market-general"),r.leaveRoom("market-USD-LYD"),console.log("🚪 غادر غرف السوق"))}},[r]),u.useEffect(()=>{console.log(`🔗 حالة Socket.IO: متصل=${r.isConnected}, مصادق=${r.isAuthenticated}`)},[r.isConnected,r.isAuthenticated]);const be=xs({resolver:ps(see),defaultValues:{side:"sell",baseCurrency:"",quoteCurrency:"",minAmount:"",maxAmount:"",price:"",expirationMinutes:1440}}),J=xs({defaultValues:{amount:""}}),Fe=Ze({mutationFn:async O=>await(await ce("/api/market","POST",O)).json(),onSuccess:async(O,P)=>{s({title:"تم إنشاء العرض",description:"تم إنشاء عرض السوق بنجاح.",variant:"default"}),o(!1),be.reset();const ee=`🚀 عرض جديد في السوق!

📊 النوع: ${P.side==="sell"?"بيع":"شراء"}
💰 ${P.baseCurrency} → ${P.quoteCurrency}
📈 السعر: ${P.price} ${P.quoteCurrency}
📦 الكمية: ${P.minAmount} - ${P.maxAmount} ${P.baseCurrency}

✨ متاح الآن للتداول المباشر!`;try{await ce("/api/market/messages","POST",{content:ee}),console.log("✅ تم إرسال العرض إلى دردشة السوق بنجاح")}catch(C){console.log("⚠️ فشل في إرسال رسالة العرض للدردشة:",C)}n.invalidateQueries({queryKey:["/api/market"]}),n.invalidateQueries({queryKey:["/api/market/my-offers"]}),n.invalidateQueries({queryKey:["/api/balance"]}),n.invalidateQueries({queryKey:["/api/market/messages"]}),n.invalidateQueries({queryKey:["/api/market/offers"]})},onError:O=>{s({title:"فشل إنشاء العرض",description:O.message,variant:"destructive"})}}),Oe=Ze({mutationFn:async O=>{console.log("📤 إرسال طلب إلغاء العرض:",O);const ee=await(await ce(`/api/market/${O}/cancel`,"DELETE",{})).json();return console.log("📥 استجابة الخادم:",ee),ee},onSuccess:O=>{console.log("✅ تم إلغاء العرض بنجاح:",O),s({title:"تم إلغاء العرض",description:"تم إلغاء عرض السوق بنجاح وإعادة الأموال إلى رصيدك.",variant:"default"}),n.invalidateQueries({queryKey:["/api/market"]}),n.invalidateQueries({queryKey:["/api/market/my-offers"]}),n.invalidateQueries({queryKey:["/api/market/offers"]}),n.invalidateQueries({queryKey:["/api/balance"]}),$()},onError:O=>{console.error("❌ خطأ في إلغاء العرض:",O),s({title:"فشل إلغاء العرض",description:O.message,variant:"destructive"})}}),Ve=Ze({mutationFn:async({offerId:O,amount:P})=>await(await ce(`/api/market/${O}/execute`,"POST",{amount:P})).json(),onSuccess:O=>{s({title:"تم تنفيذ العملية",description:`تم شراء ${O.exchange.received} بنجاح.`,variant:"default"}),d(!1),J.reset(),n.invalidateQueries({queryKey:["/api/market"]}),n.invalidateQueries({queryKey:["/api/balance"]})},onError:O=>{s({title:"فشل تنفيذ العملية",description:O.message,variant:"destructive"})}}),Ne=Ze({mutationFn:async O=>(console.log("📤 إرسال رسالة:",O.content),(await ce("/api/market/messages","POST",O)).json()),onSuccess:()=>{b(""),n.invalidateQueries({queryKey:["/api/market/messages"]}),setTimeout(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},100)},onError:O=>{var P,ee;console.error("خطأ في إرسال الرسالة:",O),s({title:"فشل في إرسال الرسالة",description:((ee=(P=O==null?void 0:O.response)==null?void 0:P.data)==null?void 0:ee.message)||"حدث خطأ غير متوقع",variant:"destructive"})}}),qe=Ze({mutationFn:async O=>(await ce(`/api/market/${O.offerId}/execute`,"POST",{amount:O.amount,notes:O.notes})).json(),onSuccess:O=>{s({title:"تمت الصفقة بنجاح! ✅",description:`تم تنفيذ الصفقة رقم ${O.referenceNumber}`,variant:"default"}),m(null),w(null),k(""),S(""),n.invalidateQueries({queryKey:["/api/market/offers"]}),n.invalidateQueries({queryKey:["/api/market/messages"]}),n.invalidateQueries({queryKey:["/api/balance"]}),n.invalidateQueries({queryKey:["/api/transactions"]})},onError:O=>{var ee,C;console.error("خطأ في تنفيذ الصفقة:",O);const P=((C=(ee=O==null?void 0:O.response)==null?void 0:ee.data)==null?void 0:C.message)||O.message||"حدث خطأ غير متوقع";s({title:"فشل في تنفيذ الصفقة ❌",description:P,variant:"destructive"})}}),ve=O=>{const P={...O,minAmount:Number(O.minAmount),maxAmount:Number(O.maxAmount),price:Number(O.price)};Fe.mutate(P)},Ee=O=>{f&&Ve.mutate({offerId:f.id,amount:O.amount})},ne=O=>{if(console.log("🔄 محاولة إلغاء العرض رقم:",O),Oe.isPending){console.log("⏳ عملية الإلغاء جارية بالفعل، يُرجى الانتظار..."),s({title:"عملية جارية",description:"يُرجى الانتظار حتى انتهاء العملية الحالية",variant:"default"});return}confirm("هل أنت متأكد من رغبتك في إلغاء هذا العرض؟")?(console.log("✅ تأكيد إلغاء العرض، جاري الإرسال..."),Oe.mutate(O)):console.log("❌ تم إلغاء العملية من قبل المستخدم")},ke=O=>{x(O),J.setValue("amount",(O.available||O.remainingAmount||O.maxAmount||"0").toString()),d(!0)},tt=()=>{p.trim()&&Ne.mutate({content:p.trim()})},xt=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),tt())},Q=O=>{console.log("🎯 بدء التداول للعرض:",O),k(""),S("");const P=re==null?void 0:re.find(ee=>ee.id===O);P&&setTimeout(()=>{w(P),k(P.minAmount.toString()),m(O)},100)},oe=O=>{console.log("عرض تفاصيل العرض:",O)},Ae=()=>{if(!g||!N){s({title:"بيانات ناقصة",description:"يرجى تحديد الكمية",variant:"destructive"});return}const O=parseFloat(N),P=Math.min(Number(g.maxAmount),Number(g.remainingAmount));if(O<Number(g.minAmount)||O>P){s({title:"كمية غير صالحة",description:`يجب أن تكون الكمية بين ${g.minAmount} و ${P}`,variant:"destructive"});return}qe.mutate({offerId:g.id,amount:O,notes:L||""})};u.useEffect(()=>{if(y&&re){const O=re==null?void 0:re.find(P=>P.id===y);if(O){w(O);const P=parseFloat(N||"0");(P<Number(O.minAmount)||P>Math.min(Number(O.maxAmount),Number(O.remainingAmount)))&&k(O.minAmount.toString())}}},[re,y]),u.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[U]);const jt=u.useMemo(()=>{console.log("🔍 معالجة العروض:",T.length,"عروض مستلمة");const O=new Map;T.forEach(C=>{O.set(C.id,C)});const P=Array.from(O.values());console.log("✅ العروض الفريدة بعد إزالة التكرار:",P.length);const ee=P.filter(C=>!(h.offerType&&C.offerType!==h.offerType||h.fromCurrency&&C.fromCurrency!==h.fromCurrency||h.toCurrency&&C.toCurrency!==h.toCurrency));return console.log("📋 العروض النهائية بعد الفلترة:",ee.length),ee},[T,h]);return e.jsx(er,{page:"market",children:e.jsxs("div",{className:"golden-page-bg container mx-auto px-1 sm:px-4 py-2 sm:py-4 rtl min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 sm:mb-6",children:[e.jsx(yn,{}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>$(),className:"h-6 sm:h-10 px-2 sm:px-3 text-xs sm:text-sm",children:[e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"hidden sm:inline",children:"تحديث"})]}),e.jsxs("h1",{className:"text-lg sm:text-3xl font-bold text-center bg-gradient-to-l from-primary to-primary/70 text-transparent bg-clip-text",children:["سوق العملات ",e.jsx(KT,{className:"inline-block ml-1 sm:ml-2 h-4 w-4 sm:h-6 sm:w-6"})]}),e.jsx("div",{})]}),e.jsxs(cr,{value:a,onValueChange:i,className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-3 h-6 sm:h-10 p-0.5 sm:p-1 bg-slate-100 sm:bg-muted border sm:border-0 rounded-md sm:rounded-lg",children:[e.jsx(Ot,{value:"market",className:"flex items-center justify-center text-sm sm:text-base px-1 sm:px-3 py-0.5 sm:py-2 h-6 sm:h-8 data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:shadow-sm font-bold !text-black dark:!text-white",children:"عروض السوق"}),e.jsx(Ot,{value:"my-offers",className:"flex items-center justify-center text-base sm:text-lg px-1 sm:px-3 py-0.5 sm:py-2 h-6 sm:h-8 data-[state=active]:bg-green-500 data-[state=active]:text-white data-[state=active]:shadow-sm font-black !text-gray-900 dark:!text-gray-100",style:{color:"#1f2937",fontSize:"16px"},children:"عروضي"}),e.jsx(Ot,{value:"chat",className:"flex items-center justify-center text-sm sm:text-base px-1 sm:px-3 py-0.5 sm:py-2 h-6 sm:h-8 data-[state=active]:bg-purple-500 data-[state=active]:text-white data-[state=active]:shadow-sm font-bold !text-black dark:!text-white",children:"دردشة السوق"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 my-2 sm:my-4",children:[e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:de&&Object.keys(de.totals).length>0&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-green-50 dark:bg-green-950 rounded-md border border-green-200",children:[e.jsx(As,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-600"}),e.jsxs("span",{className:"text-xs sm:text-sm text-green-700 dark:text-green-400 font-medium",children:["عمولات مكتسبة: ",Object.entries(de.totals).map(([O,P])=>`${P.toFixed(2)} ${O}`).join(" + ")]})]})}),e.jsxs(M,{onClick:()=>o(!0),className:"h-6 sm:h-10 px-2 sm:px-4 text-xs sm:text-sm mt-2 sm:mt-0",children:[e.jsx(kn,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"hidden sm:inline",children:"إضافة عرض جديد"}),e.jsx("span",{className:"sm:hidden",children:"إضافة"})]})]}),a==="market"&&e.jsxs("div",{className:"mb-2 sm:mb-4 flex flex-wrap gap-1 sm:gap-2",children:[e.jsxs(Nt,{value:h.offerType===""?"all":h.offerType,onValueChange:O=>j({...h,offerType:O==="all"?"":O}),children:[e.jsx(bt,{className:"w-[100px] sm:w-[150px] h-6 sm:h-10 text-xs sm:text-sm",children:e.jsx(Ct,{placeholder:"نوع العرض"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل العروض"}),e.jsx(te,{value:"sell",children:"بيع"}),e.jsx(te,{value:"buy",children:"شراء"})]})]}),e.jsxs(Nt,{value:h.fromCurrency,onValueChange:O=>j({...h,fromCurrency:O==="all"?"":O}),children:[e.jsx(bt,{className:"w-[100px] sm:w-[150px] h-6 sm:h-10 text-xs sm:text-sm",children:e.jsx(Ct,{placeholder:"العملة المصدر"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل العملات"}),Vh.map(O=>e.jsx(te,{value:O,children:O},O))]})]}),e.jsxs(Nt,{value:h.toCurrency===""?"all":h.toCurrency,onValueChange:O=>j({...h,toCurrency:O==="all"?"":O}),children:[e.jsx(bt,{className:"w-[100px] sm:w-[150px] h-6 sm:h-10 text-xs sm:text-sm",children:e.jsx(Ct,{placeholder:"العملة الهدف"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل العملات"}),Vh.map(O=>e.jsx(te,{value:O,children:O},O))]})]}),(h.offerType||h.fromCurrency||h.toCurrency)&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>j({offerType:"",fromCurrency:"",toCurrency:""}),className:"h-6 sm:h-10 px-2 sm:px-3 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"مسح الفلاتر"}),e.jsx("span",{className:"sm:hidden",children:"مسح"})]})]}),e.jsx(Kt,{value:"market",children:E?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"جاري تحميل عروض السوق..."})]}):jt.length===0?e.jsxs("div",{className:"text-center p-8 border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground",children:"لا توجد عروض متاحة حالياً."}),e.jsx(M,{variant:"outline",className:"mt-4",onClick:()=>o(!0),children:"إنشاء أول عرض"})]}):e.jsx("div",{className:"grid gap-2 sm:gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:jt.map(O=>{var P,ee;return e.jsxs(_,{className:"overflow-hidden",children:[e.jsxs(q,{className:"pb-1 sm:pb-2 p-2 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ie,{variant:(O.side||O.offerType)==="sell"?"default":"outline",children:(O.side||O.offerType)==="sell"?"بيع":"شراء"}),e.jsx(ie,{variant:"outline",className:(P=O.userFullName)!=null&&P.includes("مكتب")?"bg-blue-100 text-blue-800 border-blue-300":"",children:(ee=O.userFullName)!=null&&ee.includes("مكتب")?"مكتب صرافة":"مستخدم عادي"})]}),e.jsxs(X,{className:"text-sm sm:text-lg mt-1 sm:mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold",children:[O.baseCurrency||O.fromCurrency," ",e.jsx(ec,{className:"inline-block mx-1 h-3 w-3 sm:h-4 sm:w-4"})," ",O.quoteCurrency||O.toCurrency]}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:O.userFullName})]}),e.jsxs(Se,{className:"text-sm sm:text-lg font-medium",children:["السعر المعلن: ",Zs(Number(O.price||O.rate||0),O.quoteCurrency||O.toCurrency),(O.side||O.offerType)==="sell"&&O.userId===(t==null?void 0:t.id)&&e.jsx("div",{className:"text-xs sm:text-sm text-orange-600 mt-1",children:"* تم خصم عمولة النظام من رصيدك عند النشر"})]})]}),e.jsx(z,{className:"p-2 sm:p-6",children:e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"الكمية المتاحة:"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:Zs(Number(O.available||O.remainingAmount||0),O.baseCurrency||O.fromCurrency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"الكمية الإجمالية:"}),e.jsx("span",{className:"text-xs sm:text-sm",children:Zs(Number(O.amount||O.maxAmount||0),O.baseCurrency||O.fromCurrency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"تاريخ العرض:"}),e.jsx("span",{className:"text-xs sm:text-sm",children:O.createdAt?Bn(new Date(O.createdAt),"dd MMMM yyyy",{locale:ol}):"غير معروف"})]})]})}),e.jsx(Os,{className:"pt-1 sm:pt-2 p-2 sm:p-6 flex justify-between",children:O.userId===(t==null?void 0:t.id)?e.jsx(ie,{variant:"outline",className:"border-0 text-xs sm:text-sm",children:"هذا عرضك"}):e.jsxs(M,{onClick:()=>ke(O),className:"w-full h-6 sm:h-10 text-xs sm:text-sm",children:[e.jsx(Cf,{className:"ml-1 sm:ml-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"تنفيذ الصفقة"}),e.jsx("span",{className:"sm:hidden",children:"تنفيذ"})]})})]},`market-offer-${O.id}-${O.createdAt}`)})})}),e.jsx(Kt,{value:"my-offers",children:Z?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"جاري تحميل عروضك..."})]}):F.length===0?e.jsxs("div",{className:"text-center p-8 border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground",children:"لم تقم بإنشاء أي عروض حتى الآن."}),e.jsx(M,{variant:"outline",className:"mt-4",onClick:()=>o(!0),children:"إنشاء أول عرض"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 sm:mb-4 p-2 sm:p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("p",{className:"text-xs sm:text-sm text-amber-800 font-medium",children:"💡 ملاحظة حول العمولات:"}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-700 mt-1",children:"• عند إنشاء عرض بيع، يتم خصم المبلغ + العمولة من رصيدك فوراً"}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-700",children:"• العمولة تُحول لحساب النظام فقط عند إتمام الشراء"}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-700",children:"• إذا ألغيت العرض، ستُرد العمولة لرصيدك"})]}),e.jsxs("div",{className:"hidden sm:block bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-700",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["عدد العروض: ",F.length]})}),e.jsxs(Gs,{children:[e.jsx(hm,{className:"text-gray-700 dark:text-gray-300",children:"قائمة عروضك في السوق"}),e.jsx(Ys,{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"التاريخ"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"نوع العرض"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"العملات"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"المبلغ"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"السعر"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"المتاح"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"الحالة"}),e.jsx(ae,{className:"text-gray-900 dark:text-gray-100 font-semibold",children:"الإجراءات"})]})}),e.jsx(Qs,{children:F.map(O=>e.jsxs(kt,{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(se,{className:"text-gray-900 dark:text-gray-100 font-medium",children:O.createdAt?Bn(new Date(O.createdAt),"dd/MM/yyyy",{locale:ol}):"غير معروف"}),e.jsx(se,{children:e.jsx(ie,{variant:(O.side||O.offerType)==="sell"?"default":"outline",className:"font-medium",children:(O.side||O.offerType)==="sell"?"بيع":"شراء"})}),e.jsxs(se,{className:"text-gray-900 dark:text-gray-100 font-medium",children:[e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:O.baseCurrency||O.fromCurrency}),e.jsx(Zd,{className:"inline-block h-4 w-4 mx-1"}),e.jsx("span",{className:"font-bold text-green-600 dark:text-green-400",children:O.quoteCurrency||O.toCurrency})]}),e.jsx(se,{className:"text-gray-900 dark:text-gray-100 font-bold",children:Zs(Number(O.maxAmount||O.amount||0),O.baseCurrency||O.fromCurrency)}),e.jsx(se,{className:"text-gray-900 dark:text-gray-100 font-bold text-green-600 dark:text-green-400",children:Zs(Number(O.price||O.rate||0),O.quoteCurrency||O.toCurrency)}),e.jsx(se,{className:"text-gray-900 dark:text-gray-100 font-bold",children:Zs(Number(O.remainingAmount||O.available||0),O.baseCurrency||O.fromCurrency)}),e.jsx(se,{children:e.jsx(ie,{variant:O.status==="open"||O.status==="active"?"default":O.status==="completed"?"secondary":"destructive",className:"font-medium",children:O.status==="open"||O.status==="active"?"نشط":O.status==="completed"?"مكتمل":"ملغي"})}),e.jsx(se,{children:(O.status==="open"||O.status==="active")&&e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>ne(O.id),disabled:Oe.isPending,className:"font-medium",children:[Oe.isPending?e.jsx(ys,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Xs,{className:"mr-2 h-4 w-4"}),Oe.isPending?"جاري الإلغاء...":"إلغاء"]})})]},O.id))})]})]}),e.jsx("div",{className:"sm:hidden space-y-1",children:F.map(O=>e.jsxs(_,{className:"p-1.5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx(ie,{variant:(O.side||O.offerType)==="sell"?"default":"outline",className:"text-xs px-1 py-0.5",children:(O.side||O.offerType)==="sell"?"بيع":"شراء"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:O.createdAt?Bn(new Date(O.createdAt),"dd/MM",{locale:ol}):"غير معروف"})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"العملات:"}),e.jsxs("span",{className:"font-medium",children:[O.baseCurrency||O.fromCurrency," → ",O.quoteCurrency||O.toCurrency]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"المبلغ:"}),e.jsx("span",{children:Zs(Number(O.maxAmount||O.amount||0),O.baseCurrency||O.fromCurrency)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"السعر:"}),e.jsx("span",{children:Zs(Number(O.price||O.rate||0),O.quoteCurrency||O.toCurrency)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"المتاح:"}),e.jsx("span",{children:Zs(Number(O.remainingAmount||O.available||0),O.baseCurrency||O.fromCurrency)})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1.5",children:[e.jsx(ie,{variant:O.status==="open"||O.status==="active"?"default":O.status==="completed"?"secondary":"destructive",className:"text-xs px-1 py-0.5",children:O.status==="open"||O.status==="active"?"نشط":O.status==="completed"?"مكتمل":"ملغي"}),(O.status==="open"||O.status==="active")&&e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>ne(O.id),disabled:Oe.isPending,className:"h-5 text-xs px-1.5",children:[Oe.isPending?e.jsx(ys,{className:"mr-0.5 h-2.5 w-2.5 animate-spin"}):e.jsx(Xs,{className:"mr-0.5 h-2.5 w-2.5"}),Oe.isPending?"...":"إلغاء"]})]})]},O.id))})]})}),e.jsx(Kt,{value:"chat",children:e.jsxs("div",{className:"flex flex-col h-[500px] sm:h-[700px] border rounded-lg",children:[e.jsxs("div",{className:"bg-muted p-2 sm:p-3 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm sm:text-lg",children:"دردشة السوق المباشر 💬"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsxs(ie,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:[Array.isArray(re)?re.length:0," عرض نشط"]}),e.jsxs(ie,{variant:"outline",className:"text-xs",children:[Array.isArray(U)?U.length:0," رسالة"]})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"تفاعل مع العروض المباشرة وابدأ التداول فوراً ✅"})]}),e.jsx("div",{ref:v,className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-2 sm:space-y-4",children:W?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"جاري تحميل الرسائل..."})]})}):(!U||!Array.isArray(U)||U.length===0)&&(!re||!Array.isArray(re)||re.length===0)?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Jn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد رسائل بعد..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"ابدأ المحادثة الآن!"})]})}):e.jsx(e.Fragment,{children:(()=>{const O=[];return Array.isArray(U)&&U.forEach(P=>{O.push({type:"message",data:P,createdAt:new Date(P.createdAt).getTime()})}),Array.isArray(re)&&re.forEach(P=>{O.push({type:"offer",data:P,createdAt:new Date(P.createdAt).getTime()})}),O.sort((P,ee)=>P.createdAt-ee.createdAt),O.map((P,ee)=>{if(P.type==="message"){const C=P.data;return e.jsx("div",{className:`flex ${C.userId===(t==null?void 0:t.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] sm:max-w-[70%] ${C.userId===(t==null?void 0:t.id)?"bg-primary text-primary-foreground":"bg-muted"} rounded-lg p-1.5 sm:p-3`,children:[C.userId!==(t==null?void 0:t.id)&&e.jsx("div",{className:"text-xs font-medium mb-0.5 sm:mb-1 opacity-75",children:C.userFullName}),e.jsx("div",{className:"text-xs sm:text-sm",children:C.content}),e.jsx("div",{className:"text-xs opacity-75 mt-0.5 sm:mt-1",children:new Date(C.createdAt).toLocaleTimeString("ar-LY")})]})},`message-${C.id}`)}else{const C=P.data;return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1.5 sm:p-4 pt-1 sm:pt-[5px] pb-1 sm:pb-[5px] pl-2 sm:pl-[20px] pr-2 sm:pr-[20px] mt-1 sm:mt-[8px] mb-1 sm:mb-[8px] max-w-[95%] sm:max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-3",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 flex items-center text-xs",children:[e.jsx(x0,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["عرض ",C.side==="sell"?"بيع":"شراء"," جديد"]}),e.jsx("span",{className:"sm:hidden",children:C.side==="sell"?"بيع":"شراء"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(C.createdAt).toLocaleTimeString("ar-LY")})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-1.5 sm:p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(ie,{variant:C.side==="sell"?"default":"outline",className:"text-xs px-1 py-0.5",children:C.side==="sell"?"بيع":"شراء"}),e.jsxs("span",{className:"font-medium text-xs",children:[C.baseCurrency," → ",C.quoteCurrency]})]}),e.jsx("span",{className:"text-xs text-muted-foreground hidden sm:block",children:C.userFullName})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1.5 sm:mb-3",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-green-600",children:C.price}),e.jsxs("span",{className:"text-muted-foreground",children:[" ",C.quoteCurrency]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["متاح: ",C.remainingAmount," ",C.baseCurrency]})]}),C.userId!==(t==null?void 0:t.id)&&C.status==="open"&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(M,{size:"sm",variant:"default",className:"flex-1 h-5 sm:h-8 text-xs px-1 sm:px-3",onClick:()=>Q(C.id),disabled:qe.isPending,children:[e.jsx(Cf,{className:"h-2 w-2 sm:h-3 sm:w-3 ml-1"}),e.jsxs("span",{className:"hidden sm:inline",children:[C.side==="sell"?"شراء":"بيع"," مباشر"]}),e.jsx("span",{className:"sm:hidden",children:C.side==="sell"?"شراء":"بيع"})]}),e.jsx(M,{size:"sm",variant:"outline",className:"h-5 sm:h-8 px-1.5 sm:px-2",onClick:()=>oe(C.id),children:e.jsx(Fn,{className:"h-2 w-2 sm:h-3 sm:w-3"})})]}),C.userId===(t==null?void 0:t.id)&&e.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-1 rounded",children:["📢 ",e.jsx("span",{className:"hidden sm:inline",children:"هذا عرضك الشخصي"}),e.jsx("span",{className:"sm:hidden",children:"عرضك"})]})]}),y===C.id&&g&&e.jsxs("div",{className:"mt-1 bg-yellow-50 border border-yellow-200 rounded p-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-yellow-800",children:"💱 تنفيذ مباشر"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>m(null),className:"h-4 w-4 p-0 text-yellow-600",children:e.jsx(Xs,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(pe,{type:"number",value:N,onChange:fe=>k(fe.target.value),placeholder:`${g.minAmount}-${Math.min(Number(g.maxAmount),Number(g.remainingAmount))}`,min:Number(g.minAmount),max:Math.min(Number(g.maxAmount),Number(g.remainingAmount)),step:"0.01",className:"h-6 text-xs flex-1"}),e.jsx(M,{onClick:Ae,disabled:!N||parseFloat(N)<=0||qe.isPending,size:"sm",className:"bg-green-600 hover:bg-green-700 h-6 px-2 text-xs",children:qe.isPending?"...":"✓"}),e.jsx(M,{variant:"outline",onClick:()=>m(null),size:"sm",className:"h-6 px-2 text-xs",children:"✕"})]}),N&&parseFloat(N)>0&&e.jsxs("div",{className:"text-xs text-green-700 bg-green-50 px-2 py-1 rounded",children:["الإجمالي: ",(parseFloat(N)*Number(g.price)).toFixed(2)," ",g.quoteCurrency]})]})]})]},`offer-${C.id}`)}})})()})}),e.jsxs("div",{className:"border-t p-2 sm:p-4",children:[e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx(pe,{value:p,onChange:O=>b(O.target.value),onKeyPress:xt,placeholder:"اكتب رسالتك هنا...",className:"flex-1 h-8 sm:h-10 text-xs sm:text-sm",disabled:Ne.isPending}),e.jsx(M,{onClick:tt,disabled:!p.trim()||Ne.isPending,size:"icon",className:"h-8 w-8 sm:h-10 sm:w-10",children:Ne.isPending?e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin"}):e.jsx(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 sm:mt-2 hidden sm:block",children:"اضغط Enter للإرسال • Shift+Enter لسطر جديد"})]})]})})]}),e.jsx(Ht,{open:l,onOpenChange:o,children:e.jsxs($t,{className:"w-[95vw] max-w-[400px] sm:max-w-[425px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إنشاء عرض جديد"}),e.jsx(ls,{children:"قم بإدخال تفاصيل العرض الذي ترغب في نشره في السوق."})]}),e.jsx(Bs,{...be,children:e.jsxs("form",{onSubmit:be.handleSubmit(O=>ve(O)),className:"space-y-2 sm:space-y-4",children:[e.jsx(_e,{control:be.control,name:"side",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نوع العرض"}),e.jsxs(Nt,{onValueChange:O.onChange,defaultValue:O.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر نوع العرض"})})}),e.jsxs(wt,{children:[e.jsx(te,{value:"sell",children:"بيع"}),e.jsx(te,{value:"buy",children:"شراء"})]})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"baseCurrency",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة المصدر"}),e.jsxs(Nt,{onValueChange:O.onChange,defaultValue:O.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة المصدر"})})}),e.jsx(wt,{children:Vh.map(P=>e.jsx(te,{value:P,children:P},P))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"quoteCurrency",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة الهدف"}),e.jsxs(Nt,{onValueChange:O.onChange,defaultValue:O.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة الهدف"})})}),e.jsx(wt,{children:Vh.map(P=>e.jsx(te,{value:P,children:P},P))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"minAmount",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الحد الأدنى للمبلغ"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",...O})}),e.jsx(Kr,{className:"text-xs sm:text-sm",children:be.watch("side")==="sell"&&be.watch("baseCurrency")&&e.jsxs("span",{children:["رصيدك الحالي:"," ",B?"جاري التحميل...":Vu(Number((D==null?void 0:D.balances[be.watch("baseCurrency")])||0),be.watch("baseCurrency"))]})}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"maxAmount",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الحد الأقصى للمبلغ"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",...O})}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"price",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"سعر الصرف"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.0001",...O})}),e.jsxs(Kr,{className:"text-xs sm:text-sm",children:["1 ",be.watch("baseCurrency")," ="," ",be.watch("price")||"?"," ",be.watch("quoteCurrency")]}),e.jsx(He,{})]})}),e.jsx(_e,{control:be.control,name:"expirationMinutes",render:({field:O})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"مدة انتهاء العرض (بالدقائق)"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",min:"5",max:"43200",placeholder:"1440 (يوم واحد)",...O,onChange:P=>O.onChange(Number(P.target.value))})}),e.jsx(Kr,{className:"text-xs sm:text-sm",children:"أدخل عدد الدقائق (أقل: 5 دقائق، أكثر: 43200 دقيقة = 30 يوماً). سيتم إلغاء العرض تلقائياً عند انتهاء المدة."}),e.jsx(He,{})]})}),e.jsx(_n,{children:e.jsx(M,{type:"submit",disabled:Fe.isPending,className:"w-full mt-2 sm:mt-4 h-8 sm:h-10 text-xs sm:text-sm",children:Fe.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الإنشاء..."]}):e.jsxs(e.Fragment,{children:[e.jsx(kn,{className:"ml-2 h-4 w-4"}),"إنشاء العرض"]})})})]})})]})}),f&&e.jsx(Ht,{open:c,onOpenChange:d,children:e.jsxs($t,{className:"w-[95vw] max-w-[400px] sm:max-w-[425px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تنفيذ عرض"}),e.jsxs(ls,{children:["أنت على وشك شراء ",f.fromCurrency," من ",f.userFullName]})]}),e.jsxs("form",{onSubmit:J.handleSubmit(Ee),className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"نوع العرض:"}),e.jsx(ie,{variant:f.offerType==="sell"?"default":"outline",children:f.offerType==="sell"?"بيع":"شراء"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"العملة:"}),e.jsxs("span",{className:"font-medium",children:[f.fromCurrency," ",e.jsx(ec,{className:"inline-block mx-1 h-4 w-4"})," ",f.toCurrency]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"سعر الصرف:"}),e.jsxs("span",{className:"font-medium",children:["1 ",f.fromCurrency," = ",f.rate," ",f.toCurrency]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"الكمية المتاحة:"}),e.jsx("span",{className:"font-medium",children:Vu(Number(f.available),f.fromCurrency)})]}),e.jsx(fs,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"رصيدك الحالي:"}),e.jsx("span",{className:"font-medium",children:B?"جاري التحميل...":Vu(Number((D==null?void 0:D.balances[f.toCurrency])||0),f.toCurrency)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium mb-1",children:"المبلغ المراد شراؤه:"}),e.jsx(pe,{id:"amount",type:"number",step:"0.01",max:Number(f.available),...J.register("amount",{required:"يرجى تحديد المبلغ",min:{value:.01,message:"يجب أن يكون المبلغ أكبر من صفر"},max:{value:Number(f.available),message:"المبلغ أكبر من المتاح"}})}),J.formState.errors.amount&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:J.formState.errors.amount.message})]}),J.watch("amount")&&e.jsxs("div",{className:"bg-muted p-2 sm:p-3 rounded-md",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm sm:text-base",children:"ملخص الصفقة:"}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"المبلغ المراد شراؤه:"}),e.jsx("span",{children:Vu(Number(J.watch("amount")),f.fromCurrency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"سعر الصرف:"}),e.jsxs("span",{children:[f.rate," ",f.toCurrency]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[e.jsx("span",{children:"المبلغ المطلوب دفعه:"}),e.jsx("span",{className:"text-green-600",children:Vu(Number(J.watch("amount"))*Number(f.rate),f.toCurrency)})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mt-2 p-2 sm:p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:"ملاحظة للمشتري:"}),e.jsx("p",{children:"• العمولة مدفوعة بواسطة البائع عند نشر العرض"}),e.jsx("p",{children:"• أنت تدفع فقط المبلغ المعروض - لا توجد عمولة إضافية"}),e.jsx("p",{children:"• المبلغ المعروض نهائي بدون أي خصومات"})]})]})]}),e.jsx(_n,{children:e.jsx(M,{type:"submit",disabled:Ve.isPending,className:"w-full mt-2 sm:mt-4 h-8 sm:h-10 text-xs sm:text-sm",children:Ve.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري التنفيذ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cf,{className:"ml-2 h-4 w-4"}),"تنفيذ الصفقة"]})})})]})]})})]})})}function __({pageKey:t,pageName:s,children:n}){const{data:r,isLoading:a}=Cu(t);return a?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحقق من الصلاحيات..."})]})}):r!=null&&r.isBlocked?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(_,{className:"w-full max-w-md mx-4",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-destructive",children:"تم تقييد الوصول"}),e.jsxs(Se,{children:["لا يمكنك الوصول إلى ",s]})]}),e.jsxs(z,{className:"text-center space-y-4",children:[r.reason&&e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"السبب:"}),e.jsx("p",{className:"font-medium",children:r.reason})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع الإدارة"})]}),e.jsx(Os,{children:e.jsx(Mn,{href:"/dashboard",className:"w-full",children:e.jsx(M,{className:"w-full",variant:"outline",children:"العودة للوحة التحكم"})})})]})}):e.jsx(e.Fragment,{children:n})}const Tse=["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"],Ese={LYD:{name:"دينار ليبي",flag:"🇱🇾"},USD:{name:"دولار أمريكي",flag:"🇺🇸"},EUR:{name:"يورو",flag:"🇪🇺"},TRY:{name:"ليرة تركية",flag:"🇹🇷"},AED:{name:"درهم إماراتي",flag:"🇦🇪"},EGP:{name:"جنيه مصري",flag:"🇪🇬"},TND:{name:"دينار تونسي",flag:"🇹🇳"},GBP:{name:"جنيه إسترليني",flag:"🇬🇧"}};function Ise(){const{user:t}=Mt(),{toast:s}=lt(),{isAndroidAppMode:n}=Mu(),r=t,[a,i]=u.useState("all"),{data:l,isLoading:o,refetch:c}=$e({queryKey:["/api/balance"],queryFn:xd({on401:"throw"})}),{data:d}=$e({queryKey:["/api/commission/earnings"]}),f=(l==null?void 0:l.balances)||{},h=[...Tse.map(b=>({currency:b,amount:Number(f[b]||0),info:Ese[b]||{name:b,flag:"🏳️"}}))].sort((b,y)=>b.amount>0&&y.amount===0?-1:b.amount===0&&y.amount>0?1:b.amount!==y.amount?y.amount-b.amount:b.currency.localeCompare(y.currency)),j=a==="all"?h:a==="with-balance"?h.filter(b=>b.amount>0):h.filter(b=>b.amount===0),v={LYD:1,USD:4.85,EUR:5.25,GBP:6.15,TRY:.15,AED:1.32,EGP:.1,TND:1.55},p=h.reduce((b,y)=>b+y.amount*(v[y.currency]||1),0);return e.jsx(__,{pageKey:"balance",pageName:"صفحة الأرصدة",children:e.jsxs("div",{className:"golden-page-bg container mx-auto p-4 rtl",children:[e.jsxs("div",{className:`flex justify-between items-center ${n?"mb-3":"mb-6"}`,children:[!n&&e.jsx(yn,{}),e.jsxs("h1",{className:"text-xl font-bold text-center text-primary-foreground bg-primary rounded-lg px-3 py-2",children:["الأرصدة ",e.jsx(wa,{className:`inline-block ml-2 ${n?"h-5 w-5":""}`})]}),!n&&e.jsx("div",{})]}),e.jsxs("div",{className:`grid ${n?"grid-cols-2 gap-2 mb-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"}`,children:[e.jsxs(_,{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${n?"text-xs":"text-[16px]"} text-center pt-[0px] pb-[0px] pl-[0px] pr-[0px] ml-[0px] mr-[0px] mt-[0px] mb-[0px]`,children:[e.jsxs(q,{className:`${n?"p-2 pb-1":"pb-1"}`,children:[e.jsx(X,{className:`tracking-tight text-[#0015ff] ${n?"text-sm":"text-[23px]"} font-bold text-center`,children:"إجمالي الرصيد"}),e.jsx(Se,{className:`${n?"text-xs":"text-sm"} text-[#990e0e] font-bold`,children:"بالدينار الليبي (تقريباً)"})]}),e.jsx(z,{className:`${n?"text-sm p-2 pt-0":"text-2xl"} font-bold text-[#0f380a]`,children:yr(p,"LYD")})]}),e.jsxs(_,{className:"rounded-lg border bg-card text-card-foreground shadow-sm text-center",children:[e.jsxs(q,{className:`${n?"p-2 pb-1":"pb-1"}`,children:[e.jsx(X,{className:`tracking-tight text-[#0015ff] font-bold ${n?"text-sm":"text-[23px]"}`,children:"عدد العملات"}),e.jsx(Se,{className:`${n?"text-xs":"text-[13px]"} font-bold bg-[transparent] text-[#8f2e2e]`,children:"العملات التي تملك فيها رصيد"})]}),e.jsx(z,{className:`${n?"text-sm p-2 pt-0":"text-2xl"} font-bold`,children:k4(h.filter(b=>b.amount>0).length)})]}),e.jsxs(_,{children:[e.jsxs(q,{className:`${n?"p-2 pb-1":"pb-1"}`,children:[e.jsx(X,{className:`tracking-tight ${n?"text-sm":"text-[23px]"} text-center font-bold text-[#0b0be6]`,children:"أعلى رصيد"}),e.jsx(Se,{className:`${n?"text-xs":"text-sm"} font-bold text-center text-[#ad2b3b]`,children:"العملة ذات أعلى رصيد"})]}),e.jsx(z,{className:`${n?"p-2 pt-0 text-xs":"p-6 pt-0 text-2xl"} font-bold text-center`,children:h.filter(b=>b.amount>0).length>0?e.jsxs(e.Fragment,{children:[h[0].info.flag," ",yr(h[0].amount,h[0].currency)]}):"لا يوجد"})]}),e.jsxs(_,{children:[e.jsxs(q,{className:`${n?"p-2 pb-1":"pb-1"}`,children:[e.jsx(X,{className:`tracking-tight font-bold text-[#020bfa] text-center ${n?"text-sm":"text-[23px]"}`,children:"نوع الحساب"}),e.jsx(Se,{className:`${n?"text-xs":"text-sm"} font-bold text-[#962929] text-center`,children:"مستوى حسابك الحالي"})]}),e.jsx(z,{className:`${n?"p-2 pt-0":"p-6 pt-0"} text-center`,children:(r==null?void 0:r.type)==="office"?e.jsx(ie,{variant:"default",className:`${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"مكتب صرافة"}):(r==null?void 0:r.type)==="agent"?r!=null&&r.hasExternalTransferAccess?e.jsx(ie,{className:`bg-green-600 text-white hover:bg-green-700 ${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"وكيل دولي"}):r!=null&&r.hasAgentAccess?e.jsx(ie,{className:`bg-blue-600 text-white hover:bg-blue-700 ${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"وكيل بين المدن"}):e.jsx(ie,{variant:"outline",className:`${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"وكيل (بانتظار الموافقة)"}):(r==null?void 0:r.type)==="admin"?e.jsx(ie,{variant:"destructive",className:`${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"مدير النظام"}):e.jsx(ie,{variant:"outline",className:`${n?"text-xs px-2 py-1":"text-lg px-3 py-1"}`,children:"مستخدم عادي"})})]}),d&&Object.keys(d.totals).length>0&&e.jsxs(_,{className:"border-green-200 bg-green-50 dark:bg-green-950",children:[e.jsxs(q,{className:`${n?"p-2 pb-1":"pb-1"}`,children:[e.jsx(X,{className:`tracking-tight font-bold text-green-700 dark:text-green-400 text-center ${n?"text-sm":"text-[20px]"}`,children:"العمولات المكتسبة"}),e.jsx(Se,{className:`${n?"text-xs":"text-sm"} font-bold text-green-600 dark:text-green-500 text-center`,children:"من صفقات السوق"})]}),e.jsx(z,{className:`${n?"p-2 pt-0":"p-6 pt-0"} text-center`,children:e.jsx("div",{className:`${n?"space-y-0":"space-y-1"}`,children:Object.entries(d.totals).map(([b,y])=>e.jsxs("div",{className:`${n?"text-xs":"text-lg"} font-bold text-green-800 dark:text-green-300`,children:[y.toFixed(2)," ",b]},b))})})]}),!n&&e.jsxs(_,{className:"border-0 shadow-md",children:[e.jsxs(q,{className:"pb-1",children:[e.jsx(X,{className:"text-lg",children:"رقم الحساب"}),e.jsx(Se,{children:"استخدمه للتحويلات واستلام الحوالات"})]}),e.jsxs(z,{className:"flex justify-between items-center",children:[e.jsx("div",{className:"bg-blue-50 p-3 px-4 rounded-md",children:e.jsx("p",{className:"text-2xl font-mono font-semibold text-blue-800",children:(r==null?void 0:r.accountNumber)||"غير متوفر"})}),(r==null?void 0:r.accountNumber)&&e.jsxs(M,{variant:"default",size:"sm",className:"flex items-center gap-2",onClick:()=>{navigator.clipboard.writeText(r.accountNumber||""),s({variant:"default",title:"تم النسخ",description:"تم نسخ رقم الحساب إلى الحافظة"})},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-clipboard",children:[e.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),e.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})]}),"نسخ الرقم"]})]})]})]}),e.jsxs(cr,{defaultValue:"all",value:a,onValueChange:i,className:"w-full mt-[0px] mb-[0px] ml-[0px] mr-[0px] pt-[0px] pb-[0px] pl-[11px] pr-[11px] bg-[000000]",children:[e.jsxs("div",{className:`flex justify-between items-center ${n?"mb-2":"mb-4"}`,children:[e.jsxs(Xn,{className:"h-10 items-center justify-center rounded-md p-1 grid w-[400px] grid-cols-3 ml-[0px] mr-[0px] bg-[#09090b] text-[#ffffffff] pl-[10px] pr-[10px] mt-[9px] mb-[9px] pt-[5px] pb-[5px]",children:[e.jsx(Ot,{value:"all",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm text-xs pt-[6px] pb-[6px] pl-[12px] pr-[12px] bg-[#16a34a] text-[#ffffff]",children:"جميع العملات"}),e.jsx(Ot,{value:"with-balance",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm text-xs mt-[0px] mb-[0px] bg-[#16a34a] text-[#ffffff]",children:"لها رصيد"}),e.jsx(Ot,{value:"without-balance",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm text-xs bg-[#16a34a] text-[#ffffffff]",children:"بدون رصيد"})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>c(),className:"bg-[#ffffff]",children:[e.jsx(ys,{className:`${n?"h-3 w-3 ml-1":"h-4 w-4 ml-2"}`}),!n&&"تحديث"]})]}),e.jsx(Kt,{value:a,className:"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-[#09090b]",children:o?e.jsxs("div",{className:`text-center ${n?"p-4":"p-8"}`,children:[e.jsx(ys,{className:`${n?"h-6 w-6":"h-8 w-8"} animate-spin mx-auto mb-4`}),e.jsx("p",{className:`${n?"text-sm":""}`,children:"جاري تحميل الأرصدة..."})]}):j.length===0?e.jsx("div",{className:`text-center ${n?"p-4":"p-8"} border rounded-lg`,children:e.jsxs("p",{className:`text-muted-foreground ${n?"text-sm":""}`,children:["لا توجد عملات ",a==="with-balance"?"لديك فيها رصيد":"بدون رصيد"]})}):e.jsx(_,{className:`${n?"text-xs":""}`,children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"h-12 px-4 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 w-8 text-xs bg-[#09090b] text-[#ffffff]",children:"#"}),e.jsx(ae,{className:"h-12 px-4 align-middle font-medium [&:has([role=checkbox])]:pr-0 text-xs bg-[#09090b] text-[#ffffff] text-center",children:"العملة"}),!n&&e.jsx(ae,{className:"h-12 px-4 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 bg-[#09090b] text-[#ffffff]",children:"الرمز"}),e.jsx(ae,{className:"h-12 px-4 align-middle font-medium [&:has([role=checkbox])]:pr-0 text-xs bg-[#09090b] text-[#ffffff] text-center",children:"الرصيد"}),!n&&e.jsx(ae,{className:"h-12 px-4 align-middle font-medium [&:has([role=checkbox])]:pr-0 bg-[#09090b] text-[#ffffffff] text-center",children:"القيمة التقريبية (LYD)"})]})}),e.jsx(Qs,{children:j.map((b,y)=>e.jsxs(kt,{children:[e.jsx(se,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 text-xs py-2 bg-[#ffffff] text-[#16a34a]",children:k4(y+1)}),e.jsxs(se,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 flex items-center bg-[#ffffff] text-[#16a34a]",children:[e.jsx("span",{className:`${n?"text-sm mr-1":"text-lg ml-2"}`,children:b.info.flag}),e.jsx("span",{className:`${n?"text-xs":""}`,children:n?b.currency:b.info.name})]}),!n&&e.jsx(se,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 text-[#16a34a]",children:b.currency}),e.jsx(se,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 font-medium text-xs py-2 bg-[#ffffff] text-[#16a34a] text-center",children:yr(b.amount,b.currency)}),!n&&e.jsxs(se,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 text-[#16a34a] text-center",children:["≈ ",yr(b.amount*(v[b.currency]||1),"LYD")]})]},b.currency))})]})})})]}),!n&&e.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:e.jsx("p",{children:"ملاحظة: أسعار التحويل التقريبية المستخدمة لإظهار القيمة بالدينار الليبي قد تختلف عن الأسعار الفعلية في السوق."})})]})})}const Ase=R.object({phoneNumber:R.string().min(10,{message:"رقم الهاتف يجب أن يتكون من 10 أرقام على الأقل"}).max(15,{message:"رقم الهاتف لا يجب أن يتجاوز 15 رقمًا"}),fullName:R.string().min(3,{message:"الاسم يجب أن يتكون من 3 أحرف على الأقل"}),city:R.string().min(2,{message:"يرجى اختيار المدينة"}),address:R.string().min(5,{message:"العنوان يجب أن يتكون من 5 أحرف على الأقل"}),idType:R.string().min(2,{message:"يرجى اختيار نوع الهوية"}),notes:R.string().optional()});function Dse(){const{user:t}=Mt(),{toast:s}=lt(),[,n]=_t(),[r,a]=u.useState("not_started"),i=u.useRef(null),[l,o]=u.useState(null),[c,d]=u.useState(!1),f=xs({resolver:ps(Ase),defaultValues:{phoneNumber:(t==null?void 0:t.phone)||"",fullName:(t==null?void 0:t.fullName)||"",city:(t==null?void 0:t.cityName)||"",address:"",idType:"",notes:""}});u.useEffect(()=>{document.title="توثيق الحساب - صرافة الخليج"},[]);const{data:x,isLoading:h,refetch:j}=$e({queryKey:["/api/user/verification"],enabled:!!t});u.useEffect(()=>{x&&a(x.status)},[x]),u.useEffect(()=>{t&&(f.setValue("phoneNumber",t.phone||""),f.setValue("fullName",t.fullName||""),f.setValue("city",t.cityName||""))},[t,f]);const v=g=>{g.target.files&&g.target.files.length>0&&o(g.target.files[0])},p=g=>{if(!l){s({title:"تحميل المستند مطلوب",description:"يرجى تحميل صورة للهوية الشخصية",variant:"destructive"});return}d(!0),setTimeout(()=>{d(!1),b.mutate(g)},1500)},b=Ze({mutationFn:async g=>{if(!l)throw new Error("يرجى اختيار ملف الهوية");const w=new FormData;w.append("id_photo",l),w.append("proof_of_address",l),w.append("fullName",g.fullName),w.append("phoneNumber",g.phoneNumber),w.append("city",g.city),w.append("address",g.address),w.append("idType",g.idType),w.append("notes",g.notes||"");const N=await fetch("/api/user/verify-account",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:w});if(!N.ok){const k=await N.json();throw new Error(k.message||"حدث خطأ أثناء إرسال الطلب")}return await N.json()},onSuccess:g=>{a("pending"),s({title:"تم تقديم طلب التوثيق",description:"تم استلام طلبك وسيتم مراجعته قريبًا. سيتم إشعارك عند الانتهاء من المراجعة.",variant:"default"}),Qe.invalidateQueries({queryKey:["/api/user/verification"]})},onError:g=>{s({title:"حدث خطأ",description:g.message||"فشل في تقديم طلب التوثيق، يرجى المحاولة مرة أخرى لاحقًا",variant:"destructive"})}}),y=()=>{a("not_started")},m=()=>{switch(r){case"pending":return e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 mx-auto rounded-full bg-yellow-100 flex items-center justify-center",children:e.jsx(ft,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 text-yellow-600 animate-spin"})}),e.jsx("h3",{className:"text-sm sm:text-lg lg:text-xl font-bold text-neutral-800",children:"طلب التوثيق قيد المراجعة"}),e.jsx("p",{className:"text-neutral-600 text-xs sm:text-sm lg:text-base px-2",children:"لقد استلمنا طلب التوثيق الخاص بك وهو قيد المراجعة حاليًا. سوف نقوم بإشعارك عند الانتهاء من المراجعة."}),e.jsx("div",{className:"p-2 sm:p-3 lg:p-4 bg-yellow-50 rounded-lg mx-2 sm:mx-0",children:e.jsx("p",{className:"text-yellow-800 text-xs sm:text-sm",children:"قد تستغرق عملية المراجعة من 24 إلى 48 ساعة عمل."})})]});case"verified":return e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(vl,{className:"h-8 w-8 sm:h-10 sm:w-10 text-green-600"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral-800",children:"تم توثيق حسابك بنجاح"}),e.jsx("p",{className:"text-neutral-600 text-sm sm:text-base px-2",children:"تهانينا! تم توثيق حسابك بنجاح ويمكنك الآن الاستفادة من كافة المزايا المتاحة للحسابات الموثقة."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-4 sm:mt-6 px-2 sm:px-0",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-neutral-50 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-neutral-800 text-sm sm:text-base",children:"حدود التحويل أعلى"}),e.jsx("p",{className:"text-neutral-600 text-xs sm:text-sm",children:"يمكنك الآن إجراء تحويلات بمبالغ أكبر"})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-neutral-50 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-neutral-800 text-sm sm:text-base",children:"رسوم أقل"}),e.jsx("p",{className:"text-neutral-600 text-xs sm:text-sm",children:"استمتع برسوم مخفضة على كافة المعاملات"})]})]})]});case"rejected":return e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(Xs,{className:"h-8 w-8 sm:h-10 sm:w-10 text-red-600"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral-800",children:"تم رفض طلب التوثيق"}),e.jsx("p",{className:"text-neutral-600 text-sm sm:text-base px-2",children:"للأسف، تم رفض طلب التوثيق الخاص بك. يرجى التحقق من المستندات المقدمة وإعادة المحاولة."}),e.jsx("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg mx-2 sm:mx-0",children:e.jsx("p",{className:"text-red-800 text-xs sm:text-sm",children:"سبب الرفض: المستندات المقدمة غير واضحة أو غير كاملة."})}),e.jsx(M,{onClick:y,className:"mt-3 sm:mt-4 text-sm sm:text-base",children:"إعادة تقديم الطلب"})]});default:return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 mx-auto rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Zt,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 text-blue-600"})}),e.jsx("h3",{className:"text-sm sm:text-lg lg:text-xl font-bold text-neutral-800 mt-3 sm:mt-4",children:"توثيق الحساب"}),e.jsx("p",{className:"text-neutral-600 mt-2 text-xs sm:text-sm lg:text-base px-2",children:"توثيق حسابك يمنحك العديد من المزايا مثل حدود تحويل أعلى ورسوم مخفضة واستخدام ميزات متقدمة."})]}),e.jsx(Bs,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(p),className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(_e,{control:f.control,name:"fullName",render:({field:g})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center text-xs sm:text-sm lg:text-base",children:[e.jsx(_i,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"الاسم الكامل"]}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل الاسم الكامل كما في الهوية",...g,dir:"rtl",readOnly:!0,className:"bg-muted cursor-not-allowed text-xs sm:text-sm lg:text-base h-8 sm:h-10"})}),e.jsx(He,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"هذا الاسم مأخوذ من بيانات حسابك المسجل"})]})}),e.jsx(_e,{control:f.control,name:"phoneNumber",render:({field:g})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center text-xs sm:text-sm lg:text-base",children:[e.jsx(h0,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"رقم الهاتف"]}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل رقم الهاتف للتواصل",...g,dir:"rtl",readOnly:!0,className:"bg-muted cursor-not-allowed text-xs sm:text-sm lg:text-base h-8 sm:h-10"})}),e.jsx(He,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"رقم الهاتف مأخوذ من بيانات حسابك المسجل"})]})}),e.jsx(_e,{control:f.control,name:"city",render:({field:g})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center text-xs sm:text-sm lg:text-base",children:[e.jsx(xc,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"المدينة (من بيانات التسجيل)"]}),e.jsx(Re,{children:e.jsx(pe,{...g,dir:"rtl",readOnly:!0,className:"bg-gray-50 cursor-not-allowed text-xs sm:text-sm lg:text-base h-8 sm:h-10",value:(t==null?void 0:t.cityName)||g.value||""})}),e.jsx(He,{})]})}),e.jsx(_e,{control:f.control,name:"idType",render:({field:g})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center text-xs sm:text-sm lg:text-base",children:[e.jsx(Zt,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"نوع الهوية"]}),e.jsxs(Nt,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(Re,{children:e.jsx(bt,{className:"text-xs sm:text-sm lg:text-base h-8 sm:h-10",children:e.jsx(Ct,{placeholder:"اختر نوع الهوية"})})}),e.jsxs(wt,{children:[e.jsx(te,{value:"بطاقة هوية شخصية",children:"بطاقة هوية شخصية"}),e.jsx(te,{value:"جواز سفر",children:"جواز سفر"}),e.jsx(te,{value:"رخصة قيادة",children:"رخصة قيادة"})]})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:f.control,name:"address",render:({field:g})=>e.jsxs(De,{className:"lg:col-span-2",children:[e.jsx(Pe,{className:"text-xs sm:text-sm lg:text-base",children:"العنوان"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل عنوان المكتب بالتفصيل",...g,dir:"rtl",className:"text-xs sm:text-sm lg:text-base h-8 sm:h-10"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:f.control,name:"notes",render:({field:g})=>e.jsxs(De,{className:"lg:col-span-2",children:[e.jsx(Pe,{className:"text-xs sm:text-sm lg:text-base",children:"ملاحظات إضافية (اختياري)"}),e.jsx(Re,{children:e.jsx(Un,{placeholder:"أي معلومات إضافية ترغب في إضافتها",...g,dir:"rtl",className:"resize-none h-16 lg:h-20 text-xs sm:text-sm lg:text-base"})}),e.jsx(He,{})]})})]}),e.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-3 sm:p-4 lg:p-6 space-y-2 sm:space-y-3 lg:space-y-4",children:[e.jsx("h4",{className:"font-medium text-center text-xs sm:text-sm lg:text-base",children:"تحميل صورة الهوية"}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("input",{type:"file",ref:i,onChange:v,className:"hidden",accept:"image/*"}),e.jsxs(M,{type:"button",variant:"outline",className:"flex items-center justify-center space-x-2 space-x-reverse text-xs sm:text-sm lg:text-base h-8 sm:h-10 px-3 sm:px-4",onClick:()=>{var g;return(g=i.current)==null?void 0:g.click()},children:[e.jsx(Rl,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{children:l?"تغيير المستند":"تحميل المستند"})]})]}),l&&e.jsxs("div",{className:"text-center text-xs sm:text-sm text-green-600",children:["تم اختيار: ",l.name]}),e.jsx("p",{className:"text-xs text-gray-500 text-center px-2",children:"يرجى تحميل صورة واضحة للهوية (JPG أو PNG). يجب أن تكون جميع المعلومات مقروءة بوضوح."})]}),e.jsx("div",{className:"flex justify-center pt-2 sm:pt-3 lg:pt-4",children:e.jsxs(M,{type:"submit",className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base h-10 sm:h-auto",disabled:c||b.isPending,children:[(c||b.isPending)&&e.jsx(ft,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2 animate-spin"}),"إرسال طلب التوثيق"]})})]})})]})}};return t?e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"hidden lg:block w-64 bg-white shadow-lg border-r border-gray-200 p-4",children:e.jsx(Ai,{})}),e.jsx("main",{className:"flex-1 px-2 sm:px-4 lg:px-8 py-2 sm:py-4 lg:py-8",dir:"rtl",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-xl overflow-hidden px-3 sm:px-6 lg:px-8 py-3 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-neutral-700",children:"توثيق الحساب"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-xs sm:text-sm h-8 sm:h-9 px-3 sm:px-4",children:[e.jsx(hl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"العودة للداش بورد"]})]}),e.jsxs(_,{className:"border-0 shadow-sm mb-4 sm:mb-6",children:[e.jsxs(q,{className:"pb-2 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsx(X,{className:"text-sm sm:text-lg lg:text-xl font-bold",children:"معلومات التوثيق"}),e.jsx(Se,{className:"text-xs sm:text-sm lg:text-base",children:"حساب موثق يتيح لك الاستفادة الكاملة من خدمات صرافة الخليج"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:h?e.jsx("div",{className:"flex justify-center p-3 sm:p-6",children:e.jsx(ft,{className:"h-6 w-6 sm:h-8 sm:w-8 animate-spin text-neutral-400"})}):m()}),e.jsx(Os,{className:"bg-neutral-50 text-xs lg:text-sm text-neutral-500 italic px-3 sm:px-6 py-2 sm:py-3",children:"يتم التحقق من المعلومات المقدمة وفقًا للوائح وأنظمة مكافحة غسل الأموال وتمويل الإرهاب."})]})]})})})]}):null}R.object({receiverOfficeId:R.number({required_error:"يرجى اختيار مكتب الصرافة المستلم"}),amount:R.number({required_error:"يرجى إدخال المبلغ"}).positive("يجب أن يكون المبلغ أكبر من صفر"),currency:R.string().default("LYD"),customCommission:R.string().optional().refine(t=>{if(!t||t==="")return!0;const s=parseFloat(t);return!isNaN(s)&&s>=0},"العمولة يجب أن تكون رقماً موجباً أو صفر")});function Pse(){return e.jsx(er,{page:"city_transfers",children:e.jsx(_se,{})})}function _se(){var xt,Q;const{user:t}=Mt(),{toast:s}=lt(),{isAndroidAppMode:n}=Mu(),[r,a]=u.useState("send"),[i,l]=u.useState(""),[o,c]=u.useState(!1),[d,f]=u.useState(null),[x,h]=u.useState({originCity:"",destinationCity:"",minAmount:"",maxAmount:"",commission:"",perMilleRate:"",currencyCode:"LYD"}),[j,v]=u.useState(!1),[p,b]=u.useState(null);t==null||t.type;const[y,m]=u.useState(null),[g,w]=u.useState(""),[N,k]=u.useState("LYD"),[L,S]=u.useState("all");u.useState("");const{data:T,isLoading:E,error:$}=$e({queryKey:["/api/agents"],queryFn:async()=>await(await ce("/api/agents","GET")).json()}),{data:F,isLoading:Z}=$e({queryKey:["/api/balance"],queryFn:async()=>await(await ce("/api/balance","GET")).json()}),{data:G,isLoading:D,refetch:B}=$e({queryKey:["/api/city-transfers"],queryFn:async()=>await(await ce("/api/city-transfers","GET")).json()}),{data:de,isLoading:U,refetch:W}=$e({queryKey:["/api/city-commission-tiers"],queryFn:async()=>await(await ce("/api/city-commission-tiers","GET")).json(),enabled:(t==null?void 0:t.type)==="agent"||(t==null?void 0:t.type)==="admin"}),re=async()=>{try{if(!x.minAmount){s({variant:"destructive",title:"خطأ",description:"يرجى إدخال المبلغ الأدنى"});return}if(!x.commission&&!x.perMilleRate){s({variant:"destructive",title:"خطأ",description:"يرجى إدخال إما العمولة الثابتة أو النسبة في الألف"});return}if(x.commission&&x.perMilleRate){s({variant:"destructive",title:"خطأ",description:"لا يمكن تحديد العمولة الثابتة والنسبة في الألف معاً"});return}const oe={originCity:x.originCity||null,destinationCity:x.destinationCity||null,minAmount:parseFloat(x.minAmount),maxAmount:x.maxAmount?parseFloat(x.maxAmount):null,commission:x.commission?parseFloat(x.commission):null,perMilleRate:x.perMilleRate?parseFloat(x.perMilleRate):null,currencyCode:x.currencyCode};if(d)await ce(`/api/city-commission-tiers/${d.id}`,"PUT",oe),s({title:"تم التحديث",description:"تم تحديث شريحة العمولة بنجاح"});else{const jt=await(await ce("/api/city-commission-tiers","POST",oe)).json();s({title:"تم الحفظ",description:"تم إضافة شريحة العمولة الجديدة بنجاح"})}await Qe.invalidateQueries({queryKey:["/api/city-commission-tiers"]}),c(!1),f(null),h({originCity:"",destinationCity:"",minAmount:"",maxAmount:"",commission:"",perMilleRate:"",currencyCode:"LYD"})}catch(oe){console.error("خطأ في حفظ شريحة العمولة:",oe),s({variant:"destructive",title:"خطأ في حفظ الشريحة",description:oe.message||"حدث خطأ أثناء حفظ شريحة العمولة"})}},we=async oe=>{try{await ce(`/api/city-commission-tiers/${oe}`,"DELETE"),s({title:"تم الحذف",description:"تم حذف شريحة العمولة بنجاح"}),await Qe.invalidateQueries({queryKey:["/api/city-commission-tiers"]})}catch(Ae){console.error("خطأ في حذف شريحة العمولة:",Ae),s({variant:"destructive",title:"خطأ",description:"حدث خطأ أثناء حذف شريحة العمولة"})}},be=async oe=>{if(oe.preventDefault(),!i.trim()){s({variant:"destructive",title:"خطأ",description:"يرجى إدخال رمز الحوالة"});return}try{v(!0);const jt=await(await ce("/api/agent/receive-city-transfer","POST",{code:i})).json();b(jt),l(""),s({title:"تم استلام الحوالة",description:"تم استلام الحوالة وإضافة المبلغ إلى رصيدك بنجاح"}),Qe.invalidateQueries({queryKey:["/api/balance"]}),B()}catch(Ae){console.error("خطأ في استلام الحوالة:",Ae);let jt="حدث خطأ أثناء استلام الحوالة";if(Ae.response)try{jt=(await Ae.response.json()).message||jt}catch{}s({variant:"destructive",title:"خطأ في استلام الحوالة",description:jt})}finally{v(!1)}},J=Ze({mutationFn:async oe=>await(await ce("/api/city-transfers/send","POST",oe)).json(),onSuccess:oe=>{s({title:"تم إنشاء الحوالة بنجاح",description:`رمز الحوالة: ${oe.transferCode}`}),m(null),w(""),k("LYD"),a("history"),Qe.invalidateQueries({queryKey:["/api/balance"]}),B()},onError:oe=>{s({title:"فشل إنشاء الحوالة",description:oe.message,variant:"destructive"})}}),Fe=()=>{if(!y){s({title:"خطأ في النموذج",description:"يرجى اختيار مكتب الصرافة المستلم",variant:"destructive"});return}if(!g||isNaN(Number(g))||Number(g)<=0){s({title:"خطأ في النموذج",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}J.mutate({receiverOfficeId:y,amount:Number(g),currency:N})},Oe=Number(g)||0,Ne=Oe*.01,qe=T==null?void 0:T.find(oe=>oe.id===y),[ve,Ee]=u.useState(0),[ne,ke]=u.useState("");u.useEffect(()=>{y&&Oe>0&&N?(async()=>{try{const jt=await(await ce("POST","/api/calculate-receiver-commission",{receiverOfficeId:y,amount:Oe,currency:N,senderCity:t==null?void 0:t.city,receiverCity:qe==null?void 0:qe.city})).json();Ee(Number(jt.commission)),ke(jt.source)}catch(Ae){console.error("خطأ في حساب عمولة المكتب:",Ae),Ee(Oe*.015),ke("default")}})():(Ee(0),ke(""))},[y,Oe,N,qe==null?void 0:qe.city,t==null?void 0:t.city]);const tt=Oe+Ne+ve;return t&&t.countryId!==1?e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(Ai,{}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs(_,{className:"w-full max-w-4xl mx-auto mt-8 shadow-lg",children:[e.jsxs(q,{className:"bg-gradient-to-r from-red-50 to-pink-50",children:[e.jsx(X,{className:"text-xl text-red-800",children:"الحوالات بين المدن"}),e.jsx(Se,{className:"text-red-700",children:"هذه الخدمة متاحة للمستخدمين المسجلين في ليبيا فقط"})]}),e.jsxs(z,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🇱🇾"}),e.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"التحويل بين المدن متاح للمكاتب المسجلة في ليبيا فقط. للتحويلات الدولية، يرجى استخدام خدمة التحويل الدولي."}),e.jsx(M,{asChild:!0,variant:"outline",size:"lg",children:e.jsx("a",{href:"/inter-office-transfer",className:"text-primary",children:"التحويل الدولي"})})]})]})})]}):(t==null?void 0:t.type)!=="agent"&&(t==null?void 0:t.type)!=="admin"?e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(Ai,{}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs(_,{className:"w-full max-w-4xl mx-auto mt-8 shadow-lg",children:[e.jsxs(q,{className:"bg-gradient-to-r from-amber-50 to-orange-50",children:[e.jsx(X,{className:"text-xl text-amber-800",children:"الحوالات بين المدن"}),e.jsx(Se,{className:"text-amber-700",children:"هذه الخدمة متاحة فقط لمكاتب الصرافة والإدارة"})]}),e.jsxs(z,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏢"}),e.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"يجب أن تكون مسجلاً كمكتب صرافة للوصول إلى هذه الخدمة."}),e.jsx(M,{asChild:!0,variant:"outline",size:"lg",children:e.jsx("a",{href:"/upgrade-request",className:"text-primary",children:"طلب ترقية الحساب"})})]})]})})]}):e.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 ${n?"pb-20":"flex"}`,children:[!n&&e.jsx("div",{className:"w-64 bg-white shadow-lg border-r border-gray-200 p-4",children:e.jsx(Ai,{})}),e.jsx("main",{className:`flex-1 ${n?"p-3":"p-6"}`,children:e.jsxs("div",{className:`${n?"w-full":"max-w-7xl mx-auto"}`,children:[!n&&e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsxs("div",{className:"mb-3 sm:mb-6 lg:mb-8 text-center",children:[e.jsx("h1",{className:"text-lg sm:text-2xl lg:text-4xl font-bold text-slate-800 mb-1 sm:mb-2 bg-gradient-to-l from-blue-600 to-blue-400 bg-clip-text text-transparent",children:"الحوالات بين المدن"}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-lg text-slate-600 px-2",children:"إرسال الحوالات بين مكاتب الصرافة في المدن المختلفة"})]}),e.jsxs(_,{className:`shadow-xl border-0 bg-white/90 backdrop-blur-sm ${n?"rounded-lg":""}`,children:[!n&&e.jsx(q,{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(uo,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(X,{className:"text-2xl text-slate-800",children:"إدارة الحوالات"}),e.jsx(Se,{className:"text-slate-600",children:"نظام متقدم لإرسال الحوالات المالية بين المدن بأمان وسهولة"})]})]})}),e.jsx(z,{className:"p-2 sm:p-4 lg:p-8",children:e.jsxs(cr,{defaultValue:"send",value:r,onValueChange:a,className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-4 h-8 sm:h-10 lg:h-12 gap-0.5 sm:gap-1 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg sm:rounded-xl p-0.5 sm:p-1",children:[e.jsxs(Ot,{value:"send",className:"flex items-center justify-center font-semibold text-xs sm:text-sm lg:text-base data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1"}),e.jsx("span",{className:"sm:hidden",children:"إرسال"}),e.jsx("span",{className:"hidden sm:block lg:hidden",children:"إرسال حوالة"}),e.jsx("span",{className:"hidden lg:block",children:"إرسال حوالة"})]}),e.jsxs(Ot,{value:"receive",className:"flex items-center justify-center font-semibold text-xs sm:text-sm lg:text-base data-[state=active]:bg-green-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(Cr,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1"}),e.jsx("span",{className:"sm:hidden",children:"استلام"}),e.jsx("span",{className:"hidden sm:block lg:hidden",children:"استلام حوالة"}),e.jsx("span",{className:"hidden lg:block",children:"استلام حوالة"})]}),e.jsxs(Ot,{value:"history",className:"flex items-center justify-center font-semibold text-xs sm:text-sm lg:text-base data-[state=active]:bg-purple-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(la,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1"}),e.jsx("span",{className:"sm:hidden",children:"السجل"}),e.jsx("span",{className:"hidden sm:block lg:hidden",children:"سجل الحوالات"}),e.jsx("span",{className:"hidden lg:block",children:"سجل الحوالات"})]}),e.jsxs(Ot,{value:"commission-settings",className:"flex items-center justify-center font-semibold text-xs sm:text-sm lg:text-base data-[state=active]:bg-orange-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1"}),e.jsx("span",{className:"sm:hidden",children:"العمولة"}),e.jsx("span",{className:"hidden sm:block lg:hidden",children:"إعدادات العمولة"}),e.jsx("span",{className:"hidden lg:block",children:"إعدادات العمولة"})]})]}),e.jsx(Kt,{value:"send",className:"mt-3 sm:mt-6 lg:mt-8",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:grid lg:grid-cols-3 lg:gap-8 lg:space-y-0",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:col-span-2 lg:space-y-6",children:[e.jsxs("div",{className:"hidden lg:block bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl border-l-4 border-blue-500",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(Vr,{className:"h-5 w-5"}),"إرسال حوالة جديدة"]}),e.jsx("p",{className:"text-blue-700",children:"أرسل الأموال بأمان إلى أي مكتب صرافة في المدن المختلفة عبر نظامنا المتقدم"})]}),Z?e.jsx("div",{className:"flex justify-center py-3 sm:py-6 lg:py-8",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ft,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium text-xs sm:text-sm lg:text-base",children:"جاري تحميل بيانات الرصيد..."})]})}):e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-2 sm:p-4 lg:p-6 rounded-lg sm:rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-green-700 font-medium mb-1",children:"الرصيد المتاح"}),e.jsx("p",{className:"text-lg sm:text-2xl lg:text-3xl font-bold text-green-800",children:(xt=F==null?void 0:F.balances)!=null&&xt[N]?Zs(Number(((Q=F==null?void 0:F.balances)==null?void 0:Q[N])||0),N):"0 "+N})]}),e.jsx("div",{className:"text-2xl sm:text-4xl lg:text-5xl",children:"💰"})]})}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-lg sm:rounded-xl border border-slate-200 shadow-sm space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"receiverOffice",className:"text-xs sm:text-sm lg:text-base font-semibold text-slate-700",children:"مكتب الصرافة المستلم"}),E?e.jsxs("div",{className:"flex justify-center py-3 sm:py-4",children:[e.jsx(ft,{className:"h-4 w-4 sm:h-5 sm:w-5 animate-spin text-blue-600"}),e.jsx("span",{className:"mr-2 text-xs sm:text-sm",children:"جاري تحميل المكاتب..."})]}):$?e.jsxs("div",{className:"text-red-600 text-center py-3 sm:py-4 text-xs sm:text-sm",children:["خطأ في تحميل المكاتب: ",String($)]}):e.jsxs(Nt,{value:(y==null?void 0:y.toString())||"",onValueChange:oe=>m(Number(oe)),children:[e.jsx(bt,{id:"receiverOffice",className:"h-8 sm:h-10 lg:h-12 text-xs sm:text-sm lg:text-base",children:e.jsx(Ct,{placeholder:"اختر مكتب الصرافة"})}),e.jsx(wt,{children:T!=null&&T.length?T.map(oe=>e.jsx(te,{value:oe.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xc,{className:"h-4 w-4 text-slate-500"}),oe.fullName," - ",oe.city]})},oe.id)):e.jsx(te,{value:"none",disabled:!0,children:"لا توجد مكاتب صرافة محلية متاحة للحوالات بين المدن"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"amount",className:"text-xs sm:text-sm lg:text-base font-semibold text-slate-700",children:"المبلغ"}),e.jsx(pe,{id:"amount",type:"number",value:g,onChange:oe=>w(oe.target.value),placeholder:"أدخل المبلغ",className:"h-8 sm:h-10 lg:h-12 text-xs sm:text-sm lg:text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"currency",className:"text-xs sm:text-sm lg:text-base font-semibold text-slate-700",children:"العملة"}),e.jsxs(Nt,{value:N,onValueChange:k,children:[e.jsx(bt,{id:"currency",className:"h-8 sm:h-10 lg:h-12 text-xs sm:text-sm lg:text-base",children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"LYD",children:"دينار ليبي (LYD)"}),e.jsx(te,{value:"USD",children:"دولار أمريكي (USD)"}),e.jsx(te,{value:"EUR",children:"يورو (EUR)"})]})]})]})]}),e.jsx(M,{onClick:Fe,disabled:J.isPending,className:"w-full h-9 sm:h-10 lg:h-12 text-xs sm:text-sm lg:text-base bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 shadow-lg",children:J.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 animate-spin"}),"جاري الإرسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"}),e.jsx("span",{className:"lg:hidden",children:"إرسال"}),e.jsx("span",{className:"hidden lg:inline",children:"إرسال الحوالة"})]})})]})]}),e.jsxs("div",{className:"hidden lg:block space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 p-6 rounded-xl border border-slate-200",children:[e.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-4",children:"ملخص التكاليف"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"المبلغ الأساسي:"}),e.jsx("span",{className:"font-medium",children:Zs(Oe,N)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"عمولة النظام:"}),e.jsx("span",{className:"font-medium text-blue-600",children:Zs(Ne,N)})]}),ve>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"عمولة المكتب المستلم:"}),e.jsxs("span",{className:"font-medium text-orange-600",children:[Zs(ve,N),ne==="tier_permille"?e.jsx("span",{className:"text-xs text-purple-600 mr-1",children:"(نسبة في الألف)"}):ne==="tier_fixed"?e.jsx("span",{className:"text-xs text-green-600 mr-1",children:"(ثابتة)"}):ne==="agent_percentage"?e.jsx("span",{className:"text-xs text-blue-600 mr-1",children:"(نسبة إدارية)"}):ne==="agent_fixed"?e.jsx("span",{className:"text-xs text-green-600 mr-1",children:"(ثابتة إدارية)"}):ne==="default"?e.jsx("span",{className:"text-xs text-blue-600 mr-1",children:"(افتراضي 1.5%)"}):null]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-slate-800",children:"المجموع المطلوب:"}),e.jsx("span",{className:"text-blue-600",children:Zs(tt,N)})]}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-700",children:"📋 المجموع = المبلغ + عمولة النظام + عمولة المكتب المستلم"}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["💰 ",Zs(Oe,N)," + ",Zs(Ne,N)," + ",Zs(ve,N)," = ",Zs(tt,N)]})]})]})]}),qe&&e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[e.jsx("h4",{className:"text-lg font-bold text-amber-800 mb-3",children:"تفاصيل المكتب المستلم"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(uo,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium",children:qe.fullName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xc,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{children:qe.city})]}),e.jsxs("div",{className:"text-amber-700 text-sm",children:["العمولة: ",Zs(ve,N),ne==="tier_permille"?e.jsx("span",{className:"text-purple-600 text-xs mr-1",children:"(نسبة في الألف)"}):ne==="tier_fixed"?e.jsx("span",{className:"text-green-600 text-xs mr-1",children:"(ثابتة)"}):ne==="agent_percentage"?e.jsx("span",{className:"text-blue-600 text-xs mr-1",children:"(نسبة إدارية)"}):ne==="agent_fixed"?e.jsx("span",{className:"text-green-600 text-xs mr-1",children:"(ثابتة إدارية)"}):ne==="default"?e.jsx("span",{className:"text-blue-600 text-xs mr-1",children:"(افتراضي 1.5%)"}):null]})]})]})]})]})}),e.jsx(Kt,{value:"receive",className:"mt-3 sm:mt-6 lg:mt-8",children:e.jsxs("div",{className:"w-full lg:max-w-2xl lg:mx-auto",children:[e.jsxs("div",{className:"hidden lg:block bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl border-l-4 border-green-500 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(Cr,{className:"h-5 w-5"}),"استلام حوالة بين المدن"]}),e.jsx("p",{className:"text-green-700",children:"أدخل رمز الحوالة المكون من 6 أرقام لاستلام المبلغ وإضافته إلى رصيدك"})]}),e.jsx("form",{onSubmit:be,className:"space-y-3 sm:space-y-4 lg:space-y-6",children:e.jsxs(_,{className:"shadow-lg",children:[e.jsxs(q,{className:"hidden lg:block",children:[e.jsx(X,{className:"text-xl text-slate-800",children:"استلام حوالة جديدة"}),e.jsx(Se,{children:"أدخل رمز الحوالة الذي تلقيته من المرسل"})]}),e.jsx(z,{className:"p-3 sm:p-4 lg:p-6 space-y-3 lg:space-y-4",children:e.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[e.jsx(Ce,{htmlFor:"receive-code",className:"text-xs sm:text-sm lg:text-base font-semibold text-slate-700",children:"رمز الحوالة"}),e.jsx(pe,{id:"receive-code",type:"text",value:i,onChange:oe=>l(oe.target.value),placeholder:"أدخل رمز الحوالة المكون من 6 أرقام",disabled:j,className:"h-9 sm:h-10 lg:h-12 text-sm sm:text-base lg:text-lg font-medium text-center",maxLength:6})]})}),e.jsx(Os,{className:"p-3 sm:p-4 lg:p-6 pt-0 sm:pt-0 lg:pt-6",children:e.jsx(M,{type:"submit",disabled:j,className:"w-full h-9 sm:h-10 lg:h-12 text-xs sm:text-sm lg:text-base bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 shadow-lg",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 animate-spin"}),"جاري الاستلام..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cr,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"}),e.jsx("span",{className:"lg:hidden",children:"استلام"}),e.jsx("span",{className:"hidden lg:inline",children:"استلام الحوالة"})]})})})]})}),p&&e.jsxs(_,{className:"mt-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 shadow-lg",children:[e.jsxs(q,{children:[e.jsxs(X,{className:"text-green-800 flex items-center gap-2",children:[e.jsx(Zr,{className:"h-5 w-5"}),"تم استلام الحوالة بنجاح"]}),e.jsx(Se,{className:"text-green-700",children:"تفاصيل الحوالة المستلمة"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border",children:[e.jsx("span",{className:"text-slate-600",children:"المبلغ المستلم:"}),e.jsx("span",{className:"font-bold text-green-800",children:Zs(p.amount,p.currency)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border",children:[e.jsx("span",{className:"text-slate-600",children:"العمولة:"}),e.jsx("span",{className:"font-bold text-orange-600",children:Zs(p.commission,p.currency)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-100 rounded-lg border border-green-300",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"إجمالي المبلغ المضاف لرصيدك:"}),e.jsx("span",{className:"font-bold text-green-800 text-lg",children:Zs(p.total,p.currency)})]})]})})]}),e.jsx(_,{className:"mt-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:e.jsx(z,{className:"pt-6",children:e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 shrink-0"}),e.jsx("p",{children:"يتكون رمز الحوالة من 6 أرقام يقوم المرسل بتقديمه لك"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 shrink-0"}),e.jsx("p",{children:"سيتم إضافة المبلغ المستلم إلى رصيدك فوراً بعد استلام الحوالة"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 shrink-0"}),e.jsx("p",{children:'يمكنك عرض سجل جميع الحوالات المستلمة في تبويب "سجل الحوالات"'})]})]})})})]})}),e.jsx(Kt,{value:"history",className:"mt-3 sm:mt-6 lg:mt-8",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 lg:gap-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:"سجل الحوالات"}),e.jsxs(Nt,{value:L,onValueChange:S,children:[e.jsx(bt,{className:"w-full sm:w-48 h-8 sm:h-9 lg:h-10 text-xs sm:text-sm",children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الحوالات"}),e.jsx(te,{value:"pending",children:"قيد الانتظار"}),e.jsx(te,{value:"completed",children:"مكتملة"}),e.jsx(te,{value:"failed",children:"فاشلة"})]})]})]}),D?e.jsx("div",{className:"flex justify-center py-6 sm:py-8",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ft,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin text-purple-600"}),e.jsx("span",{className:"text-purple-600 font-medium text-sm sm:text-base",children:"جاري تحميل سجل الحوالات..."})]})}):G!=null&&G.length?e.jsx("div",{className:"grid gap-4",children:G==null?void 0:G.filter(oe=>L==="all"||oe.status===L).map(oe=>e.jsxs(_,{className:"overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 space-x-reverse",children:[e.jsx("div",{className:`p-2 sm:p-3 rounded-full ${oe.status==="completed"?"bg-green-100 text-green-600":oe.status==="pending"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:oe.status==="completed"?e.jsx(Zr,{className:"h-4 w-4 sm:h-5 sm:w-5"}):oe.status==="pending"?e.jsx(la,{className:"h-4 w-4 sm:h-5 sm:w-5"}):e.jsx(Jd,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 text-sm sm:text-base",children:oe.receiverOfficeName}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500",children:["كود: ",oe.code]})]})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-800",children:Zs(oe.amount,oe.currency)}),e.jsx(ie,{variant:oe.status==="completed"?"default":oe.status==="pending"?"secondary":"destructive",children:oe.status==="completed"?"مكتملة":oe.status==="pending"?"قيد الانتظار":"فاشلة"})]})]}),e.jsx("div",{className:"px-4 sm:px-6 pb-3 sm:pb-4 text-xs sm:text-sm text-slate-500",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-4",children:[e.jsxs("span",{children:["تاريخ الإنشاء: ",fy(new Date(oe.createdAt))]}),oe.completedAt&&e.jsxs("span",{children:["تاريخ الاستلام: ",fy(new Date(oe.completedAt))]})]})})]},oe.id))}):e.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:"📋"}),e.jsx("p",{className:"text-slate-500 text-sm sm:text-lg",children:"لا توجد حوالات في السجل"})]})]})}),e.jsx(Kt,{value:"commission-settings",className:"mt-3 sm:mt-6 lg:mt-8",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"hidden lg:block bg-gradient-to-r from-orange-50 to-amber-50 p-6 rounded-xl border-l-4 border-orange-500",children:[e.jsxs("h3",{className:"text-xl font-bold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"إعدادات عمولة المكتب"]}),e.jsx("p",{className:"text-orange-700",children:"قم بإعداد شرائح العمولة حسب المدن ومقادير المبالغ"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 lg:gap-0",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-slate-800",children:"شرائح العمولة"}),e.jsxs(M,{onClick:()=>c(!0),className:"bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600 h-8 sm:h-9 lg:h-10 text-xs sm:text-sm px-3 sm:px-4",children:[e.jsx(kn,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"}),e.jsx("span",{className:"hidden sm:inline",children:"إضافة شريحة جديدة"}),e.jsx("span",{className:"sm:hidden",children:"إضافة"})]})]}),U?e.jsx("div",{className:"flex justify-center py-6 sm:py-8",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ft,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin text-orange-600"}),e.jsx("span",{className:"text-orange-600 font-medium text-sm sm:text-base",children:"جاري تحميل شرائح العمولة..."})]})}):de!=null&&de.length?e.jsx("div",{className:"grid gap-4",children:de.map(oe=>e.jsx(_,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsx(ie,{variant:"outline",className:"font-medium text-xs sm:text-sm w-fit",children:oe.currencyCode}),e.jsxs("span",{className:"font-semibold text-slate-800 text-sm sm:text-base",children:[oe.originCity||"جميع المدن"," → ",oe.destinationCity||"جميع المدن"]})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-slate-600",children:[e.jsx("span",{children:"المبلغ: "}),e.jsxs("span",{className:"font-medium",children:[oe.minAmount," - ",oe.maxAmount||"بدون حد أقصى"]})]}),e.jsx("div",{className:"text-xs sm:text-sm",children:oe.perMilleRate?e.jsxs("span",{className:"text-purple-600 font-medium",children:["نسبة في الألف: ",oe.perMilleRate,"‰"]}):e.jsxs("span",{className:"text-green-600 font-medium",children:["عمولة ثابتة: ",oe.commission," ",oe.currencyCode]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 sm:mt-0",children:[e.jsx(M,{variant:"outline",size:"sm",className:"h-8 sm:h-9 px-2 sm:px-3",onClick:()=>{f(oe),h({originCity:oe.originCity||"",destinationCity:oe.destinationCity||"",minAmount:oe.minAmount||"",maxAmount:oe.maxAmount||"",commission:oe.commission||"",perMilleRate:oe.perMilleRate||"",currencyCode:oe.currencyCode||"LYD"}),c(!0)},children:e.jsx(Wf,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(M,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 sm:h-9 px-2 sm:px-3",onClick:()=>we(oe.id),children:e.jsx(is,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})},oe.id))}):e.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:"📊"}),e.jsx("p",{className:"text-slate-500 text-sm sm:text-lg",children:"لا توجد شرائح عمولة محددة"}),e.jsx("p",{className:"text-slate-400 text-xs sm:text-sm mt-2",children:"سيتم استخدام العمولة الافتراضية 1.5%"})]}),o&&e.jsxs(_,{className:"border-orange-200 bg-orange-50",children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-orange-800",children:d?"تحرير شريحة العمولة":"إضافة شريحة عمولة جديدة"}),e.jsx(Se,{className:"text-orange-700",children:"حدد المدن والمبالغ ونوع العمولة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"originCity",children:"المدينة المرسلة (اختياري)"}),e.jsx(pe,{id:"originCity",value:x.originCity,onChange:oe=>h({...x,originCity:oe.target.value}),placeholder:"اتركه فارغاً لجميع المدن"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"destinationCity",children:"المدينة المستقبلة (اختياري)"}),e.jsx(pe,{id:"destinationCity",value:x.destinationCity,onChange:oe=>h({...x,destinationCity:oe.target.value}),placeholder:"اتركه فارغاً لجميع المدن"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"minAmount",children:"المبلغ الأدنى"}),e.jsx(pe,{id:"minAmount",type:"number",value:x.minAmount,onChange:oe=>h({...x,minAmount:oe.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"maxAmount",children:"المبلغ الأقصى (اختياري)"}),e.jsx(pe,{id:"maxAmount",type:"number",value:x.maxAmount,onChange:oe=>h({...x,maxAmount:oe.target.value}),placeholder:"بدون حد أقصى"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"currencyCode",children:"العملة"}),e.jsxs(Nt,{value:x.currencyCode,onValueChange:oe=>h({...x,currencyCode:oe}),children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"LYD",children:"دينار ليبي (LYD)"}),e.jsx(te,{value:"USD",children:"دولار أمريكي (USD)"}),e.jsx(te,{value:"EUR",children:"يورو (EUR)"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"commission",children:"عمولة ثابتة"}),e.jsx(pe,{id:"commission",type:"number",step:"0.01",value:x.commission,onChange:oe=>h({...x,commission:oe.target.value,perMilleRate:""}),placeholder:"مبلغ ثابت"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"perMilleRate",children:"نسبة في الألف (‰)"}),e.jsx(pe,{id:"perMilleRate",type:"number",step:"0.1",value:x.perMilleRate,onChange:oe=>h({...x,perMilleRate:oe.target.value,commission:""}),placeholder:"نسبة في الألف"})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ملاحظة:"})," يمكنك تحديد إما عمولة ثابتة أو نسبة في الألف، ولكن ليس كلاهما معاً."]})})]}),e.jsxs(Os,{className:"flex justify-between",children:[e.jsx(M,{variant:"outline",onClick:()=>{c(!1),f(null),h({originCity:"",destinationCity:"",minAmount:"",maxAmount:"",commission:"",perMilleRate:"",currencyCode:"LYD"})},children:"إلغاء"}),e.jsx(M,{className:"bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600",onClick:re,children:d?"تحديث الشريحة":"إضافة الشريحة"})]})]})]})})]})})]})]})})]})}const Rse=R.object({city:R.string().min(2,{message:"يجب أن يكون اسم المدينة مكون من حرفين على الأقل"}),commissionRate:R.string().refine(t=>{const s=Number(t);return!isNaN(s)&&s>=0&&s<=10},{message:"يجب أن تكون نسبة العمولة رقماً موجباً بين 0 و 10"})});function Ose(){const{toast:t}=lt();$n();const[s,n]=u.useState([]),[r,a]=u.useState(!0),[i,l]=u.useState(null),[o,c]=u.useState(!1),d=xs({resolver:ps(Rse),defaultValues:{city:"",commissionRate:""}}),f=async()=>{a(!0),l(null);try{const j=await ce("/api/office-commissions");if(!j.ok){const p=await j.json();throw new Error(p.message||"حدث خطأ أثناء تحميل بيانات العمولات")}const v=await j.json();n(v)}catch(j){console.error("خطأ في تحميل بيانات العمولات:",j),l(j.message||"حدث خطأ أثناء تحميل بيانات العمولات")}finally{a(!1)}};u.useEffect(()=>{f()},[]);const x=async j=>{try{const v=await ce("/api/office-commissions","POST",j);if(!v.ok){const b=await v.json();throw new Error(b.message||"حدث خطأ أثناء حفظ العمولة")}const p=await v.json();t({title:"تم بنجاح",description:p.message||"تم تحديث عمولة المكتب للمدينة المحددة"}),c(!1),d.reset(),f()}catch(v){console.error("خطأ في إضافة/تحديث العمولة:",v),t({variant:"destructive",title:"خطأ",description:v.message||"حدث خطأ أثناء حفظ العمولة، يرجى المحاولة مرة أخرى"})}},h=async j=>{try{await ce(`/api/office-commissions/${j}`,"DELETE"),t({title:"تم بنجاح",description:"تم حذف عمولة المدينة"}),f()}catch(v){console.error("خطأ في حذف العمولة:",v),t({variant:"destructive",title:"خطأ",description:"حدث خطأ أثناء حذف العمولة، يرجى المحاولة مرة أخرى"})}};return e.jsxs(_,{className:"shadow-md",children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-xl font-bold",children:"إدارة عمولات المكتب حسب المدن"}),e.jsx(Se,{children:"تحديد نسبة العمولة التي يريد المكتب استلامها مقابل الحوالات القادمة من مدن مختلفة"})]}),e.jsx(z,{children:r?e.jsx("div",{className:"flex justify-center p-4",children:"جاري التحميل..."}):i?e.jsx("div",{className:"text-destructive p-4",children:i}):e.jsx(e.Fragment,{children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"المدينة"}),e.jsx(ae,{children:"نسبة العمولة (%)"}),e.jsx(ae,{className:"text-left",children:"إجراءات"})]})}),e.jsx(Qs,{children:s.length===0?e.jsx(kt,{children:e.jsx(se,{colSpan:3,className:"text-center py-4",children:"لا توجد عمولات مخصصة للمدن حتى الآن"})}):s.map(j=>e.jsxs(kt,{children:[e.jsx(se,{children:j.city}),e.jsxs(se,{children:[j.commissionRate,"%"]}),e.jsx(se,{children:e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h(j.id),children:e.jsx(is,{className:"h-4 w-4 text-destructive"})})})]},j.id))})]})})}),e.jsx(Os,{className:"flex justify-end",children:e.jsxs(Ht,{open:o,onOpenChange:c,children:[e.jsx(si,{asChild:!0,children:e.jsx(M,{variant:"default",children:"إضافة عمولة لمدينة جديدة"})}),e.jsxs($t,{className:"sm:max-w-[425px] rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تحديد عمولة لمدينة"}),e.jsx(ls,{children:"أدخل اسم المدينة ونسبة العمولة التي تريد تطبيقها على الحوالات"})]}),e.jsx(Bs,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-4",children:[e.jsx(_e,{control:d.control,name:"city",render:({field:j})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المدينة"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل اسم المدينة",...j})}),e.jsx(He,{})]})}),e.jsx(_e,{control:d.control,name:"commissionRate",render:({field:j})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نسبة العمولة (%)"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل نسبة العمولة",type:"number",step:"0.1",min:"0",max:"10",...j})}),e.jsx(He,{})]})}),e.jsx(_n,{children:e.jsx(M,{type:"submit",className:"mt-4",children:"حفظ العمولة"})})]})})]})]})})]})}function zse(){const{user:t}=Mt(),[,s]=_t();return u.useEffect(()=>{t&&t.type!=="agent"&&s("/dashboard")},[t,s]),!t||t.type!=="agent"?null:e.jsxs("div",{className:"container mx-auto p-4 rtl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"إدارة عمولات المكتب حسب المدن"}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-muted-foreground mb-4",children:"يمكنك تحديد نسب العمولة المختلفة حسب المدن التي تتعامل معها. سيتم تطبيق هذه النسب عند إرسال الحوالات من المدن المحددة."})}),e.jsx(Ose,{}),e.jsx("div",{className:"mt-8 flex justify-between items-center",children:e.jsx("button",{onClick:()=>s("/dashboard"),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-md transition-colors",children:"العودة للوحة التحكم"})})]})}function Fse(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState([]),[i,l]=u.useState(!0),[o,c]=u.useState(""),[d,f]=u.useState("");u.useEffect(()=>{t&&t.type!=="agent"&&s("/dashboard")},[t,s]),u.useEffect(()=>{x()},[]);const x=async()=>{try{l(!0);const v=await(await ce("/api/agent/my-commissions","GET")).json();a(v.commissions)}catch(j){console.error("خطأ في تحميل العمولات:",j),n({variant:"destructive",title:"خطأ",description:"حدث خطأ أثناء تحميل بيانات العمولات"})}finally{l(!1)}},h=async j=>{if(j.preventDefault(),!o||!d){n({variant:"destructive",title:"خطأ في البيانات",description:"يرجى تحديد المدينة ونسبة العمولة"});return}try{const v=parseFloat(d);if(isNaN(v)||v<0||v>10){n({variant:"destructive",title:"خطأ في البيانات",description:"يجب أن تكون نسبة العمولة رقماً موجباً بين 0 و 10"});return}await ce("/api/agent/set-commission","POST",{city:o,commission_rate:v}),n({title:"تم بنجاح",description:"تم حفظ نسبة العمولة للمدينة بنجاح"}),x(),c(""),f("")}catch(v){console.error("خطأ في حفظ العمولة:",v),n({variant:"destructive",title:"خطأ",description:"حدث خطأ أثناء حفظ العمولة"})}};return!t||t.type!=="agent"?null:e.jsxs("div",{className:"container mx-auto p-4 rtl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"إدارة عمولات الحوالات حسب المدينة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(_,{className:"shadow-lg",children:[e.jsxs(q,{children:[e.jsx(X,{children:"إضافة عمولة جديدة"}),e.jsx(Se,{children:"حدد المدينة ونسبة العمولة التي تريد تطبيقها على الحوالات"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"city",className:"text-sm font-medium",children:"المدينة"}),e.jsx(pe,{id:"city",placeholder:"أدخل اسم المدينة",value:o,onChange:j=>c(j.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"commission_rate",className:"text-sm font-medium",children:"نسبة العمولة (%)"}),e.jsx(pe,{id:"commission_rate",type:"number",step:"0.01",min:"0",max:"10",placeholder:"أدخل نسبة العمولة",value:d,onChange:j=>f(j.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يجب أن تكون القيمة بين 0 و 10"})]})]}),e.jsx(Os,{children:e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",children:"حفظ العمولة"})})]})]}),e.jsxs(_,{className:"shadow-lg",children:[e.jsxs(q,{children:[e.jsx(X,{children:"العمولات الحالية"}),e.jsx(Se,{children:"قائمة بجميع العمولات المخصصة للمدن المختلفة"})]}),e.jsx(z,{children:i?e.jsx("div",{className:"py-4 text-center",children:"جاري التحميل..."}):r.length===0?e.jsx("div",{className:"py-4 text-center text-muted-foreground",children:"لم يتم تحديد أي عمولات خاصة للمدن حتى الآن"}):e.jsx("ul",{className:"divide-y",children:r.map((j,v)=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:j.city}),e.jsxs("span",{className:"text-sm px-2 py-1 bg-purple-100 text-purple-800 rounded-md",children:[j.commission_rate,"%"]})]},v))})})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[e.jsx(M,{onClick:()=>s("/dashboard"),variant:"outline",className:"bg-gray-100 hover:bg-gray-200 text-gray-800",children:"العودة للوحة التحكم"}),e.jsx(M,{onClick:()=>s("/office-commission"),variant:"outline",className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:"الانتقال إلى الإدارة المتقدمة"})]})]})}function Use(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(""),[i,l]=u.useState(!1),[o,c]=u.useState(null);if(!t||t.type!=="agent")return setTimeout(()=>s("/dashboard"),100),null;const d=async f=>{if(f.preventDefault(),!r.trim()){n({variant:"destructive",title:"خطأ",description:"يرجى إدخال رمز الحوالة"});return}try{l(!0);const h=await(await ce("/api/agent/receive-city-transfer","POST",{code:r})).json();c(h),a(""),n({title:"تم استلام الحوالة",description:"تم استلام الحوالة وإضافة المبلغ إلى رصيدك بنجاح"})}catch(x){console.error("خطأ في استلام الحوالة:",x);let h="حدث خطأ أثناء استلام الحوالة";if(x.response)try{h=(await x.response.json()).message||h}catch{}n({variant:"destructive",title:"خطأ في استلام الحوالة",description:h})}finally{l(!1)}};return e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"w-64 bg-white shadow-lg border-r border-gray-200 p-4",children:e.jsx(Ai,{user:t})}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",dir:"rtl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"استلام حوالة بين المدن"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(_,{className:"shadow-lg",children:[e.jsxs(q,{children:[e.jsx(X,{children:"استلام حوالة جديدة"}),e.jsx(Se,{children:"أدخل كود الحوالة المكون من 6 أرقام لاستلام المبلغ"})]}),e.jsxs("form",{onSubmit:d,children:[e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"transfer-code",children:"كود الحوالة"}),e.jsx(pe,{id:"transfer-code",placeholder:"أدخل كود الحوالة المكون من 6 أرقام",value:r,onChange:f=>a(f.target.value),disabled:i,className:"text-lg font-medium",maxLength:6,autoFocus:!0})]})}),e.jsx(Os,{children:e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري التحقق..."]}):"استلام الحوالة"})})]})]}),e.jsxs(_,{className:`shadow-lg ${o?"border-green-500":""}`,children:[e.jsxs(q,{children:[e.jsx(X,{children:"تفاصيل الحوالة"}),e.jsx(Se,{children:"معلومات الحوالة التي تم استلامها"})]}),e.jsx(z,{children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 p-4 rounded-lg",children:[e.jsx("div",{className:"font-bold text-lg mb-2",children:o.message}),e.jsx("p",{className:"text-sm",children:"تم إضافة المبلغ والعمولة إلى رصيدك"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"مبلغ الحوالة:"}),e.jsxs("span",{className:"text-lg font-bold",children:[o.amount.toLocaleString()," ",o.currency]})]}),e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"عمولة المكتب:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["+ ",o.commission.toLocaleString()," ",o.currency]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"font-bold text-lg",children:"المجموع:"}),e.jsxs("span",{className:"text-xl font-bold text-green-700",children:[o.total.toLocaleString()," ",o.currency]})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"قم بإدخال كود الحوالة لعرض التفاصيل هنا"})})}),e.jsx(Os,{children:e.jsx(M,{variant:"outline",className:"w-full",onClick:()=>s("/city-transfers"),children:"عرض سجل الحوالات"})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg rtl",children:[e.jsx("h3",{className:"font-bold text-yellow-800 mb-2",children:"ملاحظات هامة"}),e.jsxs("ul",{className:"space-y-2 text-sm text-yellow-700 list-disc list-inside",children:[e.jsx("li",{children:"تأكد من أن الحوالة موجهة إلى مكتبك قبل إدخال الكود"}),e.jsx("li",{children:"الحوالات المستلمة لا يمكن استرجاعها"}),e.jsx("li",{children:"سيتم إضافة المبلغ مع العمولة إلى رصيدك مباشرة بعد الاستلام"}),e.jsx("li",{children:"في حالة وجود أي مشكلة في استلام الحوالة، يرجى التواصل مع الإدارة"})]})]})})]})})]})}function $se(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState("internal"),[i,l]=u.useState([]),[o,c]=u.useState(!1);u.useEffect(()=>{t&&t.type!=="admin"&&s("/dashboard")},[t,s]),u.useEffect(()=>{d(r)},[r]);const d=async j=>{c(!0);try{let v="";j==="internal"&&(v="/api/admin/internal-transfers"),j==="city"&&(v="/api/admin/city-transfers"),j==="international"&&(v="/api/admin/inter-office-transfers");const b=await(await ce("GET",v)).json(),y=Array.isArray(b)?b.map(m=>({id:m.id,amount:m.amount,currency:m.currency||"LYD",sender_name:m.sender_name||m.senderName,receiver_name:m.receiver_name||m.receiverName,commission:m.commission||m.commission_for_system||m.commissionForSystem,status:m.status||"completed",code:m.code||"-",createdAt:m.created_at||m.createdAt})):[];l(y)}catch(v){console.error("خطأ في جلب الحوالات:",v),n({variant:"destructive",title:"خطأ",description:"حدث خطأ أثناء جلب بيانات الحوالات"})}finally{c(!1)}},f=j=>!j||j==="completed"?e.jsx(ie,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"تم"}):j==="pending"?e.jsx(ie,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:"قيد الانتظار"}):e.jsx(ie,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"ملغاة"}),x=j=>new Date(j).toLocaleString("ar-LY"),h=j=>j.commission?j.commission:j.commission_for_system?j.commission_for_system:"0";return!t||t.type!=="admin"?null:e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"w-64 bg-white shadow-lg border-r border-gray-200 p-4",children:e.jsx(Ai,{user:t})}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"سجل الحوالات - لوحة تحكم المشرف"}),e.jsxs(M,{onClick:()=>d(r),variant:"outline",size:"sm",children:[e.jsx(ys,{className:"h-4 w-4 ml-2"}),"تحديث"]})]}),e.jsxs(_,{className:"shadow-md",children:[e.jsxs(q,{children:[e.jsx(X,{children:"عرض جميع الحوالات"}),e.jsx(Se,{children:"اختر نوع الحوالات التي ترغب في عرضها"})]}),e.jsxs(z,{children:[e.jsx(cr,{value:r,onValueChange:a,className:"mb-6",children:e.jsxs(Xn,{className:"mb-4",children:[e.jsx(Ot,{value:"internal",children:"الحوالات الداخلية"}),e.jsx(Ot,{value:"city",children:"حوالات بين المدن"}),e.jsx(Ot,{value:"international",children:"حوالات دولية"})]})}),o?e.jsx("div",{className:"flex justify-center p-12",children:e.jsx(ft,{className:"h-12 w-12 animate-spin text-primary"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"النوع"}),e.jsx(ae,{children:"من"}),e.jsx(ae,{children:"إلى"}),e.jsx(ae,{children:"المبلغ"}),e.jsx(ae,{children:"العملة"}),e.jsx(ae,{children:"العمولة"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"الكود"}),e.jsx(ae,{children:"التاريخ"})]})}),e.jsx(Qs,{children:i.length===0?e.jsx(kt,{children:e.jsx(se,{colSpan:9,className:"text-center",children:"لا توجد حوالات لعرضها"})}):i.map(j=>e.jsxs(kt,{children:[e.jsx(se,{children:r==="internal"?"داخلية":r==="city"?"مدينية":"دولية"}),e.jsx(se,{children:j.sender_name}),e.jsx(se,{children:j.receiver_name}),e.jsx(se,{children:j.amount}),e.jsx(se,{children:j.currency||"LYD"}),e.jsx(se,{children:h(j)}),e.jsx(se,{children:f(j.status)}),e.jsx(se,{children:j.code||"-"}),e.jsx(se,{children:x(j.createdAt||j.created_at)})]},j.id))})]})})]})]})]})})]})}var R_="AlertDialog",[Bse,Qce]=Tn(R_,[BD]),bl=BD(),O_=t=>{const{__scopeAlertDialog:s,...n}=t,r=bl(s);return e.jsx(zb,{...r,...n,modal:!0})};O_.displayName=R_;var Vse="AlertDialogTrigger",z_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=bl(n);return e.jsx(r9,{...a,...r,ref:s})});z_.displayName=Vse;var Gse="AlertDialogPortal",F_=t=>{const{__scopeAlertDialog:s,...n}=t,r=bl(s);return e.jsx(Fb,{...r,...n})};F_.displayName=Gse;var Yse="AlertDialogOverlay",U_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=bl(n);return e.jsx(Jm,{...a,...r,ref:s})});U_.displayName=Yse;var Cd="AlertDialogContent",[Qse,Hse]=Bse(Cd),Wse=CT("AlertDialogContent"),$_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...a}=t,i=bl(n),l=u.useRef(null),o=Rt(s,l),c=u.useRef(null);return e.jsx(FJ,{contentName:Cd,titleName:B_,docsSlug:"alert-dialog",children:e.jsx(Qse,{scope:n,cancelRef:c,children:e.jsxs(qm,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Ge(a.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(Wse,{children:r}),e.jsx(Jse,{contentRef:l})]})})})});$_.displayName=Cd;var B_="AlertDialogTitle",V_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=bl(n);return e.jsx(Km,{...a,...r,ref:s})});V_.displayName=B_;var G_="AlertDialogDescription",Y_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=bl(n);return e.jsx(Xm,{...a,...r,ref:s})});Y_.displayName=G_;var Zse="AlertDialogAction",Q_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=bl(n);return e.jsx(eh,{...a,...r,ref:s})});Q_.displayName=Zse;var H_="AlertDialogCancel",W_=u.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:a}=Hse(H_,n),i=bl(n),l=Rt(s,a);return e.jsx(eh,{...i,...r,ref:l})});W_.displayName=H_;var Jse=({contentRef:t})=>{const s=`\`${Cd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Cd}\` by passing a \`${G_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Cd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},qse=O_,Kse=z_,Xse=F_,Z_=U_,J_=$_,q_=Q_,K_=W_,X_=V_,eR=Y_;const rl=qse,Vo=Kse,ene=Xse,tR=u.forwardRef(({className:t,...s},n)=>e.jsx(Z_,{className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));tR.displayName=Z_.displayName;const yi=u.forwardRef(({className:t,...s},n)=>e.jsxs(ene,{children:[e.jsx(tR,{}),e.jsx(J_,{ref:n,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));yi.displayName=J_.displayName;const vi=({className:t,...s})=>e.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left",t),...s});vi.displayName="AlertDialogHeader";const bi=({className:t,...s})=>e.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});bi.displayName="AlertDialogFooter";const wi=u.forwardRef(({className:t,...s},n)=>e.jsx(X_,{ref:n,className:Te("text-lg font-semibold",t),...s}));wi.displayName=X_.displayName;const Ni=u.forwardRef(({className:t,...s},n)=>e.jsx(eR,{ref:n,className:Te("text-sm text-muted-foreground",t),...s}));Ni.displayName=eR.displayName;const Ci=u.forwardRef(({className:t,...s},n)=>e.jsx(q_,{ref:n,className:Te(ub(),t),...s}));Ci.displayName=q_.displayName;const Mi=u.forwardRef(({className:t,...s},n)=>e.jsx(K_,{ref:n,className:Te(ub({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Mi.displayName=K_.displayName;function tne(){const{user:t}=Mt(),{toast:s}=lt(),[,n]=_t(),[r,a]=u.useState(""),[i,l]=u.useState("all"),[o,c]=u.useState("all"),[d,f]=u.useState([]),[x,h]=u.useState(!1);u.useEffect(()=>{t&&t.type!=="admin"&&n("/dashboard")},[t,n]);const{data:j=[],isLoading:v,refetch:p}=$e({queryKey:["/api/admin/all-transfers"],queryFn:async()=>{const T=localStorage.getItem("auth_token"),E=await fetch("/api/admin/all-transfers",{headers:{Authorization:`Bearer ${T}`}});if(!E.ok)throw new Error("فشل في جلب بيانات التحويلات");return E.json()},enabled:!!t&&t.type==="admin"}),b=j.filter(T=>{var Z,G,D,B,de,U;const E=((Z=T.senderName)==null?void 0:Z.toLowerCase().includes(r.toLowerCase()))||((G=T.receiverName)==null?void 0:G.toLowerCase().includes(r.toLowerCase()))||((D=T.receiverOfficeName)==null?void 0:D.toLowerCase().includes(r.toLowerCase()))||((B=T.recipientName)==null?void 0:B.toLowerCase().includes(r.toLowerCase()))||((de=T.verificationCode)==null?void 0:de.includes(r))||((U=T.referenceNumber)==null?void 0:U.includes(r)),$=i==="all"||T.status===i,F=o==="all"||T.type===o;return E&&$&&F}),y={total:j.length,pending:j.filter(T=>T.status==="pending").length,completed:j.filter(T=>T.status==="completed").length,internal:j.filter(T=>T.type==="internal").length,city:j.filter(T=>T.type==="city").length,international:j.filter(T=>T.type==="international").length,totalAmount:j.reduce((T,E)=>T+parseFloat(E.amount||"0"),0),totalCommission:j.reduce((T,E)=>T+parseFloat(E.commission||"0"),0)},m=T=>new Date(T).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),g=T=>new Intl.NumberFormat("en-US").format(T),w=Ze({mutationFn:async T=>{const E=localStorage.getItem("auth_token"),$=await fetch("/api/admin/transfers/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({transferIds:T})});if(!$.ok){const F=await $.json();throw new Error(F.message||"حدث خطأ في حذف التحويلات")}return $.json()},onSuccess:()=>{s({title:"تم الحذف بنجاح",description:"تم حذف التحويلات المحددة بنجاح"}),f([]),h(!1),p(),Qe.invalidateQueries({queryKey:["/api/admin/all-transfers"]})},onError:T=>{s({title:"خطأ في الحذف",description:T.message||"حدث خطأ أثناء حذف التحويلات",variant:"destructive"})}}),N=(T,E)=>{const $=`${E}-${T}`;f(F=>F.includes($)?F.filter(Z=>Z!==$):[...F,$])},k=()=>{d.length===b.length?f([]):f(b.map(T=>`${T.type}-${T.id}`))},L=()=>{d.length!==0&&h(!0)},S=()=>{w.mutate(d)};return!t||t.type!=="admin"?null:e.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{className:"w-64 bg-white shadow-lg border-r border-gray-200 p-4",children:e.jsx(Ai,{})}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"لوحة إدارة التحويلات"}),e.jsxs("div",{className:"flex gap-2",children:[d.length>0&&e.jsxs(M,{onClick:L,variant:"destructive",size:"sm",disabled:w.isPending,children:[e.jsx(is,{className:"h-4 w-4 ml-2"}),"حذف المحدد (",d.length,")"]}),e.jsxs(M,{onClick:()=>p(),variant:"outline",size:"sm",children:[e.jsx(ys,{className:"h-4 w-4 ml-2"}),"تحديث"]}),e.jsxs(M,{onClick:()=>n("/dashboard"),variant:"outline",size:"sm",children:[e.jsx(Br,{className:"h-4 w-4 ml-2"}),"العودة للوحة التحكم"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8",children:[e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"إجمالي التحويلات"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold",children:g(y.total)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"داخلية"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold text-blue-600",children:g(y.internal)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"بين المدن"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold text-purple-600",children:g(y.city)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"دولية"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold text-orange-600",children:g(y.international)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"قيد الانتظار"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold text-amber-600",children:g(y.pending)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xs font-medium",children:"مكتملة"})}),e.jsx(z,{children:e.jsx("div",{className:"text-xl font-bold text-green-600",children:g(y.completed)})})]})]}),e.jsx(_,{className:"mb-6",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(pe,{placeholder:"البحث باسم المرسل، المستلم، المكتب، رمز التحقق، أو الرقم المرجعي...",value:r,onChange:T=>a(T.target.value)})}),e.jsxs(Nt,{value:o,onValueChange:c,children:[e.jsx(bt,{className:"w-full md:w-40",children:e.jsx(Ct,{placeholder:"نوع التحويل"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الأنواع"}),e.jsx(te,{value:"internal",children:"داخلية"}),e.jsx(te,{value:"city",children:"مدينية"}),e.jsx(te,{value:"international",children:"دولية"})]})]}),e.jsxs(Nt,{value:i,onValueChange:l,children:[e.jsx(bt,{className:"w-full md:w-40",children:e.jsx(Ct,{placeholder:"الحالة"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الحالات"}),e.jsx(te,{value:"pending",children:"قيد الانتظار"}),e.jsx(te,{value:"completed",children:"مكتملة"})]})]})]})})}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"جميع التحويلات"}),e.jsx(Se,{children:"التحويلات الداخلية والمدينية والدولية المسجلة في النظام"})]}),e.jsx(z,{children:v?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(ys,{className:"h-8 w-8 animate-spin"})}):b.length===0?e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:j.length===0?"لا توجد تحويلات مسجلة بعد":"لا توجد تحويلات تطابق البحث"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"w-12",children:e.jsx(Di,{checked:d.length===b.length&&b.length>0,onCheckedChange:k,"data-testid":"select-all-transfers"})}),e.jsx(ae,{children:"ID"}),e.jsx(ae,{children:"النوع"}),e.jsx(ae,{children:"المرسل"}),e.jsx(ae,{children:"المستلم"}),e.jsx(ae,{children:"المبلغ"}),e.jsx(ae,{children:"العمولة"}),e.jsx(ae,{children:"الكود/المرجع"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"تاريخ الإرسال"}),e.jsx(ae,{children:"إجراءات"})]})}),e.jsx(Qs,{children:b.map(T=>{const E=G=>{const B={internal:{color:"bg-blue-100 text-blue-800",label:"داخلية"},city:{color:"bg-purple-100 text-purple-800",label:"مدينية"},international:{color:"bg-orange-100 text-orange-800",label:"دولية"}}[G]||{color:"bg-gray-100 text-gray-800",label:G};return e.jsx(ie,{className:B.color,children:B.label})},$=()=>T.type==="internal"?T.receiverName||"غير محدد":(T.type==="city"||T.type==="international")&&T.recipientName||"غير محدد",F=`${T.type}-${T.id}`,Z=d.includes(F);return e.jsxs(kt,{children:[e.jsx(se,{className:"w-12",children:e.jsx(Di,{checked:Z,onCheckedChange:()=>N(T.id.toString(),T.type),"data-testid":`select-transfer-${F}`})}),e.jsx(se,{className:"font-medium",children:T.id}),e.jsx(se,{children:E(T.type)}),e.jsx(se,{children:T.senderName}),e.jsx(se,{children:$()}),e.jsxs(se,{className:"font-mono",children:[g(parseFloat(T.amount))," ",T.currency]}),e.jsxs(se,{className:"font-mono",children:[g(parseFloat(T.commission))," ",T.currency]}),e.jsx(se,{className:"font-mono",children:T.verificationCode||T.referenceNumber||"-"}),e.jsx(se,{children:e.jsx(ie,{variant:T.status==="completed"?"default":"secondary",className:T.status==="completed"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800",children:T.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx(ks,{className:"h-3 w-3 ml-1"}),"مكتملة"]}):e.jsxs(e.Fragment,{children:[e.jsx(la,{className:"h-3 w-3 ml-1"}),"قيد الانتظار"]})})}),e.jsx(se,{children:m(T.createdAt)}),e.jsx(se,{children:e.jsx(M,{variant:"destructive",size:"sm",onClick:()=>{f([F]),h(!0)},disabled:w.isPending,"data-testid":`delete-transfer-${F}`,children:e.jsx(is,{className:"h-3 w-3"})})})]},F)})})]})})})]})]})}),e.jsx(rl,{open:x,onOpenChange:h,children:e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد الحذف"}),e.jsxs(Ni,{children:["هل أنت متأكد من حذف ",d.length," تحويل؟ لا يمكن التراجع عن هذا الإجراء."]})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:S,disabled:w.isPending,className:"bg-red-600 hover:bg-red-700",children:w.isPending?"جارٍ الحذف...":"حذف"})]})]})})]})}const sne=()=>{const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),r=$n(),[a,i]=u.useState(""),[l,o]=u.useState(""),[c,d]=u.useState(!1),[f,x]=u.useState(!1),[h,j]=u.useState(null),{data:v,isLoading:p,error:b}=$e({queryKey:["/api/user/verification"],queryFn:async()=>{try{const w=await fetch("/api/user/verification");if(w.status===404)return null;if(!w.ok)throw new Error("فشل في جلب طلب التوثيق");const N=await w.json();return N.status==="not_started"?null:N}catch(w){return console.error(w),null}}}),y=Ze({mutationFn:async()=>{const w=new FormData;if(a){const L=await(await fetch(a)).blob();w.append("id_photo",L,"id_photo.png")}if(l){const L=await(await fetch(l)).blob();w.append("proof_of_address",L,"proof_of_address.png")}const N=await fetch("/api/user/verify-account",{method:"POST",body:w});if(!N.ok){const k=await N.json();throw new Error(k.message||"فشل في إرسال طلب التوثيق")}return N.json()},onSuccess:()=>{n({title:"تم إرسال الطلب بنجاح",description:"سيتم مراجعة طلبك من قبل الإدارة",variant:"default"}),r.invalidateQueries({queryKey:["/api/user/verification"]})},onError:w=>{n({title:"حدث خطأ",description:w.message||"فشل في إرسال طلب التوثيق",variant:"destructive"})}}),m=(w,N)=>{var S;const k=(S=N.target.files)==null?void 0:S[0];if(!k)return;if(!["image/jpeg","image/png","application/pdf"].includes(k.type)){n({title:"نوع ملف غير مدعوم",description:"يرجى تحميل ملف بتنسيق JPG أو PNG أو PDF فقط",variant:"destructive"});return}if(k.size>5*1024*1024){n({title:"حجم الملف كبير جدًا",description:"يجب أن يكون حجم الملف أقل من 5 ميغابايت",variant:"destructive"});return}if(w==="id"){d(!0);const T=new FileReader;T.onloadend=()=>{i(T.result),d(!1),n({title:"تم تحميل صورة الهوية",variant:"default"})},T.readAsDataURL(k)}else{x(!0);const T=new FileReader;T.onloadend=()=>{o(T.result),x(!1),n({title:"تم تحميل إثبات العنوان",variant:"default"})},T.readAsDataURL(k)}},g=w=>{j(w)};return u.useEffect(()=>{if(!t){s("/auth");return}t.verified&&(n({title:"حسابك موثق بالفعل",description:"لقد تم توثيق حسابك بنجاح. تم توجيهك إلى لوحة التحكم.",variant:"default"}),s("/"))},[t,s,n]),p?e.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:e.jsx(ft,{className:"h-8 w-8 animate-spin text-primary"})}):v?e.jsx("div",{className:"container max-w-4xl py-10",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-2xl font-bold mb-2",children:"حالة توثيق الحساب"}),e.jsx(Se,{children:"يمكنك متابعة حالة طلب توثيق حسابك هنا"})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[v.status==="pending"&&e.jsxs("div",{className:"flex items-center text-yellow-500",children:[e.jsx(ft,{className:"mr-2 h-5 w-5 animate-spin"}),e.jsx("span",{className:"font-medium",children:"قيد المراجعة"})]}),v.status==="approved"&&e.jsxs("div",{className:"flex items-center text-green-500",children:[e.jsx(ks,{className:"mr-2 h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"تم التوثيق بنجاح"})]}),v.status==="rejected"&&e.jsxs("div",{className:"flex items-center text-red-500",children:[e.jsx(_s,{className:"mr-2 h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"تم رفض الطلب"})]})]}),v.status==="rejected"&&v.notes&&e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 text-red-800",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"سبب الرفض:"}),e.jsx("p",{children:v.notes})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"صورة الهوية"}),e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden",children:[e.jsx("img",{src:v.idPhotoUrl,alt:"صورة الهوية",className:"w-full h-full object-contain",onError:w=>w.target.src="https://placehold.co/400x300?text=صورة+الهوية"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>g(v.idPhotoUrl),children:e.jsx(wr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"إثبات العنوان"}),e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden",children:[e.jsx("img",{src:v.proofOfAddressUrl,alt:"إثبات العنوان",className:"w-full h-full object-contain",onError:w=>w.target.src="https://placehold.co/400x300?text=إثبات+العنوان"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>g(v.proofOfAddressUrl),children:e.jsx(wr,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"معلومات هامة:"}),e.jsxs("p",{children:[v.status==="pending"&&"سيتم مراجعة طلبك من قبل الإدارة في أقرب وقت ممكن. يرجى الانتظار.",v.status==="approved"&&"تم توثيق حسابك بنجاح! يمكنك الآن الاستفادة من جميع ميزات الحساب الموثق.",v.status==="rejected"&&"يمكنك تقديم طلب توثيق جديد بعد معالجة أسباب الرفض المذكورة."]})]})]})})]})}):e.jsxs("div",{className:"container max-w-4xl py-10",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-2xl font-bold mb-2",children:"توثيق الحساب"}),e.jsx(Se,{children:"قم بتقديم المستندات المطلوبة لتوثيق حسابك وتفعيل جميع الميزات"})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"معلومات هامة:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"يجب تقديم مستندات واضحة وحديثة لضمان قبول طلبك"}),e.jsx("li",{children:"يسمح برفع ملفات بتنسيق JPG أو PNG أو PDF فقط"}),e.jsx("li",{children:"الحد الأقصى لحجم كل ملف هو 5 ميغابايت"}),e.jsx("li",{children:"سيتم مراجعة طلبك خلال 24-48 ساعة عمل"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"صورة الهوية الشخصية"}),a?e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden mb-4",children:[e.jsx("img",{src:a,alt:"صورة الهوية",className:"w-full h-full object-contain"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>g(a),children:e.jsx(wr,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"aspect-video flex items-center justify-center border-2 border-dashed rounded-md mb-4 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Rl,{className:"mx-auto h-10 w-10 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"اضغط هنا لرفع صورة الهوية"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"id-photo",className:"sr-only",onChange:w=>m("id",w),accept:"image/jpeg,image/png,application/pdf"}),e.jsx("label",{htmlFor:"id-photo",className:"flex items-center justify-center w-full py-2 px-4 bg-blue-600 text-white rounded-md cursor-pointer hover:bg-blue-700 transition-colors",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري الرفع..."]}):a?e.jsxs(e.Fragment,{children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"تغيير الصورة"]}):e.jsxs(e.Fragment,{children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"اختر ملف"]})})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"إثبات العنوان"}),l?e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden mb-4",children:[e.jsx("img",{src:l,alt:"إثبات العنوان",className:"w-full h-full object-contain"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>g(l),children:e.jsx(wr,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"aspect-video flex items-center justify-center border-2 border-dashed rounded-md mb-4 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Rl,{className:"mx-auto h-10 w-10 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"اضغط هنا لرفع إثبات العنوان"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"proof-of-address",className:"sr-only",onChange:w=>m("proof",w),accept:"image/jpeg,image/png,application/pdf"}),e.jsx("label",{htmlFor:"proof-of-address",className:"flex items-center justify-center w-full py-2 px-4 bg-blue-600 text-white rounded-md cursor-pointer hover:bg-blue-700 transition-colors",children:f?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري الرفع..."]}):l?e.jsxs(e.Fragment,{children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"تغيير الملف"]}):e.jsxs(e.Fragment,{children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"اختر ملف"]})})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ملاحظات حول المستندات المطلوبة:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"صورة الهوية:"})," يجب أن تكون واضحة وسارية المفعول (بطاقة شخصية، جواز سفر، رخصة قيادة)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"إثبات العنوان:"})," يمكن أن يكون فاتورة مرافق حديثة (كهرباء، ماء، إنترنت) أو كشف حساب بنكي أو عقد إيجار"]})]})]})]})}),e.jsx(Os,{className:"flex justify-end",children:e.jsx(M,{onClick:()=>y.mutate(),disabled:!a||!l||y.isPending||c||f,className:"w-full md:w-auto",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري إرسال الطلب..."]}):"إرسال طلب التوثيق"})})]}),e.jsx(Ht,{open:!!h,onOpenChange:w=>!w&&j(null),children:e.jsxs($t,{className:"max-w-3xl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"معاينة المستند"}),e.jsx(ls,{children:"اضغط خارج هذه النافذة للإغلاق"})]}),e.jsx("div",{className:"mt-4 max-h-[70vh] overflow-auto",children:h&&e.jsx("img",{src:h,alt:"معاينة المستند",className:"w-full object-contain"})})]})})]})};function nne(){const{user:t,refreshUser:s}=Mt(),{toast:n}=lt(),[,r]=_t(),[a,i]=u.useState(!1);console.log("🔍 User data in verification form:",t);const{data:l,isLoading:o}=$e({queryKey:["/api/verification-requests/my"],queryFn:async()=>{const d=await fetch("/api/verification-requests/my");if(!d.ok){if(d.status===404)return null;throw new Error("فشل في جلب طلب التوثيق")}return await d.json()}}),c=async d=>{d.preventDefault(),i(!0);try{const f=new FormData(d.currentTarget),x=f.get("id_photo"),h=f.get("proof_of_address");if(!x||x.size===0){n({title:"خطأ",description:"يرجى اختيار صورة الهوية",variant:"destructive"}),i(!1);return}if(!h||h.size===0){n({title:"خطأ",description:"يرجى اختيار إثبات العنوان",variant:"destructive"}),i(!1);return}const j=await fetch("/api/user/verify-account",{method:"POST",body:f});if(!j.ok){const p=await j.json();throw new Error(p.message||"فشل في رفع المستندات")}const v=await j.json();n({title:"تم بنجاح",description:"تم إرسال طلب التوثيق بنجاح وسيتم مراجعته من قبل الإدارة"}),Qe.invalidateQueries({queryKey:["/api/verification-requests/my"]}),r("/")}catch(f){console.error("Error submitting verification request:",f),n({title:"خطأ",description:f instanceof Error?f.message:"حدث خطأ أثناء رفع المستندات",variant:"destructive"})}finally{i(!1)}};return t&&"verified"in t&&t.verified?(r("/"),null):l?e.jsx("div",{className:"container mx-auto p-4 mt-8",children:e.jsxs(_,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-center",children:"حالة طلب التوثيق"}),e.jsx(Se,{className:"text-center",children:"لديك طلب توثيق قيد المراجعة حالياً"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse mb-2",children:[e.jsx(_s,{className:"text-yellow-500"}),e.jsxs("h3",{className:"text-lg font-medium",children:["حالة الطلب: ",l.status==="pending"?"قيد المراجعة":l.status==="approved"?"مقبول":"مرفوض"]})]}),l.status==="rejected"&&l.notes&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-semibold",children:"سبب الرفض:"}),e.jsx("p",{className:"text-destructive",children:l.notes})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["تاريخ التقديم: ",new Date(l.createdAt).toLocaleDateString("ar-LY")]})]})}),e.jsx(Os,{children:e.jsx(M,{onClick:()=>r("/"),className:"w-full",children:"العودة إلى لوحة التحكم"})})]})}):o?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(ft,{className:"w-8 h-8 animate-spin"})}):e.jsx("div",{className:"container mx-auto p-4 mt-8",children:e.jsxs(_,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-center",children:"توثيق الحساب"}),e.jsx(Se,{className:"text-center",children:"يرجى تقديم المستندات التالية لتوثيق حسابك. سيتم مراجعتها من قبل الإدارة."})]}),e.jsxs("form",{onSubmit:c,encType:"multipart/form-data",children:[e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:"معلومات التوثيق"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"الاسم الثلاثي"}),e.jsx("div",{className:"p-3 bg-background border rounded-md",children:(t==null?void 0:t.fullName)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"رقم الهاتف"}),e.jsx("div",{className:"p-3 bg-background border rounded-md",children:(t==null?void 0:t.phone)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"المدينة"}),e.jsx("div",{className:"p-3 bg-background border rounded-md",children:(t==null?void 0:t.city)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"البريد الإلكتروني"}),e.jsx("div",{className:"p-3 bg-background border rounded-md",children:(t==null?void 0:t.email)||"غير محدد"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3 text-center",children:"هذه هي البيانات المسجلة في حسابك والتي سيتم استخدامها في عملية التوثيق"}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:s,children:"تحديث البيانات"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium",children:["صورة الهوية الشخصية *",e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"يجب أن تكون صورة واضحة للهوية الشخصية (بطاقة الهوية، جواز السفر، رخصة القيادة)"})]}),e.jsx(pe,{type:"file",name:"id_photo",accept:"image/jpeg,image/png,image/gif,application/pdf",required:!0,className:"p-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium",children:["إثبات العنوان *",e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"يمكن أن يكون فاتورة مرافق (كهرباء، ماء، إنترنت) أو أي مستند رسمي يظهر عنوانك"})]}),e.jsx(pe,{type:"file",name:"proof_of_address",accept:"image/jpeg,image/png,image/gif,application/pdf",required:!0,className:"p-2"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(ks,{className:"text-primary"}),e.jsx("h3",{className:"text-sm font-medium",children:"ملاحظات هامة:"})]}),e.jsxs("ul",{className:"list-disc list-inside text-xs space-y-1 mt-2 pr-6",children:[e.jsx("li",{children:"يجب أن تكون جميع المستندات حديثة (لا تزيد عن 3 أشهر)"}),e.jsx("li",{children:"الصور يجب أن تكون واضحة وكاملة ويمكن قراءة جميع المعلومات"}),e.jsx("li",{children:"يتم قبول الملفات بصيغة JPG أو PNG أو PDF"}),e.jsx("li",{children:"الحد الأقصى لحجم الملف: 5 ميغابايت"})]})]})]}),e.jsxs(Os,{className:"flex justify-between",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>r("/"),disabled:a,children:"إلغاء"}),e.jsx(M,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الإرسال..."]}):"إرسال طلب التوثيق"})]})]})]})})}const rne=()=>{var E,$,F;const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),r=$n(),[a,i]=u.useState("all"),[l,o]=u.useState(null),[c,d]=u.useState(!1),[f,x]=u.useState(!1),[h,j]=u.useState("approve"),[v,p]=u.useState(""),[b,y]=u.useState(null),{data:m,isLoading:g,isError:w,refetch:N}=$e({queryKey:["/api/admin/verification-requests",a!=="all"?a:void 0],queryFn:async()=>{const Z=a!=="all"?`?status=${a}`:"";try{const G=localStorage.getItem("auth_token");if(!G)throw new Error("لم يتم العثور على رمز التوثيق");const D=await fetch(`/api/admin/verification-requests${Z}`,{headers:{Authorization:`Bearer ${G}`}});if(!D.ok){const de=await D.text();throw console.error("خطأ في جلب طلبات التوثيق:",de),new Error(`فشل في جلب طلبات التوثيق: ${D.status}`)}const B=await D.json();return console.log("تم استلام البيانات:",B),B}catch(G){throw console.error("خطأ عند محاولة جلب طلبات التوثيق:",G),G}}}),k=Ze({mutationFn:async()=>{if(!l)return;const Z=localStorage.getItem("auth_token");if(!Z)throw new Error("لم يتم العثور على رمز التوثيق");const G=await fetch(`/api/admin/verification-requests/${l.id}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({status:h==="approve"?"approved":"rejected",notes:v.trim()||void 0})});if(!G.ok){const D=await G.text();throw new Error(`فشل في تحديث حالة الطلب: ${D}`)}return G.json()},onSuccess:()=>{n({title:h==="approve"?"تمت الموافقة على الطلب":"تم رفض الطلب",description:"تم تحديث حالة طلب التوثيق بنجاح",variant:"default"}),r.invalidateQueries({queryKey:["/api/admin/verification-requests"]}),x(!1),p("")},onError:Z=>{n({title:"حدث خطأ",description:Z.message||"فشل في تحديث حالة الطلب",variant:"destructive"})}});u.useEffect(()=>{t&&t.type!=="admin"&&(s("/"),n({title:"غير مصرح",description:"هذه الصفحة متاحة للمسؤولين فقط",variant:"destructive"}))},[t,s,n]);const L=Z=>{o(Z),d(!0)},S=(Z,G)=>{o(Z),j(G),p(""),x(!0)},T=m||[];return g?e.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:e.jsx(ft,{className:"h-8 w-8 animate-spin text-primary"})}):w?e.jsx("div",{className:"container py-10",children:e.jsx(_,{className:"border-red-200 bg-red-50",children:e.jsx(z,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx(Jd,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ في جلب البيانات"}),e.jsx("p",{className:"mb-4",children:"حدث خطأ أثناء محاولة جلب طلبات التوثيق"}),e.jsx(M,{onClick:()=>N(),variant:"outline",children:"إعادة المحاولة"})]})})})}):e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(X,{className:"text-2xl font-bold",children:"إدارة طلبات التوثيق"}),e.jsx(Se,{children:"مراجعة وإدارة طلبات توثيق حسابات المستخدمين"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Nt,{value:a,onValueChange:i,children:[e.jsxs(bt,{className:"w-[180px]",children:[e.jsx(Om,{className:"h-4 w-4 ml-2"}),e.jsx(Ct,{placeholder:"الكل"})]}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الطلبات"}),e.jsx(te,{value:"pending",children:"قيد المراجعة"}),e.jsx(te,{value:"approved",children:"تمت الموافقة"}),e.jsx(te,{value:"rejected",children:"تم الرفض"})]})]}),e.jsx(M,{variant:"outline",onClick:()=>N(),children:"تحديث"})]})]})}),e.jsx(z,{children:T.length===0?e.jsx("div",{className:"text-center py-10 text-gray-500",children:e.jsxs("div",{className:"mb-4",children:["لا توجد طلبات ",a!=="all"?"في هذه الحالة":""]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["إجمالي الطلبات: ",T.length]}),e.jsx("div",{className:"divide-y",children:T.map(Z=>{var G,D,B;return e.jsx("div",{className:"py-4 first:pt-0 last:pb-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:((G=Z.user)==null?void 0:G.fullName)||`المستخدم #${Z.userId}`}),e.jsx(Z4,{status:Z.status})]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsxs("span",{className:"inline-block ml-4",children:["البريد: ",((D=Z.user)==null?void 0:D.email)||"غير متوفر"]}),e.jsxs("span",{className:"inline-block",children:["الهاتف: ",((B=Z.user)==null?void 0:B.phone)||"غير متوفر"]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["تاريخ الطلب: ",new Date(Z.createdAt).toLocaleDateString("ar-LY")]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-end md:self-auto",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>L(Z),children:"عرض التفاصيل"}),Z.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>S(Z,"approve"),children:"موافقة"}),e.jsx(M,{variant:"destructive",size:"sm",onClick:()=>S(Z,"reject"),children:"رفض"})]})]})]})},Z.id)})})]})})]}),l&&e.jsx(Ht,{open:c,onOpenChange:d,children:e.jsxs($t,{className:"max-w-3xl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تفاصيل طلب التوثيق"}),e.jsx(ls,{children:"معلومات المستخدم والوثائق المقدمة"})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"الاسم الكامل"}),e.jsx("p",{children:((E=l.user)==null?void 0:E.fullName)||"غير متوفر"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"البريد الإلكتروني"}),e.jsx("p",{children:(($=l.user)==null?void 0:$.email)||"غير متوفر"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"رقم الهاتف"}),e.jsx("p",{children:((F=l.user)==null?void 0:F.phone)||"غير متوفر"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"حالة الطلب"}),e.jsx(Z4,{status:l.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"تاريخ الطلب"}),e.jsx("p",{children:new Date(l.createdAt).toLocaleString("ar-LY")})]}),l.updatedAt&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"تاريخ المراجعة"}),e.jsx("p",{children:new Date(l.updatedAt).toLocaleString("ar-LY")})]})]}),l.status==="rejected"&&l.notes&&e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"سبب الرفض:"}),e.jsx("p",{children:l.notes})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"المستندات المقدمة"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"صورة الهوية"}),e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden",children:[e.jsx("img",{src:l.idPhotoUrl,alt:"صورة الهوية",className:"w-full h-full object-contain",onError:Z=>Z.target.src="https://placehold.co/400x300?text=هوية+غير+متوفرة"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>y(l.idPhotoUrl),children:e.jsx(wr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"إثبات العنوان"}),e.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-md overflow-hidden",children:[e.jsx("img",{src:l.proofOfAddressUrl,alt:"إثبات العنوان",className:"w-full h-full object-contain",onError:Z=>Z.target.src="https://placehold.co/400x300?text=إثبات+غير+متوفر"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/30 hover:bg-black/50 text-white rounded-full",onClick:()=>y(l.proofOfAddressUrl),children:e.jsx(wr,{className:"h-4 w-4"})})]})]})]})]})]}),e.jsxs(_n,{className:"flex justify-between",children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"إغلاق"}),l.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>{d(!1),S(l,"approve")},children:"موافقة"}),e.jsx(M,{variant:"destructive",onClick:()=>{d(!1),S(l,"reject")},children:"رفض"})]})]})]})}),l&&e.jsx(Ht,{open:f,onOpenChange:x,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:h==="approve"?"الموافقة على طلب التوثيق":"رفض طلب التوثيق"}),e.jsx(ls,{children:h==="approve"?"الموافقة على طلب التوثيق سيؤدي إلى تفعيل الحساب الموثق للمستخدم":"يرجى توضيح سبب رفض الطلب للمستخدم"})]}),h==="reject"&&e.jsx("div",{className:"py-4",children:e.jsx(Un,{placeholder:"أدخل سبب الرفض هنا...",value:v,onChange:Z=>p(Z.target.value),rows:4})}),e.jsxs(_n,{className:"flex justify-between",children:[e.jsx(M,{variant:"outline",onClick:()=>x(!1),children:"إلغاء"}),e.jsx(M,{variant:h==="approve"?"default":"destructive",className:h==="approve"?"bg-green-600 hover:bg-green-700":"",onClick:()=>k.mutate(),disabled:k.isPending,children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري التنفيذ..."]}):h==="approve"?"تأكيد الموافقة":"تأكيد الرفض"})]})]})}),e.jsx(Ht,{open:!!b,onOpenChange:Z=>!Z&&y(null),children:e.jsxs($t,{className:"max-w-3xl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"معاينة المستند"}),e.jsx(ls,{children:"اضغط خارج هذه النافذة للإغلاق"})]}),e.jsx("div",{className:"mt-4 max-h-[70vh] overflow-auto",children:b&&e.jsx("img",{src:b,alt:"معاينة المستند",className:"w-full object-contain"})})]})})]})},Z4=({status:t})=>{switch(t){case"pending":return e.jsx(ie,{variant:"outline",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"قيد المراجعة"});case"approved":return e.jsx(ie,{variant:"outline",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"تمت الموافقة"});case"rejected":return e.jsx(ie,{variant:"outline",className:"bg-red-100 text-red-800 hover:bg-red-100",children:"تم الرفض"});default:return e.jsx(ie,{variant:"outline",children:t})}},ane=()=>{const{user:t}=Mt(),[,s]=_t();lt();const{data:n,isLoading:r}=$e({queryKey:["/api/balance"],queryFn:async()=>{try{return await(await ce("GET","/api/balance")).json()}catch(c){return console.error("فشل في جلب بيانات الرصيد:",c),{balances:{}}}}}),{data:a,isLoading:i}=$e({queryKey:["/api/transactions"],queryFn:async()=>{try{return await(await ce("GET","/api/transactions")).json()}catch(c){return console.error("فشل في جلب بيانات المعاملات:",c),[]}}});if(u.useEffect(()=>{t||s("/auth")},[t,s]),!t)return null;const l=c=>{switch(c){case"USD":return e.jsx(As,{className:"h-5 w-5 text-green-500"});case"EUR":return e.jsx(QU,{className:"h-5 w-5 text-blue-500"});case"GBP":return e.jsx(s$,{className:"h-5 w-5 text-purple-500"});case"LYD":return e.jsx(JT,{className:"h-5 w-5 text-teal-500"});default:return e.jsx(KT,{className:"h-5 w-5 text-gray-500"})}},o=c=>{switch(c){case"deposit":return{label:"إيداع",icon:e.jsx(Dj,{className:"h-4 w-4 text-green-500"}),color:"text-green-600"};case"withdraw":return{label:"سحب",icon:e.jsx(ux,{className:"h-4 w-4 text-red-500"}),color:"text-red-600"};case"transfer_in":return{label:"تحويل وارد",icon:e.jsx(Dj,{className:"h-4 w-4 text-blue-500"}),color:"text-blue-600"};case"transfer_out":return{label:"تحويل صادر",icon:e.jsx(ux,{className:"h-4 w-4 text-orange-500"}),color:"text-orange-600"};default:return{label:"معاملة",icon:e.jsx(Vn,{className:"h-4 w-4 text-gray-500"}),color:"text-gray-600"}}};return e.jsxs("div",{className:"container max-w-6xl py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"لوحة التحكم الشخصية"}),e.jsxs(_,{className:"mb-6",children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xl",children:"معلومات الحساب"})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"الاسم الكامل"}),e.jsx("p",{className:"font-medium",children:t.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"البريد الإلكتروني"}),e.jsx("p",{className:"font-medium",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"رقم الحساب"}),e.jsx("p",{className:"font-medium",children:t.accountNumber||"غير متوفر"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"نوع الحساب"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"font-medium",children:t.type==="agent"?"مكتب صرافة":"حساب شخصي"}),t.verified&&e.jsx(ie,{variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"موثق"})]})]}),t.type==="agent"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"المدينة"}),e.jsx("p",{className:"font-medium",children:t.city||"غير محدد"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"نسبة العمولة"}),e.jsx("p",{className:"font-medium",children:t.commissionRate?`${t.commissionRate}%`:"غير محدد"})]})]})]})})]}),e.jsxs(_,{className:"mb-6",children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xl",children:"الأرصدة"})}),e.jsx(z,{children:r?e.jsx("div",{className:"h-24 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"جاري تحميل البيانات..."})}):n&&Object.keys(n.balances).length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(n.balances).map(([c,d])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:c}),l(c)]}),e.jsx("p",{className:"text-2xl font-bold",children:yr(Number(d),c)})]},c))}):e.jsx("div",{className:"h-24 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد أرصدة متوفرة"})})}),e.jsx(Os,{className:"border-t pt-4",children:e.jsx(M,{variant:"outline",className:"w-full",onClick:()=>s("/balance"),children:"عرض التفاصيل والمعاملات"})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(X,{className:"text-xl",children:"آخر المعاملات"})}),e.jsx(z,{children:i?e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"جاري تحميل البيانات..."})}):a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(c=>{const{label:d,icon:f,color:x}=o(c.type);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:f}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${x}`,children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:rq(c.createdAt)})]})]}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-bold",children:yr(Number(c.amount),c.currency)})})]},c.id)})}):e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد معاملات سابقة"})})}),e.jsx(Os,{className:"border-t pt-4",children:e.jsx(M,{variant:"outline",className:"w-full",onClick:()=>s("/transfers"),children:"عرض جميع المعاملات"})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"الإجراءات السريعة"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2",onClick:()=>s("/transfers"),children:[e.jsx(ux,{className:"h-6 w-6"}),e.jsx("span",{children:"التحويلات"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2",onClick:()=>s("/market"),children:[e.jsx(BU,{className:"h-6 w-6"}),e.jsx("span",{children:"سوق العملات"})]}),!t.verified&&e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2",onClick:()=>s("/verification"),children:[e.jsx(Zt,{className:"h-6 w-6"}),e.jsx("span",{children:"توثيق الحساب"})]}),t.type!=="agent"&&e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2",onClick:()=>s("/upgrade-request"),children:[e.jsx(wa,{className:"h-6 w-6"}),e.jsx("span",{children:"طلب ترقية الحساب"})]})]})]})]})};function ine({isOpen:t,onClose:s,receiptData:n}){if(lt(),u.useState(!1),!n)return null;const r=i=>{const l=new Date(i),o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Africa/Tripoli"};try{return new Intl.DateTimeFormat("ar-LY",o).format(l)}catch{return new Intl.DateTimeFormat("ar",o).format(l)}},a=()=>{const i=window.open("","_blank"),l=`
    <!DOCTYPE html>
    <html dir="rtl" lang="ar">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>إيصال حراري</title>
        <style>
            @page {
                size: 72mm 96mm;
                margin: 0;
            }
            
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'Courier New', monospace;
                font-size: 12px;
                line-height: 1.2;
                background: white;
                color: black;
                width: 72mm;
                min-height: 96mm;
                padding: 4mm;
                direction: rtl;
                text-align: center;
            }
            
            .header {
                text-align: center;
                margin-bottom: 3mm;
                border-bottom: 1px solid #000;
                padding-bottom: 2mm;
            }
            
            .company-name {
                font-size: 14px;
                font-weight: bold;
                margin-bottom: 1mm;
            }
            
            .info-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 1mm;
                font-size: 11px;
            }
            
            .separator {
                border-top: 1px dashed #000;
                margin: 2mm 0;
            }
            
            .amount {
                font-size: 14px;
                font-weight: bold;
                text-align: center;
                margin: 2mm 0;
                border: 1px solid #000;
                padding: 2mm;
            }
            
            .footer {
                font-size: 10px;
                text-align: center;
                margin-top: 3mm;
            }
        </style>
    </head>
    <body>
        <div class="header">
            <div class="company-name">منصة الصرافة الليبية</div>
            <div style="font-size: 10px; margin-bottom: 2mm;">طرابلس - ليبيا</div>
            <div style="font-size: 12px; font-weight: bold;">إيصال حوالة داخلية</div>
        </div>
        
        <div class="info-row">
            <span>رقم العملية:</span>
            <span>${n.id||n.transferId}</span>
        </div>
        
        <div class="info-row">
            <span>المرجع:</span>
            <span>${n.ref}</span>
        </div>
        
        <div class="separator"></div>
        
        <div class="info-row">
            <span>من حساب:</span>
            <span>${n.fromUser.accountNumber||n.fromUser.id}</span>
        </div>
        
        <div class="info-row">
            <span>إلى حساب:</span>
            <span>${n.toUser.accountNumber||n.toUser.id}</span>
        </div>
        
        <div class="separator"></div>
        
        <div class="amount">
            <div>المبلغ المحول</div>
            <div style="font-size: 16px; font-weight: bold; margin-top: 2mm;">
                ${n.amount.toFixed(2)} ${n.currency}
            </div>
        </div>
        
        <div class="separator"></div>
        
        <div class="info-row">
            <span>التاريخ:</span>
            <span style="font-size: 10px;">${r(n.createdAt).split(" ").slice(0,-2).join(" ")}</span>
        </div>
        
        <div class="info-row">
            <span>الوقت:</span>
            <span>${r(n.createdAt).split(" ").slice(-2).join(" ")}</span>
        </div>
        
        <div class="info-row">
            <span>الحالة:</span>
            <span>${n.status==="completed"?"مكتمل":n.status}</span>
        </div>
        
        ${n.note?`
            <div class="separator"></div>
            <div style="font-size: 10px; text-align: center; margin-top: 2mm;">
                ملاحظة: ${n.note}
            </div>
        `:""}
        
        <div class="separator"></div>
        <div class="footer">
            شكراً لاستخدام منصة الصرافة الليبية
        </div>
    </body>
    </html>`;i&&(i.document.write(l),i.document.close(),i.focus(),setTimeout(()=>{i.print(),i.close()},250))};return e.jsx(Ht,{open:t,onOpenChange:s,children:e.jsxs($t,{className:"max-w-md",children:[e.jsx(Bt,{children:e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Zr,{className:"h-5 w-5 text-green-600"}),"إيصال المعاملة"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"تم إنجاز المعاملة بنجاح"}),e.jsxs("p",{className:"text-gray-600",children:["رقم العملية: ",n.id||n.transferId]}),e.jsxs("p",{className:"text-gray-600",children:["المبلغ: ",n.amount.toFixed(2)," ",n.currency]}),e.jsxs("p",{className:"text-gray-600",children:["من حساب: ",n.fromUser.accountNumber||n.fromUser.id]}),e.jsxs("p",{className:"text-gray-600",children:["إلى حساب: ",n.toUser.accountNumber||n.toUser.id]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(M,{onClick:a,className:"flex items-center gap-2",children:[e.jsx(Hf,{className:"h-4 w-4"}),"طباعة إيصال حراري"]}),e.jsxs(M,{onClick:s,variant:"ghost",className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),"إغلاق"]})]})]})]})})}const lne=R.object({recipientSearch:R.string().min(1,"يرجى إدخال اسم المستخدم أو رقم الحساب"),currency:R.string().min(1,"يرجى اختيار العملة"),amount:R.string().min(1,"يرجى إدخال المبلغ").refine(t=>!isNaN(Number(t))&&Number(t)>0,"يجب أن يكون المبلغ رقماً موجباً"),note:R.string().optional(),customCommission:R.string().optional().refine(t=>{if(!t||t==="")return!0;const s=parseFloat(t);return!isNaN(s)&&s>=0},"العمولة يجب أن تكون رقماً موجباً أو صفر")}),J4=[{code:"LYD",name:"دينار ليبي",symbol:"د.ل"},{code:"USD",name:"دولار أمريكي",symbol:"$"},{code:"EUR",name:"يورو",symbol:"€"},{code:"TRY",name:"ليرة تركية",symbol:"₺"},{code:"AED",name:"درهم إماراتي",symbol:"د.إ"},{code:"EGP",name:"جنيه مصري",symbol:"ج.م"},{code:"TND",name:"دينار تونسي",symbol:"د.ت"},{code:"GBP",name:"جنيه إسترليني",symbol:"£"}];function one(){const{user:t}=Mt(),{toast:s}=lt();_t();const n=$n(),r=(t==null?void 0:t.type)==="admin";Mu();const[a,i]=u.useState([]),[l,o]=u.useState(null),[c,d]=u.useState(!1),[f,x]=u.useState(""),[h,j]=u.useState(!1),[v,p]=u.useState(null),b=xs({resolver:ps(lne),defaultValues:{recipientSearch:"",currency:"LYD",amount:"",note:"",customCommission:""}}),{data:y,isLoading:m}=$e({queryKey:["/api/balance"],queryFn:async()=>{const B=await(await ce("/api/balance","GET")).json();return console.log("🔍 بيانات الرصيد المستلمة من الخادم:",B),console.log("🔍 نوع البيانات:",typeof B),console.log("🔍 هيكل البيانات:",JSON.stringify(B,null,2)),B}}),g=(y==null?void 0:y.balances)||{},{data:w=[]}=$e({queryKey:["/api/commission-rates"]}),N=(D,B)=>{if(!D||!B)return{commission:0,total:0};const de=parseFloat(D);if(isNaN(de)||de<=0)return{commission:0,total:0};const U=Array.isArray(w)?w.find(re=>re.transferType==="internal"&&re.currency===B&&re.isActive):null;let W=0;return U?U.fixedAmount&&parseFloat(U.fixedAmount)>0?W=parseFloat(U.fixedAmount):U.perMilleRate&&parseFloat(U.perMilleRate)>0?W=de*parseFloat(U.perMilleRate):U.commissionRate&&parseFloat(U.commissionRate)>0&&(W=de*parseFloat(U.commissionRate)):W=de*.01,{commission:W,total:de+W}},k=b.watch("amount"),L=b.watch("currency"),{commission:S,total:T}=N(k,L),E=async D=>{if(D.length<2){i([]);return}d(!0);try{const U=(await(await ce(`/api/users/search?q=${encodeURIComponent(D)}`,"GET")).json()).filter(W=>W.id!==(t==null?void 0:t.id));i(U),U.length===1&&setTimeout(()=>{Z(U[0])},300)}catch(B){console.error("خطأ في البحث:",B),i([])}finally{d(!1)}},$=Ze({mutationFn:async D=>await(await ce("/api/internal-transfer","POST",{recipientId:D.recipientId,currency:D.currency,amount:parseFloat(D.amount),note:D.note})).json(),onSuccess:D=>{const B={id:D.transactionId||D.id,transferId:D.transactionId||D.id,fromUser:{id:(t==null?void 0:t.id)||0,fullName:(t==null?void 0:t.fullName)||"غير محدد",accountNumber:(t==null?void 0:t.accountNumber)||""},toUser:{id:(l==null?void 0:l.id)||0,fullName:(l==null?void 0:l.fullName)||"غير محدد",accountNumber:(l==null?void 0:l.accountNumber)||""},currency:D.currency||b.getValues("currency"),amount:parseFloat(D.amount)||parseFloat(b.getValues("amount")),fee:D.fee||0,netAmount:parseFloat(D.amount)||parseFloat(b.getValues("amount")),status:"completed",ref:D.ref||`INT-${Date.now()}`,createdAt:new Date().toISOString(),note:D.note||b.getValues("note"),hash:D.hash||`hash_${Date.now()}`};p(B),j(!0),s({title:"تم التحويل بنجاح",description:`تم تحويل ${D.amount} ${D.currency} إلى ${l==null?void 0:l.fullName}`}),n.invalidateQueries({queryKey:["/api/balance"]}),n.invalidateQueries({queryKey:["/api/transfers"]}),n.invalidateQueries({queryKey:["/api/transactions"]}),b.reset(),o(null),i([]),x("")},onError:D=>{s({title:"فشل في التحويل",description:D.message||"حدث خطأ أثناء تنفيذ التحويل",variant:"destructive"})}});u.useEffect(()=>{const D=setTimeout(()=>{f&&!l&&f.length>=2?E(f):(!f||f.length<2)&&i([])},500);return()=>clearTimeout(D)},[f,l]);const F=async D=>{if(!l){s({title:"خطأ",description:"يرجى اختيار المستلم من نتائج البحث",variant:"destructive"});return}if(l.id===(t==null?void 0:t.id)){s({title:"خطأ",description:"لا يمكن التحويل إلى نفس الحساب",variant:"destructive"});return}const B=parseFloat(D.amount),de=parseFloat(g[D.currency]||"0");if(console.log("🔍 تحقق من الرصيد عند التحويل:",{currency:D.currency,amount:B,currentBalance:de,balances:g,rawBalance:g[D.currency],typeOfBalance:typeof g[D.currency],parsedBalance:parseFloat(g[D.currency]||"0")}),isNaN(B)||B<=0){s({title:"خطأ في المبلغ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}if(de<B){s({title:"رصيد غير كافٍ",description:`رصيدك الحالي: ${yr(de,D.currency)} - المطلوب: ${yr(B,D.currency)}`,variant:"destructive"});return}$.mutate({...D,recipientId:l.id})},Z=D=>{o(D),x(D.fullName),i([]),b.setValue("recipientSearch",D.fullName)},G=()=>{o(null),x(""),i([]),b.setValue("recipientSearch","")};return t?e.jsx(er,{page:"send",children:e.jsxs("div",{className:"golden-page-bg min-h-screen px-1 sm:px-4 py-1 sm:py-4",children:[e.jsxs("div",{className:"w-full sm:container sm:mx-auto sm:max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 mb-2 sm:mb-6",children:[e.jsx(yn,{variant:"ghost",size:"sm",className:"text-slate-600 hover:text-slate-800 h-6 w-6 sm:h-10 sm:w-10 p-1 sm:p-2"}),e.jsx("div",{className:"h-4 w-px sm:h-6 bg-slate-300"}),e.jsx("h1",{className:"text-sm sm:text-2xl font-bold text-slate-800 text-center flex-1",children:"التحويل الداخلي"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-4 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[e.jsx("div",{className:"order-1 lg:col-span-2",children:e.jsxs(_,{className:"shadow-lg border-0 rounded-lg",children:[e.jsxs(q,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-t-lg p-2 sm:p-6 text-center",children:[e.jsxs(X,{className:"flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-base",children:[e.jsx(Vr,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"تحويل داخلي"]}),e.jsx(Se,{className:"text-blue-100 text-xs sm:text-sm text-center",children:"قم بتحويل الأموال إلى أي مستخدم داخل المنصة بجميع العملات"})]}),e.jsx(z,{className:"p-2 sm:p-6",children:e.jsx(Bs,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(F),className:"space-y-2 sm:space-y-6",children:[e.jsx(_e,{control:b.control,name:"recipientSearch",render:({field:D})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(_i,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"المستلم"]}),e.jsx(Re,{children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{...D,placeholder:"ابحث بالاسم أو رقم الحساب...",value:f,onChange:B=>{const de=B.target.value;x(de),D.onChange(de),l&&de!==l.fullName&&o(null)},className:"pl-10 text-xs sm:text-sm h-8 sm:h-10"}),e.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),c&&e.jsx(ft,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 animate-spin text-slate-400"})]})}),a.length>1&&!l&&e.jsx("div",{className:"mt-2 border rounded-lg bg-white shadow-sm max-h-40 sm:max-h-48 overflow-y-auto",children:a.map(B=>e.jsxs("div",{onClick:()=>Z(B),className:"p-2 sm:p-3 hover:bg-slate-50 cursor-pointer border-b last:border-b-0 flex items-center justify-between active:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-xs sm:text-sm",children:B.fullName}),e.jsxs("p",{className:"text-slate-500 text-xs",children:["رقم الحساب: ",B.accountNumber]})]}),e.jsx(ie,{variant:B.type==="agent"?"default":"secondary",className:"text-xs",children:B.type==="agent"?"وكيل":"مستخدم"})]},B.id))}),f.length>=2&&a.length===0&&!c&&!l&&e.jsxs("div",{className:"mt-2 p-2 sm:p-3 border rounded-lg bg-slate-50",children:[e.jsx("p",{className:"text-center text-slate-500 text-xs sm:text-sm mb-2",children:"لم يتم العثور على مستخدمين مطابقين"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-slate-600 font-medium text-xs",children:"أرقام حسابات متاحة للاختبار:"}),e.jsx("div",{className:"grid grid-cols-2 gap-1 sm:flex sm:flex-wrap sm:gap-2",children:[{name:"Test User 1006",account:"1006"},{name:"m11",account:"33003002"},{name:"ssss",account:"33003003"},{name:"m1101",account:"33003004"}].map(B=>e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>{const de={id:parseInt(B.account),fullName:B.name,accountNumber:B.account,type:"user"};Z(de)},className:"text-xs px-2 py-1 h-auto sm:h-9",children:[e.jsx("span",{className:"sm:hidden",children:B.account}),e.jsxs("span",{className:"hidden sm:inline",children:[B.account," (",B.name,")"]})]},B.account))})]})]}),l&&e.jsxs("div",{className:"mt-2 p-2 sm:p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(_i,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 text-xs sm:text-sm",children:l.fullName}),e.jsxs("p",{className:"text-green-600 text-xs",children:["رقم الحساب: ",l.accountNumber]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(ie,{variant:l.type==="agent"?"default":"secondary",className:"text-xs",children:l.type==="agent"?"وكيل":"مستخدم"}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:G,className:"text-green-600 hover:text-green-800 text-xs px-1 sm:px-2 h-6 sm:h-8",children:"إلغاء"})]})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:b.control,name:"currency",render:({field:D})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(Vn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"العملة"]}),e.jsxs(Nt,{onValueChange:D.onChange,defaultValue:D.value,children:[e.jsx(Re,{children:e.jsx(bt,{className:"text-xs sm:text-sm h-8 sm:h-10",children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:J4.map(B=>e.jsx(te,{value:B.code,children:e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("span",{children:B.symbol}),e.jsx("span",{children:B.name}),e.jsxs("span",{className:"text-slate-500",children:["(",B.code,")"]})]})},B.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:b.control,name:"amount",render:({field:D})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(wa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"المبلغ"]}),e.jsx(Re,{children:e.jsx(pe,{...D,type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"text-left text-xs sm:text-sm h-8 sm:h-10"})}),b.watch("currency")&&e.jsxs("p",{className:"text-slate-600 flex items-center gap-1 text-xs sm:text-sm",children:[e.jsx(Zr,{className:"h-3 w-3 text-green-500"}),"الرصيد المتاح: ",yr(parseFloat(g[b.watch("currency")]||"0"),b.watch("currency"))]}),k&&L&&parseFloat(k)>0&&e.jsxs("div",{className:"mt-2 sm:mt-3 p-2 sm:p-3 bg-blue-50 border border-blue-200 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"المبلغ:"}),e.jsx("span",{className:"font-medium",children:yr(parseFloat(k),L)})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"العمولة:"}),e.jsx("span",{className:"font-medium text-blue-600",children:yr(S,L)})]}),e.jsx("div",{className:"border-t border-blue-200 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm font-bold",children:[e.jsx("span",{className:"text-slate-800",children:"المجموع الكلي:"}),e.jsx("span",{className:"text-blue-700",children:yr(T,L)})]})}),parseFloat(g[L]||"0")<T&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-600",children:"⚠️ الرصيد غير كافٍ لإتمام التحويل (يشمل العمولة)"})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:b.control,name:"note",render:({field:D})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-xs sm:text-sm",children:"ملاحظة (اختياري)"}),e.jsx(Re,{children:e.jsx(Un,{...D,placeholder:"أضف ملاحظة للمستلم...",rows:2,className:"resize-none text-xs sm:text-sm"})}),e.jsx(He,{})]})}),r&&e.jsx(_e,{control:b.control,name:"customCommission",render:({field:D})=>e.jsxs(De,{children:[e.jsxs(Pe,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(Vn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"عمولة مخصصة (اختياري - للإدارة فقط)"]}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"قيمة العمولة المخصصة",type:"number",step:"0.01",min:"0",className:"text-xs sm:text-sm h-8 sm:h-10",...D})}),e.jsx(He,{})]})}),e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 py-2 sm:py-4 text-xs sm:text-base h-8 sm:h-12",disabled:$.isPending||!l,children:$.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2 animate-spin"}),"جاري التحويل..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"تحويل الأموال"]})})]})})})]})}),e.jsxs("div",{className:"order-2 space-y-2 sm:space-y-3 lg:space-y-6",children:[e.jsxs(_,{className:"shadow-lg border-0 rounded-lg",children:[e.jsx(q,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-t-lg p-2 sm:p-6",children:e.jsxs(X,{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-base",children:[e.jsx(wa,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"أرصدتك الحالية"]})}),e.jsx(z,{className:"p-2 sm:p-4",children:m?e.jsx("div",{className:"space-y-1 sm:space-y-3",children:[1,2,3].map(D=>e.jsx("div",{className:"h-8 sm:h-12 bg-slate-100 rounded-lg animate-pulse"},D))}):e.jsx("div",{className:"space-y-1 sm:space-y-3",children:J4.slice(0,5).map(D=>{const B=g[D.code]||"0",de=parseFloat(B);return console.log(`🔍 عرض رصيد ${D.code}:`,{balance:B,amount:de,isNaN:isNaN(de),balances:g,currencyCode:D.code,balanceFromObject:g[D.code]}),e.jsxs("div",{className:"flex items-center justify-between p-1.5 sm:p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-lg",children:D.symbol}),e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:D.code})]}),e.jsx("span",{className:"font-bold text-slate-800 text-xs sm:text-sm",children:yr(de,D.code)})]},D.code)})})})]}),e.jsxs(_,{className:"shadow-lg border-0 rounded-lg hidden lg:block",children:[e.jsx(q,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-t-lg",children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"تنبيهات مهمة"]})}),e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Zr,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"التحويل فوري ولا يتطلب رموز تأكيد"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"تأكد من صحة بيانات المستلم قبل التحويل"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Zr,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"سيتم إرسال إشعار للمستلم فور استلام المبلغ"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"لا يمكن التراجع عن التحويل بعد التأكيد"})]})]})})]})]})]})]}),e.jsx(ine,{isOpen:h,onClose:()=>j(!1),receiptData:v})]})}):null}const cne=wu({fullName:zr().min(3,"الاسم يجب أن يكون أطول من 3 أحرف"),email:zr().email("بريد إلكتروني غير صالح"),phone:zr().min(10,"رقم الهاتف يجب أن يتكون من 10 أرقام على الأقل"),city:zr().optional(),type:UA(["user","agent","admin"]),adminLevel:Eb().optional(),canManageUsers:ma().optional(),canManageMarket:ma().optional(),canManageChat:ma().optional(),canManageInternalTransfers:ma().optional(),canManageExternalTransfers:ma().optional(),canManageNewAccounts:ma().optional(),canManageSecurity:ma().optional(),canManageSupport:ma().optional(),canManageReports:ma().optional(),canManageSettings:ma().optional()}),dne=wu({subject:zr().min(3,"العنوان يجب أن يكون أطول من 3 أحرف"),message:zr().min(5,"الرسالة يجب أن تكون أطول من 5 أحرف")}),une=wu({amount:zr().refine(t=>!isNaN(Number(t))&&Number(t)>0,{message:"الرجاء إدخال قيمة صحيحة أكبر من صفر"}),currency:zr().min(1,"الرجاء اختيار العملة")}),fne=wu({account_number:zr().min(5,"رقم الحساب يجب أن يتكون من 5 أرقام على الأقل")}),mne=wu({extDailyLimit:zr().min(1,"يجب إدخال الحد اليومي"),extMonthlyLimit:zr().min(1,"يجب إدخال الحد الشهري"),extAllowedCurrencies:FA(zr()).min(1,"يجب اختيار عملة واحدة على الأقل")});function q4(){var P,ee;const{toast:t}=lt(),{user:s}=Mt(),n=(s==null?void 0:s.type)==="admin"&&(s==null?void 0:s.adminLevel)===2,r=(s==null?void 0:s.canManageUsers)||!1;if(s&&s.type==="admin"&&!n&&!r)return e.jsx(Nc,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",dir:"rtl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-6xl",children:"🚫"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"ليس لديك صلاحية للوصول لهذه الصفحة"}),e.jsx("p",{className:"text-gray-600",children:"تحتاج لصلاحية إدارة المستخدمين للوصول لهذا القسم"}),e.jsx(yn,{})]})})});const[a,i]=u.useState({show:!1}),[l,o]=u.useState(null),[c,d]=u.useState(null),[f,x]=u.useState(null),[h,j]=u.useState(null),[v,p]=u.useState(null),[b,y]=u.useState(null);u.useState({amount:"",currency:"LYD"});const[m,g]=u.useState(""),[w,N]=u.useState(""),[k,L]=u.useState([]),[S,T]=u.useState(!1);u.useEffect(()=>{L([]),T(!1)},[w]);const{data:E,isLoading:$,isError:F,error:Z}=$e({queryKey:["/api/admin/users"],queryFn:async()=>await(await ce("/api/admin/users","GET")).json(),refetchInterval:3e4}),G=(E==null?void 0:E.users)||[],D=xs({resolver:ps(cne),defaultValues:{fullName:"",email:"",phone:"",city:"",type:"user"}}),B=xs({resolver:ps(dne),defaultValues:{subject:"",message:""}}),de=xs({resolver:ps(fne),defaultValues:{account_number:""}}),U=xs({resolver:ps(une),defaultValues:{amount:"",currency:"LYD"}}),W=xs({resolver:ps(mne),defaultValues:{extDailyLimit:"",extMonthlyLimit:"",extAllowedCurrencies:["USD","EUR","LYD"]}});u.useEffect(()=>{l&&D.reset({fullName:l.fullName||"",email:l.email||"",phone:l.phone||"",city:l.city||"",type:l.type||"user",adminLevel:l.adminLevel||1,canManageUsers:l.canManageUsers||!1,canManageMarket:l.canManageMarket||!1,canManageChat:l.canManageChat||!1,canManageInternalTransfers:l.canManageInternalTransfers||!1,canManageExternalTransfers:l.canManageExternalTransfers||!1,canManageNewAccounts:l.canManageNewAccounts||!1,canManageSecurity:l.canManageSecurity||!1,canManageSupport:l.canManageSupport||!1,canManageReports:l.canManageReports||!1,canManageSettings:l.canManageSettings||!1})},[l,D]);const{data:re,isLoading:we,refetch:be}=$e({queryKey:v!=null&&v.id?[`/api/admin/users/${v.id}/activities`]:["activities-disabled"],enabled:!!(v!=null&&v.id),staleTime:0,gcTime:0,refetchOnMount:"always",refetchOnWindowFocus:!1}),J=Ze({mutationFn:async({userId:C,active:fe})=>{const le=await ce(`/api/admin/users/${C}/toggle-status`,"POST",{isActive:fe});if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||"فشل في تحديث حالة المستخدم")}return await le.json()},onSuccess:C=>{t({title:"تم التحديث",description:C.message}),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),Fe=Ze({mutationFn:async C=>{const fe=await ce(`/api/admin/users/${C}`,"DELETE");if(!fe.ok){const le=await fe.json().catch(()=>({}));throw new Error(le.message||"فشل في حذف المستخدم")}return await fe.json()},onSuccess:C=>{t({title:"تم الحذف",description:C.message}),i({show:!1}),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),Oe=Ze({mutationFn:async({userId:C,userData:fe})=>{const le=await ce(`/api/admin/users/${C}`,"PUT",fe);if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||"فشل في تحديث بيانات المستخدم")}return await le.json()},onSuccess:C=>{t({title:"تم التحديث",description:C.message}),o(null),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),Ve=Ze({mutationFn:async({userId:C,notification:fe,accountNumber:le})=>{let xe;if(le)xe=await ce("/api/admin/notify-by-account","POST",{account_number:le,subject:fe.subject,message:fe.message});else if(C)xe=await ce(`/api/admin/users/${C}/notify`,"POST",fe);else throw new Error("لم يتم تحديد معرف المستخدم أو رقم الحساب");if(!xe.ok){const Ye=await xe.json().catch(()=>({}));throw new Error(Ye.message||"فشل في إرسال الإشعار")}return await xe.json()},onSuccess:C=>{t({title:"تم الإرسال",description:C.message}),d(null),B.reset(),de.reset()},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),Ne=Ze({mutationFn:async({userId:C,amount:fe,currency:le})=>{const xe=await ce("/api/admin/topup","POST",{account_number:C.toString(),amount:fe,currency:le});if(!xe.ok){const Ye=await xe.json().catch(()=>({}));throw new Error(Ye.message||"فشل في إيداع الرصيد")}return await xe.json()},onSuccess:C=>{t({title:"تم الإيداع",description:C.message}),x(null),j(null),U.reset(),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),qe=Ze({mutationFn:async({userId:C,amount:fe,currency:le})=>{const xe=await ce("/api/admin/withdraw","POST",{user_id:C,amount:fe,currency:le});if(!xe.ok){const Ye=await xe.json().catch(()=>({}));throw new Error(Ye.message||"فشل في سحب الرصيد")}return await xe.json()},onSuccess:C=>{t({title:"تم السحب",description:C.message}),x(null),j(null),U.reset(),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{t({title:"خطأ",description:C.message,variant:"destructive"})}}),ve=Ze({mutationFn:async({userId:C,limits:fe})=>{const le=await ce(`/api/admin/users/${C}/raise-external-transfer-limit`,"PATCH",fe);if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||"فشل في رفع سقف التحويل الخارجي")}return await le.json()},onSuccess:C=>{t({title:"تم تحديث السقف",description:C.message}),y(null),W.reset(),Qe.invalidateQueries({queryKey:["/api/admin/users"]})},onError:C=>{const fe=C.message.includes("غير مصرح به")||C.message.includes("401")?"يجب تسجيل الدخول كمدير للوصول لهذه الميزة. يرجى إعادة تسجيل الدخول بحساب مدير.":C.message;t({title:"خطأ في تحديث سقف التحويل",description:fe,variant:"destructive"})}}),Ee=G.filter(C=>{var le,xe,Ye,Ft,Ut,Ds;if(!m)return!0;const fe=m.toLowerCase();return((le=C.fullName)==null?void 0:le.toLowerCase().includes(fe))||((xe=C.email)==null?void 0:xe.toLowerCase().includes(fe))||((Ye=C.phone)==null?void 0:Ye.toLowerCase().includes(fe))||((Ft=C.accountNumber)==null?void 0:Ft.toLowerCase().includes(fe))||((Ut=C.city)==null?void 0:Ut.toLowerCase().includes(fe))||((Ds=C.type)==null?void 0:Ds.toLowerCase().includes(fe))}),ne=C=>{l!=null&&l.id&&Oe.mutate({userId:l.id,userData:C})},ke=C=>{b!=null&&b.id&&ve.mutate({userId:b.id,limits:C})},tt=C=>{c!=null&&c.id?Ve.mutate({userId:c.id,notification:C}):c!=null&&c.phone&&Ve.mutate({accountNumber:c.phone,notification:C})},xt=C=>{d({phone:C.account_number})},Q=C=>{!(f!=null&&f.id)||!h||(h==="topup"?Ne.mutate({userId:f.id,amount:C.amount,currency:C.currency}):h==="withdraw"&&qe.mutate({userId:f.id,amount:C.amount,currency:C.currency}))},oe=()=>re!=null&&re.activities?w.trim()?re.activities.filter(C=>{var xe,Ye,Ft,Ut,Ds,dr,En,ur;const fe=w.toLowerCase();return!!((C.type==="transaction"?C.data.type==="deposit"?"إيداع":"سحب":"تحويل").toLowerCase().includes(fe)||(xe=C.data.amount)!=null&&xe.toString().includes(fe)||(Ye=C.data.currency)!=null&&Ye.toLowerCase().includes(fe)||(Ft=C.data.description)!=null&&Ft.toLowerCase().includes(fe)||(Ut=C.data.referenceNumber)!=null&&Ut.toLowerCase().includes(fe)||C.type==="transfer"&&((Ds=C.data.senderName)!=null&&Ds.toLowerCase().includes(fe)||(dr=C.data.receiverName)!=null&&dr.toLowerCase().includes(fe)||(En=C.data.senderAccountNumber)!=null&&En.includes(fe)||(ur=C.data.receiverAccountNumber)!=null&&ur.includes(fe)))}):re.activities:[],Ae=async()=>{if(k.length===0){t({title:"تحذير",description:"الرجاء تحديد العناصر المراد حذفها",variant:"destructive"});return}const C=oe(),fe=k.map(Ye=>C[Ye]),le=fe.filter(Ye=>Ye.type==="transaction").map(Ye=>Ye.data.id),xe=fe.filter(Ye=>Ye.type==="transfer").map(Ye=>Ye.data.id);try{if(le.length>0&&!(await ce("/api/admin/transactions/delete","DELETE",{transactionIds:le})).ok)throw new Error("فشل في حذف المعاملات");if(xe.length>0&&!(await ce("/api/admin/transfers/delete","DELETE",{transferIds:xe})).ok)throw new Error("فشل في حذف التحويلات");Qe.invalidateQueries({queryKey:[`/api/admin/users/${v==null?void 0:v.id}/activities`]}),L([]),T(!1),t({title:"نجح الحذف",description:`تم حذف ${k.length} عنصر بنجاح`,variant:"default"})}catch(Ye){t({title:"خطأ في الحذف",description:Ye.message||"حدث خطأ أثناء حذف العناصر",variant:"destructive"})}},jt=C=>{const fe=`
      <!DOCTYPE html>
      <html dir="rtl" lang="ar">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>إيصال معاملة</title>
        <style>
          @media print {
            body { 
              margin: 0; 
              padding: 8px; 
              width: 72mm; 
              font-family: Arial, sans-serif; 
              font-size: 11px; 
              line-height: 1.3;
              color: #000;
              background: #fff;
            }
            .header { 
              text-align: center; 
              border-bottom: 2px dashed #000; 
              padding-bottom: 8px; 
              margin-bottom: 10px; 
            }
            .activity { 
              padding: 8px 0; 
            }
            .type { 
              font-weight: bold; 
              font-size: 14px;
              text-align: center;
              margin-bottom: 8px; 
              border: 1px solid #000;
              padding: 4px;
            }
            .amount { 
              font-weight: bold; 
              font-size: 16px; 
              text-align: center;
              border: 1px dashed #000;
              padding: 6px;
              margin: 8px 0;
            }
            .details { 
              font-size: 10px; 
              margin: 3px 0; 
              padding: 2px 0;
            }
            .date { 
              font-size: 9px; 
              text-align: center;
              margin-top: 8px;
              border-top: 1px dotted #000;
              padding-top: 6px;
            }
            .footer { 
              text-align: center; 
              margin-top: 15px; 
              font-size: 8px; 
              border-top: 2px dashed #000; 
              padding-top: 8px; 
            }
          }
          body { 
            margin: 0; 
            padding: 8px; 
            width: 72mm; 
            font-family: Arial, sans-serif; 
            font-size: 11px; 
            line-height: 1.3;
            direction: rtl;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px dashed #000; 
            padding-bottom: 8px; 
            margin-bottom: 10px; 
          }
          .activity { 
            padding: 8px 0; 
          }
          .type { 
            font-weight: bold; 
            font-size: 14px;
            text-align: center;
            margin-bottom: 8px; 
            border: 1px solid #000;
            padding: 4px;
          }
          .amount { 
            font-weight: bold; 
            font-size: 16px; 
            text-align: center;
            border: 1px dashed #000;
            padding: 6px;
            margin: 8px 0;
          }
          .details { 
            font-size: 10px; 
            margin: 3px 0; 
            padding: 2px 0;
          }
          .date { 
            font-size: 9px; 
            text-align: center;
            margin-top: 8px;
            border-top: 1px dotted #000;
            padding-top: 6px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 8px; 
            border-top: 2px dashed #000; 
            padding-top: 8px; 
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>منصة الصرافة</h2>
          <p>إيصال معاملة</p>
          <p>المستخدم: ${v==null?void 0:v.fullName}</p>
        </div>
        
        <div class="activity">
          <div class="type">
            ${C.type==="transaction"?C.data.type==="deposit"?"إيداع":C.data.type==="withdrawal"?"سحب":"صرافة":"تحويل"}
          </div>
          
          ${C.type==="transfer"?`
            <div class="details">
              <strong>${C.data.transferKind==="external"?"تحويل خارجي":"تحويل داخلي"}</strong>
            </div>
            <div class="details">
              من: ${C.data.senderName||"غير محدد"} ${C.data.senderAccountNumber?`(${C.data.senderAccountNumber})`:""}
            </div>
            <div class="details">
              إلى: ${C.data.receiverName||"غير محدد"} ${C.data.receiverAccountNumber?`(${C.data.receiverAccountNumber})`:""}
            </div>
            ${C.data.commission&&Number(C.data.commission)>0?`
              <div class="details"><strong>العمولة: ${C.data.commission} ${C.data.currency}</strong></div>
            `:""}
            ${C.data.referenceNumber?`
              <div class="details">المرجع: ${C.data.referenceNumber}</div>
            `:""}
            ${C.data.destinationCountry?`
              <div class="details">الوجهة: ${C.data.destinationCountry}</div>
            `:""}
            ${C.data.note?`
              <div class="details">الملاحظة: ${C.data.note}</div>
            `:""}
          `:`
            ${C.data.description?`
              <div class="details">${C.data.description}</div>
            `:""}
            ${C.data.referenceNumber?`
              <div class="details">المرجع: ${C.data.referenceNumber}</div>
            `:""}
          `}
          
          <div class="amount">
            ${C.data.amount} ${C.data.currency}
          </div>
          
          <div class="date">
            ${new Date(C.createdAt||C.data.createdAt||C.data.date).toLocaleString("ar-LY")}
          </div>
        </div>
        
        <div class="footer">
          <p>شكراً لكم لاستخدام خدماتنا</p>
          <p>تم الطباعة: ${new Date().toLocaleString("ar-LY")}</p>
        </div>
      </body>
      </html>
    `,le=window.open("","_blank","width=300,height=600,scrollbars=yes");le?(le.document.write(fe),le.document.close(),le.onload=()=>{setTimeout(()=>{le.focus(),le.print(),setTimeout(()=>{le.close()},1e3)},500)}):t({title:"خطأ",description:"تعذر فتح نافذة الطباعة. يرجى التأكد من أن النوافذ المنبثقة مسموحة.",variant:"destructive"})},O=()=>{if(!(re!=null&&re.activities)||re.activities.length===0){t({title:"تحذير",description:"لا توجد أنشطة للطباعة",variant:"destructive"});return}const C=`
      <!DOCTYPE html>
      <html dir="rtl" lang="ar">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>تقرير أنشطة المستخدم</title>
        <style>
          @media print {
            body { 
              margin: 0; 
              padding: 8px; 
              width: 72mm; 
              font-family: Arial, sans-serif; 
              font-size: 10px; 
              line-height: 1.2;
              color: #000;
              background: #fff;
            }
            .header { 
              text-align: center; 
              border-bottom: 1px dashed #000; 
              padding-bottom: 5px; 
              margin-bottom: 8px; 
            }
            .activity { 
              border-bottom: 1px dotted #ccc; 
              padding: 4px 0; 
              margin-bottom: 4px; 
            }
            .activity:last-child { border-bottom: none; }
            .type { 
              font-weight: bold; 
              margin-bottom: 2px; 
            }
            .amount { 
              font-weight: bold; 
              font-size: 11px; 
            }
            .date { 
              font-size: 8px; 
              color: #666; 
            }
            .details { 
              font-size: 9px; 
              margin: 2px 0; 
            }
            .footer { 
              text-align: center; 
              margin-top: 10px; 
              font-size: 8px; 
              border-top: 1px dashed #000; 
              padding-top: 5px; 
            }
          }
          body { 
            margin: 0; 
            padding: 8px; 
            width: 72mm; 
            font-family: Arial, sans-serif; 
            font-size: 10px; 
            line-height: 1.2;
            direction: rtl;
          }
          .header { 
            text-align: center; 
            border-bottom: 1px dashed #000; 
            padding-bottom: 5px; 
            margin-bottom: 8px; 
          }
          .activity { 
            border-bottom: 1px dotted #ccc; 
            padding: 4px 0; 
            margin-bottom: 4px; 
          }
          .activity:last-child { border-bottom: none; }
          .type { 
            font-weight: bold; 
            margin-bottom: 2px; 
          }
          .amount { 
            font-weight: bold; 
            font-size: 11px; 
          }
          .date { 
            font-size: 8px; 
            color: #666; 
          }
          .details { 
            font-size: 9px; 
            margin: 2px 0; 
          }
          .footer { 
            text-align: center; 
            margin-top: 10px; 
            font-size: 8px; 
            border-top: 1px dashed #000; 
            padding-top: 5px; 
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>تقرير أنشطة المستخدم</h2>
          <p>${v==null?void 0:v.fullName}</p>
          <p>تاريخ التقرير: ${new Date().toLocaleDateString("ar-LY")}</p>
        </div>
        
        ${re.activities.map((le,xe)=>`
          <div class="activity">
            <div class="type">
              ${le.type==="transaction"?le.data.type==="deposit"?"إيداع":le.data.type==="withdrawal"?"سحب":"صرافة":"تحويل"}
            </div>
            
            ${le.type==="transfer"?`
              <div class="details">
                ${le.data.transferKind==="external"?"تحويل خارجي":"تحويل داخلي"}
              </div>
              <div class="details">
                من: ${le.data.senderName||"غير محدد"} ${le.data.senderAccountNumber?`(${le.data.senderAccountNumber})`:""}
              </div>
              <div class="details">
                إلى: ${le.data.receiverName||"غير محدد"} ${le.data.receiverAccountNumber?`(${le.data.receiverAccountNumber})`:""}
              </div>
              ${le.data.commission&&Number(le.data.commission)>0?`
                <div class="details">العمولة: ${le.data.commission} ${le.data.currency}</div>
              `:""}
              ${le.data.referenceNumber?`
                <div class="details">المرجع: ${le.data.referenceNumber}</div>
              `:""}
              ${le.data.destinationCountry?`
                <div class="details">الوجهة: ${le.data.destinationCountry}</div>
              `:""}
              ${le.data.note?`
                <div class="details">الملاحظة: ${le.data.note}</div>
              `:""}
            `:`
              ${le.data.description?`
                <div class="details">${le.data.description}</div>
              `:""}
              ${le.data.referenceNumber?`
                <div class="details">المرجع: ${le.data.referenceNumber}</div>
              `:""}
            `}
            
            <div class="amount">
              ${le.data.amount} ${le.data.currency}
            </div>
            <div class="date">
              ${new Date(le.createdAt||le.data.createdAt||le.data.date).toLocaleString("ar-LY")}
            </div>
          </div>
        `).join("")}
        
        <div class="footer">
          <p>منصة الصرافة</p>
          <p>تم الطباعة: ${new Date().toLocaleString("ar-LY")}</p>
        </div>
      </body>
      </html>
    `,fe=window.open("","_blank","width=300,height=600,scrollbars=yes");fe?(fe.document.write(C),fe.document.close(),fe.onload=()=>{setTimeout(()=>{fe.focus(),fe.print(),setTimeout(()=>{fe.close()},1e3)},500)}):t({title:"خطأ",description:"تعذر فتح نافذة الطباعة. يرجى التأكد من أن النوافذ المنبثقة مسموحة.",variant:"destructive"})};return e.jsxs(Nc,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"إدارة المستخدمين"})}),e.jsx("div",{className:"bg-white shadow rounded p-4",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"بحث عن مستخدم...",className:"pl-10 w-64",value:m,onChange:C=>g(C.target.value)})]}),e.jsxs(M,{variant:"default",className:"flex items-center bg-blue-600 hover:bg-blue-700",onClick:()=>d({phone:""}),children:[e.jsx(Sa,{className:"h-4 w-4 ml-2"}),"إرسال إشعار برقم الحساب"]}),e.jsxs(M,{onClick:()=>Qe.invalidateQueries({queryKey:["/api/admin/users"]}),children:[e.jsx(ys,{className:"h-4 w-4 ml-2"}),"تحديث"]})]})}),$?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(ft,{className:"h-8 w-8 animate-spin"})}):F?e.jsxs(_,{className:"border-destructive",children:[e.jsx(q,{children:e.jsx(X,{className:"text-destructive",children:"خطأ في تحميل البيانات"})}),e.jsx(z,{children:e.jsx("p",{children:Z.message})})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx(z,{className:"p-0",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-right",children:"#"}),e.jsx(ae,{className:"text-right",children:"الاسم"}),e.jsx(ae,{className:"text-right",children:"البريد الإلكتروني"}),e.jsx(ae,{className:"text-right",children:"الهاتف"}),e.jsx(ae,{className:"text-right",children:"النوع"}),e.jsx(ae,{className:"text-right",children:"الأرصدة"}),e.jsx(ae,{className:"text-right",children:"سقف التحويل الخارجي"}),e.jsx(ae,{className:"text-right",children:"الحالة"}),e.jsx(ae,{className:"text-right",children:"الإجراءات"})]})}),e.jsx(Qs,{children:(Ee==null?void 0:Ee.length)===0?e.jsx(kt,{children:e.jsx(se,{colSpan:9,className:"text-center py-6",children:"لا توجد بيانات للعرض"})}):Ee==null?void 0:Ee.map(C=>e.jsxs(kt,{children:[e.jsx(se,{children:ka(C.phone||(C.id===4?1:C.id))}),e.jsx(se,{children:C.email==="ss73ss73ss73@gmail.com"&&C.id===4?"مدير النظام":C.fullName}),e.jsx(se,{children:C.email}),e.jsx(se,{children:C.phone}),e.jsx(se,{children:C.type==="admin"?e.jsxs(ie,{variant:"destructive",children:["مدير ",C.adminLevel===2?"عام":"محدود"]}):C.type==="agent"?C.hasExternalTransferAccess?e.jsx(ie,{className:"bg-green-600 text-white hover:bg-green-700",children:"وكيل دولي"}):C.hasAgentAccess?e.jsx(ie,{className:"bg-blue-600 text-white hover:bg-blue-700",children:"وكيل"}):e.jsx(ie,{variant:"outline",children:"وكيل (بانتظار الموافقة)"}):e.jsx(ie,{variant:"secondary",children:"مستخدم"})}),e.jsx(se,{children:e.jsx("div",{className:"text-xs space-y-1",children:Object.entries(C.balances||{}).map(([fe,le])=>e.jsx("div",{children:e.jsxs(ie,{variant:"outline",children:[le," ",fe]})},fe))})}),e.jsx(se,{children:C.hasExternalTransferAccess?e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"font-medium text-green-600",children:"مفعل"}),C.extDailyLimit&&e.jsxs("div",{children:["يومي: ",e.jsx("span",{className:"font-mono",children:C.extDailyLimit})]}),C.extMonthlyLimit&&e.jsxs("div",{children:["شهري: ",e.jsx("span",{className:"font-mono",children:C.extMonthlyLimit})]}),C.extAllowedCurrencies&&C.extAllowedCurrencies.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العملات:"})," ",C.extAllowedCurrencies.join(", ")]})]}):C.type==="agent"?e.jsx("div",{className:"text-xs text-muted-foreground",children:"غير مفعل"}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"-"})}),e.jsx(se,{children:e.jsx(ie,{variant:C.active===!1?"destructive":"default",children:C.active===!1?"معطل":"مفعل"})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{x(C),j("topup"),U.reset({amount:"",currency:"LYD"})},title:"إيداع رصيد",children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{x(C),j("withdraw"),U.reset({amount:"",currency:"LYD"})},title:"سحب رصيد",children:e.jsx(wa,{className:"h-4 w-4 rotate-180"})}),(C.type!=="admin"||n)&&C.id!==(s==null?void 0:s.id)&&e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>o(C),title:"تعديل البيانات",children:e.jsx(Wf,{className:"h-4 w-4"})}),(C.type!=="admin"||n)&&C.id!==(s==null?void 0:s.id)&&e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{J.mutate({userId:C.id,active:C.active===!1})},title:C.active===!1?"تفعيل الحساب":"تعطيل الحساب",className:C.active===!1?"text-green-600 hover:text-green-700":"text-red-600 hover:text-red-700",children:C.active===!1?e.jsx(ks,{className:"h-4 w-4"}):e.jsx(Jd,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>d(C),title:"إرسال إشعار",children:e.jsx(Sa,{className:"h-4 w-4"})}),C.type==="agent"&&e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{y(C),W.reset({extDailyLimit:C.extDailyLimit||"",extMonthlyLimit:C.extMonthlyLimit||"",extAllowedCurrencies:C.extAllowedCurrencies||["USD"]})},title:"إدارة سقف التحويل الخارجي",className:"text-blue-600 hover:text-blue-700",children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{p(C),be()},title:"سجل الأنشطة",children:e.jsx($v,{className:"h-4 w-4"})}),(C.type!=="admin"||n)&&C.id!==(s==null?void 0:s.id)&&e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>i({show:!0,userId:C.id}),title:"حذف المستخدم",children:e.jsx(mx,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["عدد المستخدمين: ",(Ee==null?void 0:Ee.length)||0," (من أصل ",(G==null?void 0:G.length)||0,")"]})]})]}),e.jsx(rl,{open:a.show,onOpenChange:C=>i({show:C}),children:e.jsxs(yi,{className:"dir-rtl",children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"هل أنت متأكد من حذف هذا المستخدم؟"}),e.jsx(Ni,{children:"سيتم حذف المستخدم وجميع بياناته بشكل نهائي. هذا الإجراء لا يمكن التراجع عنه."})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>Fe.mutate(a.userId),children:Fe.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin"}):"حذف المستخدم"})]})]})}),e.jsx(Ht,{open:!!l,onOpenChange:C=>!C&&o(null),children:e.jsxs($t,{className:"dir-rtl max-w-lg overflow-y-auto max-h-[90vh]",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تعديل بيانات المستخدم"}),e.jsx(ls,{children:"يمكنك تعديل بيانات المستخدم من هنا."})]}),e.jsx(Bs,{...D,children:e.jsxs("form",{onSubmit:D.handleSubmit(ne),className:"space-y-4",children:[e.jsx(_e,{control:D.control,name:"fullName",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الاسم الكامل"}),e.jsx(Re,{children:e.jsx(pe,{...C})}),e.jsx(He,{})]})}),e.jsx(_e,{control:D.control,name:"email",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"البريد الإلكتروني"}),e.jsx(Re,{children:e.jsx(pe,{...C,type:"email"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:D.control,name:"phone",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رقم الهاتف"}),e.jsx(Re,{children:e.jsx(pe,{...C})}),e.jsx(He,{})]})}),e.jsx(_e,{control:D.control,name:"city",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المدينة"}),e.jsx(Re,{children:e.jsx(pe,{...C})}),e.jsx(He,{})]})}),e.jsx(_e,{control:D.control,name:"type",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نوع الحساب"}),e.jsxs(Nt,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر نوع الحساب"})})}),e.jsxs(wt,{children:[e.jsx(te,{value:"user",children:"مستخدم عادي"}),e.jsx(te,{value:"agent",children:"وكيل"}),n&&e.jsx(te,{value:"admin",children:"مدير"})]})]}),e.jsx(He,{})]})}),n&&((l==null?void 0:l.type)==="admin"||D.watch("type")==="admin")&&e.jsx(_e,{control:D.control,name:"adminLevel",render:({field:C})=>{var fe;return e.jsxs(De,{children:[e.jsx(Pe,{children:"مستوى الإدارة"}),e.jsxs(Nt,{onValueChange:le=>C.onChange(parseInt(le)),defaultValue:(fe=C.value)==null?void 0:fe.toString(),children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر مستوى الإدارة"})})}),e.jsxs(wt,{children:[e.jsx(te,{value:"1",children:"مدير نظام محدود"}),(l==null?void 0:l.adminLevel)===2&&e.jsx(te,{value:"2",children:"مدير عام"})]})]}),e.jsx(He,{}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[C.value===1&&"مدير نظام محدود: يمكنه إدارة المستخدمين والعمليات الأساسية",C.value===2&&"مدير عام: صلاحيات كاملة بما في ذلك إدارة نظام الأمان"]})]})}}),n&&((l==null?void 0:l.type)==="admin"||D.watch("type")==="admin")&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الصلاحيات التفصيلية"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(_e,{control:D.control,name:"canManageUsers",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إدارة المستخدمين"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إضافة وتعديل وحذف المستخدمين"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageMarket",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"مراقبة صفحة السوق"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراقبة عروض البيع والشراء والتداول"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageChat",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"مراقبة الدردشة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراقبة الرسائل والمحادثات"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageInternalTransfers",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إدارة التحويل الداخلي"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراقبة التحويلات بين المستخدمين"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageExternalTransfers",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إدارة التحويل الخارجي"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراقبة الحوالات الدولية والخارجية"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageNewAccounts",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إدارة الحسابات الجديدة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراجعة وقبول طلبات التسجيل الجديدة"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageSecurity",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إدارة نظام الأمان"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراقبة الدخول المشبوه والأنشطة الأمنية"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageSupport",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"الرد على الاستفسارات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"الرد على استفسارات المستخدمين والدعم الفني"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageReports",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"التقارير والإحصائيات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"الوصول للتقارير وإحصائيات النظام"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})}),e.jsx(_e,{control:D.control,name:"canManageSettings",render:({field:C})=>e.jsxs(De,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Pe,{className:"text-base font-medium",children:"إعدادات النظام"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"تعديل إعدادات النظام العامة"})]}),e.jsx(Re,{children:e.jsx("input",{type:"checkbox",checked:C.value,onChange:C.onChange,className:"h-4 w-4"})})]})})]})]})}),e.jsx(_n,{children:e.jsxs(M,{type:"submit",disabled:Oe.isPending,children:[Oe.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}):null,"حفظ التغييرات"]})})]})})]})}),e.jsx(Ht,{open:!!c,onOpenChange:C=>{C||(d(null),B.reset(),de.reset())},children:e.jsxs($t,{className:"dir-rtl max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:c!=null&&c.id?`إرسال إشعار إلى ${c.fullName}`:"إرسال إشعار برقم الحساب"}),e.jsx(ls,{children:c!=null&&c.id?"سيتم إرسال إشعار إلى المستخدم المحدد.":"أدخل رقم حساب المستخدم لإرسال إشعار له."})]}),!(c!=null&&c.id)&&(c==null?void 0:c.phone)===""&&e.jsx(Bs,{...de,children:e.jsxs("form",{onSubmit:de.handleSubmit(xt),className:"space-y-4",children:[e.jsx(_e,{control:de.control,name:"account_number",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رقم الحساب"}),e.jsx(Re,{children:e.jsx(pe,{...C,placeholder:"أدخل رقم الحساب"})}),e.jsx(He,{})]})}),e.jsx(M,{type:"submit",className:"w-full",children:"بحث"})]})}),((c==null?void 0:c.id)||((P=c==null?void 0:c.phone)==null?void 0:P.length)>0)&&e.jsx(Bs,{...B,children:e.jsxs("form",{onSubmit:B.handleSubmit(tt),className:"space-y-4",children:[e.jsx(_e,{control:B.control,name:"subject",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"عنوان الإشعار"}),e.jsx(Re,{children:e.jsx(pe,{...C,placeholder:"أدخل عنوان الإشعار"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:B.control,name:"message",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نص الإشعار"}),e.jsx(Re,{children:e.jsx(Un,{...C,placeholder:"أدخل نص الإشعار",className:"min-h-32"})}),e.jsx(He,{})]})}),e.jsx(_n,{children:e.jsxs(M,{type:"submit",disabled:Ve.isPending,children:[Ve.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}):null,"إرسال الإشعار"]})})]})})]})}),e.jsx(Ht,{open:!!f&&!!h,onOpenChange:C=>{C||(x(null),j(null),U.reset())},children:e.jsxs($t,{className:"dir-rtl max-w-md",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:h==="topup"?`إيداع رصيد في حساب ${f==null?void 0:f.fullName}`:`سحب رصيد من حساب ${f==null?void 0:f.fullName}`}),e.jsx(ls,{children:h==="topup"?"أدخل المبلغ والعملة لإيداعها في حساب المستخدم":"أدخل المبلغ والعملة لسحبها من حساب المستخدم"})]}),e.jsx(Bs,{...U,children:e.jsxs("form",{onSubmit:U.handleSubmit(Q),className:"space-y-4",children:[e.jsx(_e,{control:U.control,name:"amount",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المبلغ"}),e.jsx(Re,{children:e.jsx(pe,{...C,type:"number",min:"0",step:"0.01",placeholder:"أدخل المبلغ"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:U.control,name:"currency",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة"}),e.jsxs(Nt,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsxs(wt,{children:[e.jsx(te,{value:"LYD",children:"دينار ليبي (LYD)"}),e.jsx(te,{value:"USD",children:"دولار أمريكي (USD)"}),e.jsx(te,{value:"EUR",children:"يورو (EUR)"}),e.jsx(te,{value:"GBP",children:"جنيه إسترليني (GBP)"}),e.jsx(te,{value:"TRY",children:"ليرة تركية (TRY)"}),e.jsx(te,{value:"TND",children:"دينار تونسي (TND)"}),e.jsx(te,{value:"EGP",children:"جنيه مصري (EGP)"}),e.jsx(te,{value:"AED",children:"درهم إماراتي (AED)"})]})]}),e.jsx(He,{})]})}),e.jsx(_n,{children:e.jsxs(M,{type:"submit",disabled:h==="topup"?Ne.isPending:qe.isPending,variant:h==="topup"?"default":"destructive",children:[(h==="topup"?Ne.isPending:qe.isPending)?e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}):null,h==="topup"?"إيداع":"سحب"]})})]})})]})}),e.jsx(Ht,{open:!!v,onOpenChange:C=>!C&&p(null),children:e.jsxs($t,{className:"dir-rtl max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Vt,{children:["سجل أنشطة المستخدم ",v==null?void 0:v.fullName]}),e.jsx(ls,{children:"عرض جميع الأنشطة والمعاملات المالية للمستخدم."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{onClick:()=>O(),variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-thermal-print",children:[e.jsx(Hf,{className:"h-4 w-4"}),"طباعة حرارية"]}),k.length>0&&e.jsxs(M,{onClick:()=>Ae(),variant:"destructive",size:"sm",className:"flex items-center gap-2","data-testid":"button-delete-activities",children:[e.jsx(is,{className:"h-4 w-4"}),"حذف المحدد (",k.length,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pe,{placeholder:"البحث في الأنشطة...",value:w,onChange:C=>N(C.target.value),className:"pr-10","data-testid":"input-search-activities"})]}),e.jsxs(M,{onClick:()=>{N(""),L([]),T(!1)},variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-clear-search",children:[e.jsx(ys,{className:"h-4 w-4"}),"مسح"]})]})]}),we?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(ft,{className:"h-8 w-8 animate-spin"})}):((ee=re==null?void 0:re.activities)==null?void 0:ee.length)===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد أنشطة مسجلة لهذا المستخدم."}):e.jsx(_,{children:e.jsx(z,{className:"p-0",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-center w-12",children:e.jsx("input",{type:"checkbox",checked:S,onChange:C=>{if(T(C.target.checked),C.target.checked){const fe=oe();L(fe.map((le,xe)=>xe))}else L([])},className:"rounded","data-testid":"checkbox-select-all-activities"})}),e.jsx(ae,{className:"text-right",children:"النوع"}),e.jsx(ae,{className:"text-right",children:"التفاصيل"}),e.jsx(ae,{className:"text-right",children:"المبلغ"}),e.jsx(ae,{className:"text-right",children:"التاريخ"}),e.jsx(ae,{className:"text-center",children:"طباعة"})]})}),e.jsx(Qs,{children:oe().map((C,fe)=>e.jsxs(kt,{children:[e.jsx(se,{className:"text-center",children:e.jsx("input",{type:"checkbox",checked:k.includes(fe),onChange:le=>{le.target.checked?L(xe=>[...xe,fe]):(L(xe=>xe.filter(Ye=>Ye!==fe)),T(!1))},className:"rounded","data-testid":`checkbox-activity-${fe}`})}),e.jsx(se,{children:e.jsx(ie,{variant:C.type==="transaction"?C.data.type==="deposit"?"default":"destructive":"outline",children:C.type==="transaction"?C.data.type==="deposit"?"إيداع":"سحب":"تحويل"})}),e.jsx(se,{children:e.jsx("div",{className:"space-y-1",children:C.type==="transfer"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium",children:C.data.transferKind==="external"?"تحويل خارجي":"تحويل داخلي"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["من: ",C.data.senderName," ",C.data.senderAccountNumber?`(${C.data.senderAccountNumber})`:""]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["إلى: ",C.data.receiverName," ",C.data.receiverAccountNumber?`(${C.data.receiverAccountNumber})`:""]}),C.data.commission&&Number(C.data.commission)>0&&e.jsxs("div",{className:"text-xs text-orange-600",children:["العمولة: ",C.data.commission," ",C.data.currency]}),C.data.referenceNumber&&e.jsxs("div",{className:"text-xs text-gray-500",children:["المرجع: ",C.data.referenceNumber]}),C.data.destinationCountry&&e.jsxs("div",{className:"text-xs text-blue-600",children:["الوجهة: ",C.data.destinationCountry]}),C.data.note&&e.jsxs("div",{className:"text-xs text-gray-700",children:["الملاحظة: ",C.data.note]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium",children:C.data.type==="deposit"?"إيداع":C.data.type==="withdrawal"?"سحب":C.data.type==="exchange"?"صرافة":"معاملة"}),C.data.description&&e.jsx("div",{className:"text-xs text-gray-700",children:C.data.description}),C.data.referenceNumber&&e.jsxs("div",{className:"text-xs text-gray-500",children:["المرجع: ",C.data.referenceNumber]})]})})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"ml-1",children:C.data.amount}),e.jsx("span",{children:C.data.currency})]})}),e.jsx(se,{children:new Date(C.createdAt||C.data.createdAt||C.data.date).toLocaleString("ar-LY")}),e.jsx(se,{className:"text-center",children:e.jsxs(M,{onClick:()=>jt(C),variant:"outline",size:"sm",className:"flex items-center gap-1 px-2 py-1","data-testid":`button-print-activity-${fe}`,children:[e.jsx(Hf,{className:"h-3 w-3"}),"طباعة"]})})]},fe))})]})})})]})}),e.jsx(Ht,{open:!!b,onOpenChange:C=>{C||(y(null),W.reset())},children:e.jsxs($t,{className:"dir-rtl max-w-lg",children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{children:["إدارة سقف التحويل الخارجي للوكيل ",b==null?void 0:b.fullName]}),e.jsx(ls,{children:"يمكنك تعديل حدود التحويل الخارجي والعملات المسموحة للوكيل."})]}),e.jsx(Bs,{...W,children:e.jsxs("form",{onSubmit:W.handleSubmit(ke),className:"space-y-4",children:[e.jsx(_e,{control:W.control,name:"extDailyLimit",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الحد اليومي (USD)"}),e.jsx(Re,{children:e.jsx(pe,{...C,type:"number",min:"0",step:"1",placeholder:"10000"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:W.control,name:"extMonthlyLimit",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الحد الشهري (USD)"}),e.jsx(Re,{children:e.jsx(pe,{...C,type:"number",min:"0",step:"1",placeholder:"50000"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:W.control,name:"extAllowedCurrencies",render:({field:C})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملات المسموحة"}),e.jsx(Re,{children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["LYD","USD","EUR","GBP","TRY","TND","EGP","AED"].map(fe=>e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:C.value.includes(fe),onChange:le=>{le.target.checked?C.onChange([...C.value,fe]):C.onChange(C.value.filter(xe=>xe!==fe))}}),e.jsx("span",{className:"text-sm",children:fe})]},fe))})}),e.jsx(He,{})]})}),e.jsx(_n,{children:e.jsxs(M,{type:"submit",disabled:ve.isPending,children:[ve.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}):null,"تحديث السقف"]})})]})})]})})]})}const hne=R.object({account_number:R.string().min(1,{message:"رقم الحساب مطلوب"}),subject:R.string().min(3,{message:"الموضوع يجب أن يحتوي على 3 أحرف على الأقل"}),message:R.string().min(10,{message:"الرسالة يجب أن تحتوي على 10 أحرف على الأقل"})});function xne(){const[t,s]=_t(),{toast:n}=lt(),[r,a]=u.useState("idle"),i=xs({resolver:ps(hne),defaultValues:{account_number:"",subject:"",message:""}}),l=Ze({mutationFn:async c=>{const d=await ce("/api/admin/notify-by-account","POST",{account_number:c.account_number,subject:c.subject,message:c.message});if(!d.ok){const f=await d.json().catch(()=>({}));throw new Error(f.message||"فشل في إرسال الإشعار")}return await d.json()},onSuccess:c=>{a("success"),n({title:"تم الإرسال",description:c.message}),i.reset()},onError:c=>{a("error"),n({title:"خطأ",description:c.message,variant:"destructive"})}}),o=c=>{a("sending"),l.mutate(c)};return e.jsx(Nc,{children:e.jsxs("div",{className:"container mx-auto p-4 dir-rtl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"إرسال إشعارات"}),e.jsxs(M,{variant:"outline",onClick:()=>s("/admin"),className:"flex items-center gap-2",children:[e.jsx(Br,{className:"h-4 w-4"}),"العودة للوحة التحكم"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(_,{className:"md:col-span-1",children:[e.jsxs(q,{children:[e.jsx(X,{children:"إرسال إشعار لمستخدم"}),e.jsx(Se,{children:"قم بإرسال إشعار إلى مستخدم محدد عن طريق رقم الحساب"})]}),e.jsxs(z,{children:[e.jsx(Bs,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-6",children:[e.jsx(_e,{control:i.control,name:"account_number",render:({field:c})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رقم حساب المستخدم"}),e.jsx(Re,{children:e.jsx(pe,{...c,placeholder:"أدخل رقم حساب المستخدم (مثال: 2XXXXXXXXX)",dir:"ltr"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"subject",render:({field:c})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"موضوع الإشعار"}),e.jsx(Re,{children:e.jsx(pe,{...c,placeholder:"أدخل موضوع الإشعار"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"message",render:({field:c})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"محتوى الإشعار"}),e.jsx(Re,{children:e.jsx(Un,{...c,placeholder:"أدخل محتوى الإشعار",rows:5,className:"resize-none"})}),e.jsx(He,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",disabled:r==="sending",children:[r==="sending"&&e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}),e.jsx(Sa,{className:"h-4 w-4 ml-2"}),"إرسال الإشعار"]})]})}),r==="success"&&e.jsxs("div",{className:"mt-6 p-4 rounded-md bg-green-50 border border-green-500 text-green-600",children:[e.jsxs("div",{className:"flex items-center font-medium mb-2",children:[e.jsx(ks,{className:"h-4 w-4 ml-2"}),"تم إرسال الإشعار بنجاح"]}),e.jsx("div",{className:"text-sm",children:"تم إرسال الإشعار إلى المستخدم بنجاح"})]}),r==="error"&&e.jsxs("div",{className:"mt-6 p-4 rounded-md bg-red-50 border border-red-500 text-red-600",children:[e.jsxs("div",{className:"flex items-center font-medium mb-2",children:[e.jsx(_s,{className:"h-4 w-4 ml-2"}),"فشل في إرسال الإشعار"]}),e.jsx("div",{className:"text-sm",children:"حدث خطأ أثناء إرسال الإشعار. يرجى التحقق من رقم الحساب وحاول مرة أخرى."})]})]})]}),e.jsxs(_,{className:"md:col-span-1",children:[e.jsxs(q,{children:[e.jsx(X,{children:"تعليمات استخدام نظام الإشعارات"}),e.jsx(Se,{children:"كيفية استخدام نظام الإشعارات بفعالية"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"رقم الحساب"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'أدخل رقم حساب المستخدم الذي تريد إرسال الإشعار إليه. يجب أن يبدأ رقم الحساب بـ "2" متبوعاً بـ 9 أرقام.'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"موضوع الإشعار"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"أدخل موضوعاً واضحاً وموجزاً للإشعار يلخص محتواه."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"محتوى الإشعار"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"أدخل المحتوى التفصيلي للإشعار. تأكد من أن المحتوى واضح ومفهوم للمستخدم."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-500 text-blue-600 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center font-medium mb-2",children:[e.jsx(Sa,{className:"h-4 w-4 ml-2"}),"ملاحظة هامة"]}),e.jsx("div",{className:"text-sm",children:"سيظهر الإشعار للمستخدم في قائمة الإشعارات الخاصة به فور إرساله. تأكد من صحة رقم الحساب قبل الإرسال."})]})]})]})]})]})})}var sR={exports:{}},pne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gne=pne,jne=gne;function nR(){}function rR(){}rR.resetWarningCache=nR;var yne=function(){function t(r,a,i,l,o,c){if(c!==jne){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:rR,resetWarningCache:nR};return n.PropTypes=n,n};sR.exports=yne();var vne=sR.exports;const Hs=cu(vne);function bne(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var aR=u,wne=bne(aR);function K4(t,s,n){return s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Nne(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s}var Cne=!!(typeof window<"u"&&window.document&&window.document.createElement);function Mne(t,s,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof s!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],o;function c(){o=t(l.map(function(f){return f.props})),d.canUseDOM?s(o):n&&(o=n(o))}var d=function(f){Nne(x,f);function x(){return f.apply(this,arguments)||this}x.peek=function(){return o},x.rewind=function(){if(x.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var v=o;return o=void 0,l=[],v};var h=x.prototype;return h.UNSAFE_componentWillMount=function(){l.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var v=l.indexOf(this);l.splice(v,1),c()},h.render=function(){return wne.createElement(i,this.props)},x}(aR.PureComponent);return K4(d,"displayName","SideEffect("+r(i)+")"),K4(d,"canUseDOM",Cne),d}}var Sne=Mne;const kne=cu(Sne);var Lne=typeof Element<"u",Tne=typeof Map=="function",Ene=typeof Set=="function",Ine=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Mx(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var n,r,a;if(Array.isArray(t)){if(n=t.length,n!=s.length)return!1;for(r=n;r--!==0;)if(!Mx(t[r],s[r]))return!1;return!0}var i;if(Tne&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!s.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!Mx(r.value[1],s.get(r.value[0])))return!1;return!0}if(Ene&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!s.has(r.value[0]))return!1;return!0}if(Ine&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if(n=t.length,n!=s.length)return!1;for(r=n;r--!==0;)if(t[r]!==s[r])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof s.valueOf=="function")return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof s.toString=="function")return t.toString()===s.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[r]))return!1;if(Lne&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((a[r]==="_owner"||a[r]==="__v"||a[r]==="__o")&&t.$$typeof)&&!Mx(t[a[r]],s[a[r]]))return!1;return!0}return t!==t&&s!==s}var Ane=function(s,n){try{return Mx(s,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Dne=cu(Ane);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var X4=Object.getOwnPropertySymbols,Pne=Object.prototype.hasOwnProperty,_ne=Object.prototype.propertyIsEnumerable;function Rne(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function One(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var s={},n=0;n<10;n++)s["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(s).map(function(i){return s[i]});if(r.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var zne=One()?Object.assign:function(t,s){for(var n,r=Rne(t),a,i=1;i<arguments.length;i++){n=Object(arguments[i]);for(var l in n)Pne.call(n,l)&&(r[l]=n[l]);if(X4){a=X4(n);for(var o=0;o<a.length;o++)_ne.call(n,a[o])&&(r[a[o]]=n[a[o]])}}return r};const Fne=cu(zne);var rc={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},zt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(zt).map(function(t){return zt[t]});var Js={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Rp={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pm={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Une=Object.keys(Rp).reduce(function(t,s){return t[Rp[s]]=s,t},{}),$ne=[zt.NOSCRIPT,zt.SCRIPT,zt.STYLE],Ha="data-react-helmet",Bne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vne=function(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")},Gne=function(){function t(s,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,n,r){return n&&t(s.prototype,n),r&&t(s,r),s}}(),Ar=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yne=function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(t,s):t.__proto__=s)},eC=function(t,s){var n={};for(var r in t)s.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Qne=function(t,s){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:t},by=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Hne=function(s){var n=Md(s,zt.TITLE),r=Md(s,pm.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var a=Md(s,pm.DEFAULT_TITLE);return n||a||void 0},Wne=function(s){return Md(s,pm.ON_CHANGE_CLIENT_STATE)||function(){}},u1=function(s,n){return n.filter(function(r){return typeof r[s]<"u"}).map(function(r){return r[s]}).reduce(function(r,a){return Ar({},r,a)},{})},Zne=function(s,n){return n.filter(function(r){return typeof r[zt.BASE]<"u"}).map(function(r){return r[zt.BASE]}).reverse().reduce(function(r,a){if(!r.length)for(var i=Object.keys(a),l=0;l<i.length;l++){var o=i[l],c=o.toLowerCase();if(s.indexOf(c)!==-1&&a[c])return r.concat(a)}return r},[])},Wu=function(s,n,r){var a={};return r.filter(function(i){return Array.isArray(i[s])?!0:(typeof i[s]<"u"&&Xne("Helmet: "+s+' should be of type "Array". Instead found type "'+Bne(i[s])+'"'),!1)}).map(function(i){return i[s]}).reverse().reduce(function(i,l){var o={};l.filter(function(h){for(var j=void 0,v=Object.keys(h),p=0;p<v.length;p++){var b=v[p],y=b.toLowerCase();n.indexOf(y)!==-1&&!(j===Js.REL&&h[j].toLowerCase()==="canonical")&&!(y===Js.REL&&h[y].toLowerCase()==="stylesheet")&&(j=y),n.indexOf(b)!==-1&&(b===Js.INNER_HTML||b===Js.CSS_TEXT||b===Js.ITEM_PROP)&&(j=b)}if(!j||!h[j])return!1;var m=h[j].toLowerCase();return a[j]||(a[j]={}),o[j]||(o[j]={}),a[j][m]?!1:(o[j][m]=!0,!0)}).reverse().forEach(function(h){return i.push(h)});for(var c=Object.keys(o),d=0;d<c.length;d++){var f=c[d],x=Fne({},a[f],o[f]);a[f]=x}return i},[]).reverse()},Md=function(s,n){for(var r=s.length-1;r>=0;r--){var a=s[r];if(a.hasOwnProperty(n))return a[n]}return null},Jne=function(s){return{baseTag:Zne([Js.HREF,Js.TARGET],s),bodyAttributes:u1(rc.BODY,s),defer:Md(s,pm.DEFER),encode:Md(s,pm.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:u1(rc.HTML,s),linkTags:Wu(zt.LINK,[Js.REL,Js.HREF],s),metaTags:Wu(zt.META,[Js.NAME,Js.CHARSET,Js.HTTPEQUIV,Js.PROPERTY,Js.ITEM_PROP],s),noscriptTags:Wu(zt.NOSCRIPT,[Js.INNER_HTML],s),onChangeClientState:Wne(s),scriptTags:Wu(zt.SCRIPT,[Js.SRC,Js.INNER_HTML],s),styleTags:Wu(zt.STYLE,[Js.CSS_TEXT],s),title:Hne(s),titleAttributes:u1(rc.TITLE,s)}},wy=function(){var t=Date.now();return function(s){var n=Date.now();n-t>16?(t=n,s(n)):setTimeout(function(){wy(s)},0)}}(),tC=function(s){return clearTimeout(s)},qne=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||wy:global.requestAnimationFrame||wy,Kne=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||tC:global.cancelAnimationFrame||tC,Xne=function(s){return console&&typeof console.warn=="function"&&console.warn(s)},Zu=null,ere=function(s){Zu&&Kne(Zu),s.defer?Zu=qne(function(){sC(s,function(){Zu=null})}):(sC(s),Zu=null)},sC=function(s,n){var r=s.baseTag,a=s.bodyAttributes,i=s.htmlAttributes,l=s.linkTags,o=s.metaTags,c=s.noscriptTags,d=s.onChangeClientState,f=s.scriptTags,x=s.styleTags,h=s.title,j=s.titleAttributes;Ny(zt.BODY,a),Ny(zt.HTML,i),tre(h,j);var v={baseTag:Hc(zt.BASE,r),linkTags:Hc(zt.LINK,l),metaTags:Hc(zt.META,o),noscriptTags:Hc(zt.NOSCRIPT,c),scriptTags:Hc(zt.SCRIPT,f),styleTags:Hc(zt.STYLE,x)},p={},b={};Object.keys(v).forEach(function(y){var m=v[y],g=m.newTags,w=m.oldTags;g.length&&(p[y]=g),w.length&&(b[y]=v[y].oldTags)}),n&&n(),d(s,p,b)},iR=function(s){return Array.isArray(s)?s.join(""):s},tre=function(s,n){typeof s<"u"&&document.title!==s&&(document.title=iR(s)),Ny(zt.TITLE,n)},Ny=function(s,n){var r=document.getElementsByTagName(s)[0];if(r){for(var a=r.getAttribute(Ha),i=a?a.split(","):[],l=[].concat(i),o=Object.keys(n),c=0;c<o.length;c++){var d=o[c],f=n[d]||"";r.getAttribute(d)!==f&&r.setAttribute(d,f),i.indexOf(d)===-1&&i.push(d);var x=l.indexOf(d);x!==-1&&l.splice(x,1)}for(var h=l.length-1;h>=0;h--)r.removeAttribute(l[h]);i.length===l.length?r.removeAttribute(Ha):r.getAttribute(Ha)!==o.join(",")&&r.setAttribute(Ha,o.join(","))}},Hc=function(s,n){var r=document.head||document.querySelector(zt.HEAD),a=r.querySelectorAll(s+"["+Ha+"]"),i=Array.prototype.slice.call(a),l=[],o=void 0;return n&&n.length&&n.forEach(function(c){var d=document.createElement(s);for(var f in c)if(c.hasOwnProperty(f))if(f===Js.INNER_HTML)d.innerHTML=c.innerHTML;else if(f===Js.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{var x=typeof c[f]>"u"?"":c[f];d.setAttribute(f,x)}d.setAttribute(Ha,"true"),i.some(function(h,j){return o=j,d.isEqualNode(h)})?i.splice(o,1):l.push(d)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),l.forEach(function(c){return r.appendChild(c)}),{oldTags:i,newTags:l}},lR=function(s){return Object.keys(s).reduce(function(n,r){var a=typeof s[r]<"u"?r+'="'+s[r]+'"':""+r;return n?n+" "+a:a},"")},sre=function(s,n,r,a){var i=lR(r),l=iR(n);return i?"<"+s+" "+Ha+'="true" '+i+">"+by(l,a)+"</"+s+">":"<"+s+" "+Ha+'="true">'+by(l,a)+"</"+s+">"},nre=function(s,n,r){return n.reduce(function(a,i){var l=Object.keys(i).filter(function(d){return!(d===Js.INNER_HTML||d===Js.CSS_TEXT)}).reduce(function(d,f){var x=typeof i[f]>"u"?f:f+'="'+by(i[f],r)+'"';return d?d+" "+x:x},""),o=i.innerHTML||i.cssText||"",c=$ne.indexOf(s)===-1;return a+"<"+s+" "+Ha+'="true" '+l+(c?"/>":">"+o+"</"+s+">")},"")},oR=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(s).reduce(function(r,a){return r[Rp[a]||a]=s[a],r},n)},rre=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(s).reduce(function(r,a){return r[Une[a]||a]=s[a],r},n)},are=function(s,n,r){var a,i=(a={key:n},a[Ha]=!0,a),l=oR(r,i);return[gt.createElement(zt.TITLE,l,n)]},ire=function(s,n){return n.map(function(r,a){var i,l=(i={key:a},i[Ha]=!0,i);return Object.keys(r).forEach(function(o){var c=Rp[o]||o;if(c===Js.INNER_HTML||c===Js.CSS_TEXT){var d=r.innerHTML||r.cssText;l.dangerouslySetInnerHTML={__html:d}}else l[c]=r[o]}),gt.createElement(s,l)})},Hi=function(s,n,r){switch(s){case zt.TITLE:return{toComponent:function(){return are(s,n.title,n.titleAttributes)},toString:function(){return sre(s,n.title,n.titleAttributes,r)}};case rc.BODY:case rc.HTML:return{toComponent:function(){return oR(n)},toString:function(){return lR(n)}};default:return{toComponent:function(){return ire(s,n)},toString:function(){return nre(s,n,r)}}}},cR=function(s){var n=s.baseTag,r=s.bodyAttributes,a=s.encode,i=s.htmlAttributes,l=s.linkTags,o=s.metaTags,c=s.noscriptTags,d=s.scriptTags,f=s.styleTags,x=s.title,h=x===void 0?"":x,j=s.titleAttributes;return{base:Hi(zt.BASE,n,a),bodyAttributes:Hi(rc.BODY,r,a),htmlAttributes:Hi(rc.HTML,i,a),link:Hi(zt.LINK,l,a),meta:Hi(zt.META,o,a),noscript:Hi(zt.NOSCRIPT,c,a),script:Hi(zt.SCRIPT,d,a),style:Hi(zt.STYLE,f,a),title:Hi(zt.TITLE,{title:h,titleAttributes:j},a)}},lre=function(s){var n,r;return r=n=function(a){Yne(i,a);function i(){return Vne(this,i),Qne(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(o){return!Dne(this.props,o)},i.prototype.mapNestedChildrenToProps=function(o,c){if(!c)return null;switch(o.type){case zt.SCRIPT:case zt.NOSCRIPT:return{innerHTML:c};case zt.STYLE:return{cssText:c}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(o){var c,d=o.child,f=o.arrayTypeChildren,x=o.newChildProps,h=o.nestedChildren;return Ar({},f,(c={},c[d.type]=[].concat(f[d.type]||[],[Ar({},x,this.mapNestedChildrenToProps(d,h))]),c))},i.prototype.mapObjectTypeChildren=function(o){var c,d,f=o.child,x=o.newProps,h=o.newChildProps,j=o.nestedChildren;switch(f.type){case zt.TITLE:return Ar({},x,(c={},c[f.type]=j,c.titleAttributes=Ar({},h),c));case zt.BODY:return Ar({},x,{bodyAttributes:Ar({},h)});case zt.HTML:return Ar({},x,{htmlAttributes:Ar({},h)})}return Ar({},x,(d={},d[f.type]=Ar({},h),d))},i.prototype.mapArrayTypeChildrenToProps=function(o,c){var d=Ar({},c);return Object.keys(o).forEach(function(f){var x;d=Ar({},d,(x={},x[f]=o[f],x))}),d},i.prototype.warnOnInvalidChildren=function(o,c){return!0},i.prototype.mapChildrenToProps=function(o,c){var d=this,f={};return gt.Children.forEach(o,function(x){if(!(!x||!x.props)){var h=x.props,j=h.children,v=eC(h,["children"]),p=rre(v);switch(d.warnOnInvalidChildren(x,j),x.type){case zt.LINK:case zt.META:case zt.NOSCRIPT:case zt.SCRIPT:case zt.STYLE:f=d.flattenArrayTypeChildren({child:x,arrayTypeChildren:f,newChildProps:p,nestedChildren:j});break;default:c=d.mapObjectTypeChildren({child:x,newProps:c,newChildProps:p,nestedChildren:j});break}}}),c=this.mapArrayTypeChildrenToProps(f,c),c},i.prototype.render=function(){var o=this.props,c=o.children,d=eC(o,["children"]),f=Ar({},d);return c&&(f=this.mapChildrenToProps(c,f)),gt.createElement(s,f)},Gne(i,null,[{key:"canUseDOM",set:function(o){s.canUseDOM=o}}]),i}(gt.Component),n.propTypes={base:Hs.object,bodyAttributes:Hs.object,children:Hs.oneOfType([Hs.arrayOf(Hs.node),Hs.node]),defaultTitle:Hs.string,defer:Hs.bool,encodeSpecialCharacters:Hs.bool,htmlAttributes:Hs.object,link:Hs.arrayOf(Hs.object),meta:Hs.arrayOf(Hs.object),noscript:Hs.arrayOf(Hs.object),onChangeClientState:Hs.func,script:Hs.arrayOf(Hs.object),style:Hs.arrayOf(Hs.object),title:Hs.string,titleAttributes:Hs.object,titleTemplate:Hs.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=s.peek,n.rewind=function(){var a=s.rewind();return a||(a=cR({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},r},ore=function(){return null},cre=kne(Jne,ere,cR)(ore),gm=lre(cre);gm.renderStatic=gm.rewind;const dR=u.createContext(null);function dre({children:t}){const{toast:s}=lt(),{data:n=[],error:r,isLoading:a,refetch:i}=$e({queryKey:["/api/notifications"],refetchInterval:1e4,staleTime:0}),l=n.filter(x=>!x.isRead).length,o=Ze({mutationFn:async x=>await(await ce("POST",`/api/notifications/${x}/read`)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/notifications"]})},onError:x=>{s({title:"خطأ",description:x.message,variant:"destructive"})}}),c=Ze({mutationFn:async()=>await(await ce("/api/notifications/read-all","POST")).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/notifications"]}),s({title:"تم تعليم جميع الإشعارات كمقروءة",description:"تم تعليم جميع الإشعارات كمقروءة بنجاح"})},onError:x=>{s({title:"خطأ",description:x.message,variant:"destructive"})}}),d=x=>{o.mutate(x)},f=()=>{c.mutate()};return e.jsx(dR.Provider,{value:{notifications:n,unreadCount:l,isLoading:a,error:r,markAsRead:d,markAllAsRead:f,refetch:i},children:t})}function ure(){const t=u.useContext(dR);if(!t)throw new Error("useNotifications must be used within a NotificationsProvider");return t}function fre(){return e.jsx(er,{page:"notifications",children:e.jsx(mre,{})})}function mre(){const{notifications:t,markAsRead:s,markAllAsRead:n,isLoading:r,refetch:a}=ure(),{toast:i}=lt(),l=p=>P_(new Date(p),{addSuffix:!0,locale:ol}),o=new Date;o.setHours(0,0,0,0);const c=new Date(o);c.setDate(o.getDate()-7);const d=t.filter(p=>new Date(p.createdAt)>=o),f=t.filter(p=>new Date(p.createdAt)<o&&new Date(p.createdAt)>=c),x=t.filter(p=>new Date(p.createdAt)<c),h=p=>{switch(p){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"system":return"bg-blue-500";default:return"bg-gray-500"}},j=({notification:p})=>e.jsxs("div",{className:Te("flex items-start gap-2 sm:gap-4 p-2 sm:p-4 rounded-lg transition-colors",!p.isRead&&"bg-muted/50"),children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:Te("h-1.5 w-1.5 sm:h-3 sm:w-3 rounded-full",h(p.type))})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:Te("text-xs sm:text-base font-semibold",!p.isRead&&"font-bold"),children:p.title}),!p.isRead&&e.jsxs(M,{variant:"ghost",size:"sm",className:"h-5 px-1 sm:h-8 sm:px-2 text-xs flex-shrink-0",onClick:()=>s(p.id),children:[e.jsx(vl,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-0.5"}),e.jsx("span",{className:"hidden sm:inline",children:"تعليم كمقروء"}),e.jsx("span",{className:"sm:hidden",children:"تعليم"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:p.body}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:l(p.createdAt)})]})]}),v=({title:p,notifications:b,empty:y})=>b.length===0?null:e.jsxs("div",{className:"mb-2 sm:mb-8",children:[e.jsx("h2",{className:"text-xs sm:text-lg font-semibold mb-1 sm:mb-2",children:p}),e.jsx(_,{children:b.length===0?e.jsx("div",{className:"p-3 sm:p-4 text-center text-muted-foreground text-xs sm:text-sm",children:y}):e.jsx("div",{className:"divide-y",children:b.map(m=>e.jsx(j,{notification:m},m.id))})})]});return e.jsxs(e.Fragment,{children:[e.jsxs(gm,{children:[e.jsx("title",{children:"الإشعارات | منصة الصرافة"}),e.jsx("meta",{name:"description",content:"عرض كافة الإشعارات والتنبيهات الخاصة بحسابك"})]}),e.jsxs("div",{className:"golden-page-bg container mx-auto px-2 sm:px-6 py-2 sm:py-6 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-2 sm:mb-6 gap-2 sm:gap-3",children:[e.jsx(yn,{className:"self-start"}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mx-auto sm:mx-0",children:[e.jsx(Sa,{className:"h-3 w-3 sm:h-5 sm:w-5"}),e.jsx("h1",{className:"text-sm sm:text-2xl font-bold",children:"الإشعارات"})]}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 self-end sm:self-auto",children:[e.jsx(M,{onClick:()=>a(),variant:"outline",size:"sm",className:"h-6 w-6 sm:h-10 sm:w-10",title:"تحديث الإشعارات",children:e.jsx(ys,{className:"h-2 w-2 sm:h-4 sm:w-4"})}),t.some(p=>!p.isRead)&&e.jsxs(M,{onClick:()=>n(),className:"text-xs sm:text-sm h-6 sm:h-10 px-1 sm:px-4",children:[e.jsx(Ti,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"hidden sm:inline",children:"تعليم الكل كمقروء"}),e.jsx("span",{className:"sm:hidden",children:"تعليم الكل"})]})]})]}),r?e.jsx("div",{className:"space-y-2 sm:space-y-6",children:[1,2,3].map(p=>e.jsx(_,{className:"p-2 sm:p-4",children:e.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[e.jsx(wn,{className:"h-1.5 w-1.5 sm:h-3 sm:w-3 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1 sm:space-y-2",children:[e.jsx(wn,{className:"h-3 sm:h-5 w-1/3"}),e.jsx(wn,{className:"h-2 sm:h-4 w-full"}),e.jsx(wn,{className:"h-2 sm:h-3 w-1/4 mt-1 sm:mt-2"})]})]})},p))}):t.length===0?e.jsxs(_,{className:"p-3 sm:p-8 text-center",children:[e.jsx(Sa,{className:"h-6 w-6 sm:h-12 sm:w-12 mx-auto mb-2 sm:mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-sm sm:text-xl font-semibold mb-1 sm:mb-2",children:"لا توجد لديك أي إشعارات"}),e.jsx("p",{className:"text-muted-foreground mb-3 sm:mb-6 text-xs sm:text-sm",children:"ستظهر هنا الإشعارات المتعلقة بحسابك والعمليات التي تقوم بها"}),e.jsx(M,{onClick:async()=>{try{const p=await fetch("/api/test/create-notification",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),b=await p.json();p.ok?(a(),i({title:"تم إنشاء إشعار تجريبي",description:"يرجى التحقق من قائمة الإشعارات الخاصة بك",variant:"default"})):i({title:"فشل في إنشاء إشعار",description:b.message||"حدث خطأ أثناء إنشاء الإشعار التجريبي",variant:"destructive"})}catch(p){console.error("Error creating test notification:",p),i({title:"فشل في إنشاء إشعار",description:"حدث خطأ أثناء إنشاء الإشعار التجريبي",variant:"destructive"})}},className:"bg-primary text-white hover:bg-primary/90 text-xs sm:text-sm h-6 sm:h-10 px-2 sm:px-4",children:"إنشاء إشعار تجريبي"})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"اليوم",notifications:d,empty:"لا توجد إشعارات اليوم"}),e.jsx(v,{title:"هذا الأسبوع",notifications:f,empty:"لا توجد إشعارات هذا الأسبوع"}),e.jsx(v,{title:"سابقاً",notifications:x,empty:"لا توجد إشعارات سابقة"})]})]})]})}var ow="Progress",cw=100,[hre,Hce]=Tn(ow),[xre,pre]=hre(ow),uR=u.forwardRef((t,s)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=gre,...l}=t;(a||a===0)&&!nC(a)&&console.error(jre(`${a}`,"Progress"));const o=nC(a)?a:cw;r!==null&&!rC(r,o)&&console.error(yre(`${r}`,"Progress"));const c=rC(r,o)?r:null,d=Op(c)?i(c,o):void 0;return e.jsx(xre,{scope:n,value:c,max:o,children:e.jsx(it.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Op(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":hR(c,o),"data-value":c??void 0,"data-max":o,...l,ref:s})})});uR.displayName=ow;var fR="ProgressIndicator",mR=u.forwardRef((t,s)=>{const{__scopeProgress:n,...r}=t,a=pre(fR,n);return e.jsx(it.div,{"data-state":hR(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:s})});mR.displayName=fR;function gre(t,s){return`${Math.round(t/s*100)}%`}function hR(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Op(t){return typeof t=="number"}function nC(t){return Op(t)&&!isNaN(t)&&t>0}function rC(t,s){return Op(t)&&!isNaN(t)&&t<=s&&t>=0}function jre(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${cw}\`.`}function yre(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${cw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var xR=uR,vre=mR;const zp=u.forwardRef(({className:t,value:s,...n},r)=>e.jsx(xR,{ref:r,className:Te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:e.jsx(vre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));zp.displayName=xR.displayName;const f1=[.5,1,1.5,2];function pR({voiceId:t,durationSeconds:s,waveformPeaks:n=[],transcript:r,transcriptLang:a="ar",senderName:i,createdAt:l,isOwn:o=!1,className:c,showTranscript:d=!0,onDelete:f}){const[x,h]=u.useState(!1),[j,v]=u.useState(0),[p,b]=u.useState(1),[y,m]=u.useState(1),[g,w]=u.useState(!1),[N,k]=u.useState(!1),[L,S]=u.useState(!1),[T,E]=u.useState(null),$=u.useRef(null),F=u.useRef(null),{toast:Z}=lt();u.useEffect(()=>()=>{F.current&&clearInterval(F.current),$.current&&($.current.pause(),$.current=null)},[]);const G=async()=>{if($.current){$.current.play();return}k(!0),E(null);try{const ve=localStorage.getItem("auth_token"),Ee=`/api/voice/stream/${t}?token=${encodeURIComponent(ve||"")}`;$.current=new Audio(Ee),$.current.volume=g?0:y,$.current.playbackRate=p,$.current.addEventListener("loadedmetadata",()=>{k(!1),$.current&&$.current.play()}),$.current.addEventListener("play",()=>{h(!0),D()}),$.current.addEventListener("pause",()=>{h(!1),B()}),$.current.addEventListener("ended",()=>{h(!1),v(0),B()}),$.current.addEventListener("timeupdate",()=>{$.current&&v($.current.currentTime)}),$.current.addEventListener("error",ne=>{E("خطأ في تشغيل الملف الصوتي"),k(!1),h(!1),console.error("Audio error:",ne)})}catch(ve){console.error("خطأ في تحميل الصوت:",ve),E("فشل في تحميل الملف الصوتي"),k(!1),Z({title:"خطأ في التشغيل",description:"تعذر تحميل الملف الصوتي",variant:"destructive"})}},D=()=>{B(),F.current=setInterval(()=>{$.current&&!$.current.paused&&v($.current.currentTime)},100)},B=()=>{F.current&&(clearInterval(F.current),F.current=null)},de=()=>{$.current?x?$.current.pause():$.current.play():G()},U=ve=>{$.current&&($.current.currentTime=Math.max(0,Math.min(ve,s)),v($.current.currentTime))},W=()=>{U(j-10)},re=()=>{U(j+10)},we=()=>{const ve=f1.indexOf(p),Ee=f1[(ve+1)%f1.length];b(Ee),$.current&&($.current.playbackRate=Ee)},be=()=>{const ve=!g;w(ve),$.current&&($.current.volume=ve?0:y)},J=()=>{r&&(navigator.clipboard.writeText(r),Z({title:"تم النسخ",description:"تم نسخ النص المنسوخ للحافظة"}))},Fe=()=>{f&&f(t)},Oe=async()=>{try{const ve=localStorage.getItem("token"),Ee=await fetch(`/api/voice/stream/${t}`,{headers:{Authorization:`Bearer ${ve}`}});if(Ee.ok){const ne=await Ee.blob(),ke=URL.createObjectURL(ne),tt=document.createElement("a");tt.href=ke,tt.download=`voice_message_${t}.ogg`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(ke)}}catch(ve){console.error("خطأ في التحميل:",ve),Z({title:"خطأ في التحميل",description:"تعذر تحميل الملف الصوتي",variant:"destructive"})}},Ve=ve=>{const Ee=Math.floor(ve/60),ne=Math.floor(ve%60);return`${Ee}:${ne.toString().padStart(2,"0")}`},Ne=ve=>{if(!$.current)return;const Ee=ve.currentTarget.getBoundingClientRect(),tt=(ve.clientX-Ee.left)/Ee.width*s;U(tt)},qe=s>0?j/s*100:0;return e.jsx(GE,{children:e.jsxs("div",{className:Te("bg-background border rounded-lg p-4 max-w-md space-y-3",o?"ml-auto bg-primary/5":"mr-auto",c),children:[(i||l)&&e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[i&&e.jsx("span",{children:i}),l&&e.jsx("span",{children:new Date(l).toLocaleString("ar-EG")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsx(M,{onClick:de,disabled:N,variant:"default",size:"lg",className:"h-12 w-12 rounded-full p-0",children:N?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-primary-foreground border-t-transparent rounded-full"}):x?e.jsx(Vv,{className:"h-6 w-6"}):e.jsx(Gv,{className:"h-6 w-6"})})}),e.jsx(Il,{children:x?"إيقاف مؤقت":"تشغيل"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-mono",children:Ve(j)}),e.jsx("span",{className:"font-mono text-muted-foreground",children:Ve(s)})]}),e.jsx(zp,{value:qe,className:"h-1"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsxs(M,{onClick:we,variant:"ghost",size:"sm",className:"text-xs px-2 h-7",children:[p,"x"]})}),e.jsx(Il,{children:"تغيير السرعة"})]}),e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsx(M,{onClick:be,variant:"ghost",size:"sm",className:"h-7 w-7 p-0",children:g?e.jsx($j,{className:"h-4 w-4"}):e.jsx(p0,{className:"h-4 w-4"})})}),e.jsx(Il,{children:g?"إلغاء الكتم":"كتم الصوت"})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsxs(M,{onClick:W,variant:"ghost",size:"sm",className:"gap-1",children:[e.jsx(aE,{className:"h-4 w-4"}),"10s"]})}),e.jsx(Il,{children:"الرجوع 10 ثواني"})]}),e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsxs(M,{onClick:re,variant:"ghost",size:"sm",className:"gap-1",children:["10s",e.jsx(WU,{className:"h-4 w-4"})]})}),e.jsx(Il,{children:"التقدم 10 ثواني"})]})]}),n.length>0&&e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"flex items-end gap-1 h-12 bg-muted rounded p-2 cursor-pointer",onClick:Ne,children:n.map((ve,Ee)=>e.jsx("div",{className:"bg-primary rounded-sm flex-1 min-w-[1px] transition-all duration-200 hover:bg-primary/80",style:{height:`${Math.max(ve*100,3)}%`,opacity:qe>0?Ee/n.length<=qe/100?1:.3:.6}},Ee))})}),r&&d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:"secondary",className:"text-xs",children:"نص منسوخ"}),a&&e.jsx(ie,{variant:"outline",className:"text-xs",children:a==="ar"?"عربي":a.toUpperCase()})]}),e.jsx(M,{onClick:()=>S(!L),variant:"ghost",size:"sm",className:"text-xs",children:L?"إخفاء":"عرض"})]}),L&&e.jsxs("div",{className:"bg-muted/50 rounded p-3 text-sm",children:[e.jsx("p",{className:Te("leading-relaxed",a==="ar"?"text-right":"text-left"),children:r}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs(M,{onClick:J,variant:"ghost",size:"sm",className:"gap-1 text-xs",children:[e.jsx(hc,{className:"h-3 w-3"}),"نسخ"]})})]})]}),T&&e.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded p-2",children:T}),o&&e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsxs(M,{onClick:Oe,variant:"ghost",size:"sm",className:"gap-1",children:[e.jsx(Cr,{className:"h-4 w-4"}),"تحميل"]})}),e.jsx(Il,{children:"تحميل الملف الصوتي"})]}),f&&e.jsxs(To,{children:[e.jsx(Eo,{asChild:!0,children:e.jsxs(M,{onClick:Fe,variant:"ghost",size:"sm",className:"gap-1 text-destructive hover:text-destructive",children:[e.jsx(is,{className:"h-4 w-4"}),"حذف"]})}),e.jsx(Il,{children:"حذف الرسالة الصوتية"})]})]})]})})}function gR({onVoiceRecorded:t,onCancel:s,maxDuration:n=120,className:r}){const[a,i]=u.useState(!1),[l,o]=u.useState(0),[c,d]=u.useState(null),[f,x]=u.useState(null),[h,j]=u.useState(!1),[v,p]=u.useState(0),[b,y]=u.useState([]),[m,g]=u.useState(0),w=u.useRef(null),N=u.useRef(null),k=u.useRef(null),L=u.useRef(null),S=u.useRef(null),T=u.useRef(null),E=u.useRef(null),$=u.useRef(null),F=u.useRef([]),{toast:Z}=lt();u.useEffect(()=>()=>{G()},[]);const G=()=>{L.current&&clearInterval(L.current),S.current&&clearInterval(S.current),T.current&&cancelAnimationFrame(T.current),w.current&&w.current.state!=="inactive"&&w.current.stop(),N.current&&N.current.getTracks().forEach(J=>J.stop()),E.current&&E.current.close(),f&&URL.revokeObjectURL(f)},D=async()=>{try{const J=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});N.current=J,F.current=[],E.current=new AudioContext,$.current=E.current.createAnalyser(),E.current.createMediaStreamSource(J).connect($.current),$.current.fftSize=256,w.current=new MediaRecorder(J,{mimeType:"audio/webm;codecs=opus"}),w.current.ondataavailable=Oe=>{Oe.data.size>0&&F.current.push(Oe.data)},w.current.onstop=()=>{const Oe=new Blob(F.current,{type:"audio/webm;codecs=opus"});d(Oe);const Ve=URL.createObjectURL(Oe);x(Ve),N.current&&N.current.getTracks().forEach(Ne=>Ne.stop())},w.current.start(100),i(!0),o(0),L.current=setInterval(()=>{o(Oe=>{const Ve=Oe+1;return Ve>=n?(B(),n):Ve})},1e3),de()}catch(J){console.error("خطأ في بدء التسجيل:",J),Z({title:"خطأ في التسجيل",description:"تعذر الوصول للميكروفون",variant:"destructive"})}},B=()=>{w.current&&w.current.state==="recording"&&w.current.stop(),L.current&&clearInterval(L.current),T.current&&cancelAnimationFrame(T.current),i(!1)},de=()=>{if(!$.current)return;const J=new Uint8Array($.current.frequencyBinCount);$.current.getByteFrequencyData(J);const Fe=J.reduce((Ve,Ne)=>Ve+Ne,0)/J.length;g(Fe);const Oe=Array.from(J.slice(0,32)).map(Ve=>Ve/255);y(Ve=>[...Ve.slice(-31),Oe[0]||0]),a&&(T.current=requestAnimationFrame(de))},U=()=>{var J;f&&(h?((J=k.current)==null||J.pause(),j(!1),S.current&&clearInterval(S.current)):(k.current||(k.current=new Audio(f),k.current.addEventListener("ended",()=>{j(!1),p(0),S.current&&clearInterval(S.current)})),k.current.play(),j(!0),S.current=setInterval(()=>{k.current&&p(k.current.currentTime)},100)))},W=()=>{c&&l>0&&(t(c,l),G(),d(null),x(null),o(0),p(0),y([]))},re=()=>{G(),i(!1),d(null),x(null),o(0),p(0),y([]),s==null||s()},we=J=>{const Fe=Math.floor(J/60),Oe=Math.floor(J%60);return`${Fe}:${Oe.toString().padStart(2,"0")}`},be=()=>{if(a)return e.jsx("div",{className:"flex items-center gap-1 px-4",children:Array.from({length:32},(J,Fe)=>e.jsx("div",{className:Te("w-1 bg-green-500 rounded-full transition-all duration-75",Fe<b.length?"opacity-100":"opacity-30"),style:{height:`${Math.max(4,(b[Fe]||0)*20+4)}px`}},Fe))});if(c){const J=l>0?v/l*100:0;return e.jsx("div",{className:"flex items-center gap-2 px-4",children:e.jsx("div",{className:"flex-1 h-8 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-200 rounded-full",style:{width:`${J}%`}})})})}return null};return!a&&!c?e.jsx(M,{onClick:D,className:Te("rounded-full p-3 bg-green-600 hover:bg-green-700 text-white",r),children:e.jsx(qd,{className:"w-5 h-5"})}):e.jsxs("div",{className:Te("flex items-center gap-2 bg-white dark:bg-gray-800 rounded-full border shadow-lg p-2 min-w-[280px]",r),children:[e.jsx(M,{onClick:re,variant:"ghost",size:"sm",className:"rounded-full p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:be()}),e.jsx("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400 min-w-[40px]",children:we(h?v:l)}),c&&e.jsx(M,{onClick:U,variant:"ghost",size:"sm",className:"rounded-full p-2 text-blue-500 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:h?e.jsx(Vv,{className:"w-4 h-4"}):e.jsx(Gv,{className:"w-4 h-4"})}),a&&e.jsx(M,{onClick:B,variant:"ghost",size:"sm",className:"rounded-full p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(zm,{className:"w-4 h-4"})}),c&&e.jsx(M,{onClick:W,className:"rounded-full p-2 bg-green-600 hover:bg-green-700 text-white",children:e.jsx(Vr,{className:"w-4 h-4"})})]})}function Cy(t){return[].concat(t)}function dw(t){return t.startsWith(":")}function jR(t){return Q0(t)&&(t==="*"||t.length>1&&":>~.+*".includes(t.slice(0,1))||wR(t))}function yR(t,s){return(Q0(s)||typeof s=="number")&&!bR(t)&&!dw(t)&&!vR(t)}function vR(t){return t.startsWith("@media")}function bre(t){return t==="."}function bR(t){return t==="--"}function Q0(t){return t+""===t}function wR(t){return Q0(t)&&(t.startsWith("&")||dw(t))}function Fp(t,s=""){return t.filter(Boolean).join(s)}function NR(t,s){let n=0;if(s.length===0)return n.toString();for(let r=0;r<s.length;r++){const a=s.charCodeAt(r);n=(n<<5)-n+a,n=n&n}return`${t??"cl"}_${n.toString(36)}`}function wre(t,s){return t==="content"?`"${s}"`:s}function Nre(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function aC(t,s){return`${t}:${s}`}function Cre(t){return t?`.${t}`:""}function Mre(t,s){return t?`${t}
${s}`:s}var CR=class MR{constructor(s,n,r,a){this.sheet=s,this.property=n,this.value=r,this.selector=a,this.property=n,this.value=r,this.joined=aC(n,r);const i=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:NR(this.sheet.name,this.joined),this.key=Fp([this.joined,i,this.hash])}toString(){let s=My(this.selector.preconditions,{right:this.hash});return s=My(this.selector.postconditions,{left:s}),`${s} {${MR.genRule(this.property,this.value)}}`}static genRule(s,n){const r=Nre(s);return aC(r,wre(s,n))+";"}};function My(t,{left:s="",right:n=""}={}){const r=t.reduce((a,i)=>dw(i)?a+i:wR(i)?a+i.slice(1):Fp([a,i]," "),s);return Fp([r,Cre(n)]," ")}var Sre=class Sx{constructor(s,n=null,{preconditions:r,postconditions:a}={}){this.sheet=s,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=r?Cy(r):[],this.postconditions=a?Cy(a):[],this.setScope(n)}setScope(s){return s?(this.scopeClassName||(this.scopeName=s,this.scopeClassName=NR(this.sheet.name,s+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(s){return new Sx(this.sheet,s,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(s){return new Sx(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(s)})}addPostcondition(s){return new Sx(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(s)})}createRule(s,n){return new CR(this.sheet,s,n,this)}},kre=class{constructor(t,s){this.name=t,this.rootNode=s,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${t}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(t){this.style=Mre(this.style,t)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if(typeof document>"u"||this.isApplied()||this.rootNode===null)return this.styleTag;const t=document.createElement("style");return t.type="text/css",t.id=this.id,(this.rootNode??document.head).appendChild(t),t}addRule(t){const s=this.storedClasses[t.key];return Q0(s)?s:(this.storedClasses[t.key]=t.hash,this.storedStyles[t.hash]=[t.property,t.value],this.append(t.toString()),t.hash)}};function uw(t,s){for(const n in t)s(n.trim(),t[n])}function ss(...t){const s=t.reduce((n,r)=>(r instanceof Set?n.push(...r):typeof r=="string"?n.push(r):Array.isArray(r)?n.push(ss(...r)):typeof r=="object"&&Object.entries(r).forEach(([a,i])=>{i&&n.push(a)}),n),[]);return Fp(s," ").trim()}function Lre(t,s){const n=new kre(t,s);return{create:r,getStyle:n.getStyle.bind(n),isApplied:n.isApplied.bind(n)};function r(a){const i={};return SR(n,a,new Sre(n)).forEach(([o,c,d])=>{H0(n,c,d).forEach(f=>{l(o,f)})}),n.apply(),i;function l(o,c){i[o]=i[o]??new Set,i[o].add(c)}}}function SR(t,s,n){const r=[];return uw(s,(a,i)=>{if(jR(a))return SR(t,i,n.addPrecondition(a)).forEach(l=>r.push(l));r.push([a,s[a],n.addScope(a)])}),r}function H0(t,s,n){const r=new Set;return uw(s,(a,i)=>{let l=[];if(jR(a))l=H0(t,i,n.addPostcondition(a));else if(bre(a))l=Cy(i);else if(vR(a))l=Ere(t,i,a,n);else if(bR(a))l=Tre(t,i,n);else if(yR(a,i)){const o=n.createRule(a,i);t.addRule(o),r.add(o.hash)}return kR(l,r)}),r}function kR(t,s){return t.forEach(n=>s.add(n)),s}function Tre(t,s,n){const r=new Set,a=[];if(uw(s,(i,l)=>{if(yR(i,l)){a.push(CR.genRule(i,l));return}const o=H0(t,l??{},n);kR(o,r)}),!n.scopeClassName)return r;if(a.length){const i=a.join(" ");t.append(`${My(n.preconditions,{right:n.scopeClassName})} {${i}}`)}return r.add(n.scopeClassName),r}function Ere(t,s,n,r){t.append(n+" {");const a=H0(t,s,r);return t.append("}"),a}function an(){return an=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},an.apply(this,arguments)}function Ire(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,Sy(t,s)}function Sy(t,s){return Sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Sy(t,s)}function LR(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function Are(t,s){if(t){if(typeof t=="string")return iC(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iC(t,s)}}function iC(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function Dre(t,s){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=Are(t))||s){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var es;(function(t){t.hiddenOnSearch="epr-hidden-on-search",t.searchActive="epr-search-active",t.hidden="epr-hidden",t.visible="epr-visible",t.active="epr-active",t.emoji="epr-emoji",t.category="epr-emoji-category",t.label="epr-emoji-category-label",t.categoryContent="epr-emoji-category-content",t.emojiHasVariations="epr-emoji-has-variations",t.scrollBody="epr-body",t.emojiList="epr-emoji-list",t.external="__EmojiPicker__",t.emojiPicker="EmojiPickerReact",t.open="epr-open",t.vertical="epr-vertical",t.horizontal="epr-horizontal",t.variationPicker="epr-emoji-variation-picker",t.darkTheme="epr-dark-theme",t.autoTheme="epr-auto-theme"})(es||(es={}));function or(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return s.map(function(r){return"."+r}).join("")}var en=Lre("epr",null),kx={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},fw=en.create({hidden:an({".":es.hidden},kx)}),Pre=u.memo(function(){return u.createElement("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:en.getStyle()}})}),Ic=en.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:an({".":es.hiddenOnSearch},kx)},":has(input(:placeholder-shown))":{visibleOnSearchOnly:kx}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:an({".":"epr-visible-on-search-only"},kx)}});function yo(t,s){var n,r;return{".epr-dark-theme":(n={},n[t]=s,n),".epr-auto-theme":(r={},r[t]={"@media (prefers-color-scheme: dark)":s},r)}}function TR(t,s){var n,r,a=(n=t.customEmojis)!=null?n:[],i=(r=s.customEmojis)!=null?r:[];return t.open===s.open&&t.emojiVersion===s.emojiVersion&&t.reactionsDefaultOpen===s.reactionsDefaultOpen&&t.searchPlaceHolder===s.searchPlaceHolder&&t.searchPlaceholder===s.searchPlaceholder&&t.defaultSkinTone===s.defaultSkinTone&&t.skinTonesDisabled===s.skinTonesDisabled&&t.autoFocusSearch===s.autoFocusSearch&&t.emojiStyle===s.emojiStyle&&t.theme===s.theme&&t.suggestedEmojisMode===s.suggestedEmojisMode&&t.lazyLoadEmojis===s.lazyLoadEmojis&&t.className===s.className&&t.height===s.height&&t.width===s.width&&t.style===s.style&&t.searchDisabled===s.searchDisabled&&t.skinTonePickerLocation===s.skinTonePickerLocation&&a.length===i.length}var _re=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"],jm;(function(t){t.RECENT="recent",t.FREQUENT="frequent"})(jm||(jm={}));var ta;(function(t){t.NATIVE="native",t.APPLE="apple",t.TWITTER="twitter",t.GOOGLE="google",t.FACEBOOK="facebook"})(ta||(ta={}));var vo;(function(t){t.DARK="dark",t.LIGHT="light",t.AUTO="auto"})(vo||(vo={}));var Ba;(function(t){t.NEUTRAL="neutral",t.LIGHT="1f3fb",t.MEDIUM_LIGHT="1f3fc",t.MEDIUM="1f3fd",t.MEDIUM_DARK="1f3fe",t.DARK="1f3ff"})(Ba||(Ba={}));var Xt;(function(t){t.SUGGESTED="suggested",t.CUSTOM="custom",t.SMILEYS_PEOPLE="smileys_people",t.ANIMALS_NATURE="animals_nature",t.FOOD_DRINK="food_drink",t.TRAVEL_PLACES="travel_places",t.ACTIVITIES="activities",t.OBJECTS="objects",t.SYMBOLS="symbols",t.FLAGS="flags"})(Xt||(Xt={}));var iu;(function(t){t.SEARCH="SEARCH",t.PREVIEW="PREVIEW"})(iu||(iu={}));var ua,Rre=[Xt.SUGGESTED,Xt.CUSTOM,Xt.SMILEYS_PEOPLE,Xt.ANIMALS_NATURE,Xt.FOOD_DRINK,Xt.TRAVEL_PLACES,Xt.ACTIVITIES,Xt.OBJECTS,Xt.SYMBOLS,Xt.FLAGS],Ore={name:"Recently Used",category:Xt.SUGGESTED},ER=(ua={},ua[Xt.SUGGESTED]={category:Xt.SUGGESTED,name:"Frequently Used"},ua[Xt.CUSTOM]={category:Xt.CUSTOM,name:"Custom Emojis"},ua[Xt.SMILEYS_PEOPLE]={category:Xt.SMILEYS_PEOPLE,name:"Smileys & People"},ua[Xt.ANIMALS_NATURE]={category:Xt.ANIMALS_NATURE,name:"Animals & Nature"},ua[Xt.FOOD_DRINK]={category:Xt.FOOD_DRINK,name:"Food & Drink"},ua[Xt.TRAVEL_PLACES]={category:Xt.TRAVEL_PLACES,name:"Travel & Places"},ua[Xt.ACTIVITIES]={category:Xt.ACTIVITIES,name:"Activities"},ua[Xt.OBJECTS]={category:Xt.OBJECTS,name:"Objects"},ua[Xt.SYMBOLS]={category:Xt.SYMBOLS,name:"Symbols"},ua[Xt.FLAGS]={category:Xt.FLAGS,name:"Flags"},ua);function IR(t){return Rre.map(function(s){return an({},ER[s],t&&t[s]&&t[s])})}function mw(t){return t.category}function AR(t){return t.name}function zre(t,s){var n;t===void 0&&(t=[]),s===void 0&&(s={});var r={};s.suggestionMode===jm.RECENT&&(r[Xt.SUGGESTED]=Ore);var a=IR(r);return(n=t)!=null&&n.length?t.map(function(i){return typeof i=="string"?lC(i,r[i]):an({},lC(i.category,r[i.category]),i)}):a}function lC(t,s){return s===void 0&&(s={}),Object.assign(ER[t],s)}var Fre="https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/",Ure="https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/",$re="https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/",Bre="https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";function Vre(t){switch(t){case ta.TWITTER:return $re;case ta.GOOGLE:return Bre;case ta.FACEBOOK:return Ure;case ta.APPLE:default:return Fre}}var Gre=[],Yre=[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["footprints"],u:"1f463",a:"0.6"}],Qre=[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"}],Hre=[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["mushroom"],u:"1f344",a:"0.6"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],Wre=[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],Zre=[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],Jre=[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue worker’s helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],qre=[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],Kre=[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","åland islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthélemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","côte d’ivoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaçao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","réunion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","são tomé & príncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","turkey flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}],ym={custom:Gre,smileys_people:Yre,animals_nature:Qre,food_drink:Hre,travel_places:Wre,activities:Zre,objects:Jre,symbols:qre,flags:Kre},Up=[Ba.NEUTRAL,Ba.LIGHT,Ba.MEDIUM_LIGHT,Ba.MEDIUM,Ba.MEDIUM_DARK,Ba.DARK],Xre=Object.entries(Ba).reduce(function(t,s){var n=s[0],r=s[1];return t[r]=n,t},{}),eae=Up.reduce(function(t,s){var n;return Object.assign(t,(n={},n[s]=s,n))},{}),va;(function(t){t.name="n",t.unified="u",t.variations="v",t.added_in="a",t.imgUrl="imgUrl"})(va||(va={}));var Lf={};setTimeout(function(){W0.reduce(function(t,s){return DR(s),t},Lf)});function DR(t){var s=ah(t).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("");s.forEach(function(n){var r;Lf[n]=(r=Lf[n])!=null?r:{},Lf[n][Mr(t)]=t})}function ah(t){var s;return(s=t[va.name])!=null?s:[]}function tae(t){return parseFloat(t[va.added_in])}function ky(t){return t?ah(t)[0]:""}function hw(t){var s=t.split("-"),n=s.splice(1,1),r=n[0];return eae[r]?s.join("-"):t}function Mr(t,s){var n,r=t[va.unified];return!s||!Tu(t)?r:(n=nae(t,s))!=null?n:r}function sae(t){var s;return(s=ym==null?void 0:ym[t])!=null?s:[]}function PR(t,s){return""+Vre(s)+t+".png"}function ih(t){var s;return(s=t[va.variations])!=null?s:[]}function Tu(t){return ih(t).length>0}function nae(t,s){return s?ih(t).find(function(n){return n.includes(s)}):Mr(t)}function lu(t){if(t){if(Sd[t])return Sd[t];var s=hw(t);return Sd[s]}}var W0=Object.values(ym).flat();function rae(t){ym[Xt.CUSTOM].length=0,t.forEach(function(s){var n=aae(s);ym[Xt.CUSTOM].push(n),!Sd[n[va.unified]]&&(W0.push(n),Sd[n[va.unified]]=n,DR(n))})}function aae(t){var s;return s={},s[va.name]=t.names.map(function(n){return n.toLowerCase()}),s[va.unified]=t.id.toLowerCase(),s[va.added_in]="0",s[va.imgUrl]=t.imgUrl,s}var Sd={};setTimeout(function(){W0.reduce(function(t,s){return t[Mr(s)]=s,Tu(s)&&ih(s).forEach(function(n){t[n]=s}),t},Sd)});function iae(t){var s=t.split("-"),n=s[1];return Up.includes(n)?n:null}var lae=["2640-fe0f","2642-fe0f","2695-fe0f"],$p="Search",oae="No results found",_R=" found. Use up and down arrow keys to navigate.",cae="1 result"+_R,dae="%n results"+_R;function oC(t){var s,n;t===void 0&&(t={});var r=RR(),a=Object.assign(r.previewConfig,(s=t.previewConfig)!=null?s:{}),i=Object.assign(r,t),l=zre(t.categories,{suggestionMode:i.suggestedEmojisMode});i.hiddenEmojis.forEach(function(c){i.unicodeToHide.add(c)}),rae((n=i.customEmojis)!=null?n:[]);var o=i.searchDisabled?iu.PREVIEW:i.skinTonePickerLocation;return an({},i,{categories:l,previewConfig:a,skinTonePickerLocation:o})}function RR(){return{autoFocusSearch:!0,categories:IR(),className:"",customEmojis:[],defaultSkinTone:Ba.NEUTRAL,emojiStyle:ta.APPLE,emojiVersion:null,getEmojiUrl:PR,height:450,lazyLoadEmojis:!1,previewConfig:an({},uae),searchDisabled:!1,searchPlaceHolder:$p,searchPlaceholder:$p,skinTonePickerLocation:iu.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:jm.FREQUENT,theme:vo.LIGHT,unicodeToHide:new Set(lae),width:350,reactionsDefaultOpen:!1,reactions:_re,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var uae={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},fae=["children"],OR=u.createContext(RR());function mae(t){var s=t.children,n=LR(t,fae),r=hae(n);return u.createElement(OR.Provider,{value:r},s)}function hae(t){var s,n=u.useState(function(){return oC(t)}),r=n[0],a=n[1];return u.useEffect(function(){TR(r,t)||a(oC(t))},[(s=t.customEmojis)==null?void 0:s.length,t.open,t.emojiVersion,t.reactionsDefaultOpen,t.searchPlaceHolder,t.searchPlaceholder,t.defaultSkinTone,t.skinTonesDisabled,t.autoFocusSearch,t.emojiStyle,t.theme,t.suggestedEmojisMode,t.lazyLoadEmojis,t.className,t.height,t.width,t.searchDisabled,t.skinTonePickerLocation,t.allowExpandReactions]),r}function fn(){return u.useContext(OR)}var zR=gt.createContext({});function FR(){var t=gt.useContext(zR);return t}function xae(t){var s=gt.useRef({onEmojiClick:t.onEmojiClick||Gh,onReactionClick:t.onReactionClick||t.onEmojiClick,onSkinToneChange:t.onSkinToneChange||Gh});return gt.useEffect(function(){s.current.onEmojiClick=t.onEmojiClick||Gh,s.current.onReactionClick=t.onReactionClick||t.onEmojiClick},[t.onEmojiClick,t.onReactionClick]),gt.useEffect(function(){s.current.onSkinToneChange=t.onSkinToneChange||Gh},[t.onSkinToneChange]),s}function Gh(){}var vm;(function(t){t.REACTIONS="reactions",t.PICKER="picker"})(vm||(vm={}));function pae(){var t,s=fn(),n=s.searchPlaceHolder,r=s.searchPlaceholder;return(t=[n,r].find(function(a){return a!==$p}))!=null?t:$p}function gae(){var t=fn(),s=t.defaultSkinTone;return s}function UR(){var t=fn(),s=t.allowExpandReactions;return s}function $R(){var t=fn(),s=t.skinTonesDisabled;return s}function Ac(){var t=fn(),s=t.emojiStyle;return s}function jae(){var t=fn(),s=t.autoFocusSearch;return s}function BR(){var t=fn(),s=t.categories;return s}function yae(){var t=fn(),s=t.customEmojis;return s}function vae(){var t=fn(),s=t.open;return s}function bae(t){var s,n=FR(),r=n.current,a=(s=t===vm.REACTIONS?r.onReactionClick:r.onEmojiClick)!=null?s:r.onEmojiClick;return a||function(){}}function wae(){var t=FR(),s=t.current;return s.onSkinToneChange||function(){}}function VR(){var t=fn(),s=t.previewConfig;return s}function Nae(){var t=fn(),s=t.theme;return s}function Cae(){var t=fn(),s=t.suggestedEmojisMode;return s}function Mae(){var t=fn(),s=t.lazyLoadEmojis;return s}function Sae(){var t=fn(),s=t.className;return s}function kae(){var t=fn(),s=t.height,n=t.width,r=t.style;return an({height:cC(s),width:cC(n)},r)}function Lae(){var t=fn(),s=t.reactionsDefaultOpen;return s}function Tae(){var t=fn(),s=t.emojiVersion;return s}function GR(){var t=fn(),s=t.searchDisabled;return s}function YR(){var t=fn(),s=t.skinTonePickerLocation;return s}function Eae(){var t=fn(),s=t.unicodeToHide;return s}function Iae(){var t=fn(),s=t.reactions;return s}function Dc(){var t=fn(),s=t.getEmojiUrl;return s}function cC(t){return typeof t=="number"?t+"px":t}function Aae(t){var s=t>0,n=t>1;return s?n?dae.replace("%n",t.toString()):cae:oae}function dC(t,s){s===void 0&&(s=0);var n=u.useState(t),r=n[0],a=n[1],i=u.useRef(null);function l(o){return new Promise(function(c){var d;i.current&&clearTimeout(i.current),i.current=(d=window)==null?void 0:d.setTimeout(function(){a(o),c(o)},s)})}return[r,l]}function Dae(){var t=Eae();return function(s){return t.has(s)}}function QR(){var t=u.useRef({}),s=Tae();return u.useMemo(function(){var n=parseFloat(""+s);return!s||Number.isNaN(n)?t.current:W0.reduce(function(r,a){return _ae(a,n)&&(r[Mr(a)]=!0),r},t.current)},[s])}function Pae(){var t=QR(),s=Dae();return function(r){var a=hw(Mr(r));return!!(t[a]||s(a))}}function _ae(t,s){return tae(t)>s}function Rae(t){u.useEffect(function(){t(!0)},[t])}function Oae(t){var s=t.children,n=QR(),r=gae(),a=Lae(),i=u.useRef(Lf),l=u.useRef(!1),o=u.useRef(!1),c=u.useRef(n),d=dC(Date.now(),200),f=dC("",100),x=u.useState(!1),h=u.useState(r),j=u.useState(null),v=u.useState(new Set),p=u.useState(null),b=u.useState(a),y=u.useState(!1),m=y[0],g=y[1];return Rae(g),u.createElement(Ta.Provider,{value:{activeCategoryState:j,activeSkinTone:h,disallowClickRef:l,disallowMouseRef:o,disallowedEmojisRef:c,emojiVariationPickerState:p,emojisThatFailedToLoadState:v,filterRef:i,isPastInitialLoad:m,searchTerm:f,skinToneFanOpenState:x,suggestedUpdateState:d,reactionsModeState:b}},s)}var Ta=u.createContext({activeCategoryState:[null,function(){}],activeSkinTone:[Ba.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise(function(){})}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}]});function xw(){var t=u.useContext(Ta),s=t.filterRef;return s}function zae(){var t=u.useContext(Ta),s=t.disallowClickRef;return s}function pw(){var t=u.useContext(Ta),s=t.disallowMouseRef;return s}function Z0(){var t=u.useContext(Ta),s=t.reactionsModeState;return s}function J0(){var t=u.useContext(Ta),s=t.searchTerm;return s}function gw(){var t=u.useContext(Ta),s=t.activeSkinTone;return s}function HR(){var t=u.useContext(Ta),s=t.emojisThatFailedToLoadState;return s}function Fae(){var t=u.useContext(Ta),s=t.isPastInitialLoad;return s}function Eu(){var t=u.useContext(Ta),s=t.emojiVariationPickerState;return s}function lh(){var t=u.useContext(Ta),s=t.skinToneFanOpenState;return s}function WR(){var t=u.useContext(Ta),s=t.suggestedUpdateState,n=s[0],r=s[1];return[n,function(){r(Date.now())}]}function q0(){var t=J0(),s=t[0];return!!s}function da(t){t&&requestAnimationFrame(function(){t.focus()})}function ZR(t){if(t){var s=t.previousElementSibling;da(s)}}function JR(t){if(t){var s=t.nextElementSibling;da(s)}}function qR(t){if(t){var s=t.firstElementChild;da(s)}}function bm(){return document.activeElement}function Uae(t){var s=t.children,n=u.useRef(null),r=u.useRef(null),a=u.useRef(null),i=u.useRef(null),l=u.useRef(null),o=u.useRef(null),c=u.useRef(null),d=u.useRef(null);return u.createElement(KR.Provider,{value:{AnchoredEmojiRef:r,BodyRef:a,CategoryNavigationRef:o,PickerMainRef:n,SearchInputRef:i,SkinTonePickerRef:l,VariationPickerRef:c,ReactionsRef:d}},s)}var KR=u.createContext({AnchoredEmojiRef:u.createRef(),BodyRef:u.createRef(),CategoryNavigationRef:u.createRef(),PickerMainRef:u.createRef(),SearchInputRef:u.createRef(),SkinTonePickerRef:u.createRef(),VariationPickerRef:u.createRef(),ReactionsRef:u.createRef()});function So(){return u.useContext(KR)}function oh(){return So().PickerMainRef}function K0(){return So().AnchoredEmojiRef}function XR(){var t=K0();return function(s){s===null&&t.current!==null&&da(t.current),t.current=s}}function Ea(){return So().BodyRef}function $ae(){return So().ReactionsRef}function ko(){return So().SearchInputRef}function jw(){return So().SkinTonePickerRef}function yw(){return So().CategoryNavigationRef}function Bae(){return So().VariationPickerRef}function e8(t,s){s===void 0&&(s=0);var n=x8(t);n&&requestAnimationFrame(function(){n.scrollTop=s})}function Vae(t,s){var n=x8(t);n&&requestAnimationFrame(function(){n.scrollTop=n.scrollTop+s})}function Gae(){var t=Ea();return u.useCallback(function(s){requestAnimationFrame(function(){t.current&&(t.current.scrollTop=s)})},[t])}function X0(t){if(!(!t||!Pie(t))&&!t.closest(or(es.variationPicker))){var s=g8(t),n=p8(t);Vae(s,-(Mw(Lo(t))-n))}}function eg(t){var s=Tw(t);da(s),X0(s)}function Yae(t){var s=Tw(t);da(s),s==null||s.click()}function Qae(t){da(b8(t))}function Hae(t){if(t){var s=w8(t);if(!s)return eg(sg(t));da(s),X0(s)}}function Wae(t){if(t){var s=Lw(t);if(!s)return Qae(tg(t));da(s),X0(s)}}function Zae(t,s){if(t){var n=qae(t);if(!n)return s();da(n),X0(n)}}function Jae(t){if(t){var s=Kae(t);return da(s)}}function qae(t){if(!t)return null;var s=N8(t),n=Lo(s),r=u8(s,t),a=f8(s,t),i=d8(s,t);if(a===0){var l=tg(n);return l?m8(ou(l),-1,i,r):null}return Lie(ou(s),a,i,r)}function Kae(t){if(!t)return null;var s=N8(t),n=Lo(s),r=u8(s,t),a=f8(s,t),i=d8(s,t);if(!Mie(s,t)){var l=sg(n);return l?m8(ou(l),0,i,r):null}var o=kie(ou(s),a,i,r);return o}function Pc(){var t=Eu(),s=t[0],n=t[1],r=lh(),a=r[0],i=r[1],l=u.useCallback(function(){s&&n(null),a&&i(!1)},[s,a,n,i]);return l}function t8(){var t=Eu(),s=t[0],n=lh(),r=n[0];return function(){return!!s||r}}function Xae(){var t=pw();return function(){t.current=!0}}function s8(){var t=pw();return function(){t.current=!1}}function n8(){var t=pw();return function(){return t.current}}function eie(){var t=Ea(),s=s8(),n=n8();u.useEffect(function(){var r=t.current;r==null||r.addEventListener("mousemove",a,{passive:!0});function a(){n()&&s()}return function(){r==null||r.removeEventListener("mousemove",a)}},[t,s,n])}function _c(){var t=ko();return u.useCallback(function(){da(t.current)},[t])}function tie(){var t=jw();return u.useCallback(function(){t.current&&qR(t.current)},[t])}function r8(){var t=yw();return u.useCallback(function(){t.current&&qR(t.current)},[t])}function sie(){var t=xw();return function s(n){if(typeof n=="function")return s(n(t.current));t.current=n}}function a8(){var t=vw(),s=ko(),n=_c();return function(){s.current&&(s.current.value=""),t(""),n()}}function nie(){var t=ko(),s=vw();return function(r){t.current?(t.current.value=""+t.current.value+r,s(Ly(t.current.value))):s(Ly(r))}}function rie(){var t=ko(),s=xw(),n=sie(),r=vw(),a=J0(),i=a[0],l=die(s.current,i);return{onChange:o,searchTerm:i,SearchInputRef:t,statusSearchResults:l};function o(c){var d=s.current,f=c.toLowerCase();if(d!=null&&d[f]||f.length<=1)return r(f);var x=cie(f,d);if(!x)return r(f);n(function(h){var j;return Object.assign(h,(j={},j[f]=aie(x,f),j))}),r(f)}}function vw(){var t=J0(),s=t[1],n=oh();return function(a){requestAnimationFrame(function(){s(a&&(a==null?void 0:a.toLowerCase())).then(function(){e8(n.current,0)})})}}function aie(t,s){var n={};for(var r in t){var a=t[r];iie(a,s)&&(n[r]=a)}return n}function iie(t,s){return ah(t).some(function(n){return n.includes(s)})}function lie(){var t=xw(),s=t.current,n=J0(),r=n[0];return function(a){return oie(a,s,r)}}function oie(t,s,n){var r;return!s||!n?!1:!((r=s[n])!=null&&r[t])}function cie(t,s){if(!s)return null;if(s[t])return s[t];var n=Object.keys(s).sort(function(r,a){return a.length-r.length}).find(function(r){return t.includes(r)});return n?s[n]:null}function Ly(t){return!t||typeof t!="string"?"":t.trim().toLowerCase()}function die(t,s){var n;if(!(t!=null&&t[s]))return"";var r=((n=Object.entries(t==null?void 0:t[s]))==null?void 0:n.length)||0;return Aae(r)}function i8(){var t=XR(),s=Eu(),n=s[1];return function(a){var i=Cw(a),l=i[0];l&&(t(a),n(l))}}function bw(){var t=YR();return t===iu.SEARCH}function l8(){var t=YR();return t===iu.PREVIEW}var Cn;(function(t){t.ArrowDown="ArrowDown",t.ArrowUp="ArrowUp",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.Escape="Escape",t.Enter="Enter",t.Space=" "})(Cn||(Cn={}));function uie(){fie(),mie(),hie(),xie(),pie()}function fie(){var t=oh(),s=a8(),n=Gae(),r=ko(),a=_c(),i=t8(),l=Xae(),o=Pc(),c=u.useMemo(function(){return function(f){var x=f.key;switch(l(),x){case Cn.Escape:if(f.preventDefault(),i()){o();return}s(),n(0),a();break}}},[n,s,o,a,i,l]);u.useEffect(function(){var d=t.current;if(d)return d.addEventListener("keydown",c),function(){d.removeEventListener("keydown",c)}},[t,r,n,c])}function mie(){var t=tie(),s=oh(),n=Ea(),r=ko(),a=lh(),i=a[1],l=o8(),o=bw(),c=u.useMemo(function(){return function(f){var x=f.key;switch(x){case Cn.ArrowRight:if(!o)return;f.preventDefault(),i(!0),t();break;case Cn.ArrowDown:f.preventDefault(),l();break;case Cn.Enter:f.preventDefault(),Yae(n.current);break}}},[t,l,i,n,o]);u.useEffect(function(){var d=r.current;if(d)return d.addEventListener("keydown",c),function(){d.removeEventListener("keydown",c)}},[s,r,c])}function hie(){var t=jw(),s=_c(),n=ko(),r=o8(),a=lh(),i=a[0],l=a[1],o=l8(),c=bw(),d=ww(),f=u.useMemo(function(){return function(h){var j=h.key;if(c)switch(j){case Cn.ArrowLeft:if(h.preventDefault(),!i)return s();uC(s);break;case Cn.ArrowRight:if(h.preventDefault(),!i)return s();fC();break;case Cn.ArrowDown:h.preventDefault(),i&&l(!1),r();break;default:d(h);break}if(o)switch(j){case Cn.ArrowUp:if(h.preventDefault(),!i)return s();uC(s);break;case Cn.ArrowDown:if(h.preventDefault(),!i)return s();fC();break;default:d(h);break}}},[i,s,l,r,d,o,c]);u.useEffect(function(){var x=t.current;if(x)return x.addEventListener("keydown",f),function(){x.removeEventListener("keydown",f)}},[t,n,i,f])}function xie(){var t=_c(),s=yw(),n=Ea(),r=ww(),a=u.useMemo(function(){return function(l){var o=l.key;switch(o){case Cn.ArrowUp:l.preventDefault(),t();break;case Cn.ArrowRight:l.preventDefault(),JR(bm());break;case Cn.ArrowLeft:l.preventDefault(),ZR(bm());break;case Cn.ArrowDown:l.preventDefault(),eg(n.current);break;default:r(l);break}}},[n,t,r]);u.useEffect(function(){var i=s.current;if(i)return i.addEventListener("keydown",a),function(){i.removeEventListener("keydown",a)}},[s,n,a])}function pie(){var t=Ea(),s=gie(),n=i8(),r=t8(),a=Pc(),i=ww(),l=u.useMemo(function(){return function(c){var d=c.key,f=qa(bm());switch(d){case Cn.ArrowRight:c.preventDefault(),Hae(f);break;case Cn.ArrowLeft:c.preventDefault(),Wae(f);break;case Cn.ArrowDown:if(c.preventDefault(),r()){a();break}Jae(f);break;case Cn.ArrowUp:if(c.preventDefault(),r()){a();break}Zae(f,s);break;case Cn.Space:c.preventDefault(),n(c.target);break;default:i(c);break}}},[s,i,n,r,a]);u.useEffect(function(){var o=t.current;if(o)return o.addEventListener("keydown",l),function(){o.removeEventListener("keydown",l)}},[t,l])}function o8(){var t=r8(),s=q0(),n=Ea();return u.useCallback(function(){return s?eg(n.current):t()},[n,t,s])}function gie(){var t=_c(),s=r8(),n=q0();return u.useCallback(function(){return n?t():s()},[t,n,s])}function uC(t){var s=bm();s&&(Eie(s)||t(),JR(s))}function fC(){var t=bm();t&&ZR(t)}function ww(){var t=nie(),s=_c(),n=GR(),r=Pc();return function(i){var l=i.key;jie(i)||n||l.match(/(^[a-zA-Z0-9]$){1}/)&&(i.preventDefault(),r(),s(),t(l))}}function jie(t){var s=t.metaKey,n=t.ctrlKey,r=t.altKey;return s||n||r}function yie(t,s,n){if(s&&n!==ta.NATIVE){var r=Mr(s);mC.has(r)||(ih(s).forEach(function(a){var i=t(a,n);vie(i)}),mC.add(r))}}var mC=new Set;function vie(t){var s=new Image;s.src=t}function bie(){var t=Ea(),s=Ac(),n=Dc();u.useEffect(function(){if(s===ta.NATIVE)return;var r=t.current;return r==null||r.addEventListener("focusin",a),function(){r==null||r.removeEventListener("focusin",a)};function a(i){var l=qa(i.target);if(l){var o=Cw(l),c=o[0];c&&Tu(c)&&yie(n,c,s)}}},[t,s,n])}var wie=["width","height"],c8=40;function Nie(t){var s=t.children;return u.createElement(Oae,null,u.createElement(Cie,null,s))}function Cie(t){var s,n=t.children,r=Z0(),a=r[0],i=Nae(),l=q0(),o=oh(),c=Sae(),d=kae();uie(),bie();var f=d||{},x=f.width,h=f.height,j=LR(f,wie);return u.createElement("aside",{className:ss(Ju.main,Ju.baseVariables,i===vo.DARK&&Ju.darkTheme,i===vo.AUTO&&Ju.autoThemeDark,(s={},s[es.searchActive]=l,s),a&&Ju.reactionsMenu,c),ref:o,style:an({},j,!a&&{height:h,width:x})},n)}var hC={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},Ju=en.create({main:{".":["epr-main",es.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"all 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-search-border-color":"var(--epr-highlight-color)","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":c8+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#FFFFFF"}},autoThemeDark:{".":es.autoTheme,"@media (prefers-color-scheme: dark)":{"--":hC}},darkTheme:{".":es.darkTheme,"--":hC},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function d8(t,s){if(!t||!s)return 0;var n=t.getBoundingClientRect().width,r=s.getBoundingClientRect().width;return Math.floor(n/r)}function u8(t,s){if(!t||!s)return 0;var n=s.getBoundingClientRect().width,r=s.getBoundingClientRect().left,a=t.getBoundingClientRect().left;return Math.floor((r-a)/n)}function f8(t,s){if(!t||!s)return 0;var n=s.getBoundingClientRect().height,r=s.getBoundingClientRect().top,a=t.getBoundingClientRect().top;return Math.round((r-a)/n)}function Mie(t,s){if(!t||!s)return!1;var n=s.getBoundingClientRect().height,r=s.getBoundingClientRect().top,a=t.getBoundingClientRect().top,i=t.getBoundingClientRect().height;return Math.round(r-a+n)<i}function Nw(t,s,n){if(s===-1){var r=Math.floor((t.length-1)/n),a=r*n,i=t.length-1;return t.slice(a,i+1)}return t.slice(s*n,(s+1)*n)}function Sie(t,s,n){var r=s+1;return r*n>t.length?[]:Nw(t,r,n)}function m8(t,s,n,r){var a=Nw(t,s,n);return a[r]||a[a.length-1]||null}function kie(t,s,n,r){var a=Sie(t,s,n);return a[r]||a[a.length-1]||null}function Lie(t,s,n,r){var a=Nw(t,s-1,n);return a[r]||a[a.length-1]||null}function Tie(t,s,n){if(!t||!s.length)return null;var r=t.getBoundingClientRect().top,a=t.getBoundingClientRect().bottom,i=r+Iie(t),l=s.find(function(o){var c=o.getBoundingClientRect().top,d=o.getBoundingClientRect().bottom,f=o.clientHeight*n,x=c+f,h=d-f;return x<i?!1:x>=r&&x<=a||h>=r&&h<=a});return l||null}function Eie(t){return!!t.nextElementSibling}function Iie(t){for(var s=Array.from(t.querySelectorAll(or(es.label))),n=0,r=s;n<r.length;n++){var a=r[n],i=a.getBoundingClientRect().height;if(i>0)return i}return c8}var Bp="button"+or(es.emoji),Aie=[Bp,or(es.visible),":not("+or(es.hidden)+")"].join("");function qa(t){var s;return(s=t==null?void 0:t.closest(Bp))!=null?s:null}function Cw(t){var s=j8(t),n=Sw(t);if(!s)return[];var r=lu(n??s);return r?[r,n]:[]}function Die(t){var s;return!!(t!=null&&t.matches(Bp)||!(t==null||(s=t.parentElement)==null)&&s.matches(Bp))}function xC(t){var s;return(s=t==null?void 0:t.clientHeight)!=null?s:0}function h8(t){if(!t)return 0;var s=qa(t),n=Lo(s),r=Mw(n);return pC(s)+pC(n)+r}function Mw(t){var s,n;if(!t)return 0;var r=t.querySelector(or(es.categoryContent));return((s=t==null?void 0:t.clientHeight)!=null?s:0)-((n=r==null?void 0:r.clientHeight)!=null?n:0)}function Pie(t){return t?p8(t)<Mw(Lo(t)):!1}function x8(t){return t?t.matches(or(es.scrollBody))?t:t.querySelector(or(es.scrollBody)):null}function p8(t){var s,n;return t?h8(t)-((s=(n=g8(t))==null?void 0:n.scrollTop)!=null?s:0):0}function g8(t){var s;return t&&(s=t.closest(or(es.scrollBody)))!=null?s:null}function _ie(t){var s=qa(t),n=Lo(s);return gC(s)+gC(n)}function pC(t){var s;return(s=t==null?void 0:t.offsetTop)!=null?s:0}function gC(t){var s;return(s=t==null?void 0:t.offsetLeft)!=null?s:0}function Sw(t){var s;return(s=Rie(qa(t),"unified"))!=null?s:null}function j8(t){var s=Sw(t);return s?hw(s):null}function y8(t){return t?{unified:Sw(t),originalUnified:j8(t)}:{unified:null,originalUnified:null}}function Rie(t,s){var n;return(n=Oie(t)[s])!=null?n:null}function Oie(t){var s;return(s=t==null?void 0:t.dataset)!=null?s:{}}function kw(t){return t.classList.contains(es.visible)}function v8(t){return t?t.classList.contains(es.hidden):!0}function ou(t){return t?Array.from(t.querySelectorAll(Aie)):[]}function b8(t){if(!t)return null;var s=ou(t),n=s.slice(-1),r=n[0];return r?kw(r)?r:Lw(r):null}function w8(t){var s=t.nextElementSibling;return s?kw(s)?s:w8(s):Tw(sg(t))}function Lw(t){var s=t.previousElementSibling;return s?kw(s)?s:Lw(s):b8(tg(t))}function Tw(t){if(!t)return null;var s=ou(t);return Tie(t,s,.1)}function tg(t){var s=Lo(t);if(!s)return null;var n=s.previousElementSibling;return n?v8(n)?tg(n):n:null}function sg(t){var s=Lo(t);if(!s)return null;var n=s.nextElementSibling;return n?v8(n)?sg(n):n:null}function Lo(t){return t?t.closest(or(es.category)):null}function N8(t){return t?t.closest(or(es.categoryContent)):null}function C8(t){return t.split("-").map(function(s){return String.fromCodePoint(parseInt(s,16))}).join("")}var M8="epr_suggested";function S8(t){try{var s,n,r;if(!((s=window)!=null&&s.localStorage))return[];var a=JSON.parse((n=(r=window)==null?void 0:r.localStorage.getItem(M8))!=null?n:"[]");return t===jm.FREQUENT?a.sort(function(i,l){return l.count-i.count}):a}catch{return[]}}function zie(t,s){var n=S8(),r=Mr(t,s),a=Mr(t),i=n.find(function(c){var d=c.unified;return d===r}),l;i?l=[i].concat(n.filter(function(c){return c!==i})):(i={unified:r,original:a,count:0},l=[i].concat(n)),i.count++,l.length=Math.min(l.length,14);try{var o;(o=window)==null||o.localStorage.setItem(M8,JSON.stringify(l))}catch{}}function Fie(t){return t.category===Xt.CUSTOM}function k8(t){return t.imgUrl!==void 0}function L8(t,s){var n=u.useRef(),r=i8(),a=zae(),i=Eu(),l=i[1],o=Pc(),c=gw(),d=c[0],f=bae(s),x=WR(),h=x[1],j=Dc(),v=Ac(),p=u.useCallback(function(g){if(!a.current){o();var w=jC(g),N=w[0],k=w[1];if(!(!N||!k)){var L=iae(k)||d;h(),zie(N,L),f(Uie(N,L,v,j),g)}}},[d,o,a,f,h,j,v]),b=u.useCallback(function(g){var w;n.current&&clearTimeout(n.current);var N=jC(g),k=N[0];!k||!Tu(k)||(n.current=(w=window)==null?void 0:w.setTimeout(function(){a.current=!0,n.current=void 0,o(),r(g.target),l(k)},500))},[a,o,r,l]),y=u.useCallback(function(){n.current?(clearTimeout(n.current),n.current=void 0):a.current&&requestAnimationFrame(function(){a.current=!1})},[a]);u.useEffect(function(){if(t.current){var m=t.current;return m.addEventListener("click",p,{passive:!0}),m.addEventListener("mousedown",b,{passive:!0}),m.addEventListener("mouseup",y,{passive:!0}),function(){m==null||m.removeEventListener("click",p),m==null||m.removeEventListener("mousedown",b),m==null||m.removeEventListener("mouseup",y)}}},[t,p,b,y])}function jC(t){var s=t==null?void 0:t.target;return Die(s)?Cw(s):[]}function Uie(t,s,n,r){var a=ah(t);if(k8(t)){var i=Mr(t);return{activeSkinTone:s,emoji:i,getImageUrl:function(){return t.imgUrl},imageUrl:t.imgUrl,isCustom:!0,names:a,unified:i,unifiedWithoutSkinTone:i}}var l=Mr(t,s);return{activeSkinTone:s,emoji:C8(l),getImageUrl:function(c){return c===void 0&&(c=n??ta.APPLE),r(l,c)},imageUrl:r(l,n??ta.APPLE),isCustom:!1,names:a,unified:l,unifiedWithoutSkinTone:Mr(t)}}function ch(t){return u.createElement("button",Object.assign({type:"button"},t,{className:ss($ie.button,t.className)}),t.children)}var $ie=en.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function Bie(t){var s,n=t.emojiNames,r=t.unified,a=t.hidden,i=t.hiddenOnSearch,l=t.showVariations,o=l===void 0?!0:l,c=t.hasVariations,d=t.children,f=t.className,x=t.noBackground,h=x===void 0?!1:x;return u.createElement(ch,{className:ss(m1.emoji,a&&fw.hidden,i&&Ic.hiddenOnSearch,(s={},s[es.visible]=!a&&!i,s),!!(c&&o)&&m1.hasVariations,h&&m1.noBackground,f),"data-unified":r,"aria-label":Vie(n),"data-full-name":n},d)}function Vie(t){var s;return t[0].match("flag-")&&(s=t[1])!=null?s:t[0]}var m1=en.create({emoji:{".":es.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":es.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),Vp=en.create({external:{".":es.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function yC(t){var s=t.emojiName,n=t.style,r=t.lazyLoad,a=r===void 0?!1:r,i=t.imgUrl,l=t.onError,o=t.className;return u.createElement("img",{src:i,alt:s,className:ss(Gie.emojiImag,Vp.external,Vp.common,o),loading:a?"lazy":"eager",onError:l,style:n})}var Gie=en.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function Yie(t){var s=t.unified,n=t.style,r=t.className;return u.createElement("span",{className:ss(Qie.nativeEmoji,Vp.common,Vp.external,r),"data-unified":s,style:n},C8(s))}var Qie=en.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function Ty(t){var s=t.emoji,n=t.unified,r=t.emojiStyle,a=t.size,i=t.lazyLoad,l=t.getEmojiUrl,o=l===void 0?PR:l,c=t.className,d=HR(),f=d[1],x={};a&&(x.width=x.height=x.fontSize=a+"px");var h=s||lu(n);if(!h)return null;if(k8(h))return u.createElement(yC,{style:x,emojiName:n,emojiStyle:ta.NATIVE,lazyLoad:i,imgUrl:h.imgUrl,onError:j,className:c});return u.createElement(u.Fragment,null,r===ta.NATIVE?u.createElement(Yie,{unified:n,style:x,className:c}):u.createElement(yC,{style:x,emojiName:ky(h),emojiStyle:r,lazyLoad:i,imgUrl:o(n,r),onError:j,className:c}));function j(){f(function(v){return new Set(v).add(n)})}}function ng(t){var s=t.emoji,n=t.unified,r=t.hidden,a=t.hiddenOnSearch,i=t.emojiStyle,l=t.showVariations,o=l===void 0?!0:l,c=t.size,d=t.lazyLoad,f=t.getEmojiUrl,x=t.className,h=t.noBackground,j=h===void 0?!1:h,v=Tu(s);return u.createElement(Bie,{hasVariations:v,showVariations:o,hidden:r,hiddenOnSearch:a,emojiNames:ah(s),unified:n,noBackground:j},u.createElement(Ty,{unified:n,emoji:s,size:c,emojiStyle:i,lazyLoad:d,getEmojiUrl:f,className:x}))}var Hie="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=";function Wie(){var t=Z0(),s=t[1];return u.createElement(ch,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:ss(Zie.plusSign),onClick:function(){return s(!1)}})}var Zie=en.create(an({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url("+Hie+")",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},yo("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function Jie(){var t=Z0(),s=t[0],n=$ae(),r=Iae();L8(n,vm.REACTIONS);var a=Ac(),i=UR(),l=Dc();return s?u.createElement("ul",{className:ss(vC.list,!s&&fw.hidden),ref:n},r.map(function(o){return u.createElement("li",{key:o},u.createElement(ng,{emoji:lu(o),emojiStyle:a,unified:o,showVariations:!1,className:ss(vC.emojiButton),noBackground:!0,getEmojiUrl:l}))}),i?u.createElement("li",null,u.createElement(Wie,null)):null):null}var vC=en.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function qie(t){var s=Pc();u.useEffect(function(){var n=t.current;if(!n)return;n.addEventListener("scroll",r,{passive:!0});function r(){s()}return function(){n==null||n.removeEventListener("scroll",r)}},[t,s])}function Kie(){var t=HR(),s=t[0],n=lie();return function(r){var a=Mr(r),i=s.has(a),l=n(a);return{failedToLoad:i,filteredOut:l,hidden:i||l}}}function T8(t){var s=t.categoryConfig,n=t.children,r=t.hidden,a=t.hiddenOnSearch,i=mw(s),l=AR(s);return u.createElement("li",{className:ss(h1.category,r&&fw.hidden,a&&Ic.hiddenOnSearch),"data-name":i,"aria-label":l},u.createElement("h2",{className:ss(h1.label)},l),u.createElement("div",{className:ss(h1.categoryContent)},n))}var h1=en.create({category:{".":es.category,":not(:has(.epr-visible))":{display:"none"}},categoryContent:{".":es.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":es.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}}),x1=!1;function Xie(){var t=u.useState(x1),s=t[0],n=t[1];return u.useEffect(function(){n(!0),x1=!0},[]),s||x1}function ele(t){var s=t.categoryConfig,n=WR(),r=n[0],a=Xie(),i=Cae(),l=Dc(),o=u.useMemo(function(){var d;return(d=S8(i))!=null?d:[]},[r,i]),c=Ac();return a?u.createElement(T8,{categoryConfig:s,hiddenOnSearch:!0,hidden:o.length===0},o.map(function(d){var f=lu(d.original);return f?u.createElement(ng,{showVariations:!1,unified:d.unified,emojiStyle:c,emoji:f,key:d.unified,getEmojiUrl:l}):null})):null}function tle(){var t=BR(),s=u.useRef(0);return u.createElement("ul",{className:ss(nle.emojiList)},t.map(function(n){var r=mw(n);return r===Xt.SUGGESTED?u.createElement(ele,{key:r,categoryConfig:n}):u.createElement(u.Suspense,{key:r},u.createElement(sle,{category:r,categoryConfig:n,renderdCategoriesCountRef:s}))}))}function sle(t){var s=t.category,n=t.categoryConfig,r=t.renderdCategoriesCountRef,a=Kie(),i=Mae(),l=Ac(),o=Fae(),c=gw(),d=c[0],f=Pae(),x=Dc(),h=!$R(),j=!o&&r.current>0?[]:sae(s);j.length>0&&r.current++;var v=0,p=j.map(function(b){var y=Mr(b,d),m=a(b),g=m.failedToLoad,w=m.filteredOut,N=m.hidden,k=f(b);return(N||k)&&v++,k?null:u.createElement(ng,{showVariations:h,key:y,emoji:b,unified:y,hidden:g,hiddenOnSearch:w,emojiStyle:l,lazyLoad:i,getEmojiUrl:x})});return u.createElement(T8,{categoryConfig:n,hidden:v===p.length},p)}var nle=en.create({emojiList:{".":es.emojiList,listStyle:"none",margin:"0",padding:"0"}}),rle="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=",kd;(function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"})(kd||(kd={}));function ale(){var t=K0(),s=Bae(),n=Eu(),r=n[0],a=Ac(),i=lle(s),l=i.getTop,o=i.getMenuDirection,c=XR(),d=ile(s),f=Dc(),x=qa(t.current),h=!!(r&&x&&Tu(r)&&x.classList.contains(es.emojiHasVariations));u.useEffect(function(){h&&eg(s.current)},[s,h,t]);var j,v;return!h&&t.current?c(null):(j=l(),v=d()),u.createElement("div",{ref:s,className:ss(Yh.variationPicker,o()===kd.Down&&Yh.pointingUp,h&&Yh.visible),style:{top:j}},h&&r?[Mr(r)].concat(ih(r)).slice(0,6).map(function(p){return u.createElement(ng,{key:p,emoji:r,unified:p,emojiStyle:a,showVariations:!1,getEmojiUrl:f})}):null,u.createElement("div",{className:ss(Yh.pointer),style:v}))}function ile(t){var s=K0();return function(){var r={};if(!t.current)return r;if(s.current){var a=qa(s.current),i=_ie(a);if(!a)return r;r.left=i+(a==null?void 0:a.clientWidth)/2}return r}}function lle(t){var s=K0(),n=Ea(),r=kd.Up;return{getMenuDirection:a,getTop:i};function a(){return r}function i(){r=kd.Up;var l=0;if(!t.current)return 0;var o=xC(t.current);if(s.current){var c,d=n.current,f=qa(s.current),x=xC(f);l=h8(f);var h=(c=d==null?void 0:d.scrollTop)!=null?c:0;h>l-o&&(r=kd.Down,l+=x+o)}return l-o}}var Yh=en.create(an({variationPicker:{".":es.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url("+rle+")"}},yo("pointer",{backgroundPosition:"-25px 0"})));function ole(){var t=Ea();return qie(t),L8(t,vm.PICKER),eie(),u.createElement("div",{className:ss(cle.body,Ic.hiddenOnReactions),ref:t},u.createElement(ale,null),u.createElement(tle,null))}var cle=en.create({body:{".":es.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function dle(t,s){if(!t||!s)return 0;var n=t.getBoundingClientRect(),r=s.getBoundingClientRect();return r.height-(n.y-r.y)}function ule(t,s){var n=Ea(),r=n8(),a=s8();u.useEffect(function(){if(!t)return;var i=n.current;i==null||i.addEventListener("keydown",c,{passive:!0}),i==null||i.addEventListener("mouseover",d,!0),i==null||i.addEventListener("focus",l,!0),i==null||i.addEventListener("mouseout",o,{passive:!0}),i==null||i.addEventListener("blur",o,!0);function l(f){var x=qa(f.target);if(!x)return o();var h=y8(x),j=h.unified,v=h.originalUnified;if(!j||!v)return o();s({unified:j,originalUnified:v})}function o(f){if(f){var x=f.relatedTarget;if(!qa(x))return s(null)}s(null)}function c(f){f.key==="Escape"&&s(null)}function d(f){if(!r()){var x=qa(f.target);if(x){var h=dle(x,i),j=x.getBoundingClientRect().height;if(h<j)return fle(x,s);da(x)}}}return function(){i==null||i.removeEventListener("mouseover",d),i==null||i.removeEventListener("mouseout",o),i==null||i.removeEventListener("focus",l,!0),i==null||i.removeEventListener("blur",o,!0),i==null||i.removeEventListener("keydown",c)}},[n,t,s,r,a])}function fle(t,s){var n,r=y8(t),a=r.unified,i=r.originalUnified;!a||!i||((n=document.activeElement)==null||n.blur==null||n.blur(),s({unified:a,originalUnified:i}))}var Qh,wm;(function(t){t.ROW="FlexRow",t.COLUMN="FlexColumn"})(wm||(wm={}));function E8(t){var s=t.children,n=t.className,r=t.style,a=r===void 0?{}:r,i=t.direction,l=i===void 0?wm.ROW:i;return u.createElement("div",{style:an({},a),className:ss(bC.flex,n,bC[l])},s)}var bC=en.create((Qh={flex:{display:"flex"}},Qh[wm.ROW]={flexDirection:"row"},Qh[wm.COLUMN]={flexDirection:"column"},Qh));function mle(t){var s=t.className,n=t.style,r=n===void 0?{}:n;return u.createElement("div",{style:an({flex:1},r),className:ss(s)})}function hle(t){var s=t.children,n=t.className,r=t.style;return u.createElement("div",{style:an({},r,{position:"absolute"}),className:n},s)}function rg(t){var s=t.children,n=t.className,r=t.style;return u.createElement("div",{style:an({},r,{position:"relative"}),className:n},s)}function xle(t){var s=t.isOpen,n=t.onClick,r=t.isActive,a=t.skinToneVariation,i=t.style;return u.createElement(ch,{style:i,onClick:n,className:ss("epr-tone-"+a,p1.tone,!s&&p1.closedTone,r&&p1.active),"aria-pressed":r,"aria-label":"Skin tone "+Xre[a]})}var p1=en.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}}),uf=28;function ple(){return u.createElement(rg,{style:{height:uf}},u.createElement(hle,{style:{bottom:0,right:0}},u.createElement(I8,{direction:Nm.VERTICAL})))}function I8(t){var s=t.direction,n=s===void 0?Nm.HORIZONTAL:s,r=jw(),a=$R(),i=lh(),l=i[0],o=i[1],c=gw(),d=c[0],f=c[1],x=wae(),h=Pc(),j=_c();if(a)return null;var v=uf*Up.length+"px",p=l?v:uf+"px",b=n===Nm.VERTICAL;return u.createElement(rg,{className:ss(qu.skinTones,b&&qu.vertical,l&&qu.open,b&&l&&qu.verticalShadow),style:b?{flexBasis:p,height:p}:{flexBasis:p}},u.createElement("div",{className:ss(qu.select),ref:r},Up.map(function(y,m){var g=y===d;return u.createElement(xle,{key:y,skinToneVariation:y,isOpen:l,style:{transform:ss(b?"translateY(-"+m*(l?uf:0)+"px)":"translateX(-"+m*(l?uf:0)+"px)",l&&g&&"scale(1.3)")},isActive:g,onClick:function(){l?(f(y),x(y),j()):o(!0),h()}})})))}var Nm;(function(t){t.VERTICAL="epr-vertical",t.HORIZONTAL="epr-horizontal"})(Nm||(Nm={}));var qu=en.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function gle(){var t=VR(),s=l8();return t.showPreview?u.createElement(E8,{className:ss(Lx.preview,Ic.hiddenOnReactions)},u.createElement(jle,null),u.createElement(mle,null),s?u.createElement(ple,null):null):null}function jle(){var t,s=VR(),n=u.useState(null),r=n[0],a=n[1],i=Ac(),l=Eu(),o=l[0],c=Dc();ule(s.showPreview,a);var d=lu((t=r==null?void 0:r.unified)!=null?t:r==null?void 0:r.originalUnified),f=d!=null&&r!=null;return u.createElement(x,null);function x(){var h=o??lu(s.defaultEmoji);if(!h)return null;var j=o?ky(o):s.defaultCaption;return u.createElement(u.Fragment,null,u.createElement("div",null,f?u.createElement(Ty,{unified:r==null?void 0:r.unified,emoji:d,emojiStyle:i,size:45,getEmojiUrl:c,className:ss(Lx.emoji)}):h?u.createElement(Ty,{unified:Mr(h),emoji:h,emojiStyle:i,size:45,getEmojiUrl:c,className:ss(Lx.emoji)}):null),u.createElement("div",{className:ss(Lx.label)},f?ky(d):j))}}var Lx=en.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"}});function yle(t){var s;return(s=t==null?void 0:t.getAttribute("data-name"))!=null?s:null}function vle(t){var s=Ea();u.useEffect(function(){var n=new Map,r=s.current,a=new IntersectionObserver(function(i){if(r){for(var l=Dre(i),o;!(o=l()).done;){var c=o.value,d=yle(c.target);n.set(d,c.intersectionRatio)}var f=Array.from(n),x=f[f.length-1];if(x[1]==1)return t(x[0]);for(var h=0,j=f;h<j.length;h++){var v=j[h],p=v[0],b=v[1];if(b){t(p);break}}}},{threshold:[0,1]});r==null||r.querySelectorAll(or(es.category)).forEach(function(i){a.observe(i)})},[s,t])}function ble(){var t=Ea(),s=oh();return function(r){var a;if(t.current){var i=(a=t.current)==null?void 0:a.querySelector('[data-name="'+r+'"]');if(i){var l=i.offsetTop||0;e8(s.current,l)}}}}function wle(){var t=yae();return t?t.length===0:!1}var Nle="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+";function Cle(t){var s,n=t.isActiveCategory,r=t.category,a=t.allowNavigation,i=t.categoryConfig,l=t.onClick;return u.createElement(ch,{tabIndex:a?0:-1,className:ss(Sle.catBtn,Ic.categoryBtn,"epr-icn-"+r,(s={},s[es.active]=n,s)),onClick:l,"aria-label":AR(i),"aria-selected":n,role:"tab","aria-controls":"epr-category-nav-id"})}var wC={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},Mle={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},NC={":not(.epr-search-active)":{catBtn:{":hover":wC,"&.epr-active":wC}}},Sle=en.create(an({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url("+Nle+")",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},yo("catBtn",Mle),{".epr-dark-theme":an({},NC),".epr-auto-theme":an({},NC)}));function kle(){var t=u.useState(null),s=t[0],n=t[1],r=ble();vle(n);var a=q0(),i=BR(),l=yw(),o=wle();return u.createElement("div",{className:ss(Lle.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:l},i.map(function(c){var d=mw(c),f=d===s;if(Fie(c)&&o)return null;var x=!a&&!f;return u.createElement(Cle,{key:d,category:d,isActiveCategory:f,allowNavigation:x,categoryConfig:c,onClick:function(){n(d),r(d)}})}))}var Lle=en.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),A8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function Tle(){var t=a8();return u.createElement(ch,{className:ss(CC.btnClearSearch,Ic.visibleOnSearchOnly),onClick:t,"aria-label":"Clear",title:"Clear"},u.createElement("div",{className:ss(CC.icnClearnSearch)}))}var Ele={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},CC=en.create(an({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+A8+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},yo("icnClearnSearch",{backgroundPositionY:"-40px"}),yo("btnClearSearch",Ele))),g1=or(es.emojiPicker)+" "+or(es.emojiList),D8=["button",or(es.emoji)].join(""),Ile=or(es.category);function Ale(t){var s=t.value;if(!s)return null;var n=Dle(s);return u.createElement("style",null,`
    `+g1+" "+D8+` {
      display: none;
    }


    `+g1+" "+n+` {
      display: flex;
    }

    `+g1+" "+Ile+":not(:has("+n+`)) {
      display: none;
    }
  `)}function Dle(t){return[D8,'[data-full-name*="',Ly(t),'"]'].join("")}var Ple="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+";function _le(){return u.createElement("div",{className:ss(Rle.icnSearch)})}var Rle=en.create(an({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url("+Ple+")"}},yo("icnSearch",{backgroundPositionY:"-20px"})));function Ole(){var t=GR(),s=bw();return t?null:u.createElement(E8,{className:ss(Tx.overlay)},u.createElement(zle,null),s?u.createElement(I8,null):null)}function zle(){var t=u.useState(0),s=t[0],n=t[1],r=Pc(),a=ko(),i=pae(),l=jae(),o=rie(),c=o.statusSearchResults,d=o.searchTerm,f=o.onChange,x=a==null?void 0:a.current,h=x==null?void 0:x.value;return u.createElement(rg,{className:ss(Tx.searchContainer)},u.createElement(Ale,{value:h}),u.createElement("input",{autoFocus:l,"aria-label":"Type to search for an emoji",onFocus:r,className:ss(Tx.search),type:"text","aria-controls":"epr-search-id",placeholder:i,onChange:function(v){n(s+1),setTimeout(function(){var p,b;f((p=v==null||(b=v.target)==null?void 0:b.value)!=null?p:h)})},ref:a}),d?u.createElement("div",{role:"status",className:ss("epr-status-search-results",Tx.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},c):null,u.createElement(_le,null),u.createElement(Tle,null))}var Tx=en.create(an({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-input-bg-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+A8+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},yo("icnClearnSearch",{backgroundPositionY:"-40px"}),yo("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function Fle(){return u.createElement(rg,{className:ss("epr-header",Ic.hiddenOnReactions)},u.createElement(Ole,null),u.createElement(kle,null))}function Ule(t){return u.createElement(Uae,null,u.createElement(Pre,null),u.createElement(mae,Object.assign({},t),u.createElement($le,null)))}function $le(){var t=Z0(),s=t[0],n=UR(),r=u.useState(!s),a=r[0],i=r[1],l=vae();return u.useEffect(function(){s&&!n||a||i(!0)},[a,n,s]),l?u.createElement(Nie,null,u.createElement(Jie,null),u.createElement(Ble,{renderAll:a})):null}function Ble(t){var s=t.renderAll;return s?u.createElement(u.Fragment,null,u.createElement(Fle,null),u.createElement(ole,null),u.createElement(gle,null)):null}var Vle=u.memo(Ule,TR),Gle=function(t){Ire(s,t);function s(r){var a;return a=t.call(this,r)||this,a.state={hasError:!1},a}s.getDerivedStateFromError=function(){return{hasError:!0}};var n=s.prototype;return n.componentDidCatch=function(a,i){console.error("Emoji Picker React failed to render:",a,i)},n.render=function(){return this.state.hasError?null:this.props.children},s}(u.Component);function Ew(t){var s=xae({onEmojiClick:t.onEmojiClick,onReactionClick:t.onReactionClick,onSkinToneChange:t.onSkinToneChange});return u.createElement(Gle,null,u.createElement(zR.Provider,{value:s},u.createElement(Vle,Object.assign({},t))))}function Yle(){return $e({queryKey:["/api/chat/unread/public"],queryFn:async({queryKey:t})=>{try{const s=localStorage.getItem("auth_token");if(!s)return[];const n=await fetch(t[0],{headers:{Authorization:`Bearer ${s}`}});if(n.status===401)return console.warn("غير مصرح بالوصول إلى عدد الرسائل غير المقروءة"),[];if(!n.ok)throw new Error("فشل في جلب عدد الرسائل غير المقروءة");return await n.json()}catch(s){return console.error("خطأ في جلب عدد الرسائل غير المقروءة:",s),[]}},refetchInterval:1e4,initialData:[]})}function MC(t,s){if(!t||!Array.isArray(t))return 0;const n=t.find(r=>parseInt(r.roomId)===s);return n?parseInt(n.unreadCount):0}function SC({count:t}){return!t||t<=0?null:e.jsx(ie,{variant:"destructive",className:"mr-auto ml-2 px-2 py-0 text-xs h-5 min-w-[20px] flex items-center justify-center",children:t>99?"99+":t})}function Qle({activeRoomId:t,onSelectRoom:s,compact:n=!1}){const{data:r,isLoading:a}=$e({queryKey:["/api/chat/public-room"]}),{data:i}=Yle();return n?e.jsx("div",{className:"bg-background border rounded-lg p-2 shadow-sm",children:a?e.jsx(wn,{className:"h-8 w-full"}):r?e.jsxs(M,{variant:t===r.id?"default":"outline",size:"sm",className:"w-full justify-start h-8 text-sm",onClick:()=>s(r.id),children:[e.jsx(Jn,{className:"h-3 w-3 ml-1"}),e.jsx("span",{className:"truncate",children:r.name}),e.jsx(SC,{count:MC(i,r.id)})]}):e.jsx("div",{className:"text-center py-1",children:e.jsx("p",{className:"text-muted-foreground text-xs",children:"لا توجد غرف"})})}):e.jsx(_,{className:"mb-4",children:e.jsxs(z,{className:"p-4",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"الغرف المتاحة"}),a?e.jsx(wn,{className:"h-10 w-full"}):r?e.jsxs(M,{variant:t===r.id?"default":"outline",className:"w-full justify-start",onClick:()=>s(r.id),children:[e.jsx(Jn,{className:"h-4 w-4 ml-2"}),e.jsx("span",{children:r.name}),e.jsx(SC,{count:MC(i,r.id)})]}):e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"لا توجد غرف متاحة"})})]})})}const Hle=["❤️","😂","😮","😢","😡","👍","👎","🔥","💯","👏","🎉","😍"];function Wle({onEmojiSelect:t,onClose:s}){return e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-2 flex flex-wrap gap-1 max-w-[200px] z-50",children:Hle.map(n=>e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100 dark:hover:bg-gray-700 text-lg transition-colors",onClick:()=>{console.log("تم اختيار الرمز التعبيري:",n),t(n),s()},children:n},n))})}function Zle(){const{user:t}=Mt(),{toast:s}=lt(),[,n]=_t(),{isAndroidAppMode:r}=Mu();Cu("chats");const[a,i]=u.useState(null),[l,o]=u.useState([]),[c,d]=u.useState(""),[f,x]=u.useState(null),[h,j]=u.useState(null),[v,p]=u.useState(!1),[b,y]=u.useState(null),[m,g]=u.useState(null),[w,N]=u.useState(!1),[k,L]=u.useState([]),[S,T]=u.useState(null),[E,$]=u.useState(null),[F,Z]=u.useState(""),[G,D]=u.useState(!1),[B,de]=u.useState(new Set),[U,W]=u.useState(!r),[re,we]=u.useState(!1),[be,J]=u.useState(null),[Fe,Oe]=u.useState(null),[Ve,Ne]=u.useState(null),qe=u.useRef(null);u.useEffect(()=>{const I=ye=>{Fe!==null&&Oe(null),Ve!==null&&Ne(null)};return(Fe!==null||Ve!==null)&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[Fe,Ve]);const{data:ve}=$e({queryKey:["/api/chat/public-room"]}),{data:Ee,isLoading:ne}=$e({queryKey:["/api/chat/messages"]}),{data:ke,isLoading:tt}=$e({queryKey:["/api/users/available"]}),xt=I=>{I.senderId===(t==null?void 0:t.id)&&($(I.id),Z(I.content))},Q=()=>{$(null),Z("")},oe=I=>{if(navigator.clipboard)navigator.clipboard.writeText(I.content).then(()=>{s({title:"✅ تم النسخ",description:"تم نسخ نص الرسالة إلى الحافظة"})}).catch(()=>{s({title:"❌ خطأ",description:"لم يتمكن من نسخ النص",variant:"destructive"})});else{const ye=document.createElement("textarea");ye.value=I.content,document.body.appendChild(ye),ye.select();try{document.execCommand("copy"),s({title:"✅ تم النسخ",description:"تم نسخ نص الرسالة إلى الحافظة"})}catch{s({title:"❌ خطأ",description:"لم يتمكن من نسخ النص",variant:"destructive"})}document.body.removeChild(ye)}Ne(null)},Ae=I=>{const ye=`🔄 إعادة توجيه من ${I.senderName}:
${I.content}`;d(ye),Ne(null),s({title:"📨 إعادة توجيه",description:"تم إضافة الرسالة لمربع الإدخال"})},jt=I=>{const Le=new Date(I.createdAt).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});let We=`📋 معلومات الرسالة:
`;if(We+=`👤 المرسل: ${I.senderName}
`,We+=`📅 التاريخ: ${Le}
`,We+=`🆔 رقم الرسالة: ${I.id}
`,I.isEdited){const ct=new Date(I.editedAt||"").toLocaleString("ar-EG");We+=`✏️ تم التعديل: ${ct}
`}I.fileUrl&&(We+=`📎 يحتوي على مرفق: ${I.fileType}
`),I.voiceId&&(We+=`🎤 رسالة صوتية: ${I.voiceDuration}s
`),I.likesCount&&I.likesCount>0&&(We+=`❤️ عدد الإعجابات: ${I.likesCount}
`),alert(We),Ne(null)},O=I=>{window.confirm(`هل تريد الإبلاغ عن هذه الرسالة من ${I.senderName}؟

سيتم إرسال تقرير للإدارة.`)&&(s({title:"🚨 تم الإبلاغ",description:"تم إرسال بلاغك للإدارة، سيتم المراجعة قريباً"}),console.log("تم الإبلاغ عن الرسالة:",I.id,"من المستخدم:",I.senderName)),Ne(null)},P=I=>{const ye=JSON.parse(localStorage.getItem("favoriteMessages")||"[]"),Le={id:I.id,content:I.content,senderName:I.senderName,createdAt:I.createdAt,roomId:I.roomId};ye.find(We=>We.id===I.id)?s({title:"ℹ️ معلومة",description:"الرسالة موجودة بالفعل في المفضلة"}):(ye.push(Le),localStorage.setItem("favoriteMessages",JSON.stringify(ye)),s({title:"⭐ تمت الإضافة",description:"تم إضافة الرسالة للمفضلة"})),Ne(null)},ee=I=>{console.log("تبديل اختيار الرسالة (عامة):",I),de(ye=>{const Le=new Set(ye);return Le.has(I)?(Le.delete(I),console.log("تم إلغاء اختيار الرسالة (عامة):",I)):(Le.add(I),console.log("تم اختيار الرسالة (عامة):",I)),console.log("الرسائل المختارة حالياً (عامة):",Array.from(Le)),Le})},C=()=>{console.log("جميع الرسائل المتاحة للاختيار (عامة):",l.length,l.map(ye=>({id:ye.id,content:ye.content.substring(0,20),createdAt:ye.createdAt,senderId:ye.senderId})));const I=new Set(l.map(ye=>ye.id));console.log("تحديد جميع الرسائل (عامة):",Array.from(I)),de(I)},fe=()=>{de(new Set),D(!1)},le=async()=>{if(!(B.size===0||!(t!=null&&t.id)||!(ve!=null&&ve.id)||!window.confirm(`هل أنت متأكد من حذف ${B.size} رسالة؟ سيتم حذفها نهائياً للجميع.`)))try{const ye=Array.from(B);for(const Le of ye){const We=await ce(`/api/chat/messages/${Le}`,"DELETE");if(!We.ok){const ct=await We.json();throw console.error("خطأ في حذف الرسالة:",ct),new Error(ct.message||"فشل حذف إحدى الرسائل")}}o(Le=>Le.filter(We=>!B.has(We.id))),fe(),s({title:"تم حذف الرسائل",description:`تم حذف ${ye.length} رسالة`})}catch(ye){console.error("خطأ في حذف الرسائل:",ye),s({title:"فشل حذف الرسائل",description:ye instanceof Error?ye.message:"حدث خطأ أثناء حذف الرسائل",variant:"destructive"})}},xe=async()=>{var I,ye;if(!(!E||!ve||!t||!F.trim()))try{const Le=await ce(`/api/chat/messages/${E}`,"PUT",{content:F,roomId:ve.id});if(!Le.ok){const ct=await Le.json();throw new Error(ct.message||"فشل في تحديث الرسالة")}const We=await Le.json();o(ct=>ct.map(qt=>qt.id===E?We:qt)),$(null),Z(""),s({title:"تم التحديث",description:"تم تحديث الرسالة بنجاح"})}catch(Le){let We="فشل في تحديث الرسالة";(I=Le==null?void 0:Le.message)!=null&&I.includes("انتهى وقت التعديل")||(ye=Le==null?void 0:Le.message)!=null&&ye.includes("edit time")?We="⏰ انتهى الوقت المسموح للتعديل (5 دقائق). لا يمكن تعديل الرسائل القديمة.":Le!=null&&Le.message&&(We=Le.message),$(null),Z(""),s({title:"خطأ في التعديل",description:We,variant:"destructive"})}},Ye=async I=>{if(!ve||!t)return;if(console.log("🗑️ محاولة حذف الرسالة رقم:",I),!window.confirm("هل أنت متأكد من حذف هذه الرسالة؟ سيتم حذفها نهائياً.")){console.log("❌ تم إلغاء الحذف من قبل المستخدم");return}try{console.log("📡 إرسال طلب الحذف للخادم...");const Le=await ce(`/api/chat/messages/${I}`,"DELETE");if(Le.ok)console.log("✅ تم حذف الرسالة بنجاح من الخادم"),o(We=>We.filter(ct=>ct.id!==I)),s({title:"✅ تم الحذف",description:"تم حذف الرسالة بنجاح"});else{const We=await Le.json();throw new Error(We.message||"فشل في حذف الرسالة")}}catch(Le){console.error("❌ خطأ في حذف الرسالة:",Le),s({title:"❌ خطأ في الحذف",description:Le instanceof Error?Le.message:"فشل في حذف الرسالة",variant:"destructive"})}},Ft=async(I,ye)=>{var Le;try{const We=localStorage.getItem("auth_token");if(!We){s({title:"خطأ في المصادقة",description:"يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}const ct=new FormData;ct.append("voice",I,"voice-message.ogg"),ct.append("durationSeconds",ye.toString()),ct.append("roomId",((Le=ve==null?void 0:ve.id)==null?void 0:Le.toString())||"");const qt=await fetch("/api/voice/upload",{method:"POST",headers:{Authorization:`Bearer ${We}`},body:ct});if(!qt.ok)throw new Error("فشل في رفع الرسالة الصوتية");const on=await qt.json();console.log("تم رفع الرسالة الصوتية بنجاح:",on),we(!1),s({title:"نجح الإرسال",description:"تم إرسال الرسالة الصوتية بنجاح"})}catch(We){console.error("خطأ في رفع الرسالة الصوتية:",We),s({title:"خطأ في الإرسال",description:"فشل في إرسال الرسالة الصوتية",variant:"destructive"})}};u.useEffect(()=>{var I;(I=qe.current)==null||I.scrollIntoView({behavior:"smooth"})},[l]),u.useEffect(()=>{const I=ye=>{const Le=ye.target;!Le.closest(".msg")&&!Le.closest("[data-reaction-menu]")&&J(null)};if(be!==null)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[be]),u.useEffect(()=>{if(!t)return;const I=window.location.protocol==="https:"?"wss:":"ws:",ye=window.location.host,Le=`${I}//${ye}`,We=nc(Le,{path:"/socket.io",auth:{token:localStorage.getItem("auth_token")},transports:["websocket"]});return i(We),We.on("connect",()=>{console.log("تم الاتصال بخادم الويب سوكيت")}),We.on("newMessage",ct=>{o(qt=>[...qt,ct]),Qe.invalidateQueries({queryKey:["/api/chat/unread/public"]}),setTimeout(()=>{var qt;(qt=qe.current)==null||qt.scrollIntoView({behavior:"smooth"})},100)}),We.on("messageUpdated",ct=>{o(qt=>qt.map(on=>on.id===ct.id?ct:on))}),We.on("messageDeleted",ct=>{o(qt=>qt.filter(on=>on.id!==ct.id))}),We.on("userTyping",ct=>{ct.roomType==="room"&&(f==null?void 0:f.id)===ct.roomId&&ct.userName&&L(qt=>qt.includes(ct.userName)?qt:[...qt,ct.userName])}),We.on("userStopTyping",ct=>{ct.roomType==="room"&&(f==null?void 0:f.id)===ct.roomId&&ct.userName&&L(qt=>qt.filter(on=>on!==ct.userName))}),We.on("messageLikeUpdate",ct=>{console.log("تحديث إعجاب:",ct),o(qt=>qt.map(on=>on.id===ct.messageId?{...on,likesCount:ct.count,likedByMe:ct.userId===(t==null?void 0:t.id)?ct.liked:on.likedByMe||!1}:on)),ct.userId!==(t==null?void 0:t.id)&&s({title:ct.liked?"❤️ إعجاب جديد":"💔 تم إلغاء الإعجاب",description:`${ct.userName} ${ct.liked?"أعجب":"ألغى إعجابه"} برسالة`,duration:3e3})}),()=>{We.disconnect()}},[t]),u.useEffect(()=>{ve&&ve.id&&(x(ve),j(ve.id))},[ve]),u.useEffect(()=>{if(Ee&&Array.isArray(Ee)){const I=[...Ee].sort((ye,Le)=>{const We=new Date(ye.createdAt).getTime(),ct=new Date(Le.createdAt).getTime();return We-ct});o(I)}},[Ee]),u.useEffect(()=>{if(!(!a||!t||!f)&&(a.emit("joinRoom",{roomId:f.id,roomType:"room"}),f.id)){const I=localStorage.getItem("auth_token");if(!I)return;fetch(`/api/chat/mark-read/${f.id}`,{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({})}).then(ye=>{ye.ok?(Qe.invalidateQueries({queryKey:["/api/chat/unread/public"]}),console.log("تم تعيين الرسائل كمقروءة بنجاح للغرفة:",f.id)):console.warn("لم يتم تعيين الرسائل كمقروءة، رمز الحالة:",ye.status)}).catch(ye=>{console.error("خطأ في تعيين الرسائل كمقروءة:",ye)})}},[a,t,f]);const Ut=I=>{if(d(I.target.value),a&&t&&f){a.emit("typing",{roomId:f.id,roomType:"room",userId:t.id,userName:t.fullName}),S&&clearTimeout(S);const ye=setTimeout(()=>{a.emit("stopTyping",{roomId:f.id,roomType:"room",userId:t.id,userName:t.fullName})},1e3);T(ye)}},Ds=async I=>{if(!I.target.files||I.target.files.length===0)return;const ye=I.target.files[0];y(ye),s({title:"جاري تحميل الملف",description:"يرجى الانتظار..."});try{N(!0);const Le=new FormData;Le.append("file",ye);const We=await fetch("/api/chat/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:Le});if(!We.ok)throw new Error("فشل في تحميل الملف");const ct=await We.json();g({fileUrl:ct.fileUrl,fileType:ct.fileType}),s({title:"تم تحميل الملف بنجاح",description:"يمكنك الآن إرسال رسالتك مع الملف المرفق"})}catch(Le){s({title:"خطأ في تحميل الملف",description:Le instanceof Error?Le.message:"حدث خطأ غير متوقع",variant:"destructive"}),y(null),g(null)}finally{N(!1),I.target&&(I.target.value="")}},dr=async(I,ye)=>{if(console.log("🎯 handleEmojiReaction called:",{messageId:I,emoji:ye,user:t==null?void 0:t.id,socket:!!a}),!t||!a){console.log("❌ User or socket not available");return}try{console.log("📡 Emitting toggleMessageLike for messageId:",I),a.emit("toggleMessageLike",{messageId:I,userId:t.id}),s({title:`${ye} تفاعل`,description:"تم إضافة تفاعلك بالرسالة",duration:2e3}),console.log("✅ Successfully handled emoji reaction")}catch(Le){console.error("❌ خطأ في التفاعل:",Le),s({title:"❌ خطأ",description:"حدث خطأ أثناء التفاعل مع الرسالة",variant:"destructive"})}},En=I=>{I.preventDefault(),!(c.trim()===""&&!m||!t||!f||!a)&&(a.emit("sendMessage",{roomId:f.id,roomType:"room",content:c,userId:t.id,userName:t.fullName,fileUrl:(m==null?void 0:m.fileUrl)||null,fileType:(m==null?void 0:m.fileType)||null}),console.log("جاري إرسال رسالة:",{roomId:f.id,roomType:"room",content:c,userId:t.id,userName:t.fullName,fileUrl:m==null?void 0:m.fileUrl,fileType:m==null?void 0:m.fileType}),d(""),y(null),g(null),a&&t&&f&&a.emit("stopTyping",{roomId:f.id,roomType:"room",userId:t.id,userName:t.fullName}))},ur=I=>new Date(I).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}),Qr=I=>{console.log("Debug - startPrivateChat called with userId:",I),n(`/private-chat/${I}`),console.log("Debug - Navigation to /private-chat/"+I)},Ia=I=>{if(j(I),I){const ye=localStorage.getItem("auth_token");if(!ye)return;fetch(`/api/chat/mark-read/${I}`,{method:"POST",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"}}).then(Le=>{Le.ok?Qe.invalidateQueries({queryKey:["/api/chat/unread/public"]}):console.warn("لم يتم تعيين الرسائل كمقروءة، رمز الحالة:",Le.status)}).catch(Le=>{console.error("خطأ في تعيين الرسائل كمقروءة:",Le)})}};return e.jsx(er,{page:"chat",children:e.jsxs("div",{className:"golden-page-bg w-full max-w-7xl mx-auto mt-8 p-2 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-4",children:[e.jsx(yn,{}),e.jsx("div",{className:`${r?"flex-1 max-w-[200px]":"max-w-[250px]"}`,children:e.jsx(Qle,{activeRoomId:h||void 0,onSelectRoom:Ia,compact:!0})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-1 space-y-4",children:e.jsxs(_,{className:`h-fit transition-all duration-300 ${r?"rounded-lg shadow-md":""}`,children:[e.jsxs(q,{className:`pb-2 cursor-pointer hover:bg-muted/50 transition-colors ${r?"p-3":""}`,onClick:()=>r&&W(!U),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:`${r?"h-4 w-4":"h-5 w-5"} text-primary`}),e.jsx(X,{className:`${r?"text-base":"text-lg"}`,children:"المستخدمين"}),r&&ke&&Array.isArray(ke)?e.jsx(ie,{variant:"secondary",className:"text-xs",children:ke.filter(I=>I.id!==(t==null?void 0:t.id)).length}):null]}),r&&e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:U?e.jsx(qT,{className:"h-3 w-3"}):e.jsx(m0,{className:"h-3 w-3"})})]}),(!r||U)&&e.jsx(Se,{className:`${r?"text-sm":""}`,children:"ابدأ محادثة خاصة مع أحد المستخدمين"})]}),U&&e.jsx(z,{className:`${r?"max-h-[300px] p-3":"max-h-[500px]"} overflow-y-auto py-0 transition-all duration-300`,children:tt?e.jsx("div",{className:`${r?"space-y-2 py-1":"space-y-3 py-2"}`,children:Array.from({length:r?3:5}).map((I,ye)=>e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(wn,{className:`${r?"h-8 w-8":"h-10 w-10"} rounded-full`}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wn,{className:`h-4 ${r?"w-[120px]":"w-[150px]"}`}),e.jsx(wn,{className:`h-4 ${r?"w-[80px]":"w-[100px]"}`})]})]},ye))}):e.jsx("div",{className:`${r?"space-y-2 py-1":"space-y-3 py-2"}`,children:ke&&Array.isArray(ke)?ke.filter(I=>I.id!==(t==null?void 0:t.id)).map(I=>{var ye;return e.jsxs("div",{className:`flex items-center justify-between ${r?"p-2 rounded-lg hover:bg-muted/50 active:bg-muted/70":""} transition-colors cursor-pointer`,onClick:()=>r&&Qr(I.id),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($o,{className:`${r?"h-8 w-8 ml-2":"h-10 w-10 ml-3"}`,children:e.jsx(Bo,{className:`${r?"text-xs":""}`,children:((ye=I.fullName)==null?void 0:ye.charAt(0))||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:`${r?"text-xs":"text-sm"} font-medium truncate max-w-[120px]`,children:I.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:I.type==="agent"?"وكيل":"مستخدم"})]})]}),!r&&e.jsxs(M,{size:"sm",variant:"outline",className:"h-8 px-2",onClick:()=>Qr(I.id),children:[e.jsx(ll,{className:"h-4 w-4 ml-1"}),"محادثة"]}),r&&e.jsx(ll,{className:"h-4 w-4 text-muted-foreground"})]},I.id)}):e.jsx("p",{className:`text-center ${r?"text-xs":"text-sm"} text-muted-foreground py-4`,children:"لا يوجد مستخدمين متاحين حالياً"})})})]})}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs(_,{children:[e.jsx(q,{className:`${r?"p-2 pb-1":"p-3 pb-2"}`,children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:G?e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:C,title:"تحديد جميع رسائلي",disabled:l.filter(I=>I.senderId===(t==null?void 0:t.id)).length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"تحديد الكل"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:le,disabled:B.size===0,title:"حذف الرسائل المختارة",children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"حذف (",B.size,")"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:fe,children:[e.jsx(Xs,{className:"h-4 w-4 ml-1"}),"إلغاء"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>D(!0),title:"اختيار رسائل للحذف",disabled:l.filter(I=>I.senderId===(t==null?void 0:t.id)).length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"اختيار"]}),e.jsx(ie,{variant:k.length>0?"secondary":"outline",className:"px-3",children:k.length>0?k.length===1?`${k[0]} يكتب الآن...`:`${k.length} أشخاص يكتبون...`:"متصل"})]})})})}),e.jsx(z,{className:"p-0",children:e.jsx("div",{className:`border-t border-b ${r?"h-[400px]":"h-[500px]"} overflow-y-auto ${r?"p-2":"p-4"}`,children:ne?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((I,ye)=>e.jsx("div",{className:`flex ${ye%2===0?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"flex items-start max-w-[80%] gap-2",children:[ye%2!==0&&e.jsx(wn,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsx(wn,{className:"h-4 w-[150px] mb-2"}),e.jsx(wn,{className:"h-20 w-[250px] rounded-md"})]}),ye%2===0&&e.jsx(wn,{className:"h-10 w-10 rounded-full"})]})},ye))}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:`text-muted-foreground ${r?"text-sm text-center px-4":""}`,children:"لا توجد رسائل. كن أول من يبدأ المحادثة!"})}):e.jsxs("div",{className:"chat-container",children:[l.map(I=>{var qt,on;const ye=Number(t==null?void 0:t.id),Le=Number(I.senderId),We=Le===ye;console.log(`معرف المرسل (عامة): ${Le}, معرف المستخدم: ${ye}, هل رسالة المستخدم: ${We}`);const ct=I.isDeleted;return G&&console.log(`رسالة قابلة للاختيار (عامة) - ID: ${I.id}, محتوى: ${I.content.substring(0,20)}, مختارة: ${B.has(I.id)}, مرسل: ${We?"نعم":"لا"}`),e.jsxs("div",{className:`msg ${We?"msg--out":"msg--in"} ${G?"items-center gap-2":""} group relative`,"data-mine":We,children:[G&&e.jsx("div",{className:"cursor-pointer hover:scale-110 transition-transform",onClick:()=>ee(I.id),title:B.has(I.id)?"إلغاء اختيار الرسالة":"اختيار الرسالة",children:B.has(I.id)?e.jsx(Ti,{className:"h-5 w-5 text-primary hover:text-primary/80"}):e.jsx(zm,{className:"h-5 w-5 text-muted-foreground hover:text-primary/60"})}),e.jsxs("div",{className:"msg__bubble",children:[!We&&e.jsx("div",{className:`font-semibold ${r?"text-xs":"text-sm"} mb-1 text-gray-600`,children:I.senderName}),E===I.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Un,{value:F,onChange:H=>Z(H.target.value),className:`${r?"min-h-[50px] text-sm":"min-h-[60px]"}`}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{size:"sm",variant:"outline",onClick:Q,className:r?"text-xs px-2 py-1":"",children:"إلغاء"}),e.jsx(M,{size:"sm",onClick:xe,className:r?"text-xs px-2 py-1":"",children:"حفظ"})]})]}):e.jsxs("div",{className:`${G&&B.has(I.id)?"ring-2 ring-primary rounded-lg":""} ${be===I.id?"selected":""} cursor-pointer select-none`,onClick:H=>{H.stopPropagation(),J(be===I.id?null:I.id)},children:[ct?e.jsx("span",{className:"text-muted-foreground italic",children:"تم حذف هذه الرسالة"}):e.jsxs(e.Fragment,{children:[I.content&&e.jsx("p",{className:`whitespace-pre-wrap break-words mb-2 ${r?"text-sm":""}`,children:I.content}),I.voiceId&&e.jsx("div",{className:"mt-2",onClick:H=>H.stopPropagation(),children:e.jsx(pR,{voiceId:I.voiceId,durationSeconds:I.voiceDuration||0,senderName:I.senderName,createdAt:I.createdAt,isOwn:I.senderId===(t==null?void 0:t.id)})}),I.fileUrl&&e.jsx("div",{className:"mt-2",children:(qt=I.fileType)!=null&&qt.startsWith("image/")?e.jsxs("div",{className:`rounded overflow-hidden ${r?"max-w-[180px]":"max-w-[250px]"} relative group`,children:[e.jsx("img",{src:I.fileUrl,alt:"صورة مرفقة",className:"max-w-full h-auto cursor-pointer transition-all duration-200 group-hover:brightness-90",onError:H=>{console.log("خطأ في تحميل الصورة:",I.fileUrl),H.currentTarget.onerror=null,H.currentTarget.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>'},onClick:H=>{H.preventDefault(),console.log("🖼️ تم النقر على الصورة للرسالة:",I.id),J(be===I.id?null:I.id)}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded",children:"انقر للتفاعل مع الرسالة"})})]}):e.jsxs("a",{href:I.fileUrl,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 bg-secondary/30 ${r?"p-1.5":"p-2"} rounded hover:bg-secondary/50 transition-colors`,children:[(on=I.fileType)!=null&&on.includes("pdf")?e.jsx(Rj,{className:`${r?"h-4 w-4":"h-5 w-5"}`}):e.jsx(Kd,{className:`${r?"h-4 w-4":"h-5 w-5"}`}),e.jsx("span",{className:`${r?"text-xs":"text-sm"}`,children:"فتح الملف المرفق"})]})})]}),(I.likesCount||0)>0&&e.jsx("div",{className:"flex items-center gap-1 mt-1 mb-1",children:e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-full px-2 py-1 shadow-sm border",children:[e.jsx(M2,{className:"h-3 w-3 text-red-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600 mr-1",children:I.likesCount})]})})]}),e.jsx("div",{className:"msg__meta",children:e.jsx("time",{children:I.isEdited?`تم التعديل ${ur(I.editedAt||I.createdAt)}`:ur(I.createdAt)})}),be===I.id&&!ct&&!E&&e.jsxs("div",{className:`absolute ${We?"left-[-140px]":"right-[-140px]"} top-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border p-3 flex gap-2 z-[9999] min-w-[220px] animate-in slide-in-from-top-2 duration-200`,"data-reaction-menu":!0,onClick:H=>H.stopPropagation(),children:[e.jsx(M,{size:"sm",variant:"ghost",className:`h-8 w-8 p-0 transition-all duration-200 ${I.likedByMe?"bg-red-50 text-red-500 scale-110":"hover:bg-red-50 hover:text-red-500"}`,onClick:async H=>{H.preventDefault(),H.stopPropagation(),console.log("❤️ تم النقر على زر الإعجاب للرسالة:",I.id);try{const ue=await ce(`/api/chat/messages/${I.id}/like`,"POST");if(ue.ok){const ze=await ue.json();console.log("✅ نتيجة الإعجاب:",ze),o(me=>me.map(ut=>ut.id===I.id?{...ut,likedByMe:ze.liked,likesCount:ze.count}:ut)),s({title:ze.liked?"❤️ إعجاب":"💔 تم إلغاء الإعجاب",description:ze.liked?We?"أعجبت برسالتك الخاصة":"أعجبت بهذه الرسالة":We?"تم إلغاء إعجابك برسالتك":"تم إلغاء إعجابك بهذه الرسالة"})}else{const ze=await ue.json();throw new Error(ze.message||"فشل في معالجة الإعجاب")}}catch(ue){console.error("❌ خطأ في الإعجاب:",ue),s({title:"❌ خطأ",description:ue instanceof Error?ue.message:"حدث خطأ أثناء معالجة الإعجاب",variant:"destructive"})}J(null)},title:We?I.likedByMe?"إلغاء الإعجاب برسالتك":"إعجاب برسالتك":I.likedByMe?"إلغاء الإعجاب":"إعجاب بهذه الرسالة",children:e.jsx(M2,{className:`h-4 w-4 transition-all duration-200 ${I.likedByMe?"fill-current":""}`})}),!We&&e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-yellow-50 hover:text-yellow-500",onClick:H=>{H.stopPropagation(),console.log("تم النقر على الرموز التعبيرية للرسالة:",I.id),Oe(Fe===I.id?null:I.id),J(null)},title:"رموز تعبيرية",children:e.jsx(ap,{className:"h-4 w-4"})}),Fe===I.id&&e.jsx("div",{className:"absolute top-full right-0 mt-2 z-[9999]",children:e.jsx(Wle,{onEmojiSelect:H=>dr(I.id,H),onClose:()=>Oe(null)})})]}),We&&e.jsxs(e.Fragment,{children:[(()=>{const H=new Date(I.createdAt).getTime(),ze=new Date().getTime()-H,me=5*60*1e3;return ze<me?e.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-blue-50 hover:text-blue-500",onClick:ut=>{ut.stopPropagation(),xt(I),J(null)},title:"تعديل (متاح لمدة 5 دقائق فقط)",children:e.jsx(pc,{className:"h-4 w-4"})}):null})(),e.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-500 transition-colors",onClick:async H=>{H.preventDefault(),H.stopPropagation(),console.log("🔴 تم النقر على زر الحذف للرسالة:",I.id),J(null),await Ye(I.id)},title:"حذف هذه الرسالة نهائياً",children:e.jsx(is,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:H=>{H.preventDefault(),H.stopPropagation(),console.log("🔧 تم النقر على المزيد للرسالة:",I.id),Ne(Ve===I.id?null:I.id),J(null)},title:"المزيد من الخيارات",children:e.jsx(eE,{className:"h-4 w-4"})}),Ve===I.id&&e.jsxs("div",{className:`absolute ${We?"left-0":"right-0"} top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border p-1 z-[9999] min-w-[180px] animate-in slide-in-from-top-2 duration-200`,onClick:H=>H.stopPropagation(),children:[I.content&&e.jsxs(M,{size:"sm",variant:"ghost",className:"w-full justify-start text-xs h-8 px-2",onClick:()=>oe(I),children:[e.jsx(hc,{className:"h-3 w-3 ml-2"}),"نسخ النص"]}),e.jsxs(M,{size:"sm",variant:"ghost",className:"w-full justify-start text-xs h-8 px-2",onClick:()=>Ae(I),children:[e.jsx(Nf,{className:"h-3 w-3 ml-2"}),"إعادة توجيه"]}),e.jsxs(M,{size:"sm",variant:"ghost",className:"w-full justify-start text-xs h-8 px-2",onClick:()=>jt(I),children:[e.jsx(Xr,{className:"h-3 w-3 ml-2"}),"معلومات الرسالة"]}),e.jsxs(M,{size:"sm",variant:"ghost",className:"w-full justify-start text-xs h-8 px-2",onClick:()=>P(I),children:[e.jsx(ip,{className:"h-3 w-3 ml-2"}),"إضافة للمفضلة"]}),!We&&e.jsxs(M,{size:"sm",variant:"ghost",className:"w-full justify-start text-xs h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>O(I),children:[e.jsx(tE,{className:"h-3 w-3 ml-2"}),"إبلاغ"]})]})]})]})]})]},I.id)}),e.jsx("div",{ref:qe})]})})})}),e.jsxs(Os,{className:`${r?"p-2":"p-4"} relative`,children:[k.length>0&&e.jsxs("div",{className:`${r?"text-xs":"text-sm"} text-primary mb-2 bg-muted ${r?"p-1.5":"p-2"} rounded-md text-right font-medium w-full`,children:[e.jsx("span",{className:"animate-pulse inline-block",children:"⌨️"})," ",k.join(", ")," ",k.length===1?"يكتب الآن...":"يكتبون الآن..."]}),re?e.jsx("div",{className:"w-full flex items-center justify-center py-2",children:e.jsx(gR,{onVoiceRecorded:Ft,onCancel:()=>we(!1),maxDuration:120,className:"flex-1 max-w-lg"})}):e.jsxs("form",{onSubmit:En,className:`w-full flex items-center ${r?"gap-0.5 flex-wrap":"gap-2"}`,children:[e.jsx(M,{type:"button",size:r?"sm":"icon",variant:"ghost",onClick:()=>p(!v),className:`flex-shrink-0 ${r?"px-2 py-1.5":""}`,children:e.jsx(ap,{className:`${r?"h-3.5 w-3.5":"h-5 w-5"}`})}),e.jsxs(M,{type:"button",size:r?"sm":"icon",variant:"ghost",onClick:()=>{var I;return(I=document.getElementById("file-upload"))==null?void 0:I.click()},className:`flex-shrink-0 relative ${r?"px-2 py-1.5":""}`,title:"إرفاق ملف",disabled:w,children:[w?e.jsx("span",{className:"animate-spin text-sm",children:"⌛"}):e.jsx(Kd,{className:`${r?"h-3.5 w-3.5":"h-5 w-5"}`}),e.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:Ds,disabled:w,accept:"image/jpeg,image/png,image/gif,image/webp,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/zip,application/x-rar-compressed"})]}),m&&e.jsxs("div",{className:`${r?"w-full order-first mb-2":""} flex items-center bg-secondary/20 px-2 py-1 rounded text-xs gap-1`,children:[e.jsx("span",{className:`truncate ${r?"max-w-[200px]":"max-w-[100px]"}`,children:"تم تحميل الملف"}),e.jsxs(M,{type:"button",size:"icon",variant:"ghost",className:"h-4 w-4 rounded-full hover:bg-destructive/20",onClick:()=>g(null),children:[e.jsx("span",{className:"sr-only",children:"إلغاء"}),e.jsx("span",{className:"text-destructive",children:"×"})]})]}),e.jsx(pe,{value:c,onChange:Ut,placeholder:m?r?"وصف...":"أضف وصفاً للملف (اختياري)...":r?"اكتب رسالتك...":"اكتب رسالتك هنا...",className:`${r?"flex-[2] min-w-0 text-sm py-2.5 px-3":"flex-1"}`,disabled:w}),c.trim()||m?e.jsx(M,{type:"submit",size:r?"sm":"icon",className:`flex-shrink-0 ${r?"px-3 py-2.5 bg-primary text-primary-foreground hover:bg-primary/90":""}`,disabled:w,title:"إرسال",children:e.jsx(Vr,{className:`${r?"h-3.5 w-3.5":"h-5 w-5"}`})}):e.jsx(M,{type:"button",size:r?"sm":"icon",variant:"ghost",onClick:()=>we(!0),className:`flex-shrink-0 ${r?"px-2 py-1.5":""}`,title:"تسجيل رسالة صوتية",disabled:w,children:e.jsx(qd,{className:`${r?"h-3.5 w-3.5":"h-5 w-5"}`})})]}),v&&e.jsx("div",{className:`absolute ${r?"bottom-[65px] right-0 left-0 mx-2":"bottom-[70px] left-0"} z-20 bg-white rounded-md shadow-lg border`,children:e.jsxs("div",{className:`${r?"relative":""}`,style:{padding:r?"4px":"8px"},children:[r&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"absolute top-1 right-1 h-6 w-6 p-0 z-10",children:e.jsx(Xs,{className:"h-3 w-3"})}),e.jsx(Ew,{theme:vo.LIGHT,onEmojiClick:I=>{console.log("تم اختيار الإيموجي:",I),d(ye=>ye+I.emoji),p(!1)},lazyLoadEmojis:!0,searchPlaceHolder:"ابحث عن رمز تعبيري...",width:r?"100%":300,height:r?300:400,previewConfig:{showPreview:!1}})]})})]})]})})]})]})})}function Gp({children:t}){const{user:s}=Mt();return s?e.jsxs("div",{className:"flex h-screen overflow-hidden golden-bg dir-rtl relative",children:[e.jsx(Ai,{}),e.jsx("div",{className:"flex flex-col flex-1 overflow-hidden",children:e.jsx("main",{className:"flex-1 overflow-y-auto golden-bg px-0.5 sm:px-0 py-0.5 sm:py-0",children:e.jsx("div",{className:"min-h-full p-0.5 sm:p-0",children:t})})})]}):null}function kC(){return e.jsx(er,{page:"private_chat",children:e.jsx(Jle,{})})}function Jle(){var me,ut,Fs,Nl,zw;const{user:t}=Mt();u.useEffect(()=>{t!=null&&t.id&&(sessionStorage.setItem("currentUserId",t.id.toString()),document.body.setAttribute("data-current-user-id",t.id.toString()),console.log("✓ تم حفظ معرف المستخدم:",t.id))},[t==null?void 0:t.id]);const s=()=>{if(t!=null&&t.id)return console.log("🟢 getCurrentUserId من auth:",t.id),t.id;const V=sessionStorage.getItem("currentUserId");if(V)return console.log("🟡 getCurrentUserId من sessionStorage:",V),parseInt(V);const Ie=document.body.getAttribute("data-current-user-id");return Ie?(console.log("🟠 getCurrentUserId من body:",Ie),parseInt(Ie)):(console.log("🔴 getCurrentUserId فشل في العثور على المعرف!"),null)};console.log("=== معلومات المستخدم الحالي ==="),console.log("المستخدم:",t),console.log(`معرف المستخدم: ${t==null?void 0:t.id} (نوع: ${typeof(t==null?void 0:t.id)})`);const{toast:n}=lt(),r=Lv(),a=r.userId?parseInt(r.userId):null,[i,l]=u.useState(null),[o,c]=u.useState(null),[d,f]=u.useState(null),[x,h]=u.useState([]),[j,v]=u.useState(""),[p,b]=u.useState(""),[y,m]=u.useState(!1),[g,w]=u.useState(!1),[N,k]=u.useState([]),[L,S]=u.useState(null),[T,E]=u.useState(null),[$,F]=u.useState(""),[Z,G]=u.useState(new Set),[D,B]=u.useState(!1),[de,U]=u.useState(null),[W,re]=u.useState(!1),[we,be]=u.useState(null),J=u.useRef(null),[Fe,Oe]=u.useState(null),Ve=u.useRef(null),[Ne,qe]=u.useState(""),[ve,Ee]=u.useState(!1),[ne,ke]=u.useState(null),tt=u.useRef(null),xt=$n(),{data:Q,isLoading:oe,refetch:Ae}=$e({queryKey:["/api/chat/private"],enabled:!!t});u.useEffect(()=>{if(!t)return;const V=window.location.protocol==="https:"?"wss:":"ws:",Ie=window.location.host,ht=`${V}//${Ie}`,st=localStorage.getItem("auth_token");if(!st){console.error("❌ لا يوجد token للاتصال بـ Socket.IO");return}const St=nc(ht,{path:"/socket.io",transports:["websocket"],auth:{token:st}});return St.on("connect",()=>{console.log("تم الاتصال بخادم الدردشة"),St.emit("getPrivateChats"),i&&o&&St.emit("joinPrivateChat",{otherUserId:o.id})}),St.on("disconnect",()=>{console.log("انقطع الاتصال بخادم الدردشة")}),St.on("privateChats",nt=>{xt.setQueryData(["/api/chat/private"],nt)}),St.on("privateChat",nt=>{console.log("🔍 استلام بيانات المحادثة الخاصة:",{"معرف المحادثة":nt.chat.id,"المستخدم الآخر":nt.otherUser?`${nt.otherUser.fullName} (${nt.otherUser.id})`:"null","المستخدم الحالي":t.id,"عدد الرسائل":nt.messages.length,"chat.user1Id":nt.chat.user1Id,"chat.user2Id":nt.chat.user2Id}),l(nt.chat.id),c(nt.otherUser),h(nt.messages),m(!0),setTimeout(jt,100)}),St.on("newPrivateMessage",nt=>{if(console.log("تم استلام رسالة خاصة جديدة:",nt),h(gs=>gs.some(tr=>tr.id===nt.id)?gs:[...gs,nt]),setTimeout(jt,100),nt.senderId!==t.id&&i){console.log("تعليم الرسائل كمقروءة"),St.emit("markMessagesAsRead",{chatId:i,userId:t.id});const mn=(xt.getQueryData(["/api/chat/private"])||[]).map(tr=>tr.id===nt.chatId?{...tr,lastMessageAt:nt.createdAt,unreadCount:nt.senderId!==t.id?tr.unreadCount+1:tr.unreadCount}:tr);mn.sort((tr,dh)=>new Date(dh.lastMessageAt).getTime()-new Date(tr.lastMessageAt).getTime()),xt.setQueryData(["/api/chat/private"],mn)}}),St.on("newChatCreated",nt=>{console.log("تم إنشاء محادثة جديدة:",nt);const gs=xt.getQueryData(["/api/chat/private"])||[];gs.some(tr=>tr.id===nt.chat.id)||xt.setQueryData(["/api/chat/private"],[nt.chat,...gs])}),St.on("updatedPrivateMessage",nt=>{console.log("تم استلام رسالة معدلة:",nt),i===nt.chatId&&h(gs=>gs.map(mn=>mn.id===nt.id?nt:mn))}),St.on("messageDeletedForUser",nt=>{console.log("تم استلام حدث حذف رسالة فردي:",nt),nt.deletedForUser===t.id&&(h(gs=>{const mn=gs.filter(tr=>tr.id!==nt.messageId);return console.log(`تم إزالة الرسالة ${nt.messageId} من جهة المستخدم ${t.id}. عدد الرسائل قبل: ${gs.length}, بعد: ${mn.length}`),mn}),n({title:"تم حذف الرسالة",description:"تم حذف رسالتك من محادثتك",variant:"default"}))}),St.on("error",nt=>{console.error("خطأ في الاتصال بالدردشة:",nt),n({title:"❌ خطأ",description:nt.message||"حدث خطأ في الاتصال",variant:"destructive"})}),St.on("forwardSuccess",nt=>{console.log("نجح إعادة التوجيه:",nt),n({title:"✅ تم إعادة التوجيه",description:nt.message}),Ae()}),St.on("userTyping",nt=>{console.log("المستخدم يكتب الآن:",nt),nt.userId!==t.id&&k(gs=>gs.includes(nt.userName)?gs:(console.log("إضافة مستخدم يكتب الآن:",nt.userName),[...gs,nt.userName]))}),St.on("userStoppedTyping",nt=>{console.log("المستخدم توقف عن الكتابة:",nt),nt.userId!==t.id&&k(gs=>(console.log("إزالة مستخدم توقف عن الكتابة:",nt.userName),gs.filter(mn=>mn!==nt.userName)))}),St.emit("getPrivateChats",{userId:t.id}),St.emit("register_user",{userId:t.id}),f(St),()=>{St.disconnect()}},[t,xt,i,Ae]),u.useEffect(()=>{(async()=>{if(!(!t||!a||y)){console.log("بدء تهيئة محادثة مع المستخدم:",a);try{const Ie=localStorage.getItem("auth_token"),ht=await fetch("/api/chat/private/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({otherUserId:a})});if(ht.ok){const st=await ht.json();if(console.log("تم إنشاء/جلب المحادثة:",st),st.chat){l(st.chat.id),c(st.otherUser),m(!0);const St=await fetch(`/api/chat/private/${st.chat.id}`,{headers:{Authorization:`Bearer ${Ie}`}});if(St.ok){const nt=await St.json();h(nt.messages||[])}d&&d.emit("joinPrivateChat",{otherUserId:a})}}}catch(Ie){console.error("خطأ في تهيئة المحادثة:",Ie)}}})()},[t,a,d]);const jt=()=>{var V;(V=tt.current)==null||V.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{if(!(!d||!t||!i||!o)){if(j.trim()){d.emit("typing",{roomType:"private",roomId:i,userId:t.id,userName:t.fullName}),L&&clearTimeout(L);const V=setTimeout(()=>{d.emit("stopTyping",{roomType:"private",roomId:i,userId:t.id,userName:t.fullName})},2e3);S(V)}else d.emit("stopTyping",{roomType:"private",roomId:i,userId:t.id,userName:t.fullName});return()=>{L&&clearTimeout(L)}}},[j,d,t,i,o,L]),u.useEffect(()=>{const V=Ie=>{if(Fe!==null&&Ve.current){const ht=Ie.target,st=document.querySelector(`[data-more-button="${Fe}"]`);!Ve.current.contains(ht)&&!(st!=null&&st.contains(ht))&&Oe(null)}};if(Fe!==null){const Ie=setTimeout(()=>{document.addEventListener("click",V,!0)},10);return()=>{clearTimeout(Ie),document.removeEventListener("click",V,!0)}}},[Fe]);const O=V=>{if(!V.content||V.content.trim()===""){n({title:"⚠️ تحذير",description:"لا يوجد نص لنسخه في هذه الرسالة",variant:"destructive"}),Oe(null);return}const Ie=V.content.trim();navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(Ie).then(()=>{console.log("✅ تم نسخ النص بنجاح:",Ie.substring(0,50)),n({title:"✅ تم النسخ",description:`تم نسخ نص الرسالة إلى الحافظة (${Ie.length} حرف)`})}).catch(st=>{console.error("❌ خطأ في النسخ:",st),ht(Ie)}):ht(Ie);function ht(st){const St=document.createElement("textarea");St.value=st,St.style.position="fixed",St.style.left="-999999px",St.style.top="-999999px",document.body.appendChild(St),St.focus(),St.select();try{if(document.execCommand("copy"))console.log("✅ تم نسخ النص بالطريقة البديلة:",st.substring(0,50)),n({title:"✅ تم النسخ",description:`تم نسخ نص الرسالة إلى الحافظة (${st.length} حرف)`});else throw new Error("فشل الأمر execCommand")}catch(nt){console.error("❌ خطأ في النسخ البديل:",nt),n({title:"❌ خطأ في النسخ",description:"لم يتمكن من نسخ النص. جرب تحديد النص ونسخه يدوياً",variant:"destructive"})}finally{document.body.removeChild(St)}}Oe(null)},P=V=>{ke(V),Ee(!0),Oe(null)},ee=async(V,Ie)=>{if(!(!ne||!t||!d))try{d.emit("forwardPrivateMessage",{originalMessageId:ne.id,targetChatIds:[V]}),Ee(!1),ke(null),console.log(`🔄 تم إرسال طلب إعادة توجيه الرسالة ${ne.id} إلى المحادثة ${V}`)}catch(ht){console.error("خطأ في إعادة التوجيه:",ht),n({title:"❌ خطأ في إعادة التوجيه",description:"حدث خطأ أثناء إعادة توجيه الرسالة",variant:"destructive"})}},C=V=>{const ht=new Date(V.createdAt).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});let st=`📋 معلومات الرسالة:
`;if(st+=`👤 المرسل: ${V.senderName}
`,st+=`📅 التاريخ: ${ht}
`,st+=`🆔 رقم الرسالة: ${V.id}
`,V.isEdited){const St=new Date(V.editedAt||"").toLocaleString("ar-EG");st+=`✏️ تم التعديل: ${St}
`}V.fileUrl&&(st+=`📎 يحتوي على مرفق: ${V.fileType}
`),alert(st),Oe(null)},fe=V=>{window.confirm(`هل تريد الإبلاغ عن هذه الرسالة من ${V.senderName}؟

سيتم إرسال تقرير للإدارة.`)&&(n({title:"🚨 تم الإبلاغ",description:"تم إرسال بلاغك للإدارة، سيتم المراجعة قريباً"}),console.log("تم الإبلاغ عن الرسالة:",V.id,"من المستخدم:",V.senderName)),Oe(null)},le=V=>{const Ie=JSON.parse(localStorage.getItem("favoriteMessages")||"[]"),ht={id:V.id,content:V.content,senderName:V.senderName,createdAt:V.createdAt,chatId:V.chatId};Ie.find(st=>st.id===V.id)?n({title:"ℹ️ معلومة",description:"الرسالة موجودة بالفعل في المفضلة"}):(Ie.push(ht),localStorage.setItem("favoriteMessages",JSON.stringify(Ie)),n({title:"⭐ تمت الإضافة",description:"تم إضافة الرسالة للمفضلة"})),Oe(null)},xe=V=>{if(!V||!Q||!Array.isArray(Q))return;const Ie=Q.find(ht=>ht.id.toString()===V);Ie&&Ye(Ie)},Ye=V=>{l(V.id),h([]),c(V.otherUser),m(!0),qe(V.id.toString()),!(!d||!t)&&d.emit("joinPrivateChat",{otherUserId:V.otherUser.id})},Ft=V=>{if(V.senderId!==(t==null?void 0:t.id))return;const Ie=new Date(V.createdAt).getTime(),ht=new Date().getTime(),st=5*60*1e3;if(ht-Ie>st){n({title:"لا يمكن تعديل الرسالة",description:"انتهى وقت التعديل المسموح به (5 دقائق)",variant:"destructive"});return}E(V.id),F(V.content)},Ut=()=>{E(null),F("")},Ds=async()=>{if(!(!T||!i||!t||!$.trim()))try{const V=await ce("PUT",`/api/chat/private/${i}/messages/${T}`,{content:$.trim()});if(!V.ok){const Ie=await V.json();throw new Error(Ie.message||"فشل تعديل الرسالة")}E(null),F("")}catch(V){console.error("خطأ في تعديل الرسالة:",V),n({title:"فشل تعديل الرسالة",description:V instanceof Error?V.message:"حدث خطأ غير معروف",variant:"destructive"})}},dr=V=>{const Ie=V.target.files;Ie&&Ie.length>0&&U(Ie[0])},En=async V=>{if(V.preventDefault(),!(!de||!t)){re(!0);try{const Ie=new FormData;Ie.append("file",de);const ht=localStorage.getItem("auth_token"),st=await fetch("/api/chat/upload",{method:"POST",headers:{Authorization:`Bearer ${ht}`},body:Ie});if(!st.ok)throw new Error("فشل تحميل الملف");const St=await st.json();be({fileUrl:St.fileUrl,fileType:St.fileType}),n({title:"تم تحميل الملف",description:"تم تحميل الملف بنجاح",variant:"default"})}catch(Ie){console.error("خطأ في تحميل الملف:",Ie),n({title:"فشل تحميل الملف",description:Ie instanceof Error?Ie.message:"حدث خطأ غير معروف",variant:"destructive"})}finally{re(!1),J.current&&(J.current.value="")}}},ur=()=>{U(null),be(null),J.current&&(J.current.value="")},Qr=async V=>{if(!(!i||!t)){console.log(`بدء عملية حذف الرسالة ${V} من المحادثة ${i}`);try{const Ie=await ce("DELETE",`/api/chat/private/${i}/messages/${V}`);if(!Ie.ok){const ht=await Ie.json();throw new Error(ht.message||"فشل حذف الرسالة")}console.log(`تم حذف الرسالة ${V} بنجاح عبر API`),h(ht=>{const st=ht.filter(St=>St.id!==V);return console.log(`إزالة فورية للرسالة ${V}. عدد الرسائل قبل: ${ht.length}, بعد: ${st.length}`),st}),n({title:"تم حذف الرسالة",description:"تم حذف الرسالة بنجاح",variant:"default"})}catch(Ie){console.error("خطأ في حذف الرسالة:",Ie),n({title:"فشل حذف الرسالة",description:Ie instanceof Error?Ie.message:"حدث خطأ غير معروف",variant:"destructive"})}}},Ia=V=>{G(Ie=>{const ht=new Set(Ie);return ht.has(V)?ht.delete(V):ht.add(V),ht})},I=()=>{const V=x.filter(ht=>ht.senderId===(t==null?void 0:t.id)),Ie=new Set(V.map(ht=>ht.id));G(Ie)},ye=()=>{G(new Set),B(!1)},Le=async()=>{if(!(Z.size===0||!t||!i))try{const V=Array.from(Z);for(const Ie of V){const ht=await ce("DELETE",`/api/chat/private/${i}/messages/${Ie}`);if(!ht.ok){const st=await ht.json();throw new Error(st.message||"فشل حذف إحدى الرسائل")}}h(Ie=>Ie.filter(ht=>!Z.has(ht.id))),ye(),n({title:"تم حذف الرسائل",description:`تم حذف ${V.length} رسالة من جهتك`,variant:"default"})}catch(V){console.error("خطأ في حذف الرسائل:",V),n({title:"فشل حذف الرسائل",description:V instanceof Error?V.message:"حدث خطأ غير معروف",variant:"destructive"})}},We=async()=>{if(!(!i||!t||!window.confirm("هل أنت متأكد من تنظيف المحادثة؟ سيتم حذف جميع الرسائل من جهتك فقط.")))try{const V=await ce("DELETE",`/api/chat/private/${i}/clear`);if(!V.ok){const Ie=await V.json();throw new Error(Ie.message||"فشل تنظيف المحادثة")}h([]),n({title:"تم تنظيف المحادثة",description:"تم حذف جميع الرسائل من جهتك بنجاح",variant:"default"})}catch(V){console.error("خطأ في تنظيف المحادثة:",V),n({title:"فشل تنظيف المحادثة",description:V instanceof Error?V.message:"حدث خطأ غير معروف",variant:"destructive"})}},ct=V=>{if(V.preventDefault(),T){Ds();return}if(j.trim()===""&&!we||!d||!t||!i)return;const Ie=j.trim();d.emit("sendPrivateMessage",{chatId:i,senderId:t.id,content:Ie,receiverId:o==null?void 0:o.id,fileUrl:(we==null?void 0:we.fileUrl)||null,fileType:(we==null?void 0:we.fileType)||null}),v(""),U(null),be(null);const st=(xt.getQueryData(["/api/chat/private"])||[]).map(St=>St.id===i?{...St,lastMessageAt:new Date().toISOString()}:St);st.sort((St,nt)=>new Date(nt.lastMessageAt).getTime()-new Date(St.lastMessageAt).getTime()),xt.setQueryData(["/api/chat/private"],st),v("")},{data:qt=[],isLoading:on}=$e({queryKey:["/api/search/users",p],queryFn:async()=>{const V=localStorage.getItem("auth_token"),Ie=await fetch(`/api/search/users?query=${encodeURIComponent(p)}`,{headers:{Authorization:`Bearer ${V}`}});return Ie.ok?Ie.json():[]},enabled:p.length>=2}),H=Ze({mutationFn:async V=>{const Ie=localStorage.getItem("auth_token"),ht=await fetch("/api/chat/private/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({otherUserId:V})});if(!ht.ok)throw new Error("فشل إنشاء المحادثة");return ht.json()},onSuccess:async V=>{if(V&&V.chat){m(!0);try{l(V.chat.id),c(V.otherUser),h([]);const Ie=xt.getQueryData(["/api/chat/private"])||[],ht=Ie.findIndex(gs=>gs.id===V.chat.id),st={id:V.chat.id,user1Id:V.chat.user1Id,user2Id:V.chat.user2Id,lastMessageAt:V.chat.lastMessageAt||new Date().toISOString(),createdAt:V.chat.createdAt||new Date().toISOString(),otherUser:V.otherUser,unreadCount:0};let St=[...Ie];ht>=0?St[ht]=st:St=[st,...Ie],St.sort((gs,mn)=>new Date(mn.lastMessageAt).getTime()-new Date(gs.lastMessageAt).getTime()),xt.setQueryData(["/api/chat/private"],St);const nt=await fetch(`/api/chat/private/${V.chat.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(nt.ok){const gs=await nt.json();h(gs.messages||[])}d&&t&&d.emit("joinPrivateChat",{otherUserId:V.otherUser.id})}catch(Ie){console.error("خطأ في تحديث قائمة الدردشات:",Ie)}}}}),ue=Array.isArray(Q)?Q.filter(V=>V.otherUser&&V.otherUser.fullName&&V.otherUser.fullName.toLowerCase().includes(p.toLowerCase())):[],ze=V=>{if(!V)return"غير محدد";try{const Ie=V&&typeof V=="string"&&V.includes&&V.includes("T")?V:typeof V=="string"?V.replace(" ","T")+"Z":V,ht=new Date(Ie),st=new Date,St=Math.abs(st.getTime()-ht.getTime()),nt=Math.floor(St/1e3),gs=Math.floor(nt/60),mn=Math.floor(gs/60);return console.log("تشخيص التوقيت:",{original:V,parsed:Ie,date:ht.toISOString(),now:st.toISOString(),diffMs:St,diffSeconds:nt,diffMinutes:gs,diffHours:mn}),nt<10?"الآن":nt<60?`منذ ${nt} ثانية`:gs<60?`منذ ${gs} دقيقة`:mn<24?`منذ ${mn} ساعة`:`منذ ${Math.floor(mn/24)} يوم`}catch(Ie){return console.error("خطأ في تحليل التوقيت:",Ie,V),V}};return e.jsx(Gp,{children:e.jsxs("div",{className:"container mx-auto px-0.5 sm:px-4 py-0.5 sm:py-4 rtl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 sm:mb-4",children:[e.jsx(yn,{}),e.jsx("h1",{className:"text-xs sm:text-2xl font-bold text-primary",children:"المحادثات الخاصة"}),e.jsxs(M,{onClick:()=>Ae(),variant:"outline",size:"sm",className:"h-6 sm:h-8 px-1 sm:px-3",children:[e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"تحديث"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-1 sm:gap-4",children:[e.jsxs(_,{className:"lg:col-span-1 order-1 lg:order-1 min-h-fit",children:[e.jsxs(q,{className:"px-2 sm:px-6 py-2 sm:py-6 bg-primary/5",children:[e.jsxs(X,{className:"flex items-center justify-between text-sm sm:text-lg font-bold",children:[e.jsx("span",{className:"text-primary",children:"المحادثات"}),e.jsx(js,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"h-3 w-3 sm:h-4 sm:w-4 absolute right-2 sm:right-3 top-2 sm:top-3 text-muted-foreground"}),e.jsx(pe,{placeholder:"البحث عن محادثة...",value:p,onChange:V=>b(V.target.value),className:"pl-8 sm:pl-10 pr-2 sm:pr-3 text-right h-6 sm:h-10 text-xs sm:text-sm"})]})]}),e.jsxs(z,{className:"h-[200px] sm:h-[250px] lg:h-[250px] overflow-y-auto px-2 sm:px-6 py-1 sm:py-6",children:[p.length>=2&&Array.isArray(qt)&&qt.length>0&&e.jsxs("div",{className:"mb-4 border-b pb-4",children:[e.jsx("h3",{className:"font-bold mb-1 sm:mb-2 text-xs sm:text-sm text-primary",children:"نتائج البحث"}),e.jsx("div",{className:"space-y-1 sm:space-y-2",children:qt.map(V=>e.jsxs("div",{className:"p-1 sm:p-2 rounded-lg hover:bg-accent flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($o,{className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2",children:e.jsx(Bo,{children:V.fullName.charAt(0)})}),e.jsx("div",{className:"font-medium text-xs sm:text-sm",children:V.fullName})]}),e.jsxs(M,{size:"sm",variant:"outline",className:"text-[10px] sm:text-xs h-6 sm:h-8 px-1 sm:px-3",onClick:()=>H.mutate(V.id),disabled:H.isPending,children:[H.isPending?e.jsx(ys,{className:"h-2 w-2 sm:h-3 sm:w-3 animate-spin ml-1 sm:ml-2"}):e.jsx(ll,{className:"h-2 w-2 sm:h-3 sm:w-3 ml-1 sm:ml-2"}),"بدء محادثة"]})]},V.id))})]}),e.jsx("h3",{className:"font-bold mb-2 sm:mb-2 text-sm sm:text-sm text-primary border-b pb-1",children:"الدردشات الحالية"}),oe?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(ys,{className:"h-6 w-6 sm:h-8 sm:w-8 animate-spin text-primary"})}):ue!=null&&ue.length?e.jsxs(Nt,{value:Ne,onValueChange:xe,dir:"rtl",children:[e.jsx(bt,{className:"w-full text-sm sm:text-sm h-10 sm:h-10 border-2 border-primary/20 hover:border-primary/40 bg-white",children:e.jsx(Ct,{placeholder:"اختر محادثة",children:Ne&&ue.find(V=>V.id.toString()===Ne)?e.jsxs("div",{className:"flex items-center",children:[e.jsx($o,{className:"h-5 w-5 sm:h-6 sm:w-6 ml-1 sm:ml-2",children:e.jsx(Bo,{className:"text-[8px] sm:text-xs",children:((Fs=(ut=(me=ue.find(V=>V.id.toString()===Ne))==null?void 0:me.otherUser)==null?void 0:ut.fullName)==null?void 0:Fs.charAt(0))||"?"})}),e.jsx("span",{className:"text-xs sm:text-sm",children:((zw=(Nl=ue.find(V=>V.id.toString()===Ne))==null?void 0:Nl.otherUser)==null?void 0:zw.fullName)||"مستخدم"})]}):"اختر محادثة"})}),e.jsx(wt,{dir:"rtl",className:"max-h-[300px] z-50",children:ue.map(V=>{var Ie,ht,st;return e.jsx(te,{value:V.id.toString(),className:"text-sm sm:text-sm py-3 px-2 cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($o,{className:"h-5 w-5 sm:h-6 sm:w-6 ml-1 sm:ml-2",children:e.jsx(Bo,{className:"text-[8px] sm:text-xs",children:((ht=(Ie=V.otherUser)==null?void 0:Ie.fullName)==null?void 0:ht.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs sm:text-sm",children:((st=V.otherUser)==null?void 0:st.fullName)||"مستخدم"}),e.jsx("div",{className:"text-[9px] sm:text-xs text-muted-foreground",children:String(ze(V.lastMessageAt))})]})]}),V.unreadCount>0&&e.jsx(ie,{variant:"secondary",className:"bg-primary text-white text-[7px] sm:text-[9px] h-3 sm:h-4 px-1 sm:px-1.5 mr-1",children:V.unreadCount})]})},V.id)})})]}):e.jsxs("div",{className:"text-center text-muted-foreground py-6 sm:py-8 text-sm sm:text-sm border-2 border-dashed border-muted rounded-lg bg-muted/20",children:[e.jsx(Jn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"font-medium",children:"لا توجد محادثات"}),e.jsx("p",{className:"text-xs mt-1",children:"ابحث عن مستخدم لبدء محادثة جديدة"})]})]})]}),e.jsx(_,{className:"lg:col-span-3 order-2 lg:order-2",children:i&&o?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"border-b px-2 sm:px-6 py-1 sm:py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{variant:"ghost",className:"ml-1 sm:ml-2 p-0 h-6 w-6 sm:h-8 sm:w-8",onClick:()=>{l(null),c(null),h([])},children:e.jsx(Br,{className:"h-3 w-3 sm:h-5 sm:w-5"})}),e.jsx($o,{className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2",children:e.jsx(Bo,{children:o.fullName.charAt(0)})}),e.jsx(X,{className:"text-sm sm:text-lg",children:o.fullName})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:D?e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:I,title:"تحديد جميع رسائلي",disabled:x.length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"تحديد الكل"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:Le,disabled:Z.size===0,title:"حذف الرسائل المختارة",children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"حذف (",Z.size,")"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:ye,children:[e.jsx(Xs,{className:"h-4 w-4 ml-1"}),"إلغاء"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>B(!0),title:"اختيار رسائل للحذف",disabled:x.length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"اختيار"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>We(),title:"تنظيف المحادثة (حذف جميع الرسائل من جهتك فقط)",children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"تنظيف"]})]})})]})}),e.jsx(z,{className:"h-[400px] sm:h-[600px] overflow-y-auto py-1 sm:py-4 px-1 sm:px-6",children:x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsx(Jn,{className:"h-8 w-8 sm:h-12 sm:w-12 mb-1 sm:mb-2"}),e.jsxs("p",{className:"text-xs sm:text-sm",children:["ابدأ المحادثة مع ",o.fullName]})]}):e.jsxs("div",{className:"chat-container",children:[x.map(V=>{var dh,Fw,Uw,$w,Bw,Vw,Gw,Yw;const Ie=s();if(!Ie)return console.warn("⚠️ لم يتم العثور على معرف المستخدم"),null;console.log("🔍 معرفات رئيسية قبل كل رسالة:",{"المستخدم الحالي (currentUserId)":Ie,"المستخدم الآخر (otherUser)":o?`${o.fullName} (${o.id})`:"null","معرف المحادثة (chatId)":i,"user.id":t==null?void 0:t.id,"user.fullName":t==null?void 0:t.fullName,"🚨 هل currentUserId == otherUser.id؟":Ie===(o==null?void 0:o.id),"🔍 رقم الرسالة الحالية":V.id});const ht=Number(V.senderId),st=ht===Ie;ht===Ie&&Ie===(o==null?void 0:o.id)&&console.error("🚨 خطأ: currentUserId يساوي otherUser.id!",{currentUserId:Ie,otherUserId:o==null?void 0:o.id}),Ie===(o==null?void 0:o.id)&&(console.error("🚨 خطأ خطير: currentUserId == otherUser.id! يجب أن يكونا مختلفين"),console.error("🚨 معلومات:",{currentUserId:Ie,"otherUser.id":o==null?void 0:o.id,"otherUser.fullName":o==null?void 0:o.fullName,"user.id":t==null?void 0:t.id,"user.fullName":t==null?void 0:t.fullName})),console.log(`📝 رسالة ${V.id}:`,{"معرف الرسالة":V.id,"مرسل الرسالة (senderId)":V.senderId,"مرسل الرسالة (number)":ht,"المستخدم الحالي":Ie,"من المستخدم؟":st,"نص الرسالة":V.content.substring(0,30)+"...","user object":t?`موجود (${t.id})`:"غير موجود",sessionStorage:sessionStorage.getItem("currentUserId"),"body attribute":document.body.getAttribute("data-current-user-id"),otherUser:o?`${o.fullName} (${o.id})`:"غير موجود",المقارنة:`${ht} === ${Ie} = ${ht===Ie}`}),!st&&!ht&&console.warn("تحذير: senderId غير موجود في الرسالة",V);const St=T===V.id,nt=new Date(V.createdAt).getTime(),gs=new Date().getTime(),mn=5*60*1e3,tr=st&&gs-nt<=mn;return D&&console.log(`رسالة قابلة للاختيار - ID: ${V.id}, محتوى: ${V.content.substring(0,20)}, مختارة: ${Z.has(V.id)}, مرسل: ${st?"نعم":"لا"}`),e.jsxs("div",{className:`msg ${st?"msg--out":"msg--in"} ${D?"items-center gap-2":""}`,"data-mine":st?"true":"false",style:{display:"flex",justifyContent:st?"flex-end":"flex-start",marginBottom:"8px"},children:[D&&e.jsx("div",{className:"cursor-pointer hover:scale-110 transition-transform",onClick:()=>Ia(V.id),title:Z.has(V.id)?"إلغاء اختيار الرسالة":"اختيار الرسالة",children:Z.has(V.id)?e.jsx(Ti,{className:"h-5 w-5 text-primary hover:text-primary/80"}):e.jsx(zm,{className:"h-5 w-5 text-muted-foreground hover:text-primary/60"})}),e.jsxs("div",{className:`msg__bubble ${D&&Z.has(V.id)?"ring-2 ring-primary":""}`,style:{backgroundColor:st?"#dcf8c6":"#ffffff",color:"#000000",border:st?"none":"1px solid #e5e7eb",borderRadius:"18px",padding:"8px 12px",maxWidth:"80%",wordWrap:"break-word",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},"data-message-sender":ht,"data-current-user":Ie,"data-is-mine":st,children:[St?e.jsxs("div",{className:"mb-2",children:[e.jsx(Un,{value:$,onChange:Iu=>F(Iu.target.value),className:`text-sm mb-2 w-full min-h-[80px] border-2 ${st?"bg-green-400 text-white placeholder:text-green-100 border-green-600":"bg-yellow-300 text-black placeholder:text-yellow-700 border-yellow-600"}`,placeholder:"أدخل رسالتك هنا...",dir:"rtl"}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsx(M,{size:"sm",variant:"outline",onClick:Ut,className:"text-xs h-7 border-gray-300 text-gray-300 hover:bg-gray-300/10",children:"إلغاء"}),e.jsx(M,{size:"sm",onClick:Ds,className:"text-xs h-7 bg-green-600 hover:bg-green-700",disabled:!$.trim(),children:"حفظ التعديل"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"11px",color:"#6b7280",fontWeight:"bold",marginBottom:"4px",borderBottom:"1px solid #e5e7eb",paddingBottom:"2px"},children:[st?`أنت (معرف: ${Ie}) - مرسل`:`${(o==null?void 0:o.fullName)||"مجهول"} (معرف: ${ht}) - مستقبل`,e.jsx("span",{style:{fontSize:"10px",marginLeft:"8px",color:st?"#059669":"#dc2626",fontWeight:"bold"},children:st?"[✓ مرسل]":"[← مستقبل]"}),e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"9px",color:"#9ca3af"},children:["Debug: senderId=",ht,", currentUserId=",Ie,", isUser=",st?"true":"false",Ie===(o==null?void 0:o.id)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{style:{color:"#dc2626",fontWeight:"bold"},children:"🚨 خطأ: currentUserId == otherUser.id!"})]})]})]}),V.isForwarded&&V.forwardedFromSender&&e.jsxs("div",{className:"flex items-center mb-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-r-2 border-blue-400",children:[e.jsx(Nf,{className:"h-3 w-3 ml-2 text-blue-500"}),e.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:["🔄 إعادة توجيه من ",V.forwardedFromSender]})]}),V.content&&e.jsx("div",{className:"text-sm mb-1",children:V.content}),V.fileUrl&&e.jsx("div",{className:"mt-1 mb-2",children:(dh=V.fileType)!=null&&dh.startsWith("image/")?e.jsx("div",{className:"relative",children:e.jsx("a",{href:V.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:V.fileUrl,alt:"صورة مرفقة",className:"max-w-full max-h-64 rounded-md object-cover"})})}):(Fw=V.fileType)!=null&&Fw.startsWith("video/")?e.jsx("div",{className:"relative",children:e.jsxs("video",{controls:!0,className:"max-w-full max-h-64 rounded-md",children:[e.jsx("source",{src:V.fileUrl,type:V.fileType}),"المتصفح الخاص بك لا يدعم تشغيل الفيديو"]})}):(Uw=V.fileType)!=null&&Uw.startsWith("audio/")?e.jsx("div",{className:"relative",children:e.jsxs("audio",{controls:!0,className:"max-w-full",children:[e.jsx("source",{src:V.fileUrl,type:V.fileType}),"المتصفح الخاص بك لا يدعم تشغيل الصوت"]})}):e.jsxs("a",{href:V.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-2 bg-muted rounded-md hover:bg-muted/80 text-primary",children:[($w=V.fileType)!=null&&$w.includes("pdf")?e.jsx(Pn,{className:"h-4 w-4 ml-2"}):(Bw=V.fileType)!=null&&Bw.includes("word")||(Vw=V.fileType)!=null&&Vw.includes("document")?e.jsx(Pn,{className:"h-4 w-4 ml-2"}):(Gw=V.fileType)!=null&&Gw.includes("spreadsheet")||(Yw=V.fileType)!=null&&Yw.includes("excel")?e.jsx(Pn,{className:"h-4 w-4 ml-2"}):e.jsx(Rj,{className:"h-4 w-4 ml-2"}),e.jsx("span",{className:"text-xs",children:"تحميل المرفق"}),e.jsx(Cr,{className:"h-3 w-3 mr-1"})]})})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[!St&&tr&&st&&e.jsx("button",{onClick:()=>Ft(V),className:"text-xs hover:text-gray-300 ml-2 opacity-70 hover:opacity-100",children:"تعديل"}),st&&e.jsx("button",{onClick:()=>Qr(V.id),className:"text-xs hover:text-red-400 ml-2 opacity-70 hover:opacity-100 text-red-300",title:"حذف الرسالة (سيتم حذفها للجميع)",children:"حذف"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{"data-more-button":V.id,"data-testid":`button-more-options-${V.id}`,onClick:Iu=>{Iu.stopPropagation(),Oe(Fe===V.id?null:V.id)},className:"text-xs hover:text-gray-300 ml-2 opacity-70 hover:opacity-100 p-1 min-w-[28px] min-h-[28px] flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"المزيد من الخيارات",children:e.jsx(eE,{className:"h-4 w-4"})}),Fe===V.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9998] sm:hidden",onClick:()=>Oe(null)}),e.jsxs("div",{ref:Ve,className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border p-2 z-[9999] w-[250px] animate-in fade-in duration-200 sm:absolute sm:top-full sm:left-0 sm:transform-none sm:translate-x-0 sm:translate-y-0 sm:mt-1 sm:w-auto sm:min-w-[180px]",onClick:Iu=>Iu.stopPropagation(),children:[V.content&&e.jsxs("button",{"data-testid":`button-copy-text-${V.id}`,className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center",onClick:()=>O(V),children:[e.jsx(hc,{className:"h-3 w-3 ml-2"}),"نسخ النص"]}),e.jsxs("button",{"data-testid":`button-forward-message-${V.id}`,className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center",onClick:()=>P(V),children:[e.jsx(Nf,{className:"h-3 w-3 ml-2"}),"إعادة توجيه"]}),e.jsxs("button",{"data-testid":`button-message-info-${V.id}`,className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center",onClick:()=>C(V),children:[e.jsx(Xr,{className:"h-3 w-3 ml-2"}),"معلومات الرسالة"]}),e.jsxs("button",{"data-testid":`button-add-favorites-${V.id}`,className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center",onClick:()=>le(V),children:[e.jsx(ip,{className:"h-3 w-3 ml-2"}),"إضافة للمفضلة"]}),!st&&e.jsxs("button",{"data-testid":`button-report-message-${V.id}`,className:"w-full text-left px-2 py-1 text-xs hover:bg-red-50 hover:text-red-700 text-red-600 rounded flex items-center",onClick:()=>fe(V),children:[e.jsx(tE,{className:"h-3 w-3 ml-2"}),"إبلاغ"]})]})]})]})]}),e.jsxs("div",{className:"msg__meta",children:[e.jsx("time",{children:V.isEdited&&V.editedAt?`تم التعديل ${ze(V.editedAt||new Date().toISOString())}`:String(ze(V.createdAt||new Date().toISOString()))}),st&&e.jsx("span",{title:V.isRead?"تمت القراءة":"تم الإرسال",children:V.isRead?"✓✓":"✓"})]})]})]})]},V.id)}),e.jsx("div",{ref:tt})]})}),e.jsxs(Os,{className:"border-t p-1 sm:p-2 flex-col",children:[N.length>0&&e.jsxs("div",{className:"text-sm text-primary mb-2 bg-muted p-1 rounded-md text-right font-medium",children:[e.jsx("span",{className:"animate-pulse inline-block",children:"⌨️"})," ",N.join(", ")," ",N.length===1?"يكتب الآن...":"يكتبون الآن..."]}),e.jsxs("form",{onSubmit:ct,className:"w-full flex flex-col relative",children:[de&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md mb-2 w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rj,{className:"h-4 w-4 ml-2"}),e.jsx("span",{className:"text-sm truncate max-w-[200px]",children:de.name}),e.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:["(",Math.round(de.size/1024)," كيلوبايت)"]})]}),e.jsx("div",{className:"flex",children:W?e.jsx(ft,{className:"h-4 w-4 animate-spin"}):we?e.jsx(vl,{className:"h-4 w-4 text-green-500"}):e.jsxs(e.Fragment,{children:[e.jsxs(M,{type:"button",size:"sm",variant:"ghost",className:"h-8 px-2 ml-1",onClick:En,children:[e.jsx(Rl,{className:"h-3 w-3 ml-1"}),"رفع"]}),e.jsxs(M,{type:"button",size:"sm",variant:"ghost",className:"h-8 px-2",onClick:ur,children:[e.jsx(Xs,{className:"h-3 w-3 ml-1"}),"إلغاء"]})]})})]}),!de&&we&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md mb-2 w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Kd,{className:"h-4 w-4 ml-2 text-primary"}),e.jsx("span",{className:"text-sm",children:"تم تحميل الملف بنجاح"})]}),e.jsxs(M,{type:"button",size:"sm",variant:"ghost",className:"h-8 px-2",onClick:ur,children:[e.jsx(Xs,{className:"h-3 w-3 ml-1"}),"إلغاء المرفق"]})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"relative flex-1 ml-2",children:[e.jsx(pe,{value:j,onChange:V=>v(V.target.value),placeholder:"اكتب رسالتك هنا...",className:"pr-10 text-right"}),e.jsxs("div",{className:"absolute left-1 top-1/2 transform -translate-y-1/2 flex",children:[e.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 p-0 ml-1",onClick:()=>w(!g),children:e.jsx(ap,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 p-0",onClick:()=>{var V;return(V=J.current)==null?void 0:V.click()},children:e.jsx(Kd,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("input",{type:"file",ref:J,className:"hidden",onChange:dr,accept:"image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/plain,video/mp4,audio/mp3"})]})]}),e.jsxs(M,{type:"submit",disabled:!j.trim()&&!we||W,children:[e.jsx(Vr,{className:"h-4 w-4 ml-2"}),"إرسال"]})]}),g&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[9999] bg-white rounded-md shadow-lg border-2 border-primary",style:{maxWidth:"95vw",maxHeight:"90vh"},children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-muted",children:[e.jsx("h3",{className:"font-semibold text-primary",children:"اختر رمزًا تعبيريًا"}),e.jsx("button",{className:"p-1 hover:bg-gray-200 rounded-full",onClick:()=>w(!1),children:"✕"})]}),e.jsx("div",{style:{padding:"8px"},children:e.jsx(Ew,{theme:vo.LIGHT,onEmojiClick:V=>{console.log("تم اختيار الإيموجي:",V),v(Ie=>Ie+V.emoji),w(!1)},lazyLoadEmojis:!0,searchPlaceHolder:"ابحث عن رمز تعبيري...",width:300,height:400,previewConfig:{showPreview:!1}})})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[500px] text-muted-foreground",children:[e.jsx(Jn,{className:"h-16 w-16 mb-4 text-primary"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"لا توجد محادثة مفتوحة"}),e.jsx("p",{className:"mb-4",children:"اختر محادثة من القائمة للبدء"})]})}),ve&&ne&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9998]",onClick:()=>Ee(!1)}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border z-[9999] w-[90vw] max-w-md max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-muted",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"إعادة توجيه الرسالة"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"اختر محادثة لإعادة التوجيه إليها"})]}),e.jsx("div",{className:"p-2 border-b bg-gray-50 dark:bg-gray-700",children:e.jsxs("div",{className:"bg-white dark:bg-gray-600 p-3 rounded border text-sm",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Nf,{className:"h-4 w-4 ml-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"معاينة الرسالة المراد توجيهها:"})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:[e.jsxs("strong",{children:[ne.senderName,":"]}),e.jsx("div",{className:"mt-1",children:ne.content||(ne.fileUrl?"مرفق":"رسالة فارغة")})]})]})}),e.jsx("div",{className:"overflow-y-auto max-h-96",children:oe?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ft,{className:"h-6 w-6 animate-spin ml-2"}),e.jsx("span",{children:"جاري تحميل المحادثات..."})]}):Q&&Q.length>0?Q.filter(V=>V.id!==i).map(V=>e.jsx("button",{"data-testid":`forward-chat-${V.id}`,className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-600 transition-colors",onClick:()=>ee(V.id,V.otherUser.fullName),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center ml-3",children:e.jsx(ll,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:V.otherUser.fullName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["آخر رسالة: ",P_(new Date(V.lastMessageAt),{addSuffix:!0,locale:ol})]})]}),V.unreadCount>0&&e.jsx("div",{className:"bg-primary text-primary-foreground text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:V.unreadCount})]})},V.id)):e.jsxs("div",{className:"text-center p-8 text-muted-foreground",children:[e.jsx(ll,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"لا توجد محادثات أخرى متاحة"})]})}),e.jsx("div",{className:"p-4 border-t bg-muted",children:e.jsx(M,{variant:"outline",className:"w-full",onClick:()=>Ee(!1),"data-testid":"button-cancel-forward",children:"إلغاء"})})]})]})]})]})})}function qle(){return e.jsx(er,{page:"group_chats",children:e.jsx(Kle,{})})}function Kle(){const[t,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(!1),[i,l]=u.useState(null),[o,c]=u.useState({name:"",description:"",isPrivate:!1}),{data:d}=$e({queryKey:["/api/user"]}),{data:f,isLoading:x,error:h}=$e({queryKey:["/api/chat/groups"]}),j=Ze({mutationFn:async k=>{const L=await ce("/api/chat/group/create","POST",k);if(!L.ok){const S=await L.json();throw new Error(S.message||"فشل في إنشاء المجموعة")}return await L.json()},onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/chat/groups"]}),c({name:"",description:"",isPrivate:!1}),a(!1),n({title:"تم إنشاء المجموعة بنجاح",description:"تم إنشاء مجموعة محادثة جديدة وإضافتك كمسؤول"})},onError:k=>{n({variant:"destructive",title:"خطأ في إنشاء المجموعة",description:k.message||"حدث خطأ أثناء إنشاء المجموعة"})}}),v=Ze({mutationFn:async k=>{const L=await ce(`/api/chat/groups/${k}/leave`,"DELETE");if(!L.ok){const S=await L.json();throw new Error(S.message||"فشل في ترك المجموعة")}return await L.json()},onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/chat/groups"]}),l(null),n({title:"تم ترك المجموعة بنجاح",description:"تم إزالتك من المجموعة"})},onError:k=>{n({variant:"destructive",title:"خطأ في ترك المجموعة",description:k.message||"حدث خطأ أثناء ترك المجموعة"}),l(null)}}),p=Ze({mutationFn:async k=>{const L=await ce(`/api/chat/groups/${k}`,"DELETE");if(!L.ok){const S=await L.json();throw new Error(S.message||"فشل في حذف المجموعة")}return await L.json()},onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/chat/groups"]}),l(null),n({title:"تم حذف المجموعة نهائياً",description:"تم حذف المجموعة وجميع رسائلها"})},onError:k=>{n({variant:"destructive",title:"خطأ في حذف المجموعة",description:k.message||"حدث خطأ أثناء حذف المجموعة"}),l(null)}}),b=k=>{if(k.preventDefault(),!o.name.trim()){n({variant:"destructive",title:"حقل مطلوب",description:"يرجى إدخال اسم للمجموعة"});return}j.mutate(o)},y=k=>{s(`/group-chats/${k}`)},m=k=>{const L=k.creator_id||k.creatorId;return d&&d.id&&L===d.id},g=k=>m(k)?"حذف المجموعة نهائياً":"ترك المجموعة",w=k=>m(k)?"هل أنت متأكد من حذف المجموعة نهائياً؟ سيتم حذف جميع الرسائل وإخراج جميع الأعضاء. هذا الإجراء لا يمكن التراجع عنه.":"هل أنت متأكد من ترك المجموعة؟ سيتم إزالتك من المجموعة ولن تتمكن من الوصول إلى رسائلها. هذا الإجراء لا يمكن التراجع عنه.",N=k=>{console.log("🗑️ معالجة حذف/ترك المجموعة:",{groupId:k.id,groupName:k.name,groupCreatorId:k.creatorId,currentUserId:d==null?void 0:d.id,isOwner:m(k),action:m(k)?"DELETE":"LEAVE"}),m(k)?(console.log(`🔥 تنفيذ حذف المجموعة رقم ${k.id}`),p.mutate(k.id)):(console.log(`👋 تنفيذ ترك المجموعة رقم ${k.id}`),v.mutate(k.id))};return u.useEffect(()=>{const k=oi.getSocket();if(!k)return;const L=S=>{console.log("🗑️ تم حذف مجموعة:",S),Qe.invalidateQueries({queryKey:["/api/chat/groups"]}),n({title:"تم حذف مجموعة",description:`تم حذف المجموعة "${S.groupName}" من قبل مؤسسها`,variant:"destructive"})};return k.on("groupDeleted",L),()=>{k.off("groupDeleted",L)}},[n]),e.jsxs(Gp,{children:[e.jsxs(gm,{children:[e.jsx("title",{children:"محادثات المجموعات | منصة الصرافة"}),e.jsx("meta",{name:"description",content:"محادثات المجموعات وإدارة عضوية المجموعات"})]}),e.jsxs("div",{className:"container py-6 max-w-screen-xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 md:mb-0",children:"محادثات المجموعات"}),e.jsxs(Ht,{open:r,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(kn,{size:18,className:"ml-2"}),"إنشاء مجموعة جديدة"]})}),e.jsxs($t,{className:"sm:max-w-[500px]",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إنشاء مجموعة محادثة جديدة"}),e.jsx(ls,{children:"أدخل تفاصيل المجموعة الجديدة. سيتم إضافتك تلقائياً كمسؤول للمجموعة."})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Ce,{htmlFor:"name",children:"اسم المجموعة *"}),e.jsx(pe,{id:"name",value:o.name,onChange:k=>c({...o,name:k.target.value}),placeholder:"أدخل اسم المجموعة",dir:"rtl",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Ce,{htmlFor:"description",children:"وصف المجموعة"}),e.jsx(Un,{id:"description",value:o.description,onChange:k=>c({...o,description:k.target.value}),placeholder:"أدخل وصفاً موجزاً للمجموعة",dir:"rtl"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Di,{id:"isPrivate",checked:o.isPrivate,onCheckedChange:k=>c({...o,isPrivate:k})}),e.jsx(Ce,{htmlFor:"isPrivate",className:"mr-2",children:"مجموعة خاصة (يمكن مشاهدتها من قبل الأعضاء فقط)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(a9,{asChild:!0,children:e.jsx(M,{type:"button",variant:"outline",children:"إلغاء"})}),e.jsx(M,{type:"submit",disabled:j.isPending,children:j.isPending?"جاري الإنشاء...":"إنشاء المجموعة"})]})]})]})]})]}),x?e.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:e.jsx("div",{className:"loader"})}):h?e.jsxs("div",{className:"text-center text-red-500 py-8",children:[e.jsx("p",{children:"حدث خطأ أثناء تحميل مجموعات المحادثة"}),e.jsx(M,{variant:"outline",onClick:()=>Qe.invalidateQueries({queryKey:["/api/chat/groups"]}),className:"mt-4",children:"إعادة المحاولة"})]}):f&&Array.isArray(f)&&f.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed",children:[e.jsx(js,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"لا توجد مجموعات محادثة حالياً"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"قم بإنشاء مجموعة جديدة للبدء في الدردشة مع مجموعة من المستخدمين"}),e.jsxs(M,{onClick:()=>a(!0),children:[e.jsx(kn,{size:18,className:"ml-2"}),"إنشاء مجموعة جديدة"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(f)&&f.map(k=>e.jsxs(_,{className:"overflow-hidden",children:[e.jsx(q,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(X,{className:"text-lg",children:k.name}),e.jsx("div",{className:`text-xs px-2 py-1 rounded ${k.isPrivate?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:k.isPrivate?"🔒 خاصة":"🌐 عامة"})]})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:k.description||"لا يوجد وصف"}),!k.isPrivate&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"text-green-600",children:"ℹ️"}),e.jsxs("div",{className:"text-xs text-green-700 leading-relaxed",children:[e.jsx("strong",{children:"مجموعة عامة:"})," ستنضم تلقائياً عند زيارة المجموعة وتخرج عند مغادرة الصفحة"]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(js,{size:16,className:"ml-2"}),e.jsx("span",{children:"عدد الأعضاء: جاري التحميل..."})]}),!k.isPrivate&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"الحد الأقصى: 100"})]}),e.jsx("div",{className:"text-xs text-gray-400",children:e.jsxs("span",{children:["تم الإنشاء: ",new Date(k.createdAt).toLocaleDateString("ar-LY")]})})]}),e.jsxs(Os,{className:"flex gap-2",children:[e.jsxs(M,{variant:"default",className:"flex-1",onClick:()=>y(k.id),children:[e.jsx(Jn,{size:16,className:"ml-2"}),"الانضمام للمحادثة"]}),e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-group-${k.id}`,children:e.jsx(is,{size:16})})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsxs(wi,{children:["تأكيد ",g(k)]}),e.jsx(Ni,{children:w(k).replace("{groupName}",k.name)})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>N(k),disabled:p.isPending||v.isPending,className:"bg-red-600 hover:bg-red-700",children:p.isPending||v.isPending?m(k)?"جاري الحذف...":"جاري ترك المجموعة...":g(k)})]})]})]})]})]},k.id))})]})]})}const Xle=()=>({showMessage:(s,n=!1)=>{console.log(`[إشعار] ${n?"خطأ":"معلومات"}: ${s}`),window.alert(s)}});function eoe(){return u.useEffect(()=>{try{const t=localStorage.getItem("user"),s=localStorage.getItem("auth_token");if(console.log("=========== معلومات تشخيص المستخدم ==========="),console.log("بيانات المستخدم من localStorage:",t),t){const n=JSON.parse(t);console.log("بيانات المستخدم المحولة:",n),console.log("نوع بيانات المستخدم:",typeof n),console.log("هل userData كائن؟",n instanceof Object),console.log("المفاتيح الموجودة:",Object.keys(n))}else console.log("لا توجد بيانات مستخدم في localStorage");console.log("رمز المصادقة موجود؟",!!s),s&&console.log("جزء من رمز المصادقة:",s.substring(0,15)+"..."),console.log("==============================================")}catch(t){console.error("خطأ في تشخيص بيانات المستخدم:",t)}},[]),null}function toe(){const{groupId:t}=Lv(),[s,n]=_t(),r=u.useRef(null),[a,i]=u.useState(""),[l,o]=u.useState(null),{showMessage:c}=Xle(),{toast:d}=lt(),[f,x]=u.useState(!1),[h,j]=u.useState(null),[v,p]=u.useState(!1),[b,y]=u.useState(!1),[m,g]=u.useState(null),[w,N]=u.useState([]),[k,L]=u.useState(null),[S,T]=u.useState(""),[E,$]=u.useState(new Set),[F,Z]=u.useState(!1),G=u.useRef(null),[D,B]=u.useState(null),[de,U]=u.useState(!1),[W,re]=u.useState(null),[we,be]=u.useState([]),[J,Fe]=u.useState(!1),[Oe,Ve]=u.useState([]),Ne=H=>{console.log("تبديل اختيار الرسالة (مجموعة):",H),$(ue=>{const ze=new Set(ue);return ze.has(H)?(ze.delete(H),console.log("تم إلغاء اختيار الرسالة (مجموعة):",H)):(ze.add(H),console.log("تم اختيار الرسالة (مجموعة):",H)),console.log("الرسائل المختارة حالياً (مجموعة):",Array.from(ze)),ze})},qe=()=>{console.log("جميع الرسائل المتاحة للاختيار (مجموعة):",le.length,le.map(ue=>({id:ue.id,content:ue.content.substring(0,20),createdAt:ue.createdAt,senderId:ue.senderId})));const H=new Set(le.map(ue=>ue.id));console.log("تحديد جميع الرسائل (مجموعة):",Array.from(H)),$(H)},ve=()=>{$(new Set),Z(!1)},Ee=async()=>{if(!(E.size===0||!Ae||!t||!window.confirm(`هل أنت متأكد من حذف ${E.size} رسالة؟ سيتم حذفها نهائياً للجميع.`)))try{const ue=Array.from(E);for(const ze of ue){const me=localStorage.getItem("auth_token"),ut=await fetch(`/api/chat/groups/${t}/messages/${ze}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`}});if(!ut.ok){const Fs=await ut.json();throw console.error("خطأ في حذف الرسالة:",Fs),new Error(Fs.message||"فشل حذف إحدى الرسائل")}}be(ze=>ze.filter(me=>!E.has(me.id))),ve(),d({title:"تم حذف الرسائل",description:`تم حذف ${ue.length} رسالة`,variant:"default"})}catch(ue){console.error("خطأ في حذف الرسائل:",ue),d({title:"فشل حذف الرسائل",description:ue instanceof Error?ue.message:"حدث خطأ غير معروف",variant:"destructive"})}},ne=async H=>{if(window.confirm("هل أنت متأكد من حذف هذه الرسالة؟ سيتم حذفها نهائياً لجميع الأعضاء."))try{const ue=localStorage.getItem("auth_token"),ze=await fetch(`/api/chat/groups/${t}/messages/${H}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`}});if(!ze.ok){const me=await ze.json();throw new Error(me.message||"فشل حذف الرسالة")}d({title:"تم حذف الرسالة",description:"تم حذف الرسالة بنجاح",variant:"default"}),be(me=>me.filter(ut=>ut.id!==H))}catch(ue){console.error("خطأ في حذف الرسالة:",ue),d({title:"فشل حذف الرسالة",description:ue instanceof Error?ue.message:"حدث خطأ غير معروف",variant:"destructive"})}},ke=Ze({mutationFn:async({messageId:H,content:ue})=>{if(!t||!H||!ue.trim())throw new Error("بيانات غير كاملة لتعديل الرسالة");console.log("بدء تعديل الرسالة:",{messageId:H,content:ue,groupId:t});try{const ze=parseInt(t),me=await ce("PUT",`/api/chat/groups/${ze}/messages/${H}`,{content:ue});if(!me.ok){const Fs=await me.json();throw console.error("رد الخطأ من الخادم:",Fs),new Error(Fs.message||"فشل تعديل الرسالة")}console.log("استجابة تعديل الرسالة:",me.status);const ut=await me.json();return console.log("بيانات الاستجابة:",ut),ut}catch(ze){throw console.error("استثناء أثناء تعديل الرسالة:",ze),ze}},onSuccess:H=>{console.log("تم تعديل الرسالة بنجاح:",H),L(null),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/messages`]}),c("تم تحديث الرسالة بنجاح")},onError:H=>{console.error("خطأ في تحديث الرسالة:",H),c(H.message||"حدث خطأ أثناء تحديث الرسالة")}});eoe();const tt=()=>{try{const H=localStorage.getItem("auth_token");if(H){const ze=H.split(".");if(ze.length>=2){const me=ze[1];try{const ut=JSON.parse(atob(me));if(ut&&(ut.id||ut.userId))return Number(ut.id||ut.userId)||null}catch(ut){console.error("خطأ في فك تشفير JWT payload:",ut)}}}const ue=localStorage.getItem("user");if(ue){const ze=JSON.parse(ue);return Number(ze.id)||null}return null}catch(H){return console.error("خطأ في الحصول على معرف المستخدم:",H),null}},{data:xt,isLoading:Q}=$e({queryKey:["/api/user"],retry:!1}),oe=()=>{try{if(xt&&xt.fullName)return xt.fullName;const H=localStorage.getItem("auth_token");if(H)try{const ze=H.split(".");if(ze.length>=2){const me=ze[1],ut=JSON.parse(atob(me));if(ut&&ut.fullName)return ut.fullName}}catch(ze){console.error("خطأ في فك تشفير JWT لجلب الاسم:",ze)}const ue=localStorage.getItem("user");if(ue){const ze=JSON.parse(ue);if(ze&&ze.fullName)return ze.fullName}return"مستخدم غير معرف"}catch(H){return console.error("خطأ في الحصول على اسم المستخدم:",H),"مستخدم غير معرف"}},Ae=tt(),{data:jt,isLoading:O,error:P}=$e({queryKey:["/api/chat/groups",t],enabled:!!t,retry:!1}),{data:ee,isLoading:C,error:fe}=$e({queryKey:[`/api/chat/groups/${t}/messages`],enabled:!!t,refetchOnWindowFocus:!1});u.useEffect(()=>{ee&&Array.isArray(ee)&&be(ee)},[ee]);const le=we,{data:xe,isLoading:Ye,error:Ft}=$e({queryKey:[`/api/chat/groups/${t}/members`],enabled:!!t,refetchOnWindowFocus:!1}),{data:Ut,isLoading:Ds}=$e({queryKey:["/api/users/available"],enabled:f});u.useEffect(()=>{var H;(H=r.current)==null||H.scrollIntoView({behavior:"smooth"})},[le]),u.useEffect(()=>!jt||!t||!Ae||jt.isPrivate?void 0:((async()=>{try{console.log(`🌐 محاولة الدخول التلقائي للمجموعة العامة ${t}`);const ue=await ce(`/api/chat/groups/${t}/auto-join`,"POST",{});if(ue.ok){const ze=await ue.json();console.log("✅ نتيجة الدخول التلقائي:",ze),ze.joined?(Fe(!0),c(`تم الانضمام للمجموعة تلقائياً (${ze.memberCount} عضو)`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})):ze.memberCount!==void 0&&(Fe(!0),console.log("📝 المستخدم بالفعل عضو في المجموعة العامة - سيتم الخروج التلقائي عند المغادرة"))}else{const ze=await ue.json();ze.memberCount!==void 0&&console.log(`⚠️ المجموعة ممتلئة: ${ze.memberCount} عضو`)}}catch(ue){console.error("خطأ في الدخول التلقائي:",ue)}})(),()=>{if(console.log(`🧹 تشغيل cleanup function - hasJoinedAutomatically: ${J}, groupId: ${t}, currentUserId: ${Ae}`),!J){console.log("⏹️ لا يوجد انضمام تلقائي للخروج منه");return}console.log(`👋 بدء الخروج التلقائي من المجموعة العامة ${t}`),(async()=>{try{await ce(`/api/chat/groups/${t}/members/${Ae}`,"DELETE"),console.log(`✅ تم الخروج التلقائي بنجاح من المجموعة ${t}`)}catch(ue){console.error("❌ خطأ في الخروج التلقائي:",ue)}})()}),[jt,t,Ae]),u.useEffect(()=>{const H=ue=>{if(k!==null){const ze=ue.target.closest(".message-editor"),me=ue.target.closest(".edit-button"),ut=ue.target.closest(".message-actions");console.log("حالة النقر:",{isEditor:!!ze,isEditBtn:!!me,isActionBtn:!!ut,target:ue.target.tagName,clickedElement:ue.target.className}),!ze&&!me&&!ut&&(console.log("إغلاق محرر الرسالة لأن النقر كان خارج المناطق المسموح بها"),L(null))}};return console.log(`تسجيل مستمع النقر خارج المحرر ${k?"مفعل":"غير مفعل"}`),document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[k]),u.useEffect(()=>{if(!t)return;console.log("محاولة إعداد Socket.IO للتحديثات...");const H=localStorage.getItem("auth_token");if(!H){console.error("❌ لا يوجد token للاتصال بـ Socket.IO");return}const ue=nc("/",{path:"/socket.io",transports:["websocket"],reconnection:!0,auth:{token:H}}),ze=()=>{const me=Number(t);console.log("📥 طلب الانضمام لغرفة المجموعة:",me),ue.emit("joinGroupChat",me,ut=>{console.log("✅ تأكيد انضمام للمجموعة:",ut)})};return ue.on("connect",()=>{console.log("✅ تم الاتصال بخادم Socket.IO للتحديثات:",ue.id),p(!0),setTimeout(()=>{ze()},100)}),ue.on("disconnect",me=>{console.log("❌ انقطع الاتصال بخادم التحديثات، السبب:",me),p(!1),setTimeout(()=>{ue.connected||(console.log("🔄 محاولة إعادة الاتصال التلقائي..."),ue.connect())},2e3)}),ue.on("reconnect",()=>{console.log("🔄 تم إعادة الاتصال - الانضمام مرة أخرى للمجموعة"),setTimeout(()=>{ze()},100)}),ue.on("newGroupMessage",me=>{console.log("تم استلام رسالة جديدة:",me),me&&me.groupId===parseInt(t)&&Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/messages`]})}),ue.on("groupJoined",me=>{console.log("✅ تأكيد انضمام للمجموعة:",me),me.groupId===parseInt(t)&&ue.emit("getOnlineMembers",{groupId:parseInt(t)})}),ue.on("onlineMembers",me=>{console.log("📋 استلام قائمة الأعضاء المتصلين:",me),me.groupId===parseInt(t)&&Ve(me.members)}),ue.on("memberJoinedGroup",me=>{console.log("👋 عضو جديد انضم:",me),me.groupId===parseInt(t)&&Ve(ut=>ut.some(Nl=>Nl.userId===me.userId)?ut:[...ut,{userId:me.userId,fullName:me.fullName}])}),ue.on("memberLeftGroup",me=>{console.log("👋 عضو غادر:",me),me.groupId===parseInt(t)&&Ve(ut=>ut.filter(Fs=>Fs.userId!==me.userId))}),ue.on("onlineMembersUpdate",me=>{console.log("📋 تحديث شامل لقائمة الأعضاء المتصلين:",me),me.groupId===parseInt(t)&&Ve(me.members)}),ue.on("updatedGroupMessage",me=>{console.log("تم استلام رسالة معدلة:",me),me&&me.groupId===parseInt(t)&&(k===me.id&&L(null),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/messages`]}),me.senderId===Ae&&c("تم تحديث الرسالة بنجاح"))}),console.log("🎧 تسجيل مستمع userTyping..."),ue.on("userTyping",me=>{console.log("🔥🔥🔥 تم استلام حدث userTyping:",me),console.log("📍 Socket.IO ID:",ue.id),console.log("🌐 Socket connected?",ue.connected),console.log("معرف المجموعة الحالي:",t,typeof t),console.log("معرف المستخدم الحالي:",Ae,typeof Ae),console.log("شروط التحقق التفصيلية:",{"Number(data.userId)":Number(me.userId),"Number(currentUserId)":Number(Ae),"مقارنة المعرفات":Number(me.userId)!==Number(Ae),"roomType === 'group'":me.roomType==="group","data.roomId":me.roomId,"parseInt(groupId)":parseInt(t),"مقارنة الغرف":me.roomId===parseInt(t),"النتيجة النهائية":Number(me.userId)!==Number(Ae)&&me.roomType==="group"&&me.roomId===parseInt(t)}),Number(me.userId)!==Number(Ae)&&me.roomType==="group"&&me.roomId===parseInt(t)?(console.log("✅ تم استيفاء شروط إضافة مستخدم للكتابة"),N(ut=>{if(console.log("📊 القائمة الحالية قبل الإضافة:",ut),ut.includes(me.userName)){console.log("⚠️ المستخدم موجود بالفعل في قائمة الكتابة:",me.userName),console.log("⚠️ القائمة الحالية:",ut);const Fs=Array.from(new Set([...ut,me.userName]));return console.log("🔄 القائمة المحدثة بعد إزالة التكرار:",Fs),Fs}else{console.log("✅ إضافة مستخدم يكتب الآن:",me.userName);const Fs=[...ut,me.userName];return console.log("✅ القائمة الجديدة للكتابة:",Fs),Fs}})):console.log("❌ لم يتم استيفاء شروط إضافة مستخدم للكتابة")}),console.log("🎧 تسجيل مستمع userStoppedTyping..."),ue.on("userStoppedTyping",me=>{console.log("🔥🔥🔥 تم استلام حدث userStoppedTyping:",me),Number(me.userId)!==Number(Ae)&&me.roomType==="group"&&me.roomId===parseInt(t)?(console.log("✅ تم استيفاء شروط إزالة مستخدم من الكتابة"),N(ut=>{console.log("✅ إزالة مستخدم توقف عن الكتابة:",me.userName);const Fs=ut.filter(Nl=>Nl!==me.userName);return console.log("✅ القائمة الجديدة بعد الإزالة:",Fs),Fs})):console.log("❌ لم يتم استيفاء شروط إزالة مستخدم من الكتابة")}),ue.on("memberMuted",me=>{console.log("🔇 تم كتم عضو:",me),me.groupId===parseInt(t)&&(Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}),me.userId===Ae&&c("تم كتمك في هذه المجموعة",!0))}),ue.on("memberUnmuted",me=>{console.log("🔊 تم إلغاء كتم عضو:",me),me.groupId===parseInt(t)&&(Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}),me.userId===Ae&&c("تم إلغاء كتمك في هذه المجموعة",!1))}),ue.on("memberBanned",me=>{console.log("🚫 تم حظر عضو:",me),me.groupId===parseInt(t)&&(Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}),me.userId===Ae&&c("تم حظرك من هذه المجموعة نهائياً",!0))}),ue.on("memberUnbanned",me=>{console.log("✅ تم إلغاء حظر عضو:",me),me.groupId===parseInt(t)&&(Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}),me.userId===Ae&&c("تم إلغاء حظرك من هذه المجموعة",!1))}),ue.on("groupDeleted",me=>{console.log("🗑️ تم حذف المجموعة نهائياً:",me),me.groupId===parseInt(t)&&(c("تم حذف هذه المجموعة نهائياً من قبل مؤسسها",!0),setTimeout(()=>{n("/group-chats")},2e3))}),ue.on("memberRemoved",me=>{console.log("👋 تم حذف عضو:",me),me.groupId===parseInt(t)&&Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}),ue.on("removedFromGroup",me=>{console.log("🚫 تم حذفك من المجموعة:",me),me.groupId===parseInt(t)&&(c("تم حذفك من هذه المجموعة",!0),setTimeout(()=>{n("/")},2e3))}),ue.on("messageSendFailed",me=>{console.log("❌ فشل إرسال الرسالة:",me),me.groupId===parseInt(t)&&(c(me.error,!0),me.isMuted&&Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}))}),o(ue),()=>{ue.emit("stopTyping",{roomType:"group",roomId:parseInt(t),userId:Ae,userName:oe()}),ue.disconnect()}},[t,Qe,Ae]),u.useEffect(()=>{const H=()=>{l&&l.connected&&t&&(l.emit("leaveGroupChat",parseInt(t)),l.emit("stopTyping",{roomType:"group",roomId:parseInt(t),userId:Ae,userName:oe()}),console.log("🚪 تم إرسال طلب مغادرة المجموعة قبل إغلاق المتصفح"))};return window.addEventListener("beforeunload",H),()=>{window.removeEventListener("beforeunload",H)}},[l,t,Ae]),u.useEffect(()=>{if(!(!l||!t||!Ae))if(m&&(clearTimeout(m),g(null)),a.trim()){l.emit("typing",{roomType:"group",roomId:parseInt(t),userId:Ae,userName:oe()});const H=setTimeout(()=>{l&&l.connected&&l.emit("stopTyping",{roomType:"group",roomId:parseInt(t),userId:Ae,userName:oe()}),g(null)},3e3);g(H)}else l&&l.connected&&l.emit("stopTyping",{roomType:"group",roomId:parseInt(t),userId:Ae,userName:oe()})},[a,l,t,Ae]);const dr=H=>{const ue=H.target.files;ue&&ue.length>0&&B(ue[0])},En=async H=>{if(H.preventDefault(),!!D){U(!0);try{const ue=new FormData;ue.append("file",D);const ze=localStorage.getItem("auth_token"),me=await fetch("/api/chat/upload",{method:"POST",headers:{Authorization:`Bearer ${ze}`},body:ue});if(!me.ok)throw new Error("فشل تحميل الملف");const ut=await me.json();re({fileUrl:ut.fileUrl,fileType:ut.fileType}),d({title:"تم تحميل الملف",description:"تم تحميل الملف بنجاح",variant:"default"})}catch(ue){console.error("خطأ في تحميل الملف:",ue),d({title:"فشل تحميل الملف",description:ue instanceof Error?ue.message:"حدث خطأ غير معروف",variant:"destructive"})}finally{U(!1),G.current&&(G.current.value="")}}},ur=()=>{B(null),re(null),G.current&&(G.current.value="")},Qr=async()=>{const H=a.trim();if(H===""&&!W){c("لا يمكن إرسال رسالة فارغة",!0);return}if(!t){c("معرف المجموعة غير متوفر",!0);return}console.log("محاولة إرسال رسالة:",H);try{const ue=localStorage.getItem("auth_token");if(ue)console.log("✅ توكن المصادقة موجود:",ue.substring(0,15)+"...");else{console.log("❌ توكن المصادقة غير موجود، يرجى تسجيل الدخول مرة أخرى"),c("خطأ في المصادقة - يرجى تسجيل الدخول مرة أخرى",!0);return}const ze={content:H,fileUrl:(W==null?void 0:W.fileUrl)||null,fileType:(W==null?void 0:W.fileType)||null};console.log("🔄 جاري إرسال الرسالة عبر API..."),console.log("🔶 بيانات الرسالة:",ze);const me=await fetch(`/api/chat/groups/${t}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`},body:JSON.stringify(ze)});if(console.log("✅ تم استلام استجابة الخادم:",me.status),!me.ok){const ut=await me.json();throw new Error(ut.message||"فشل في إرسال الرسالة")}console.log("✅ تم إرسال الرسالة بنجاح"),i(""),B(null),re(null),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/messages`]}),setTimeout(()=>{var ut;(ut=r.current)==null||ut.scrollIntoView({behavior:"smooth"})},100)}catch(ue){console.error("خطأ أثناء إرسال الرسالة:",ue);const ze=ue.message||"حدث خطأ أثناء محاولة إرسال الرسالة";console.log("رسالة الخطأ:",ze),c("فشل إرسال الرسالة: "+ze,!0)}},Ia=async()=>{if(!h||!t){c("يرجى اختيار مستخدم لإضافته",!0);return}try{const H=await ce(`/api/chat/groups/${t}/members`,"POST",{memberId:h,role:"member"});if(!H.ok){const ue=await H.json();throw new Error(ue.message||"فشل في إضافة العضو")}Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]}),c("تمت إضافة العضو الجديد إلى المجموعة بنجاح",!1),x(!1),j(null)}catch(H){c(H.message||"حدث خطأ أثناء إضافة العضو",!0)}},I=async(H,ue)=>{if(!t)return;const ze=prompt(`لكم دقيقة تريد كتم ${ue}؟
(اترك فارغاً للكتم نهائياً)`,"60");if(ze===null)return;const me=ze===""?null:parseInt(ze);try{const ut=await ce(`/api/chat/groups/${t}/members/${H}/mute`,"POST",{durationMinutes:me,reason:"كتم من قبل مدير المجموعة"});if(!ut.ok){const Fs=await ut.json();throw new Error(Fs.message||"فشل في كتم العضو")}c(`تم كتم ${ue} بنجاح`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}catch(ut){c(ut.message||"حدث خطأ أثناء كتم العضو",!0)}},ye=async(H,ue)=>{if(t)try{const ze=await ce(`/api/chat/groups/${t}/members/${H}/unmute`,"POST",{});if(!ze.ok){const me=await ze.json();throw new Error(me.message||"فشل في إلغاء كتم العضو")}c(`تم إلغاء كتم ${ue} بنجاح`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}catch(ze){c(ze.message||"حدث خطأ أثناء إلغاء كتم العضو",!0)}},Le=async(H,ue)=>{if(t&&confirm(`هل أنت متأكد من حذف ${ue} من المجموعة؟`))try{const ze=await ce(`/api/chat/groups/${t}/members/${H}`,"DELETE");if(!ze.ok){const me=await ze.json();throw new Error(me.message||"فشل في حذف العضو")}c(`تم حذف ${ue} من المجموعة بنجاح`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}catch(ze){c(ze.message||"حدث خطأ أثناء حذف العضو",!0)}},We=async(H,ue)=>{if(!t)return;const ze=prompt(`سبب حظر ${ue}؟
(اختياري)`,"انتهاك قوانين المجموعة");if(ze!==null&&confirm(`هل أنت متأكد من حظر ${ue}؟
الحظر يمنع العضو نهائياً من المشاركة في المجموعة.`))try{const me=await ce(`/api/chat/groups/${t}/members/${H}/ban`,"POST",{reason:ze||"غير محدد"});if(!me.ok){const ut=await me.json();throw new Error(ut.message||"فشل في حظر العضو")}c(`تم حظر ${ue} بنجاح`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}catch(me){c(me.message||"حدث خطأ أثناء حظر العضو",!0)}},ct=async(H,ue)=>{if(t&&confirm(`هل أنت متأكد من إلغاء حظر ${ue}؟`))try{const ze=await ce(`/api/chat/groups/${t}/members/${H}/unban`,"POST",{});if(!ze.ok){const me=await ze.json();throw new Error(me.message||"فشل في إلغاء حظر العضو")}c(`تم إلغاء حظر ${ue} بنجاح`,!1),Qe.invalidateQueries({queryKey:[`/api/chat/groups/${t}/members`]})}catch(ze){c(ze.message||"حدث خطأ أثناء إلغاء حظر العضو",!0)}},qt=Array.isArray(xe)&&xe.some(H=>(H.user_id===Ae||H.userId===Ae)&&(H.role==="admin"||H.role==="owner")),on=Array.isArray(le)?[...le].reverse().map(H=>({id:H.id,groupId:H.group_id!==void 0?H.group_id:H.groupId,senderId:H.sender_id!==void 0?H.sender_id:H.senderId,content:H.content,createdAt:H.created_at!==void 0?H.created_at:H.createdAt,senderName:H.sender_name!==void 0?H.sender_name:H.senderName,isEdited:H.is_edited!==void 0?H.is_edited:H.isEdited||!1,editedAt:H.edited_at!==void 0?H.edited_at:H.editedAt,fileUrl:H.file_url!==void 0?H.file_url:H.fileUrl,fileType:H.file_type!==void 0?H.file_type:H.fileType})):[];return O?e.jsx(Gp,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx("div",{className:"loader"})})}):e.jsxs(Gp,{children:[e.jsxs(gm,{children:[e.jsxs("title",{children:[(jt==null?void 0:jt.name)||"مجموعة محادثة"," | منصة الصرافة"]}),e.jsx("meta",{name:"description",content:`محادثة جماعية - ${(jt==null?void 0:jt.name)||""}`})]}),e.jsx("div",{className:"container py-6 max-w-screen-xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(_,{className:"p-4 mb-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:(jt==null?void 0:jt.name)||"مجموعة"}),(jt==null?void 0:jt.description)&&e.jsx("p",{className:"text-gray-600 mb-4",children:jt.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(js,{size:18}),e.jsxs("span",{className:"text-sm mr-2",children:[Array.isArray(xe)?xe.length:0," عضو"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(M,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/"),children:"العودة إلى لوحة التحكم"})})]}),e.jsxs(_,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold",children:"الأعضاء"}),qt&&e.jsxs(Ht,{open:f,onOpenChange:x,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Yv,{size:16,className:"ml-2"}),"إضافة عضو"]})}),e.jsxs($t,{className:"sm:max-w-[425px]",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إضافة عضو جديد"}),e.jsx(ls,{children:"اختر مستخدماً لإضافته إلى المجموعة"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs(Nt,{value:(h==null?void 0:h.toString())||"",onValueChange:H=>j(parseInt(H)),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر مستخدماً"})}),e.jsx(wt,{children:Ds?e.jsx(te,{value:"loading",disabled:!0,children:"جاري التحميل..."}):Ut&&Array.isArray(Ut)&&Ut.filter(H=>!(xe!=null&&xe.some(ue=>ue.userId===H.id))).map(H=>e.jsx(te,{value:H.id.toString(),children:H.fullName},H.id))})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(a9,{asChild:!0,children:e.jsx(M,{variant:"outline",children:"إلغاء"})}),e.jsx(M,{type:"button",onClick:Ia,children:"إضافة"})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"الموجودين الآن (",Oe.length,")"]}),Oe.length>0?e.jsx("div",{className:"space-y-1",children:Oe.map(H=>e.jsxs("div",{className:"flex items-center gap-2 p-1 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-green-700",children:H.fullName})]},H.userId))}):e.jsx("p",{className:"text-sm text-gray-500",children:"لا يوجد أعضاء متصلين حالياً"})]}),e.jsx("hr",{className:"my-3"}),Ye?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx("div",{className:"loader"})}):e.jsx(mm,{className:"h-[250px] pr-4",children:e.jsx("div",{className:"space-y-2",children:Array.isArray(xe)&&xe.map(H=>{const ue=H.userId||H.user_id,ze=qt&&ue!==Ae&&H.role!=="owner",me=H.mutedUntil&&new Date(H.mutedUntil)>new Date;return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:H.fullName}),H.role==="admin"&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"مدير"}),H.role==="owner"&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"مالك"}),me&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx($j,{className:"h-3 w-3"}),"مكتوم"]})]}),ze&&e.jsxs(I0,{children:[e.jsx(A0,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0","data-testid":`member-actions-${ue}`,children:e.jsx(YU,{className:"h-4 w-4"})})}),e.jsxs(Ym,{align:"end",className:"w-40",children:[me?e.jsxs(br,{onClick:()=>ye(ue,H.fullName),className:"text-green-600 hover:text-green-700","data-testid":`unmute-member-${ue}`,children:[e.jsx(p0,{className:"h-4 w-4 ml-2"}),"إلغاء الكتم"]}):e.jsxs(br,{onClick:()=>I(ue,H.fullName),className:"text-orange-600 hover:text-orange-700","data-testid":`mute-member-${ue}`,children:[e.jsx($j,{className:"h-4 w-4 ml-2"}),"كتم العضو"]}),e.jsx(hp,{}),H.is_banned?e.jsxs(br,{onClick:()=>ct(ue,H.fullName),className:"text-blue-600 hover:text-blue-700","data-testid":`unban-member-${ue}`,children:[e.jsx(d$,{className:"h-4 w-4 ml-2"}),"إلغاء الحظر"]}):e.jsxs(br,{onClick:()=>We(ue,H.fullName),className:"text-purple-600 hover:text-purple-700","data-testid":`ban-member-${ue}`,children:[e.jsx(a$,{className:"h-4 w-4 ml-2"}),"حظر العضو نهائياً"]}),e.jsx(hp,{}),e.jsxs(br,{onClick:()=>Le(ue,H.fullName),className:"text-red-600 hover:text-red-700","data-testid":`remove-member-${ue}`,children:[e.jsx(u$,{className:"h-4 w-4 ml-2"}),"حذف من المجموعة"]})]})]})]},H.id)})})})]})]}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col h-[calc(100vh-220px)]",children:[e.jsxs("div",{className:"border-b bg-white rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:(jt==null?void 0:jt.name)||"محادثة المجموعة"}),e.jsx("div",{className:"flex items-center gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:qe,title:"تحديد جميع رسائلي",disabled:on.filter(H=>H.senderId===Ae).length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"تحديد الكل"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:Ee,disabled:E.size===0,title:"حذف الرسائل المختارة",children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"حذف (",E.size,")"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:ve,children:[e.jsx(Xs,{className:"h-4 w-4 ml-1"}),"إلغاء"]})]}):e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Z(!0),title:"اختيار رسائل للحذف",disabled:on.filter(H=>H.senderId===Ae).length===0,children:[e.jsx(Ti,{className:"h-4 w-4 ml-1"}),"اختيار"]})})]}),jt&&!jt.isPrivate&&e.jsx("div",{className:"px-4 py-3 bg-green-50 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700",children:[e.jsx("div",{className:"flex-shrink-0",children:"🌐"}),e.jsxs("div",{children:[e.jsx("strong",{children:"مجموعة عامة:"})," تم انضمامك تلقائياً إلى هذه المجموعة. ستخرج منها تلقائياً عند مغادرة هذه الصفحة."]})]})})]}),e.jsx(_,{className:"flex-1 mb-4 p-4 overflow-hidden border-t-0 rounded-t-none",children:C?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"loader"})}):on.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx("p",{className:"mb-2",children:"لا توجد رسائل بعد"}),e.jsx("p",{children:"كن أول من يبدأ المحادثة في هذه المجموعة"})]}):e.jsx(mm,{className:"h-full pr-4",children:e.jsxs("div",{className:"chat-container",children:[on.map(H=>{var ut,Fs;const ue=Number(Ae),ze=Number(H.senderId),me=ze===ue;return console.log(`معرف المرسل (مجموعة): ${ze}, معرف المستخدم: ${ue}, هل رسالة المستخدم: ${me}`),e.jsxs("div",{className:`msg ${me?"msg--out":"msg--in"} ${F?"items-center gap-2":""} group`,"data-mine":me,children:[F&&e.jsx("div",{className:"cursor-pointer hover:scale-110 transition-transform",onClick:()=>Ne(H.id),title:E.has(H.id)?"إلغاء اختيار الرسالة":"اختيار الرسالة",children:E.has(H.id)?e.jsx(Ti,{className:"h-5 w-5 text-primary hover:text-primary/80"}):e.jsx(zm,{className:"h-5 w-5 text-muted-foreground hover:text-primary/60"})}),e.jsxs("div",{className:`msg__bubble ${F&&E.has(H.id)?"ring-2 ring-primary":""}`,children:[H.senderId!==Ae&&e.jsx("div",{className:"font-bold text-sm text-gray-600 mb-1",children:H.senderName}),k===H.id?e.jsxs("div",{className:"flex flex-col gap-2 message-editor",children:[e.jsx(pe,{value:S,onChange:Nl=>T(Nl.target.value),className:`text-sm border ${H.senderId===Ae?"bg-blue-400 text-white placeholder-blue-100":"bg-white text-gray-900"}`,dir:"rtl"}),e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(M,{size:"icon",variant:"ghost",className:`h-6 w-6 ${H.senderId===Ae?"text-white hover:bg-blue-400":"text-gray-600 hover:bg-gray-200"}`,onClick:()=>{S.trim()&&(ke.mutate({messageId:H.id,content:S}),L(null))},children:e.jsx(vl,{className:"h-4 w-4"})}),e.jsx(M,{size:"icon",variant:"ghost",className:`h-6 w-6 ${H.senderId===Ae?"text-white hover:bg-blue-400":"text-gray-600 hover:bg-gray-200"}`,onClick:()=>{L(null)},children:e.jsx(Xs,{className:"h-4 w-4"})})]})]}):e.jsxs("div",{className:"text-sm relative",children:[H.content,H.fileUrl&&e.jsx("div",{className:"mt-2 p-2 border rounded-md bg-gray-50",children:(ut=H.fileType)!=null&&ut.startsWith("image/")?e.jsx("a",{href:H.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:H.fileUrl,alt:"صورة مرفقة",className:"max-w-full h-auto max-h-40 rounded-md"})}):(Fs=H.fileType)!=null&&Fs.startsWith("video/")?e.jsxs("video",{controls:!0,className:"max-w-full h-auto max-h-40 rounded-md",children:[e.jsx("source",{src:H.fileUrl,type:H.fileType}),"متصفحك لا يدعم تشغيل الفيديو"]}):e.jsxs("a",{href:H.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[e.jsx(Kd,{className:"h-4 w-4"}),e.jsx("span",{children:"تنزيل الملف المرفق"})]})})]}),e.jsxs("div",{className:"msg__meta",children:[e.jsx("time",{children:H.isEdited&&H.editedAt?`تم التعديل ${new Date(H.editedAt).toLocaleTimeString("ar-LY",{hour:"2-digit",minute:"2-digit"})}`:new Date(H.createdAt).toLocaleTimeString("ar-LY",{hour:"2-digit",minute:"2-digit"})}),H.senderId===Ae&&!k&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"icon",variant:"ghost",className:`h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity edit-button ${H.senderId===Ae?"text-white hover:bg-blue-400":"text-gray-600 hover:bg-gray-200"}`,onClick:()=>{L(H.id),T(H.content)},title:"تعديل الرسالة",children:e.jsx(t$,{className:"h-3 w-3"})}),e.jsx(M,{size:"icon",variant:"ghost",className:"h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity text-red-300 hover:text-red-400",onClick:()=>ne(H.id),title:"حذف الرسالة (سيتم حذفها للجميع)",children:e.jsx(Xs,{className:"h-3 w-3"})})]})]})]})]},H.id)}),e.jsx("div",{ref:r})]})})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"px-4 mb-1",children:w.length>0?e.jsxs("div",{className:"text-sm text-primary p-2 rounded-md text-right font-medium bg-blue-100 border border-blue-200",children:[e.jsx("span",{className:"animate-pulse inline-block",children:"⌨️"})," ",w.join(", ")," ",w.length===1?"يكتب الآن...":"يكتبون الآن..."]}):e.jsxs("div",{className:"h-8 text-xs opacity-60 flex items-center justify-end px-2",children:[console.log("حالة usersTyping:",JSON.stringify(w)),"لا يوجد أحد يكتب حالياً"]})}),D&&!W&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 border border-blue-200 rounded-md mb-2",children:[e.jsxs("div",{className:"flex-1 truncate",children:[e.jsx("span",{className:"font-semibold text-sm",children:"الملف المحدد: "}),e.jsx("span",{className:"text-sm",children:D.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",onClick:En,disabled:de,className:"bg-blue-500 hover:bg-blue-600 text-white",children:de?"جارٍ التحميل...":"تحميل الملف"}),e.jsx(M,{size:"sm",variant:"outline",onClick:ur,disabled:de,children:"إلغاء"})]})]}),W&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-md mb-2",children:[e.jsx("div",{className:"flex-1 truncate",children:e.jsx("span",{className:"font-semibold text-sm",children:"تم تحميل الملف بنجاح"})}),e.jsx(M,{size:"sm",variant:"outline",onClick:ur,className:"text-red-500 border-red-200 hover:bg-red-50",children:"إلغاء المرفق"})]}),e.jsxs("div",{className:"flex gap-2 relative",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pe,{placeholder:"اكتب رسالتك هنا...",value:a,onChange:H=>{const ue=H.target.value;if(i(ue),l&&ue.trim().length>0){m&&clearTimeout(m),l.emit("typing",{userId:tt(),userName:oe(),roomType:"group",roomId:parseInt(t)});const ze=setTimeout(()=>{l&&l.emit("stopTyping",{userId:tt(),userName:oe(),roomType:"group",roomId:parseInt(t)})},2e3);g(ze)}else l&&ue.trim().length===0&&(l.emit("stopTyping",{userId:tt(),userName:oe(),roomType:"group",roomId:parseInt(t)}),m&&(clearTimeout(m),g(null)))},onKeyDown:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),Qr())},dir:"rtl",className:"pl-10"}),e.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"absolute left-1 top-1/2 transform -translate-y-1/2",onClick:()=>y(!b),children:e.jsx(ap,{className:"h-5 w-5 text-muted-foreground"})})]}),e.jsx(M,{type:"button",size:"icon",variant:"outline",className:"mr-1",title:"إرفاق ملف",onClick:()=>{var H;return(H=G.current)==null?void 0:H.click()},children:e.jsx(Kd,{size:18})}),e.jsx("input",{type:"file",ref:G,className:"hidden",onChange:dr}),e.jsx(M,{onClick:()=>Qr(),size:"icon",title:"إرسال",children:e.jsx(Vr,{size:18})})]}),b&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[9999] bg-white rounded-md shadow-lg border-2 border-primary",style:{maxWidth:"95vw",maxHeight:"90vh"},children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-muted",children:[e.jsx("h3",{className:"font-semibold text-primary",children:"اختر رمزًا تعبيريًا"}),e.jsx("button",{className:"p-1 hover:bg-gray-200 rounded-full",onClick:()=>y(!1),children:"✕"})]}),e.jsx("div",{style:{padding:"8px"},children:e.jsx(Ew,{theme:vo.LIGHT,onEmojiClick:H=>{console.log("تم اختيار الإيموجي:",H),i(ue=>ue+H.emoji),y(!1)},lazyLoadEmojis:!0,searchPlaceHolder:"ابحث عن رمز تعبيري...",width:300,height:400,previewConfig:{showPreview:!1}})})]})]})]})]})})]})}const Hh=[{code:"LYD",name:"دينار ليبي",symbol:"د.ل"},{code:"USD",name:"دولار أمريكي",symbol:"$"},{code:"EUR",name:"يورو",symbol:"€"},{code:"TRY",name:"ليرة تركية",symbol:"₺"},{code:"AED",name:"درهم إماراتي",symbol:"د.إ"},{code:"EGP",name:"جنيه مصري",symbol:"ج.م"},{code:"TND",name:"دينار تونسي",symbol:"د.ت"},{code:"GBP",name:"جنيه إسترليني",symbol:"£"}];function soe(){const{toast:t}=lt(),[s,n]=u.useState({currencyCode:"",type:"percentage",value:""}),[r,a]=u.useState(null),{data:i=[],isLoading:l}=$e({queryKey:["/api/agent/commissions"],queryFn:async()=>(await ce("GET","/api/agent/commissions")).json()}),o=Ze({mutationFn:async y=>(await ce("POST","/api/agent/commissions",y)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/agent/commissions"]}),n({currencyCode:"",type:"percentage",value:""}),a(null),t({title:"تم الحفظ بنجاح",description:r?"تم تحديث عمولة الاستلام بنجاح":"تم إضافة عمولة الاستلام بنجاح"})},onError:y=>{t({title:"خطأ في الحفظ",description:y.message||"حدث خطأ أثناء حفظ العمولة",variant:"destructive"})}}),c=Ze({mutationFn:async y=>(await ce("DELETE",`/api/agent/commissions/${y}`)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/agent/commissions"]}),t({title:"تم الحذف بنجاح",description:"تم حذف إعداد العمولة بنجاح"})},onError:y=>{t({title:"خطأ في الحذف",description:y.message||"حدث خطأ أثناء حذف العمولة",variant:"destructive"})}}),d=y=>{if(y.preventDefault(),!s.currencyCode||!s.value){t({title:"بيانات ناقصة",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}const m=parseFloat(s.value);if(isNaN(m)||m<0){t({title:"قيمة غير صحيحة",description:"يرجى إدخال قيمة عمولة صحيحة",variant:"destructive"});return}if(s.type==="percentage"&&m>100){t({title:"نسبة عالية",description:"النسبة المئوية لا يمكن أن تتجاوز 100%",variant:"destructive"});return}o.mutate(s)},f=y=>{a(y),n({currencyCode:y.currencyCode,type:y.type,value:y.value})},x=()=>{a(null),n({currencyCode:"",type:"percentage",value:""})},h=y=>{window.confirm("هل أنت متأكد من حذف هذا الإعداد؟")&&c.mutate(y)},j=y=>{var m;return((m=Hh.find(g=>g.code===y))==null?void 0:m.name)||y},v=y=>{var m;return((m=Hh.find(g=>g.code===y))==null?void 0:m.symbol)||y},p=y=>y.type==="percentage"?`${y.value}%`:`${y.value} ${v(y.currencyCode)}`,b=Hh.filter(y=>!i.some(m=>m.currencyCode===y.code)||r&&r.currencyCode===y.code);return l?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"جاري تحميل البيانات..."})]})})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(vs,{className:"h-8 w-8 text-primary"}),"إعدادات عمولة المكتب"]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"حدد نسبة العمولة التي يتقاضاها مكتبك من التحويلات الواردة لكل عملة"})]}),e.jsxs(os,{children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx(cs,{children:"يمكنك تحديد نسبة عمولة مختلفة لكل عملة. العمولة تُضاف لرصيدك عند استلام الحوالات من مكاتب أخرى. يمكن استخدام نسبة مئوية أو مبلغ ثابت لكل عملة."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(pc,{className:"h-5 w-5"}),"تعديل إعدادات العمولة"]}):e.jsxs(e.Fragment,{children:[e.jsx(kn,{className:"h-5 w-5"}),"إضافة إعدادات عمولة جديدة"]})}),e.jsx(Se,{children:r?"تعديل إعدادات العمولة للعملة المحددة":"حدد العملة ونوع العمولة المطلوبة"})]}),e.jsx(z,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"currency",children:"العملة"}),e.jsxs(Nt,{value:s.currencyCode,onValueChange:y=>n(m=>({...m,currencyCode:y})),disabled:!!r,children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})}),e.jsx(wt,{children:b.map(y=>e.jsx(te,{value:y.code,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:y.symbol}),e.jsx("span",{children:y.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",y.code,")"]})]})},y.code))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ce,{children:"نوع العمولة"}),e.jsxs(th,{value:s.type,onValueChange:y=>n(m=>({...m,type:y})),className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"percentage",id:"percentage"}),e.jsxs(Ce,{htmlFor:"percentage",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Li,{className:"h-4 w-4"}),"نسبة مئوية (%)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"fixed",id:"fixed"}),e.jsxs(Ce,{htmlFor:"fixed",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(As,{className:"h-4 w-4"}),"مبلغ ثابت"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"value",children:s.type==="percentage"?"النسبة المئوية":"المبلغ الثابت"}),e.jsx(pe,{id:"value",type:"number",step:"0.01",min:"0",max:s.type==="percentage"?"100":void 0,placeholder:s.type==="percentage"?"مثال: 2.5":"مثال: 10",value:s.value,onChange:y=>n(m=>({...m,value:y.target.value}))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.type==="percentage"?"أدخل النسبة المئوية (من 0 إلى 100)":`أدخل المبلغ الثابت ${s.currencyCode?`بالـ${j(s.currencyCode)}`:""}`})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(M,{type:"submit",disabled:o.isPending,className:"flex-1",children:o.isPending?"جاري الحفظ...":r?"تحديث العمولة":"إضافة العمولة"}),r&&e.jsx(M,{type:"button",variant:"outline",onClick:x,children:"إلغاء"})]})]})})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"العمولات المحددة"}),e.jsx(Se,{children:"العمولات المحددة حاليًا لكل عملة"})]}),e.jsx(z,{children:i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(vs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"لم يتم تحديد أي عمولات بعد"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"قم بإضافة إعدادات العمولة للعملات المختلفة"})]}):e.jsx("div",{className:"space-y-3",children:i.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary",children:v(y.currencyCode)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j(y.currencyCode)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:y.currencyCode})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:"secondary",className:"text-lg font-bold",children:p(y)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>f(y),disabled:(r==null?void 0:r.id)===y.id,children:e.jsx(pc,{className:"h-4 w-4"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>h(y.id),disabled:c.isPending,children:e.jsx(is,{className:"h-4 w-4"})})]})]})]},y.id))})})]})]}),i.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"ملخص العمولات"})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:i.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"عملة محددة"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(y=>y.type==="percentage").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"نسبة مئوية"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.filter(y=>y.type==="fixed").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"مبلغ ثابت"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Hh.length-i.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"عملة متاحة"})]})]})})]})]})}const Wh=[{code:"LYD",name:"الدينار الليبي",symbol:"د.ل"},{code:"USD",name:"الدولار الأمريكي",symbol:"$"},{code:"EUR",name:"اليورو",symbol:"€"},{code:"TRY",name:"الليرة التركية",symbol:"₺"},{code:"AED",name:"الدرهم الإماراتي",symbol:"د.إ"},{code:"EGP",name:"الجنيه المصري",symbol:"ج.م"},{code:"TND",name:"الدينار التونسي",symbol:"د.ت"},{code:"GBP",name:"الجنيه الإسترليني",symbol:"£"}],noe=R.object({currencyCode:R.string().min(1,"يرجى اختيار العملة"),type:R.enum(["percentage","fixed"],{required_error:"يرجى اختيار نوع العمولة"}),value:R.string().min(1,"يرجى إدخال قيمة العمولة").refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن تكون القيمة رقماً موجباً")});function LC(){const{user:t}=Mt(),{toast:s}=lt(),[n,r]=u.useState(null),a=xs({resolver:ps(noe),defaultValues:{currencyCode:"",type:"percentage",value:""}}),{data:i=[],isLoading:l,refetch:o}=$e({queryKey:["/api/agent/commissions"],queryFn:async()=>await(await ce("/api/agent/commissions","GET")).json(),enabled:(t==null?void 0:t.type)==="agent"||(t==null?void 0:t.type)==="admin",staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),{data:c=null,isLoading:d}=$e({queryKey:["/api/agent/commission-stats"],queryFn:async()=>await(await ce("/api/agent/commission-stats","GET")).json(),enabled:(t==null?void 0:t.type)==="agent"||(t==null?void 0:t.type)==="admin",staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),f=Ze({mutationFn:async w=>await(await ce("/api/agent/commissions","POST",w)).json(),onSuccess:()=>{s({title:"تم حفظ العمولة بنجاح",description:"تم إضافة إعدادات العمولة للعملة المحددة"}),a.reset(),r(null),Qe.invalidateQueries({queryKey:["/api/agent/commissions"]}),Qe.invalidateQueries({queryKey:["/api/agent/commission-stats"]})},onError:w=>{s({title:"خطأ في حفظ العمولة",description:w.message||"حدث خطأ أثناء حفظ العمولة",variant:"destructive"})}}),x=Ze({mutationFn:async w=>await(await ce(`/api/agent/commissions/${w}`,"DELETE")).json(),onSuccess:()=>{s({title:"تم حذف العمولة بنجاح",description:"تم حذف إعدادات العمولة للعملة المحددة"}),Qe.invalidateQueries({queryKey:["/api/agent/commissions"]}),Qe.invalidateQueries({queryKey:["/api/agent/commission-stats"]})},onError:w=>{s({title:"خطأ في حذف العمولة",description:w.message||"حدث خطأ أثناء حذف العمولة",variant:"destructive"})}}),h=w=>{var N;return((N=Wh.find(k=>k.code===w))==null?void 0:N.name)||w},j=w=>{var N;return((N=Wh.find(k=>k.code===w))==null?void 0:N.symbol)||w},v=w=>w.type==="percentage"?`${w.value}%`:`${w.value} ${w.currencyCode}`,p=async w=>{f.mutate(w)},b=w=>{r(w),a.setValue("currencyCode",w.currencyCode),a.setValue("type",w.type),a.setValue("value",w.value)},y=w=>{confirm("هل أنت متأكد من حذف هذه العمولة؟")&&x.mutate(w)},m=()=>{r(null),a.reset()},g=Wh.filter(w=>!i.some(N=>N.currencyCode===w.code)||n&&n.currencyCode===w.code);return t?e.jsx(er,{page:"commission_settings",children:e.jsxs("div",{className:"container mx-auto p-1 sm:p-6 space-y-2 sm:space-y-6 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg sm:text-3xl font-bold flex items-center gap-1 sm:gap-2",children:[e.jsx(vs,{className:"h-5 w-5 sm:h-8 sm:w-8"}),"إعدادات العمولة"]}),e.jsx("p",{className:"text-[10px] sm:text-lg text-muted-foreground mt-0.5 sm:mt-2",children:"إدارة إعدادات العمولة للعملات المختلفة"})]}),e.jsx(yn,{className:"w-full sm:w-auto"})]}),e.jsxs(os,{className:"py-1.5 sm:py-4",children:[e.jsx(Xr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs(cs,{className:"text-[10px] sm:text-sm",children:["يمكنك تحديد نسبة عمولة مختلفة لكل عملة. العمولة تُضاف لرصيدك عند استلام الحوالات من مكاتب أخرى.",e.jsx("span",{className:"hidden sm:inline",children:" يمكن استخدام نسبة مئوية أو مبلغ ثابت لكل عملة."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 sm:gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6",children:[e.jsx(X,{className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(pc,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"تعديل إعدادات العمولة"]}):e.jsxs(e.Fragment,{children:[e.jsx(kn,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"إضافة إعدادات عمولة جديدة"]})}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:n?"تعديل إعدادات العمولة للعملة المحددة":"حدد العملة ونوع العمولة المطلوبة"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsx(Bs,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(p),className:"space-y-2 sm:space-y-4",children:[e.jsx(_e,{control:a.control,name:"currencyCode",render:({field:w})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"العملة"}),e.jsxs(Nt,{onValueChange:w.onChange,value:w.value,disabled:!!n,children:[e.jsx(Re,{children:e.jsx(bt,{className:"h-6 sm:h-10 text-[10px] sm:text-sm",children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:g.map(N=>e.jsx(te,{value:N.code,children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"font-medium text-[10px] sm:text-sm",children:N.symbol}),e.jsx("span",{className:"text-[10px] sm:text-sm",children:N.name}),e.jsxs("span",{className:"text-[9px] sm:text-sm text-muted-foreground",children:["(",N.code,")"]})]})},N.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:a.control,name:"type",render:({field:w})=>e.jsxs(De,{className:"space-y-1 sm:space-y-3",children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"نوع العمولة"}),e.jsx(Re,{children:e.jsxs(th,{onValueChange:w.onChange,value:w.value,className:"flex flex-col space-y-1 sm:space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"percentage",id:"percentage",className:"scale-75 sm:scale-100"}),e.jsxs(Ce,{htmlFor:"percentage",className:"flex items-center gap-1 sm:gap-2 cursor-pointer text-[10px] sm:text-sm",children:[e.jsx(As,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"نسبة مئوية (%)"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"fixed",id:"fixed",className:"scale-75 sm:scale-100"}),e.jsxs(Ce,{htmlFor:"fixed",className:"flex items-center gap-1 sm:gap-2 cursor-pointer text-[10px] sm:text-sm",children:[e.jsx(As,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"مبلغ ثابت"]})]})]})}),e.jsx(He,{})]})}),e.jsx(_e,{control:a.control,name:"value",render:({field:w})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:a.watch("type")==="percentage"?"النسبة المئوية":"المبلغ الثابت"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",min:"0",max:a.watch("type")==="percentage"?"100":void 0,placeholder:a.watch("type")==="percentage"?"مثال: 2.5":"مثال: 10",className:"h-6 sm:h-10 text-[10px] sm:text-sm",...w})}),e.jsx(He,{}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:a.watch("type")==="percentage"?"أدخل النسبة المئوية (من 0 إلى 100)":`أدخل المبلغ الثابت ${a.watch("currencyCode")?`بالـ${h(a.watch("currencyCode"))}`:""}`})]})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 pt-2 sm:pt-4",children:[e.jsx(M,{type:"submit",disabled:f.isPending,className:"flex-1 h-6 sm:h-10 text-[10px] sm:text-sm",children:f.isPending?"جاري الحفظ...":n?"تحديث العمولة":"إضافة العمولة"}),n&&e.jsx(M,{type:"button",variant:"outline",onClick:m,className:"h-6 sm:h-10 text-[10px] sm:text-sm",children:"إلغاء"})]})]})})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6",children:[e.jsx(X,{className:"text-sm sm:text-lg",children:"العمولات المحددة"}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"العمولات المحددة حاليًا لكل عملة"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:l?e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-8 sm:w-8 border-b-2 border-primary mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm",children:"جاري تحميل البيانات..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx(vs,{className:"h-6 w-6 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground",children:"لم يتم تحديد أي عمولات بعد"}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"قم بإضافة إعدادات العمولة للعملات المختلفة"})]}):e.jsx("div",{className:"space-y-1.5 sm:space-y-3",children:i.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-1.5 sm:p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-10 sm:h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] sm:text-sm font-bold text-primary",children:j(w.currencyCode)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[10px] sm:text-sm",children:h(w.currencyCode)}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:w.currencyCode})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(ie,{variant:"secondary",className:"text-[10px] sm:text-lg font-bold px-1 py-0.5 sm:px-2 sm:py-1",children:v(w)}),e.jsxs("div",{className:"flex gap-0.5 sm:gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>b(w),disabled:(n==null?void 0:n.id)===w.id,className:"h-6 w-6 sm:h-8 sm:w-8 p-0",children:e.jsx(pc,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>y(w.id),disabled:x.isPending,className:"h-6 w-6 sm:h-8 sm:w-8 p-0",children:e.jsx(is,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4"})})]})]})]},w.id))})})]})]}),i.length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 sm:gap-6",children:[e.jsxs(_,{children:[e.jsx(q,{className:"pb-2 sm:pb-6",children:e.jsxs(X,{className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-lg",children:[e.jsx(Uv,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"ملخص العمولات"]})}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-1.5 sm:p-4 bg-primary/5 rounded-lg",children:[e.jsx("div",{className:"text-sm sm:text-2xl font-bold text-primary",children:i.length}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"عملة محددة"})]}),e.jsxs("div",{className:"text-center p-1.5 sm:p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm sm:text-2xl font-bold text-green-600",children:i.filter(w=>w.type==="percentage").length}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"نسبة مئوية"})]}),e.jsxs("div",{className:"text-center p-1.5 sm:p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-sm sm:text-2xl font-bold text-blue-600",children:i.filter(w=>w.type==="fixed").length}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"مبلغ ثابت"})]}),e.jsxs("div",{className:"text-center p-1.5 sm:p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-sm sm:text-2xl font-bold text-purple-600",children:Wh.length-i.length}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"عملة متاحة"})]})]})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2 sm:pb-6",children:e.jsxs(X,{className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-lg",children:[e.jsx(As,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"أعلى وأقل عمولة"]})}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:d?e.jsxs("div",{className:"text-center py-2 sm:py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-6 sm:w-6 border-b-2 border-primary mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"جاري حساب الإحصائيات..."})]}):c&&c.total>0?e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[c.highest&&e.jsx("div",{className:"p-2 sm:p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-8 sm:h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(As,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-800 text-[10px] sm:text-sm",children:"أعلى عمولة"}),e.jsx("div",{className:"text-[9px] sm:text-sm text-green-600",children:h(c.highest.currencyCode)}),e.jsx("div",{className:"text-[8px] sm:text-xs text-green-500",children:c.highest.agentName})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] sm:text-lg font-bold text-green-700",children:c.highest.type==="percentage"?`${c.highest.value}%`:`${c.highest.value} ${c.highest.currencyCode}`}),e.jsx("div",{className:"text-[8px] sm:text-xs text-green-600",children:c.highest.type==="percentage"?"نسبة مئوية":"مبلغ ثابت"})]})]})}),c.lowest&&e.jsx("div",{className:"p-2 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-8 sm:h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(As,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 text-[10px] sm:text-sm",children:"أقل عمولة"}),e.jsx("div",{className:"text-[9px] sm:text-sm text-blue-600",children:h(c.lowest.currencyCode)}),e.jsx("div",{className:"text-[8px] sm:text-xs text-blue-500",children:c.lowest.agentName})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] sm:text-lg font-bold text-blue-700",children:c.lowest.type==="percentage"?`${c.lowest.value}%`:`${c.lowest.value} ${c.lowest.currencyCode}`}),e.jsx("div",{className:"text-[8px] sm:text-xs text-blue-600",children:c.lowest.type==="percentage"?"نسبة مئوية":"مبلغ ثابت"})]})]})})]}):e.jsxs("div",{className:"text-center py-2 sm:py-4",children:[e.jsx(As,{className:"h-4 w-4 sm:h-8 sm:w-8 text-muted-foreground mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"لا توجد عمولات لحساب الإحصائيات"})]})})]})]})]})}):e.jsx("div",{children:"جاري التحميل..."})}const roe=R.object({currencyCode:R.string().min(1,"يرجى اختيار العملة"),amount:R.string().min(1,"يرجى إدخال المبلغ").refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>0},"يجب أن يكون المبلغ رقماً موجباً"),description:R.string().min(1,"يرجى إدخال وصف العملية")}),TC=["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"];function EC(){const{toast:t}=lt(),[s,n]=u.useState({currencyCode:"all",sourceType:"all"}),[r,a]=u.useState(!1),i=xs({resolver:ps(roe),defaultValues:{currencyCode:"",amount:"",description:""}}),{data:l={},isLoading:o}=$e({queryKey:["/api/commission-pool/balance"],queryFn:async()=>await(await ce("/api/commission-pool/balance","GET")).json()}),{data:c=[],isLoading:d}=$e({queryKey:["/api/commission-pool/transactions",s],queryFn:async()=>{const p=new URLSearchParams;return s.currencyCode&&s.currencyCode!=="all"&&p.append("currencyCode",s.currencyCode),s.sourceType&&s.sourceType!=="all"&&p.append("sourceType",s.sourceType),await(await ce(`/api/commission-pool/transactions?${p}`,"GET")).json()}}),f=Ze({mutationFn:async p=>(console.log("بيانات السحب المرسلة:",p),await(await ce("/api/commission-pool/withdraw","POST",p)).json()),onSuccess:()=>{t({title:"تم السحب بنجاح",description:"تم سحب المبلغ من حساب العمولات"}),Qe.invalidateQueries({queryKey:["/api/commission-pool/balance"]}),Qe.invalidateQueries({queryKey:["/api/commission-pool/transactions"]}),a(!1),i.reset()},onError:p=>{t({title:"خطأ في عملية السحب",description:p.message,variant:"destructive"})}}),x=(p,b)=>`${ka(parseFloat(p).toFixed(2))} ${b}`,h=p=>new Date(p).toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j=p=>p==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",v=p=>p==="credit"?"إيداع":"سحب";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(yn,{variant:"ghost",size:"sm",className:"text-slate-600 hover:text-slate-800"}),e.jsx("div",{className:"h-6 w-px bg-slate-300"}),e.jsx("h1",{className:"text-2xl font-bold text-[#f3a212] text-center",children:"حساب تجميع العمولات"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-[#f3a212] text-center",children:"إدارة ومراقبة جميع العمولات المستلمة من النظام"})}),e.jsxs(Ht,{open:r,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Cr,{className:"h-4 w-4"}),"سحب من الحساب"]})}),e.jsxs($t,{className:"sm:max-w-md",dir:"rtl",children:[e.jsx(Bt,{children:e.jsx(Vt,{children:"سحب من حساب العمولات"})}),e.jsx(Bs,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(p=>f.mutate(p)),className:"space-y-4",children:[e.jsx(_e,{control:i.control,name:"currencyCode",render:({field:p})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة"}),e.jsxs(Nt,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:TC.map(b=>e.jsx(te,{value:b,children:b},b))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"amount",render:({field:p})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المبلغ"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"أدخل المبلغ",type:"number",step:"0.01",...p})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"description",render:({field:p})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"وصف العملية"}),e.jsx(Re,{children:e.jsx(Un,{placeholder:"أدخل وصف العملية",...p})}),e.jsx(He,{})]})}),e.jsx(M,{type:"submit",className:"w-full",disabled:f.isPending,children:f.isPending?"جارٍ السحب...":"تأكيد السحب"})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o?e.jsx("div",{className:"col-span-full text-center py-8",children:"جارٍ تحميل الأرصدة..."}):Object.keys(l).length>0?Object.entries(l).map(([p,b])=>e.jsxs(_,{className:"rounded-lg border text-card-foreground shadow-sm text-center pl-[50px] pr-[50px] bg-[#f3a212]",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:p}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(b,p)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"الرصيد الحالي"})]})]},p)):e.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"لا توجد أرصدة متاحة"})}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Om,{className:"h-5 w-5"}),"فلاتر البحث"]})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"currency-filter",children:"العملة"}),e.jsxs(Nt,{value:s.currencyCode,onValueChange:p=>n({...s,currencyCode:p}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"جميع العملات"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع العملات"}),TC.map(p=>e.jsx(te,{value:p,children:p},p))]})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"source-filter",children:"نوع المصدر"}),e.jsxs(Nt,{value:s.sourceType,onValueChange:p=>n({...s,sourceType:p}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"جميع المصادر"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع المصادر"}),e.jsx(te,{value:"agent",children:"وكيل"}),e.jsx(te,{value:"user",children:"مستخدم"}),e.jsx(te,{value:"system",children:"النظام"})]})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"سجل معاملات العمولات"})}),e.jsx(z,{className:"p-6 pt-0 text-center",children:d?e.jsx("div",{className:"text-center py-8",children:"جارٍ تحميل المعاملات..."}):c.length>0?e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-center",children:"رقم العملية"}),e.jsx(ae,{className:"text-center",children:"المرسل"}),e.jsx(ae,{className:"text-center",children:"نوع العملية"}),e.jsx(ae,{className:"text-center",children:"العملة"}),e.jsx(ae,{className:"text-center",children:"المبلغ"}),e.jsx(ae,{className:"text-center",children:"الوصف"}),e.jsx(ae,{className:"text-center",children:"التاريخ"})]})}),e.jsx(Qs,{children:c.map(p=>e.jsxs(kt,{children:[e.jsxs(se,{children:["#",ka(p.id)]}),e.jsx(se,{children:p.sourceName||`${p.sourceType} #${p.sourceId}`}),e.jsx(se,{children:e.jsx(ie,{className:j(p.transactionType),children:v(p.transactionType)})}),e.jsx(se,{children:p.currencyCode}),e.jsx(se,{className:"font-medium",children:x(p.amount,p.currencyCode)}),e.jsx(se,{children:p.description||"-"}),e.jsx(se,{children:h(p.createdAt)})]},p.id))})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد معاملات متاحة"})})]})]})}function aoe(){const t=new CustomEvent("commissionUpdate",{detail:{timestamp:Date.now()}});window.dispatchEvent(t),console.log("📡 تم إرسال إشعار تحديث العمولة لجميع الصفحات")}function IC(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(!1),[i,l]=u.useState(null),[o,c]=u.useState({transferType:"",currency:"",commissionRate:"",perMilleRate:"",fixedAmount:""});u.useEffect(()=>{t&&t.type!=="admin"&&(n({variant:"destructive",title:"غير مصرح",description:"هذه الصفحة متاحة فقط للمدراء"}),s("/dashboard"))},[t,s,n]);const{data:d=[],isLoading:f,refetch:x}=$e({queryKey:["/api/admin/system-commission-rates"],queryFn:async()=>{try{const g=await(await ce("/api/admin/system-commission-rates","GET")).json();return console.log("🔍 بيانات نسب العمولة من الخادم:",g),Array.isArray(g)?g:[]}catch(m){return console.error("❌ خطأ في جلب نسب العمولة:",m),[]}},enabled:!!t&&t.type==="admin"}),h=Ze({mutationFn:async m=>{console.log("البيانات في النموذج:",m);const g={transferType:m.transferType,currency:m.currency,commissionRate:m.commissionRate?(parseFloat(m.commissionRate)/100).toString():"0",perMilleRate:m.perMilleRate?(parseFloat(m.perMilleRate)/1e3).toString():"",fixedAmount:m.fixedAmount?parseFloat(m.fixedAmount).toString():""};console.log("البيانات المرسلة:",g);const w=m.id?`/api/admin/system-commission-rates/${m.id}`:"/api/admin/system-commission-rates",N=m.id?"PUT":"POST";return await(await ce(w,N,g)).json()},onSuccess:()=>{n({title:i?"تم التحديث بنجاح":"تم الإضافة بنجاح",description:i?"تم تحديث نسبة العمولة":"تم إضافة نسبة عمولة جديدة"}),a(!1),l(null),c({transferType:"",currency:"",commissionRate:"",perMilleRate:"",fixedAmount:""}),Qe.invalidateQueries({queryKey:["/api/admin/system-commission-rates"]}),x()},onError:m=>{var w,N;console.error("خطأ في الحفظ:",m);let g="حدث خطأ أثناء الحفظ";m.message?g=m.message:(N=(w=m.response)==null?void 0:w.data)!=null&&N.message&&(g=m.response.data.message),n({variant:"destructive",title:"خطأ",description:g})}}),j=Ze({mutationFn:async m=>await(await ce(`/api/admin/system-commission-rates/${m}`,"DELETE")).json(),onSuccess:()=>{n({title:"تم الحذف بنجاح",description:"تم حذف نسبة العمولة"}),Qe.invalidateQueries({queryKey:["/api/admin/system-commission-rates"]}),x(),Qe.invalidateQueries({queryKey:["/api/admin/system-commission-rates"]}),Qe.invalidateQueries({queryKey:["/api/commission-rates"]}),Qe.invalidateQueries({queryKey:["/api/inter-office-transfers"]}),Qe.invalidateQueries({queryKey:["/api/transfers"]}),Qe.invalidateQueries({queryKey:["/api/balance"]}),aoe(),console.log("🔄 تم حذف نسبة العمولة - سيتم تطبيق التغييرات على النظام كله")},onError:m=>{n({variant:"destructive",title:"خطأ",description:m.message||"حدث خطأ أثناء الحذف"})}}),v=()=>{if(console.log("البيانات في النموذج:",o),!o.transferType||!o.currency||!o.commissionRate&&!o.perMilleRate&&!o.fixedAmount){n({variant:"destructive",title:"خطأ",description:"يرجى ملء جميع الحقول المطلوبة (نسبة العمولة أو نسبة في الألف أو مبلغ ثابت)"});return}if(o.commissionRate){const m=parseFloat(o.commissionRate);if(isNaN(m)||m<0||m>100){n({variant:"destructive",title:"خطأ",description:"نسبة العمولة يجب أن تكون رقماً بين 0 و 100"});return}}if(o.perMilleRate){const m=parseFloat(o.perMilleRate);if(isNaN(m)||m<0||m>1e3){n({variant:"destructive",title:"خطأ",description:"نسبة في الألف يجب أن تكون رقماً بين 0 و 1000"});return}}if(o.fixedAmount){const m=parseFloat(o.fixedAmount);if(isNaN(m)||m<0){n({variant:"destructive",title:"خطأ",description:"المبلغ الثابت يجب أن يكون رقماً موجباً"});return}}h.mutate({...o,id:i==null?void 0:i.id})},p=m=>{l(m),c({transferType:m.transferType,currency:m.currency,commissionRate:(parseFloat(m.commissionRate)*100).toString(),perMilleRate:m.perMilleRate?(parseFloat(m.perMilleRate)*1e3).toString():"",fixedAmount:m.fixedAmount?parseFloat(m.fixedAmount).toString():""}),a(!0)},b=m=>{confirm("هل أنت متأكد من حذف نسبة العمولة هذه؟")&&j.mutate(m)},y=m=>{switch(m){case"internal":return"التحويل الداخلي";case"city":return"الحوالات بين المدن";case"inter-office":return"التحويل بين المكاتب";case"international":return"الحوالات الدولية";case"market":return"عمولات السوق";default:return m}};return(t==null?void 0:t.type)!=="admin"?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(M,{variant:"ghost",onClick:()=>s("/dashboard"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-800",children:[e.jsx(Br,{className:"h-4 w-4"}),"العودة للوحة التحكم"]})}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 rounded-xl shadow-lg",children:e.jsx(vs,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"إدارة نسب العمولة"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"تحديد نسب العمولة الافتراضية للنظام"})]})]})]}),e.jsxs(_,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsx(q,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Li,{className:"h-5 w-5 text-blue-600"}),"نسب العمولة الحالية"]}),e.jsx(Se,{className:"mt-1",children:"إدارة نسب العمولة الافتراضية لجميع أنواع التحويلات"})]}),e.jsxs(Ht,{open:r,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{onClick:()=>{l(null),c({transferType:"",currency:"",commissionRate:"",perMilleRate:"",fixedAmount:""})},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[e.jsx(kn,{className:"h-4 w-4 ml-1"}),"إضافة نسبة جديدة"]})}),e.jsxs($t,{className:"sm:max-w-md",dir:"rtl","aria-describedby":"dialog-description",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:i?"تعديل نسبة العمولة":"إضافة نسبة عمولة"}),e.jsx(ls,{id:"dialog-description",children:i?"تحديث نسبة العمولة الموجودة":"إضافة نسبة عمولة جديدة للنظام"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"transferType",children:"نوع التحويل"}),e.jsxs(Nt,{value:o.transferType,onValueChange:m=>c({...o,transferType:m}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر نوع التحويل"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"internal",children:"التحويل الداخلي"}),e.jsx(te,{value:"city",children:"الحوالات بين المدن"}),e.jsx(te,{value:"inter-office",children:"التحويل بين المكاتب"}),e.jsx(te,{value:"international",children:"الحوالات الدولية"}),e.jsx(te,{value:"market",children:"عمولات السوق"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"currency",children:"العملة"}),e.jsxs(Nt,{value:o.currency,onValueChange:m=>c({...o,currency:m}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"LYD",children:"دينار ليبي (LYD)"}),e.jsx(te,{value:"USD",children:"دولار أمريكي (USD)"}),e.jsx(te,{value:"EUR",children:"يورو (EUR)"}),e.jsx(te,{value:"TRY",children:"ليرة تركية (TRY)"}),e.jsx(te,{value:"AED",children:"درهم إماراتي (AED)"}),e.jsx(te,{value:"EGP",children:"جنيه مصري (EGP)"}),e.jsx(te,{value:"TND",children:"دينار تونسي (TND)"}),e.jsx(te,{value:"GBP",children:"جنيه إسترليني (GBP)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"commissionRate",children:"نسبة العمولة (%)"}),e.jsx(pe,{id:"commissionRate",type:"number",step:"0.01",min:"0",max:"100",value:o.commissionRate,onChange:m=>c({...o,commissionRate:m.target.value}),placeholder:"مثال: 1.5 للحصول على 1.5%"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"perMilleRate",children:"نسبة في الألف (‰) - اختيارية"}),e.jsx(pe,{id:"perMilleRate",type:"number",step:"0.001",min:"0",max:"1000",value:o.perMilleRate,onChange:m=>c({...o,perMilleRate:m.target.value}),placeholder:"مثال: 15 للحصول على 15‰"}),e.jsx("p",{className:"text-xs text-gray-500",children:"إذا تم تحديدها، ستُحسب العمولة كنسبة في الألف بدلاً من النسبة المئوية"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"fixedAmount",children:"مبلغ ثابت - اختيارية"}),e.jsx(pe,{id:"fixedAmount",type:"number",step:"0.01",min:"0",value:o.fixedAmount,onChange:m=>c({...o,fixedAmount:m.target.value}),placeholder:"مثال: 7 للحصول على 7 دولار ثابت"}),e.jsx("p",{className:"text-xs text-gray-500",children:"إذا تم تحديدها، ستُحسب العمولة كمبلغ ثابت بدلاً من النسبة المئوية أو في الألف"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"إلغاء"}),e.jsx(M,{onClick:v,disabled:h.isPending,className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 ml-1 animate-spin"}),"جاري الحفظ..."]}):i?"تحديث":"إضافة"})]})]})]})]})}),e.jsx(z,{className:"p-6 text-center",children:f?e.jsx("div",{className:"flex justify-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin text-blue-600 mb-3"}),e.jsx("p",{className:"text-slate-600",children:"جاري تحميل البيانات..."})]})}):!d||d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Li,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-slate-600 mb-2",children:"لا توجد نسب عمولة"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"لم يتم تحديد أي نسب عمولة للنظام بعد"}),e.jsxs(M,{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:[e.jsx(kn,{className:"h-4 w-4 ml-1"}),"إضافة نسبة عمولة"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-center",children:"نوع التحويل"}),e.jsx(ae,{className:"text-center",children:"العملة"}),e.jsx(ae,{className:"text-center",children:"نسبة العمولة"}),e.jsx(ae,{className:"text-center",children:"الحالة"}),e.jsx(ae,{className:"text-center",children:"تاريخ الإنشاء"}),e.jsx(ae,{className:"text-center",children:"الإجراءات"})]})}),e.jsx(Qs,{children:d.map(m=>e.jsxs(kt,{children:[e.jsx(se,{className:"font-medium",children:y(m.transferType)}),e.jsx(se,{children:m.currency}),e.jsx(se,{children:e.jsx("div",{className:"flex items-center gap-1",children:m.fixedAmount&&parseFloat(m.fixedAmount)>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-green-600 font-mono",children:"💰"}),e.jsxs("span",{className:"text-green-600",children:[parseFloat(m.fixedAmount).toFixed(2)," ",m.currency," ثابت"]})]}):m.perMilleRate&&parseFloat(m.perMilleRate)>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-purple-600 font-mono",children:"‰"}),e.jsxs("span",{className:"text-purple-600",children:[(parseFloat(m.perMilleRate)*1e3).toFixed(1),"‰"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Li,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-600",children:[(parseFloat(m.commissionRate)*100).toFixed(2),"%"]})]})})}),e.jsx(se,{children:e.jsx(ie,{variant:m.isActive?"default":"secondary",children:m.isActive?"نشط":"غير نشط"})}),e.jsx(se,{children:new Date(m.createdAt).toLocaleDateString("ar-SA")}),e.jsx(se,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>p(m),className:"h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(Wf,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>b(m.id),disabled:j.isPending,className:"h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(is,{className:"h-4 w-4"})})]})})]},m.id))})]})})})]})]})})}const j1=[{name:"الولايات المتحدة الأمريكية",code:"US"},{name:"المملكة المتحدة",code:"GB"},{name:"ألمانيا",code:"DE"},{name:"فرنسا",code:"FR"},{name:"إيطاليا",code:"IT"},{name:"إسبانيا",code:"ES"},{name:"تركيا",code:"TR"},{name:"مصر",code:"EG"},{name:"تونس",code:"TN"},{name:"الإمارات العربية المتحدة",code:"AE"},{name:"السعودية",code:"SA"},{name:"الكويت",code:"KW"},{name:"قطر",code:"QA"},{name:"البحرين",code:"BH"},{name:"عمان",code:"OM"},{name:"الأردن",code:"JO"},{name:"لبنان",code:"LB"},{name:"سوريا",code:"SY"},{name:"العراق",code:"IQ"},{name:"المغرب",code:"MA"},{name:"الجزائر",code:"DZ"},{name:"السودان",code:"SD"},{name:"كندا",code:"CA"},{name:"أستراليا",code:"AU"},{name:"اليابان",code:"JP"},{name:"الصين",code:"CN"},{name:"الهند",code:"IN"},{name:"روسيا",code:"RU"},{name:"البرازيل",code:"BR"},{name:"المكسيك",code:"MX"}],ioe=[{name:"الدولار الأمريكي",code:"USD"},{name:"الجنيه الإسترليني",code:"GBP"},{name:"اليورو",code:"EUR"},{name:"الليرة التركية",code:"TRY"},{name:"الجنيه المصري",code:"EGP"},{name:"الدينار التونسي",code:"TND"},{name:"الدرهم الإماراتي",code:"AED"},{name:"الريال السعودي",code:"SAR"},{name:"الدينار الكويتي",code:"KWD"},{name:"الريال القطري",code:"QAR"},{name:"الدينار البحريني",code:"BHD"},{name:"الريال العماني",code:"OMR"},{name:"الدينار الأردني",code:"JOD"},{name:"الليرة اللبنانية",code:"LBP"},{name:"الدرهم المغربي",code:"MAD"},{name:"الدينار الجزائري",code:"DZD"},{name:"الجنيه السوداني",code:"SDG"},{name:"الدولار الكندي",code:"CAD"},{name:"الدولار الأسترالي",code:"AUD"},{name:"الين الياباني",code:"JPY"},{name:"اليوان الصيني",code:"CNY"},{name:"الروبية الهندية",code:"INR"},{name:"الروبل الروسي",code:"RUB"},{name:"الريال البرازيلي",code:"BRL"},{name:"البيزو المكسيكي",code:"MXN"}],loe=R.object({name:R.string().min(1,"يرجى اختيار الدولة"),code:R.string().min(1,"يرجى اختيار الدولة"),currency:R.string().min(1,"يرجى اختيار العملة")}),ooe=R.object({agentId:R.string().min(1,"يجب اختيار مستخدم"),countryCode:R.string().min(2,"يرجى اختيار الدولة"),city:R.string().min(2,"يرجى إدخال اسم المدينة"),officeCode:R.string().min(3,"يجب أن يكون رمز المكتب 3 أحرف على الأقل"),officeName:R.string().min(3,"يرجى إدخال اسم المكتب"),contactInfo:R.string().min(5,"يرجى إدخال معلومات الاتصال"),address:R.string().min(10,"يرجى إدخال العنوان الكامل")});function coe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState("countries");u.useEffect(()=>{t&&t.type!=="admin"&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمدراء فقط",variant:"destructive"}),s("/dashboard"))},[t,s,n]);const d=xs({resolver:ps(loe),defaultValues:{name:"",code:"",currency:""}}),[f,x]=u.useState(""),h=xs({resolver:ps(ooe),defaultValues:{agentId:"",countryCode:"",city:"",officeCode:"",officeName:"",contactInfo:"",address:""}}),{data:j=[],isLoading:v}=$e({queryKey:["/api/admin/countries"],queryFn:async()=>await(await ce("/api/admin/countries")).json()}),{data:p=[],isLoading:b}=$e({queryKey:["/api/admin/agent-offices"],queryFn:async()=>await(await ce("/api/admin/agent-offices")).json()}),{data:y=[],isLoading:m,error:g}=$e({queryKey:["/api/users/exchange-office-users"],queryFn:async()=>{console.log("Fetching exchange office users...");try{const $=await(await ce("/api/users/exchange-office-users")).json();return console.log("Exchange office users data:",$),$}catch(E){throw console.error("Error fetching exchange users:",E),E}}});console.log("Exchange users state:",{exchangeUsers:y,usersLoading:m,usersError:g});const w=Ze({mutationFn:async E=>await(await ce("/api/admin/countries","POST",E)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/admin/countries"]}),Qe.invalidateQueries({queryKey:["/api/countries"]}),a(!1),d.reset(),n({title:"تم بنجاح",description:"تم إضافة الدولة بنجاح"})},onError:E=>{n({title:"خطأ",description:E.message||"حدث خطأ أثناء إضافة الدولة",variant:"destructive"})}}),N=Ze({mutationFn:async E=>await(await ce("/api/admin/agent-offices","POST",E)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/admin/agent-offices"]}),Qe.invalidateQueries({queryKey:["/api/agent-offices"]}),l(!1),h.reset(),n({title:"تم بنجاح",description:"تم إضافة مكتب الوكيل بنجاح"})},onError:E=>{n({title:"خطأ",description:E.message||"حدث خطأ أثناء إضافة مكتب الوكيل",variant:"destructive"})}}),k=Ze({mutationFn:async E=>await(await ce(`/api/admin/countries/${E}`,"DELETE")).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/admin/countries"]}),Qe.invalidateQueries({queryKey:["/api/countries"]}),n({title:"تم بنجاح",description:"تم حذف الدولة بنجاح"})},onError:E=>{n({title:"خطأ",description:E.message||"حدث خطأ أثناء حذف الدولة",variant:"destructive"})}}),L=Ze({mutationFn:async E=>await(await ce(`/api/admin/agent-offices/${E}`,"DELETE")).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/admin/agent-offices"]}),Qe.invalidateQueries({queryKey:["/api/agent-offices"]}),n({title:"تم بنجاح",description:"تم حذف مكتب الوكيل بنجاح"})},onError:E=>{n({title:"خطأ",description:E.message||"حدث خطأ أثناء حذف مكتب الوكيل",variant:"destructive"})}}),S=E=>{w.mutate(E)},T=E=>{N.mutate(E)};return t?e.jsxs("div",{className:"container mx-auto py-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إدارة الدول ومكاتب الوكلاء"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"إضافة وإدارة الدول المتاحة للتحويلات الدولية ومكاتب الوكلاء"})]})}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse border-b",children:[e.jsxs(M,{variant:o==="countries"?"default":"ghost",onClick:()=>c("countries"),children:[e.jsx(On,{className:"h-4 w-4 ml-2"}),"الدول"]}),e.jsxs(M,{variant:o==="offices"?"default":"ghost",onClick:()=>c("offices"),children:[e.jsx(uo,{className:"h-4 w-4 ml-2"}),"مكاتب الوكلاء"]})]}),o==="countries"&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{children:"إدارة الدول"}),e.jsx(Se,{children:"الدول المتاحة للتحويلات الدولية"})]}),e.jsxs(Ht,{open:r,onOpenChange:a,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"إضافة دولة"]})}),e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إضافة دولة جديدة"}),e.jsx(ls,{children:"أضف دولة جديدة لتصبح متاحة للتحويلات الدولية"})]}),e.jsx(Bs,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(S),className:"space-y-4",children:[e.jsx(_e,{control:d.control,name:"name",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"اختر الدولة"}),e.jsxs(Nt,{onValueChange:$=>{const F=j1.find(Z=>Z.name===$);F&&(E.onChange($),d.setValue("code",F.code),x(F.code))},value:E.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر الدولة"})})}),e.jsx(wt,{children:j1.map($=>e.jsxs(te,{value:$.name,children:[$.name," (",$.code,")"]},$.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:d.control,name:"currency",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"اختر العملة"}),e.jsxs(Nt,{onValueChange:E.onChange,value:E.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:ioe.map($=>e.jsxs(te,{value:$.code,children:[$.name," (",$.code,")"]},$.code))})]}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>a(!1),children:"إلغاء"}),e.jsxs(M,{type:"submit",disabled:w.isPending,children:[w.isPending&&e.jsx(ft,{className:"h-4 w-4 ml-2 animate-spin"}),"إضافة"]})]})]})})]})]})]})}),e.jsx(z,{children:v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ft,{className:"h-8 w-8 animate-spin"})}):e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"اسم الدولة"}),e.jsx(ae,{children:"الرمز"}),e.jsx(ae,{children:"العملة"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"تاريخ الإضافة"}),e.jsx(ae,{children:"العمليات"})]})}),e.jsx(Qs,{children:j.map(E=>e.jsxs(kt,{children:[e.jsx(se,{className:"font-medium",children:E.name}),e.jsx(se,{children:E.code}),e.jsx(se,{children:E.currency}),e.jsx(se,{children:e.jsx(ie,{variant:E.isActive?"default":"secondary",children:E.isActive?"نشطة":"غير نشطة"})}),e.jsx(se,{children:new Date(E.createdAt).toLocaleDateString("ar-EG")}),e.jsx(se,{children:e.jsx(M,{variant:"outline",size:"sm",onClick:()=>k.mutate(E.id),disabled:k.isPending,children:e.jsx(is,{className:"h-4 w-4"})})})]},E.id))})]})})]}),o==="offices"&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{children:"إدارة مكاتب الوكلاء"}),e.jsx(Se,{children:"مكاتب الوكلاء المتاحة لاستقبال التحويلات الدولية"})]}),e.jsxs(Ht,{open:i,onOpenChange:l,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"إضافة مكتب"]})}),e.jsxs($t,{className:"max-w-2xl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إضافة مكتب وكيل جديد"}),e.jsx(ls,{children:"أضف مكتب وكيل جديد لاستقبال التحويلات الدولية"})]}),e.jsx(Bs,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(T),className:"space-y-4",children:[e.jsx(_e,{control:h.control,name:"agentId",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المستخدم صاحب المكتب"}),e.jsxs(Nt,{onValueChange:E.onChange,defaultValue:E.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر المستخدم"})})}),e.jsx(wt,{children:y&&y.length>0?y.map($=>e.jsxs(te,{value:$.id.toString(),children:[$.fullName," - ",$.accountNumber," (",$.type==="agent"?"وكيل":"مدير",")"]},$.id)):e.jsx(te,{value:"no-users",disabled:!0,children:"لا توجد مستخدمين متاحين"})})]}),e.jsx(He,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_e,{control:h.control,name:"countryCode",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"اختر الدولة"}),e.jsxs(Nt,{onValueChange:E.onChange,value:E.value,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر الدولة"})})}),e.jsx(wt,{children:j1.map($=>e.jsxs(te,{value:$.code,children:[$.name," (",$.code,")"]},$.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:h.control,name:"city",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"المدينة"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"مثال: نيويورك",...E})}),e.jsx(He,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_e,{control:h.control,name:"officeCode",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رمز المكتب"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"مثال: NYC001",...E})}),e.jsx(He,{})]})}),e.jsx(_e,{control:h.control,name:"officeName",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"اسم المكتب"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"مثال: مكتب نيويورك للصرافة",...E})}),e.jsx(He,{})]})})]}),e.jsx(_e,{control:h.control,name:"contactInfo",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"معلومات الاتصال"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"مثال: +1-555-0123",...E})}),e.jsx(He,{})]})}),e.jsx(_e,{control:h.control,name:"address",render:({field:E})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العنوان"}),e.jsx(Re,{children:e.jsx(pe,{placeholder:"مثال: 123 Main St, New York, NY",...E})}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>l(!1),children:"إلغاء"}),e.jsxs(M,{type:"submit",disabled:N.isPending,children:[N.isPending&&e.jsx(ft,{className:"h-4 w-4 ml-2 animate-spin"}),"إضافة"]})]})]})})]})]})]})}),e.jsx(z,{children:b?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ft,{className:"h-8 w-8 animate-spin"})}):e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"اسم المكتب"}),e.jsx(ae,{children:"رمز المكتب"}),e.jsx(ae,{children:"الدولة"}),e.jsx(ae,{children:"المدينة"}),e.jsx(ae,{children:"الاتصال"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"العمليات"})]})}),e.jsx(Qs,{children:p.map(E=>e.jsxs(kt,{children:[e.jsx(se,{className:"font-medium",children:E.officeName}),e.jsx(se,{children:E.officeCode}),e.jsx(se,{children:E.countryCode}),e.jsx(se,{children:E.city}),e.jsx(se,{children:E.contactInfo}),e.jsx(se,{children:e.jsx(ie,{variant:E.isActive?"default":"secondary",children:E.isActive?"نشط":"غير نشط"})}),e.jsx(se,{children:e.jsx(M,{variant:"outline",size:"sm",onClick:()=>L.mutate(E.id),disabled:L.isPending,children:e.jsx(is,{className:"h-4 w-4"})})})]},E.id))})]})})]})]}):null}const doe=R.object({transferCode:R.string().min(6,"رمز الاستلام يجب أن يكون 6 أرقام على الأقل")});function AC(){return e.jsx(er,{page:"inter_office_receive",children:e.jsx(uoe,{})})}function uoe(){const{user:t}=Mt(),{toast:s}=lt(),[n,r]=u.useState(!1),[a,i]=u.useState(!1),[l,o]=u.useState(null),[c,d]=u.useState(!1),[f,x]=u.useState(!1),h=xs({resolver:ps(doe),defaultValues:{transferCode:""}}),j=async p=>{r(!0),o(null),d(!1),x(!1);try{const b=await ce(`/api/inter-office-transfers/${p.transferCode}/details`,"GET");if(b.ok){const y=await b.json();console.log("🔍 تفاصيل الحوالة من الخادم:",y),o(y),d(!0),s({title:"تم العثور على الحوالة",description:"تحقق من البيانات ثم أكد الاستلام"})}else{const y=await b.json();s({title:"خطأ",description:y.message||"لم يتم العثور على الحوالة",variant:"destructive"})}}catch(b){console.error("❌ خطأ في البحث:",b),s({title:"خطأ",description:"حدث خطأ أثناء البحث عن الحوالة",variant:"destructive"})}finally{r(!1)}},v=async()=>{if(l){i(!0);try{console.log("🔄 إرسال طلب استلام الحوالة:",l.transferCode);const p=await ce("/api/inter-office-transfers/receive","POST",{transferCode:l.transferCode});console.log("📝 استجابة الخادم:",{status:p.status,ok:p.ok,statusText:p.statusText});const b=await p.json();console.log("📋 محتوى الاستجابة:",b),p.ok||b&&(b.message==="تم استلام الحوالة بنجاح"||b.amount)?(console.log("✅ تم استلام الحوالة بنجاح"),x(!0),d(!1),Qe.invalidateQueries({queryKey:["/api/balance"]}),Qe.invalidateQueries({queryKey:["/api/transactions"]}),Qe.invalidateQueries({queryKey:["/api/inter-office-transfers"]}),s({title:"تم الاستلام بنجاح",description:`تم إضافة ${b.amount||l.recipientCredit} ${b.currency||l.currency} إلى رصيدك`}),h.reset(),setTimeout(()=>{o(null),x(!1)},5e3)):(console.log("❌ فشل استلام الحوالة:",b),s({title:"فشل الاستلام",description:b.message||"حدث خطأ أثناء استلام الحوالة",variant:"destructive"}))}catch(p){console.error("❌ خطأ في استلام الحوالة:",p),s({title:"خطأ",description:"حدث خطأ أثناء استلام الحوالة",variant:"destructive"})}finally{i(!1)}}};return t&&t.type!=="agent"&&t.type!=="admin"?e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs(os,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(cs,{children:"هذه الصفحة متاحة فقط لمكاتب الصرافة والإدارة"})]})}):e.jsxs("div",{className:"container mx-auto py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsx(yn,{}),e.jsx(Mn,{href:"/referrals",children:e.jsxs(M,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(hl,{className:"h-4 w-4"}),"العودة للإحالات"]})})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"استلام حوالة بين المكاتب"}),e.jsx("p",{className:"text-muted-foreground",children:"أدخل رمز الاستلام لاستلام الحوالة"})]}),e.jsxs(_,{className:"mb-6",children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(uo,{className:"h-5 w-5 text-blue-600"}),"البحث عن الحوالة"]})}),e.jsx(z,{children:e.jsx(Bs,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(j),className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 max-w-md mx-auto",children:e.jsx(_e,{control:h.control,name:"transferCode",render:({field:p})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رمز الاستلام"}),e.jsx(Re,{children:e.jsx(pe,{...p,placeholder:"903088",className:"text-center text-lg font-mono",disabled:n||a})}),e.jsx(He,{})]})})}),e.jsx(M,{type:"submit",className:"w-full",disabled:n||a,children:n?"جاري البحث...":"البحث عن الحوالة"})]})})})]}),l&&c&&e.jsxs(_,{className:"mb-6",children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),"تفاصيل الحوالة"]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[e.jsx(_i,{className:"h-4 w-4"}),"معلومات الأطراف"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"المرسل:"}),e.jsx("p",{className:"font-medium",children:l.senderName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"المستلم:"}),e.jsx("p",{className:"font-medium",children:l.recipientName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h0,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:l.recipientPhone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[e.jsx(As,{className:"h-4 w-4"}),"التفاصيل المالية"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"المبلغ الأصلي المطلوب إرساله:"}),e.jsxs("span",{className:"font-bold text-blue-900",children:[l.amountOriginal," ",l.currency]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-1",children:"تفاصيل العمولات:"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"• عمولة النظام (يدفعها المرسل):"}),e.jsxs("span",{className:"font-medium text-red-600",children:[l.systemCommission," ",l.currency]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"• عمولة المكتب المستلم:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[l.recipientCommission," ",l.currency]})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-1",children:"الحساب النهائي:"}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"رصيد المستلم (المبلغ الأصلي + عمولة المكتب):"}),e.jsxs("span",{className:"font-bold text-green-900",children:[l.recipientCredit.toFixed(2)," ",l.currency]})]}),e.jsxs("div",{className:"text-xs text-green-700 mt-1",children:[l.amountOriginal," + ",l.recipientCommission," = ",l.recipientCredit.toFixed(2)]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"إجمالي المخصوم من المرسل:"}),e.jsxs("span",{className:"font-bold text-orange-900",children:[l.totalDeduction.toFixed(2)," ",l.currency]})]}),e.jsxs("div",{className:"text-xs text-orange-700 mt-1",children:["المبلغ الأصلي (",l.amountOriginal,") + عمولة النظام (",l.systemCommission,") + عمولة المكتب (",l.recipientCommission,")"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"الموقع:"}),e.jsxs("p",{className:"font-medium",children:[l.city,", ",l.country]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"تاريخ الإرسال:"}),e.jsx("p",{className:"font-medium",children:new Date(l.createdAt).toLocaleDateString("ar-EG")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"الحالة:"}),e.jsx(ie,{variant:l.status==="pending"?"default":"secondary",children:l.status==="pending"?"معلق":"مكتمل"})]})]}),l.note&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ملاحظة:"}),e.jsx("p",{className:"font-medium mt-1",children:l.note})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsxs(M,{onClick:v,disabled:a||l.status!=="pending",className:"flex-1",size:"lg",children:[e.jsx(wa,{className:"h-4 w-4 mr-2"}),a?"جاري الاستلام...":"تأكيد الاستلام"]}),e.jsx(M,{variant:"outline",onClick:()=>{d(!1),o(null),h.reset()},disabled:a,size:"lg",children:"إلغاء"})]})]})]}),f&&l&&e.jsx(_,{className:"border-green-200 bg-green-50",children:e.jsx(z,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ks,{className:"h-16 w-16 text-green-600 mx-auto"}),e.jsx("h3",{className:"text-xl font-bold text-green-800",children:"تم الاستلام بنجاح!"}),e.jsxs("p",{className:"text-green-700",children:["تم إضافة ",e.jsxs("span",{className:"font-bold",children:[l.recipientCredit.toFixed(2)," ",l.currency]})," إلى رصيدك"]}),e.jsx("div",{className:"text-sm text-green-600",children:e.jsxs("p",{children:["رمز الاستلام: ",l.receiverCode]})})]})})})]})}const y1=[{code:"LYD",name:"الدينار الليبي",symbol:"د.ل"},{code:"USD",name:"الدولار الأمريكي",symbol:"$"},{code:"EUR",name:"اليورو",symbol:"€"},{code:"TRY",name:"الليرة التركية",symbol:"₺"},{code:"AED",name:"الدرهم الإماراتي",symbol:"د.إ"},{code:"EGP",name:"الجنيه المصري",symbol:"ج.م"},{code:"TND",name:"الدينار التونسي",symbol:"د.ت"},{code:"GBP",name:"الجنيه الإسترليني",symbol:"£"}],foe=R.object({countryName:R.string().min(1,"يرجى اختيار دولة الوجهة"),agentOfficeId:R.string().min(1,"يرجى اختيار المكتب المستلم"),amount:R.string().min(1,"يرجى إدخال المبلغ").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,"يجب أن يكون المبلغ رقماً موجباً"),currency:R.string().min(1,"يرجى اختيار العملة"),notes:R.string().optional()});function moe(){return e.jsx(er,{page:"office_management",children:e.jsx(hoe,{})})}function hoe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(null);u.useEffect(()=>{if(t&&t.type!=="agent"&&t.type!=="admin"){n({title:"غير مصرح",description:"هذه الصفحة متاحة للمكاتب فقط",variant:"destructive"}),s("/dashboard");return}t&&!t.extTransferEnabled&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمكاتب المرخصة للتحويل الدولي فقط.",variant:"destructive"}),s("/dashboard"))},[t,s,n]);const i=xs({resolver:ps(foe),defaultValues:{countryName:"",agentOfficeId:"",amount:"",currency:"USD",notes:""}}),{data:l=[],isLoading:o}=$e({queryKey:["/api/countries/international"],queryFn:async()=>await(await ce("/api/countries/international","GET")).json(),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),c=$e({queryKey:["/api/agent-offices",r],queryFn:async()=>r?(await(await ce(`/api/agent-offices?country=${encodeURIComponent(r)}`,"GET")).json()).filter(w=>w.agentId!==(t==null?void 0:t.id)):[],enabled:!!r&&!!(t!=null&&t.id),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),d=$e({queryKey:["/api/balance"],queryFn:async()=>await(await ce("/api/balance","GET")).json(),staleTime:2*60*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),f=$e({queryKey:["/api/inter-office-transfers"],queryFn:async()=>await(await ce("/api/inter-office-transfers","GET")).json(),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),x=$e({queryKey:["/api/inter-office-transfers/quote",i.watch("amount"),i.watch("currency"),i.watch("agentOfficeId")],queryFn:async()=>{const m=i.watch("amount"),g=i.watch("currency"),w=i.watch("agentOfficeId");return!m||!g||!w||parseFloat(m)<=0?null:await(await ce(`/api/inter-office-transfers/quote?amount=${encodeURIComponent(m)}&currency=${encodeURIComponent(g)}&receiverOfficeId=${encodeURIComponent(w)}`,"GET")).json()},enabled:!!(i.watch("amount")&&i.watch("currency")&&i.watch("agentOfficeId")&&parseFloat(i.watch("amount")||"0")>0),staleTime:30*1e3,gcTime:60*1e3,refetchOnWindowFocus:!1}),h=Ze({mutationFn:async m=>{var N;const g={receiverName:"تحويل دولي",receiverPhone:"00000000",amount:parseFloat(m.amount),receivingOffice:parseInt(m.agentOfficeId),destinationCountry:m.countryName,notes:((N=m.notes)==null?void 0:N.trim())||"",currency:m.currency};return await(await ce("/api/inter-office-transfers","POST",g)).json()},onSuccess:m=>{n({title:"✅ تم إنشاء التحويل بنجاح",description:`رمز الاستلام: ${m.receiverCode}
المبلغ: ${m.amountOriginal} ${m.currency}`,duration:1e4}),i.reset(),a(null),Qe.invalidateQueries({queryKey:["/api/balance"]}),Qe.invalidateQueries({queryKey:["/api/inter-office-transfers"]})},onError:m=>{n({title:"خطأ في التحويل",description:m.message||"حدث خطأ أثناء إرسال التحويل",variant:"destructive"})}}),j=m=>{var g;return((g=y1.find(w=>w.code===m))==null?void 0:g.name)||m},v=m=>{var g;return((g=y1.find(w=>w.code===m))==null?void 0:g.symbol)||m},p=m=>new Date(m).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=async m=>{h.mutate(m)},y=async m=>{try{await ce(`/api/inter-office-transfers/${m}`,"DELETE"),n({title:"تم إلغاء التحويل",description:"تم إلغاء التحويل بنجاح"}),Qe.invalidateQueries({queryKey:["/api/inter-office-transfers"]})}catch(g){n({title:"خطأ",description:g.message||"حدث خطأ أثناء إلغاء التحويل",variant:"destructive"})}};return!t||t.type!=="agent"&&t.type!=="admin"?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"هذه الصفحة مخصصة لمكاتب الصرافة والمديرين فقط"})}):e.jsxs("div",{className:"container mx-auto px-1 sm:px-6 py-1 sm:py-6 space-y-2 sm:space-y-6",children:[e.jsx("div",{className:"mb-1 sm:mb-4",children:e.jsx(yn,{})}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-2",children:[e.jsxs("h1",{className:"text-lg sm:text-3xl font-bold flex items-center gap-1 sm:gap-2",children:[e.jsx(vs,{className:"h-4 w-4 sm:h-8 sm:w-8 text-primary"}),"إدارة التحويلات الدولية"]}),e.jsx("p",{className:"text-xs sm:text-lg text-muted-foreground hidden sm:block",children:"إدارة التحويلات الدولية بين المكاتب"})]}),e.jsxs(os,{className:"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground text-foreground py-4 px-6 my-3 mx-2 bg-[#8fdfb4] border-[#8fdfb4] pl-[24px] pr-[24px] ml-[0px] mr-[0px] mt-[4px] mb-[4px]",children:[e.jsx(Xr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-[#09090b]"}),e.jsx(cs,{className:"text-[10px] sm:text-sm text-[#09090b] text-center",children:"يمكنك إرسال تحويلات إلى مكاتب أخرى معتمدة في نظام الصرافة. جميع التحويلات تخضع للرسوم والعمولات المحددة."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 sm:gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6 bg-[#bfe8d2]",children:[e.jsxs(X,{className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-lg",children:[e.jsx(Vr,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"إرسال تحويل جديد"]}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"أدخل تفاصيل التحويل إلى المكتب المطلوب"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsx(Bs,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(b),className:"space-y-2 sm:space-y-4",children:[e.jsx(_e,{control:i.control,name:"countryName",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"الدولة المستقبلة"}),e.jsxs(Nt,{onValueChange:g=>{m.onChange(g),a(g),i.setValue("agentOfficeId","")},value:m.value,children:[e.jsx(Re,{children:e.jsx(bt,{className:"h-6 sm:h-10 text-[10px] sm:text-sm",children:e.jsx(Ct,{placeholder:"اختر الدولة"})})}),e.jsx(wt,{children:l.map(g=>e.jsx(te,{value:g.name,children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-[10px] sm:text-sm",children:g.name}),e.jsxs("span",{className:"text-[9px] sm:text-sm text-muted-foreground",children:["(",g.officeCount," مكتب)"]})]})},g.name))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"agentOfficeId",render:({field:m})=>{var g;return e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"مكتب الوكيل"}),e.jsxs(Nt,{onValueChange:m.onChange,value:m.value,disabled:!r,children:[e.jsx(Re,{children:e.jsx(bt,{className:"h-6 sm:h-10 text-[10px] sm:text-sm",children:e.jsx(Ct,{placeholder:"اختر المكتب"})})}),e.jsx(wt,{children:(g=c.data)==null?void 0:g.map(w=>e.jsx(te,{value:w.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] sm:text-sm font-medium",children:w.officeName}),e.jsxs("span",{className:"text-[9px] sm:text-sm text-muted-foreground",children:[w.agentName," - ",w.city]})]})},w.id))})]}),e.jsx(He,{})]})}}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 sm:gap-4",children:[e.jsx(_e,{control:i.control,name:"currency",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"العملة"}),e.jsxs(Nt,{onValueChange:m.onChange,value:m.value,children:[e.jsx(Re,{children:e.jsx(bt,{className:"h-6 sm:h-10 text-[10px] sm:text-sm",children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:y1.map(g=>e.jsx(te,{value:g.code,children:e.jsxs("span",{className:"text-[10px] sm:text-sm",children:[g.symbol," ",g.name]})},g.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"amount",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"المبلغ"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",min:"1",placeholder:"0.00",className:"h-6 sm:h-10 text-[10px] sm:text-sm",...m})}),e.jsx(He,{})]})})]}),e.jsx(_e,{control:i.control,name:"notes",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-sm",children:"ملاحظات (اختياري)"}),e.jsx(Re,{children:e.jsx("textarea",{placeholder:"أدخل أي ملاحظات إضافية...",className:"w-full h-12 sm:h-20 px-2 sm:px-3 py-1.5 sm:py-2 text-[10px] sm:text-sm border border-input bg-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md resize-none",...m})}),e.jsx(He,{})]})}),i.watch("amount")&&i.watch("currency")&&i.watch("agentOfficeId")&&e.jsxs("div",{className:"bg-muted/20 border rounded-lg p-2 sm:p-3 space-y-1 sm:space-y-2",children:[e.jsx("h4",{className:"font-semibold text-[10px] sm:text-sm",children:"ملخص التكاليف"}),x.isLoading?e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-primary mx-auto mb-1"}),e.jsx("p",{className:"text-[8px] sm:text-xs text-muted-foreground",children:"جاري حساب العمولة..."})]}):x.data?e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 text-[9px] sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"المبلغ الأساسي:"}),e.jsxs("span",{children:[x.data.amount," ",x.data.currency]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"عمولة النظام:"}),e.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[x.data.systemCommission||x.data.commission," ",x.data.currency]})]}),x.data.receiverCommission&&x.data.receiverCommission>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"عمولة المكتب المستلم:"}),e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[x.data.receiverCommission," ",x.data.currency]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t pt-0.5 sm:pt-1",children:[e.jsx("span",{children:"المجموع:"}),e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[x.data.total," ",x.data.currency]})]}),x.data.commissionType&&x.data.commissionType!=="default"&&e.jsxs("div",{className:"text-[8px] sm:text-xs text-muted-foreground pt-0.5 sm:pt-1",children:["نوع العمولة: ",x.data.commissionType==="fixed"?"ثابتة":x.data.commissionType==="percentage"?"نسبة مئوية":x.data.commissionType==="per_mille"?"في الألف":"افتراضية"]})]}):x.error?e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-[8px] sm:text-xs text-red-500",children:"خطأ في حساب العمولة"})}):e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-[8px] sm:text-xs text-muted-foreground",children:"أدخل جميع البيانات لحساب العمولة"})})]}),e.jsx(M,{type:"submit",disabled:h.isPending,className:"w-full h-6 sm:h-10 text-[10px] sm:text-sm",children:h.isPending?"جاري الإرسال...":"إرسال التحويل"})]})})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6",children:[e.jsx(X,{className:"text-sm sm:text-lg",children:"أرصدة العملات"}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"الأرصدة المتاحة للتحويل"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:d.isLoading?e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-8 sm:w-8 border-b-2 border-primary mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm",children:"جاري تحميل الأرصدة..."})]}):d.data&&Object.keys(d.data.balances).length>0?e.jsx("div",{className:"space-y-1.5 sm:space-y-3",children:Object.entries(d.data.balances).map(([m,g])=>e.jsxs("div",{className:"flex items-center justify-between p-1.5 sm:p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-10 sm:h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] sm:text-sm font-bold text-primary",children:v(m)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[10px] sm:text-sm",children:j(m)}),e.jsx("div",{className:"text-[9px] sm:text-sm text-muted-foreground",children:m})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-[10px] sm:text-lg",children:g})})]},m))}):e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx(wa,{className:"h-6 w-6 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground",children:"لا توجد أرصدة متاحة"})]})})]})]}),c.data&&c.data.length>0&&e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6",children:[e.jsxs(X,{className:"text-sm sm:text-lg",children:["المكاتب المعتمدة",e.jsx(ie,{variant:"secondary",className:"mr-1 sm:mr-2 text-[8px] sm:text-xs",children:c.data.length})]}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"قائمة بالمكاتب المتاحة للتحويل إليها"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1.5 sm:gap-3",children:c.data.map(m=>e.jsx("div",{className:"p-1.5 sm:p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-[10px] sm:text-sm",children:m.officeName}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:m.agentName}),e.jsxs("p",{className:"text-[8px] sm:text-xs text-muted-foreground",children:[m.city,", ",m.ownerNationality]})]}),e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(uo,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4 text-green-600"})})]})},m.id))})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6",children:[e.jsx(X,{className:"text-sm sm:text-lg",children:"سجل التحويلات"}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"آخر التحويلات المرسلة والمستقبلة"})]}),e.jsx(z,{className:"px-1 sm:px-6 pb-3 sm:pb-6",children:f.isLoading?e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-8 sm:w-8 border-b-2 border-primary mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm",children:"جاري تحميل سجل التحويلات..."})]}):f.data&&f.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"التاريخ"}),e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"المكتب"}),e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"المبلغ"}),e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"النوع"}),e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"الحالة"}),e.jsx(ae,{className:"text-[8px] sm:text-sm",children:"العمليات"})]})}),e.jsx(Qs,{children:f.data.map(m=>e.jsxs(kt,{children:[e.jsx(se,{className:"text-[8px] sm:text-xs",children:p(m.createdAt)}),e.jsx(se,{children:e.jsxs("div",{className:"text-[8px] sm:text-xs",children:[e.jsx("div",{className:"font-medium",children:m.officeName}),e.jsx("div",{className:"text-muted-foreground",children:m.city})]})}),e.jsxs(se,{className:"text-[8px] sm:text-xs font-medium",children:[m.amount," ",m.currency]}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[m.direction==="outgoing"?e.jsx(ux,{className:"h-2 w-2 sm:h-3 sm:w-3 text-red-500"}):e.jsx(Dj,{className:"h-2 w-2 sm:h-3 sm:w-3 text-green-500"}),e.jsx("span",{className:"text-[8px] sm:text-xs",children:m.direction==="outgoing"?"صادر":"وارد"})]})}),e.jsx(se,{children:e.jsx(ie,{variant:m.status==="completed"?"default":m.status==="pending"?"secondary":"destructive",className:"text-[8px] sm:text-xs px-1 py-0 sm:px-2 sm:py-1",children:m.status==="completed"?"مكتمل":m.status==="pending"?"معلق":m.status==="cancelled"?"ملغي":m.status})}),e.jsx(se,{children:m.status==="pending"&&e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>y(m.id),className:"h-5 sm:h-8 text-[8px] sm:text-xs px-1 sm:px-3",children:[e.jsx(Xs,{className:"h-2 w-2 sm:h-3 sm:w-3 ml-0.5 sm:ml-1"}),"إلغاء"]})})]},m.id))})]})}):e.jsxs("div",{className:"text-center py-4 sm:py-8",children:[e.jsx(OU,{className:"h-6 w-6 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground",children:"لا توجد تحويلات بعد"}),e.jsx("p",{className:"text-[9px] sm:text-sm text-muted-foreground",children:"ابدأ بإرسال أول تحويل لك"})]})})]})]})}const xoe=R.object({countryId:R.string().min(1,"يرجى اختيار الدولة"),commissionRate:R.string().min(1,"يرجى إدخال نسبة العمولة").refine(t=>{const s=parseFloat(t);return!isNaN(s)&&s>=0&&s<=100},"نسبة العمولة يجب أن تكون بين 0 و 100")});function poe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(!1),[i,l]=u.useState(null);u.useEffect(()=>{t||s("/auth")},[t,s]);const{data:o=[]}=$e({queryKey:["/api/countries"],queryFn:async()=>await(await ce("GET","/api/countries")).json()}),{data:c=[],isLoading:d}=$e({queryKey:["/api/user-receive-settings"],queryFn:async()=>await(await ce("GET","/api/user-receive-settings")).json()}),f=xs({resolver:ps(xoe),defaultValues:{countryId:"",commissionRate:""}}),x=Ze({mutationFn:async m=>{const g=m.id?`/api/user-receive-settings/${m.id}`:"/api/user-receive-settings",w=m.id?"PUT":"POST";return await(await ce(w,g,{countryId:parseInt(m.countryId),commissionRate:parseFloat(m.commissionRate)})).json()},onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/user-receive-settings"]}),n({title:"نجح الحفظ",description:i?"تم تحديث الإعدادات بنجاح":"تم إضافة الإعدادات بنجاح"}),f.reset(),l(null)},onError:m=>{n({title:"خطأ في الحفظ",description:m.message||"حدث خطأ أثناء حفظ الإعدادات",variant:"destructive"})}}),h=Ze({mutationFn:async m=>await(await ce("DELETE",`/api/user-receive-settings/${m}`)).json(),onSuccess:()=>{Qe.invalidateQueries({queryKey:["/api/user-receive-settings"]}),n({title:"تم الحذف",description:"تم حذف الإعدادات بنجاح"})},onError:m=>{n({title:"خطأ في الحذف",description:m.message||"حدث خطأ أثناء حذف الإعدادات",variant:"destructive"})}}),j=async m=>{a(!0);try{await x.mutateAsync({...m,...i&&{id:i}})}finally{a(!1)}},v=m=>{l(m.id),f.setValue("countryId",m.countryId.toString()),f.setValue("commissionRate",m.commissionRate)},p=()=>{l(null),f.reset()},b=m=>{const g=o.find(w=>w.id===m);return g?g.name:"غير محدد"},y=m=>{const g=o.find(w=>w.id===m);return g?g.currency:""};return t?e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"إعدادات استقبال الحوالات"}),e.jsx("p",{className:"text-gray-600",children:"قم بإعداد الدول التي تستقبل فيها الحوالات ونسب العمولة الخاصة بك"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"h-5 w-5"}),i?"تعديل الإعدادات":"إضافة إعدادات جديدة"]}),e.jsx(Se,{children:"اختر الدولة وحدد نسبة العمولة التي تريد استلامها"})]}),e.jsx(z,{children:e.jsx(Bs,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(j),className:"space-y-4",children:[e.jsx(_e,{control:f.control,name:"countryId",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"الدولة"}),e.jsxs(Nt,{value:m.value,onValueChange:m.onChange,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر الدولة"})})}),e.jsx(wt,{children:o.map(g=>e.jsxs(te,{value:g.id.toString(),children:[g.name," (",g.currency,")"]},g.id))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:f.control,name:"commissionRate",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نسبة العمولة (%)"}),e.jsx(Re,{children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{...m,type:"number",step:"0.01",min:"0",max:"100",placeholder:"مثال: 2.5",className:"pr-8"}),e.jsx(Li,{className:"h-4 w-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{type:"submit",disabled:r,className:"flex-1",children:[r?e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}):i?e.jsx(Wf,{className:"h-4 w-4 ml-2"}):e.jsx(kn,{className:"h-4 w-4 ml-2"}),i?"تحديث":"إضافة"]}),i&&e.jsx(M,{type:"button",variant:"outline",onClick:p,children:"إلغاء"})]})]})})})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"الإعدادات الحالية"}),e.jsx(Se,{children:"الدول ونسب العمولة المحددة حالياً"})]}),e.jsx(z,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ft,{className:"h-8 w-8 animate-spin"})}):c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"لم تقم بإضافة أي إعدادات بعد"}):e.jsx("div",{className:"space-y-3",children:c.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:b(m.countryId)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["العمولة: ",m.commissionRate,"% • العملة: ",y(m.countryId)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:m.isActive?"default":"secondary",children:m.isActive?"نشط":"غير نشط"}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>v(m),children:e.jsx(Wf,{className:"h-4 w-4"})}),e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{size:"sm",variant:"destructive",children:e.jsx(is,{className:"h-4 w-4"})})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد الحذف"}),e.jsxs(Ni,{children:["هل أنت متأكد من حذف إعدادات ",b(m.countryId),"؟ لن تتمكن من التراجع عن هذا الإجراء."]})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>h.mutate(m.id),className:"bg-red-600 hover:bg-red-700",children:"حذف"})]})]})]})]})]},m.id))})})]})]}),e.jsxs(_,{className:"mt-6",children:[e.jsx(q,{children:e.jsx(X,{children:"ملاحظات مهمة"})}),e.jsxs(z,{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:"• نسبة العمولة هي النسبة المئوية التي ستحصل عليها من كل حوالة تستلمها"}),e.jsx("p",{children:"• يمكنك إضافة عدة دول مختلفة بنسب عمولة مختلفة"}),e.jsx("p",{children:"• سيتم عرض إعداداتك في صفحة التحويل بين المكاتب للمرسلين"}),e.jsx("p",{children:"• يمكنك تعديل أو حذف الإعدادات في أي وقت"})]})]})]}):null}const P8=u.createContext(null),goe="BIOBQqLPWUKpu_E8ZEjqdDY4HyaJ5AeE2URlnHyam3ZSFe-BmodrswOM5-mCrwmQrAkIHOPkrubKcBWTBE2_Gr0";function joe(t){const s="=".repeat((4-t.length%4)%4),n=(t+s).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),a=new Uint8Array(r.length);for(let i=0;i<r.length;++i)a[i]=r.charCodeAt(i);return a}function yoe({children:t}){const{toast:s}=lt(),[n,r]=u.useState(!1),[a,i]=u.useState(!1),[l,o]=u.useState("default");u.useEffect(()=>{const h="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;r(h),h&&(o(Notification.permission),c())},[]);const c=async()=>{try{const j=await(await navigator.serviceWorker.ready).pushManager.getSubscription();i(!!j)}catch(h){console.error("خطأ في فحص الاشتراك:",h)}},d=async()=>{if(!n)throw new Error("الإشعارات غير مدعومة في هذا المتصفح");const h=await Notification.requestPermission();return o(h),h==="granted"?s({title:"تم منح الإذن",description:"سيتم إرسال الإشعارات إليك الآن"}):h==="denied"&&s({title:"تم رفض الإذن",description:"لن تتلقى إشعارات الهاتف المحمول",variant:"destructive"}),h},f=async()=>{if(!n)throw new Error("الإشعارات غير مدعومة في هذا المتصفح");if(l!=="granted"&&await d()!=="granted")throw new Error("تم رفض إذن الإشعارات");try{const j=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:joe(goe)}),v=localStorage.getItem("auth_token");if(!(await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json",...v&&{Authorization:`Bearer ${v}`}},body:JSON.stringify(j)})).ok)throw new Error("فشل في حفظ الاشتراك على الخادم");i(!0),s({title:"تم تفعيل الإشعارات",description:"ستتلقى الآن إشعارات على هاتفك المحمول"})}catch(h){throw console.error("خطأ في الاشتراك:",h),s({title:"خطأ في تفعيل الإشعارات",description:h.message,variant:"destructive"}),h}},x=async()=>{if(!n)throw new Error("الإشعارات غير مدعومة في هذا المتصفح");try{const j=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(j){await j.unsubscribe();const v=localStorage.getItem("auth_token");await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json",...v&&{Authorization:`Bearer ${v}`}},body:JSON.stringify(j)})}i(!1),s({title:"تم إلغاء الإشعارات",description:"لن تتلقى المزيد من الإشعارات على هاتفك"})}catch(h){throw console.error("خطأ في إلغاء الاشتراك:",h),s({title:"خطأ في إلغاء الإشعارات",description:h.message,variant:"destructive"}),h}};return e.jsx(P8.Provider,{value:{isSupported:n,isSubscribed:a,permission:l,subscribe:f,unsubscribe:x,requestPermission:d},children:t})}function voe(){const t=u.useContext(P8);if(!t)throw new Error("usePushNotifications must be used within a PushNotificationsProvider");return t}function boe(){const{toast:t}=lt(),[s,n]=u.useState(!1),{isSupported:r,isSubscribed:a,permission:i,subscribe:l,unsubscribe:o,requestPermission:c}=voe(),d=async()=>{n(!0);try{await l()}catch(v){t({title:"خطأ في تفعيل الإشعارات",description:v.message,variant:"destructive"})}finally{n(!1)}},f=async()=>{n(!0);try{await o()}catch(v){t({title:"خطأ في إلغاء الإشعارات",description:v.message,variant:"destructive"})}finally{n(!1)}},x=async()=>{n(!0);try{(await ce("/api/notifications/test","POST")).ok&&t({title:"تم إرسال الإشعار التجريبي",description:"تحقق من إشعارات هاتفك"})}catch(v){t({title:"خطأ في إرسال الإشعار التجريبي",description:v.message,variant:"destructive"})}finally{n(!1)}},h=()=>{switch(i){case"granted":return e.jsx(ie,{variant:"default",className:"bg-green-500",children:"مُسموح"});case"denied":return e.jsx(ie,{variant:"destructive",children:"مرفوض"});default:return e.jsx(ie,{variant:"secondary",children:"غير محدد"})}},j=()=>a?e.jsx(ie,{variant:"default",className:"bg-blue-500",children:"مُفعّل"}):e.jsx(ie,{variant:"outline",children:"غير مُفعّل"});return r?e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-5 w-5"}),"إشعارات الهاتف المحمول"]}),e.jsx(Se,{children:"احصل على إشعارات فورية على هاتفك المحمول عند وصول رسائل أو إشعارات جديدة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"حالة الإذن"}),h()]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"حالة الاشتراك"}),j()]})]}),e.jsxs("div",{className:"space-y-2",children:[i==="default"&&e.jsxs(M,{onClick:c,disabled:s,className:"w-full",children:[e.jsx(pd,{className:"h-4 w-4 ml-2"}),"طلب إذن الإشعارات"]}),i==="granted"&&!a&&e.jsxs(M,{onClick:d,disabled:s,className:"w-full",children:[e.jsx(Sa,{className:"h-4 w-4 ml-2"}),"تفعيل الإشعارات المحمولة"]}),i==="granted"&&a&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{onClick:f,disabled:s,variant:"outline",className:"w-full",children:[e.jsx(N2,{className:"h-4 w-4 ml-2"}),"إلغاء الإشعارات المحمولة"]}),e.jsxs(M,{onClick:x,disabled:s,variant:"secondary",className:"w-full",children:[e.jsx(pd,{className:"h-4 w-4 ml-2"}),"اختبار إشعار تجريبي"]})]}),i==="denied"&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-700",children:"تم رفض إذن الإشعارات. يمكنك تفعيلها من إعدادات المتصفح:"}),e.jsxs("ul",{className:"text-xs text-red-600 mt-2 list-disc list-inside",children:[e.jsx("li",{children:"انقر على أيقونة القفل بجانب عنوان الموقع"}),e.jsx("li",{children:'اختر "السماح" للإشعارات'}),e.jsx("li",{children:"أعد تحميل الصفحة"})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 border-t pt-3",children:[e.jsx("p",{children:"• ستصل الإشعارات حتى لو كان التطبيق مغلقاً"}),e.jsx("p",{children:"• يمكنك إلغاء الاشتراك في أي وقت"}),e.jsx("p",{children:"• الإشعارات آمنة ومشفرة"})]})]})]}):e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(N2,{className:"h-5 w-5"}),"إشعارات الهاتف المحمول"]}),e.jsx(Se,{children:"إعدادات الإشعارات المحمولة للمنصة"})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(_s,{className:"h-5 w-5 text-yellow-600"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"متصفحك لا يدعم إشعارات الهاتف المحمول"})]})})]})}const woe=R.object({fullName:R.string().min(1,"الاسم مطلوب"),email:R.string().email("البريد الإلكتروني غير صحيح"),phone:R.string().optional()}),Noe=R.object({currentPassword:R.string().min(1,"كلمة المرور الحالية مطلوبة"),newPassword:R.string().min(6,"كلمة المرور الجديدة يجب أن تكون 6 أحرف على الأقل"),confirmPassword:R.string().min(1,"تأكيد كلمة المرور مطلوب")}).refine(t=>t.newPassword===t.confirmPassword,{message:"كلمة المرور الجديدة وتأكيد كلمة المرور غير متطابقتين",path:["confirmPassword"]}),Coe=R.object({token:R.string().length(6,"رمز التحقق يجب أن يكون 6 أرقام")}),Moe=R.object({currentPassword:R.string().min(1,"كلمة المرور الحالية مطلوبة"),token:R.string().length(6,"رمز التحقق يجب أن يكون 6 أرقام")});function Zh(){return e.jsx(er,{page:"settings",children:e.jsx(Soe,{})})}function Soe(){const{user:t}=Mt(),{toast:s}=lt(),[,n]=_t(),[r,a]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState(!1);u.useState(!1);const[d,f]=u.useState(!1),[x,h]=u.useState(!1),[j,v]=u.useState(""),[p,b]=u.useState([]),[y,m]=u.useState(""),[g,w]=u.useState([]),[N,k]=u.useState(!1),[L,S]=u.useState({email:!0,push:!0,transfers:!0,marketing:!1}),T=(t==null?void 0:t.type)==="admin",E=!0,$=xs({resolver:ps(woe),defaultValues:{fullName:(t==null?void 0:t.fullName)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""}}),F=xs({resolver:ps(Noe),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),Z=xs({resolver:ps(Coe),defaultValues:{token:""}}),G=xs({resolver:ps(Moe),defaultValues:{currentPassword:"",token:""}}),{data:D,refetch:B}=$e({queryKey:["/api/2fa/status"],queryFn:async()=>{const ne=await ce("/api/2fa/status");if(!ne.ok)throw new Error("فشل في الحصول على حالة المصادقة الثنائية");return ne.json()}}),{data:de,isLoading:U}=$e({queryKey:["/api/user/login-sessions"],queryFn:async()=>{const ne=await ce("/api/user/login-sessions");if(!ne.ok)throw new Error("فشل في جلب جلسات تسجيل الدخول");return ne.json()},enabled:N}),W=Ze({mutationFn:async ne=>await(await ce("PUT","/api/user/profile",ne)).json(),onSuccess:ne=>{Qe.setQueryData(["/api/user"],ne),s({title:"تم التحديث",description:"تم تحديث الملف الشخصي بنجاح"}),a(!1)},onError:ne=>{s({title:"خطأ في التحديث",description:ne.message||"حدث خطأ أثناء التحديث",variant:"destructive"}),a(!1)}}),re=Ze({mutationFn:async ne=>await(await ce("/api/user/change-password","PUT",ne)).json(),onSuccess:()=>{s({title:"تم التحديث",description:"تم تغيير كلمة المرور بنجاح"}),c(!1),l(!1),F.reset()},onError:ne=>{s({title:"خطأ",description:ne.message||"حدث خطأ أثناء تغيير كلمة المرور",variant:"destructive"}),c(!1)}}),we=Ze({mutationFn:async()=>{const ne=await ce("/api/2fa/setup","POST");if(!ne.ok)throw new Error("فشل في إعداد المصادقة الثنائية");return ne.json()},onSuccess:ne=>{v(ne.qrCode),b(ne.backupCodes),m(ne.manualEntryKey),w(new Array(ne.backupCodes.length).fill(!1)),f(!0)},onError:ne=>{s({title:"خطأ",description:ne.message||"حدث خطأ أثناء إعداد المصادقة الثنائية",variant:"destructive"})}}),be=Ze({mutationFn:async ne=>{const ke=await ce("/api/2fa/enable","POST",ne);if(!ke.ok)throw new Error("رمز التحقق غير صحيح");return ke.json()},onSuccess:()=>{s({title:"تم التفعيل",description:"تم تفعيل المصادقة الثنائية بنجاح"}),f(!1),Z.reset(),B()},onError:ne=>{s({title:"خطأ",description:ne.message||"رمز التحقق غير صحيح",variant:"destructive"})}}),J=Ze({mutationFn:async ne=>{const ke=await ce("/api/2fa/disable","POST",ne);if(!ke.ok)throw new Error("فشل في إلغاء تفعيل المصادقة الثنائية");return ke.json()},onSuccess:()=>{s({title:"تم الإلغاء",description:"تم إلغاء تفعيل المصادقة الثنائية بنجاح"}),h(!1),G.reset(),B()},onError:ne=>{s({title:"خطأ",description:ne.message||"حدث خطأ أثناء إلغاء تفعيل المصادقة الثنائية",variant:"destructive"})}}),Fe=async ne=>{if(!T){s({title:"غير مصرح",description:"لا يمكنك تعديل المعلومات الشخصية. فقط المدير العام يمكنه ذلك.",variant:"destructive"});return}a(!0),W.mutate(ne)},Oe=async ne=>{c(!0),re.mutate(ne)},Ve=(ne,ke)=>{S(tt=>({...tt,[ne]:ke}))},Ne=()=>{we.mutate()},qe=ne=>{be.mutate(ne)},ve=ne=>{J.mutate(ne)},Ee=async(ne,ke)=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(ne);else{const tt=document.createElement("textarea");tt.value=ne,tt.style.position="fixed",tt.style.left="-999999px",tt.style.top="-999999px",document.body.appendChild(tt),tt.focus(),tt.select();const xt=document.execCommand("copy");if(document.body.removeChild(tt),!xt)throw new Error("فشل في النسخ باستخدام execCommand")}ke!==void 0&&w(tt=>{const xt=[...tt];return xt[ke]=!0,setTimeout(()=>{w(Q=>{const oe=[...Q];return oe[ke]=!1,oe})},2e3),xt}),s({title:"تم النسخ",description:"تم نسخ النص إلى الحافظة"})}catch(tt){console.error("خطأ في النسخ:",tt),s({title:"خطأ في النسخ",description:"لم نتمكن من نسخ النص تلقائياً. انسخ النص يدوياً من الحقل",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-3 sm:px-6 py-3 sm:py-8 max-w-4xl",children:[e.jsx("div",{className:"mb-3 sm:mb-6",children:e.jsxs(M,{variant:"outline",onClick:()=>n("/dashboard"),className:"flex items-center gap-2 mb-2 sm:mb-4 text-xs sm:text-sm h-8 sm:h-10",style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",padding:"6px 12px",borderRadius:"6px"},children:[e.jsx(hl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"العودة إلى لوحة التحكم"]})}),e.jsxs("div",{className:"text-center mb-4 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-3xl font-bold mb-1 sm:mb-2",children:"الإعدادات"}),e.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm",children:"إدارة معلومات الحساب والتفضيلات"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs(_,{children:[e.jsxs(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(X,{className:"text-sm sm:text-base",children:"معلومات الحساب"})]}),e.jsx(Se,{className:"text-xs sm:text-sm",children:"تحديث معلومات الملف الشخصي"})]}),e.jsxs(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[!T&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-yellow-600"}),e.jsx("p",{className:"text-xs sm:text-sm text-yellow-800",children:"يمكن للمدير العام فقط تعديل المعلومات الشخصية"})]})}),e.jsx(Bs,{...$,children:e.jsxs("form",{onSubmit:$.handleSubmit(Fe),className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 sm:gap-4",children:[e.jsx(_e,{control:$.control,name:"fullName",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-xs sm:text-sm",children:"الاسم الكامل"}),e.jsx(Re,{children:e.jsx(pe,{...ne,disabled:r||!T,className:"text-xs sm:text-sm h-8 sm:h-10"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:$.control,name:"email",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-xs sm:text-sm",children:"البريد الإلكتروني"}),e.jsx(Re,{children:e.jsx(pe,{...ne,type:"email",disabled:r||!T,className:"text-xs sm:text-sm h-8 sm:h-10"})}),e.jsx(He,{})]})})]}),e.jsx(_e,{control:$.control,name:"phone",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-xs sm:text-sm",children:"رقم الهاتف"}),e.jsx(Re,{children:e.jsx(pe,{...ne,disabled:r||!T,className:"text-xs sm:text-sm h-8 sm:h-10"})}),e.jsx(He,{})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{type:"submit",disabled:r||!T,className:"text-xs sm:text-sm h-8 sm:h-10 px-3 sm:px-4",children:r?"جاري التحديث...":"تحديث المعلومات"})})]})})]})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(X,{className:"text-sm sm:text-base",children:"معلومات الحساب"})]})}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"رقم الحساب"}),e.jsx(ie,{variant:"outline",className:"text-xs px-2 py-1",children:t==null?void 0:t.accountNumber})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"نوع الحساب"}),e.jsx(ie,{variant:(t==null?void 0:t.type)==="admin"?"default":(t==null?void 0:t.type)==="agent"?"secondary":"outline",className:"text-xs px-2 py-1",children:(t==null?void 0:t.type)==="admin"?"مدير":(t==null?void 0:t.type)==="agent"?"وكيل":"مستخدم"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"حالة التوثيق"}),e.jsx(ie,{variant:t!=null&&t.verified?"default":"destructive",className:"text-xs px-2 py-1",children:t!=null&&t.verified?"موثق":"غير موثق"})]})]})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(X,{className:"text-sm sm:text-base",children:"إعدادات الإشعارات"})]}),e.jsx(Se,{className:"text-xs sm:text-sm",children:"تخصيص تفضيلات الإشعارات"})]}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{htmlFor:"email-notifications",className:"text-xs sm:text-sm",children:"إشعارات البريد الإلكتروني"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"تلقي الإشعارات عبر البريد الإلكتروني"})]}),e.jsx(ji,{id:"email-notifications",checked:L.email,onCheckedChange:ne=>Ve("email",ne),className:"scale-75 sm:scale-100"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{htmlFor:"push-notifications",className:"text-xs sm:text-sm",children:"إشعارات فورية"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"تلقي الإشعارات الفورية في المتصفح"})]}),e.jsx(ji,{id:"push-notifications",checked:L.push,onCheckedChange:ne=>Ve("push",ne),className:"scale-75 sm:scale-100"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{htmlFor:"transfer-notifications",className:"text-xs sm:text-sm",children:"إشعارات التحويلات"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"تلقي إشعارات عند التحويلات المالية"})]}),e.jsx(ji,{id:"transfer-notifications",checked:L.transfers,onCheckedChange:ne=>Ve("transfers",ne),className:"scale-75 sm:scale-100"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{htmlFor:"marketing-notifications",className:"text-xs sm:text-sm",children:"إشعارات تسويقية"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"تلقي إشعارات حول العروض والخدمات الجديدة"})]}),e.jsx(ji,{id:"marketing-notifications",checked:L.marketing,onCheckedChange:ne=>Ve("marketing",ne),className:"scale-75 sm:scale-100"})]})]})})]}),e.jsx(boe,{}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(X,{className:"text-sm sm:text-base",children:"إعدادات التطبيق"})]})}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"اللغة"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"لغة واجهة التطبيق"})]}),e.jsx(ie,{variant:"outline",className:"text-xs px-2 py-1",children:"العربية"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"المنطقة الزمنية"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"المنطقة الزمنية المحلية"})]}),e.jsx(ie,{variant:"outline",className:"text-xs px-2 py-1",children:"طرابلس (GMT+2)"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"العملة الافتراضية"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"العملة المعروضة افتراضياً"})]}),e.jsx(ie,{variant:"outline",className:"text-xs px-2 py-1",children:"الدينار الليبي (LYD)"})]})]})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(X,{className:"text-sm sm:text-base",children:"الأمان والخصوصية"})]})}),e.jsx(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs(Ht,{open:i,onOpenChange:l,children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full justify-start text-xs sm:text-sm h-8 sm:h-10",children:[e.jsx(fx,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"}),"تغيير كلمة المرور"]})}),e.jsxs($t,{className:"sm:max-w-md",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تغيير كلمة المرور"}),e.jsx(ls,{children:"أدخل كلمة المرور الحالية وكلمة المرور الجديدة"})]}),e.jsx(Bs,{...F,children:e.jsxs("form",{onSubmit:F.handleSubmit(Oe),className:"space-y-4",children:[e.jsx(_e,{control:F.control,name:"currentPassword",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-sm",children:"كلمة المرور الحالية"}),e.jsx(Re,{children:e.jsx(pe,{...ne,type:"password",disabled:o||!E,className:"text-sm","data-testid":"input-current-password"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:F.control,name:"newPassword",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-sm",children:"كلمة المرور الجديدة"}),e.jsx(Re,{children:e.jsx(pe,{...ne,type:"password",disabled:o||!E,className:"text-sm","data-testid":"input-new-password"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:F.control,name:"confirmPassword",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-sm",children:"تأكيد كلمة المرور الجديدة"}),e.jsx(Re,{children:e.jsx(pe,{...ne,type:"password",disabled:o||!E,className:"text-sm","data-testid":"input-confirm-password"})}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>{l(!1),F.reset()},className:"flex-1",disabled:o||!E,"data-testid":"button-cancel-password",children:"إلغاء"}),e.jsx(M,{type:"submit",disabled:o||!E,className:"flex-1","data-testid":"button-submit-password",children:o?"جاري التحديث...":"تغيير كلمة المرور"})]})]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pd,{className:"h-4 w-4"}),e.jsx(Ce,{className:"text-xs sm:text-sm font-medium",children:"المصادقة الثنائية"})]}),e.jsx(ie,{variant:D!=null&&D.isEnabled?"default":"outline",className:"text-xs",children:D!=null&&D.isEnabled?"مفعلة":"معطلة"})]}),D!=null&&D.isEnabled?e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>h(!0),className:"w-full justify-start text-xs sm:text-sm h-8 sm:h-10","data-testid":"button-disable-2fa",children:[e.jsx(Zt,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"}),"إلغاء تفعيل المصادقة الثنائية"]}):e.jsxs(M,{variant:"outline",onClick:Ne,disabled:we.isPending,className:"w-full justify-start text-xs sm:text-sm h-8 sm:h-10","data-testid":"button-setup-2fa",children:[e.jsx(pd,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"}),we.isPending?"جاري الإعداد...":"تفعيل المصادقة الثنائية"]})]}),e.jsxs(M,{variant:"outline",onClick:()=>k(!0),className:"w-full justify-start text-xs sm:text-sm h-8 sm:h-10","data-testid":"button-view-login-sessions",children:[e.jsx(Zt,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2"}),"عرض جلسات تسجيل الدخول"]}),e.jsx(fs,{}),e.jsx(M,{variant:"destructive",className:"w-full text-xs sm:text-sm h-8 sm:h-10",children:"حذف الحساب"})]})})]})]}),e.jsx(Ht,{open:d,onOpenChange:f,children:e.jsxs($t,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(pd,{className:"h-5 w-5"}),"إعداد المصادقة الثنائية"]}),e.jsx(ls,{children:"اتبع الخطوات التالية لتفعيل المصادقة الثنائية على حسابك"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("h3",{className:"font-semibold",children:"امسح رمز QR باستخدام تطبيق المصادقة"})]}),j&&e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsx("img",{src:j,alt:"QR Code للمصادقة الثنائية",className:"w-48 h-48"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"أو أدخل المفتاح يدوياً:"}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-2 rounded font-mono text-sm",children:[e.jsx("span",{className:"break-all",children:y}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>Ee(y),className:"h-8 w-8 p-0",children:e.jsx(hc,{className:"h-4 w-4"})})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("h3",{className:"font-semibold",children:"أدخل رمز التحقق من التطبيق"})]}),e.jsx(Bs,{...Z,children:e.jsxs("form",{onSubmit:Z.handleSubmit(qe),className:"space-y-4",children:[e.jsx(_e,{control:Z.control,name:"token",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رمز التحقق (6 أرقام)"}),e.jsx(Re,{children:e.jsx(pe,{...ne,placeholder:"123456",maxLength:6,className:"text-center font-mono text-lg tracking-widest",disabled:be.isPending,"data-testid":"input-2fa-token"})}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>{f(!1),Z.reset()},className:"flex-1",disabled:be.isPending,children:"إلغاء"}),e.jsx(M,{type:"submit",disabled:be.isPending,className:"flex-1","data-testid":"button-confirm-2fa",children:be.isPending?"جاري التفعيل...":"تفعيل المصادقة الثنائية"})]})]})})]}),p.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(os,{children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"رموز النسخ الاحتياطي"}),e.jsx(cs,{children:"احفظ هذه الرموز في مكان آمن. يمكنك استخدامها للدخول إذا فقدت هاتفك."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map((ne,ke)=>e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-2 rounded font-mono text-sm",children:[e.jsx("span",{className:"flex-1",children:ne}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>Ee(ne,ke),className:"h-6 w-6 p-0",children:g[ke]?e.jsx(vl,{className:"h-3 w-3 text-green-600"}):e.jsx(hc,{className:"h-3 w-3"})})]},ke))})]})]})]})}),e.jsx(Ht,{open:x,onOpenChange:h,children:e.jsxs($t,{className:"sm:max-w-md",children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-5 w-5 text-destructive"}),"إلغاء تفعيل المصادقة الثنائية"]}),e.jsx(ls,{children:"أدخل كلمة المرور الحالية ورمز التحقق لإلغاء تفعيل المصادقة الثنائية"})]}),e.jsx(Bs,{...G,children:e.jsxs("form",{onSubmit:G.handleSubmit(ve),className:"space-y-4",children:[e.jsx(_e,{control:G.control,name:"currentPassword",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"كلمة المرور الحالية"}),e.jsx(Re,{children:e.jsx(pe,{...ne,type:"password",disabled:J.isPending,"data-testid":"input-2fa-disable-password"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:G.control,name:"token",render:({field:ne})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"رمز التحقق من التطبيق أو رمز النسخ الاحتياطي"}),e.jsx(Re,{children:e.jsx(pe,{...ne,placeholder:"123456",className:"text-center font-mono",disabled:J.isPending,"data-testid":"input-2fa-disable-token"})}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>{h(!1),G.reset()},className:"flex-1",disabled:J.isPending,children:"إلغاء"}),e.jsx(M,{type:"submit",variant:"destructive",disabled:J.isPending,className:"flex-1","data-testid":"button-confirm-disable-2fa",children:J.isPending?"جاري الإلغاء...":"إلغاء التفعيل"})]})]})})]})}),e.jsx(Ht,{open:N,onOpenChange:k,children:e.jsxs($t,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"جلسات تسجيل الدخول"]}),e.jsx(ls,{children:"عرض آخر محاولات تسجيل الدخول لحسابك"})]}),e.jsx("div",{className:"space-y-4",children:U?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"جاري تحميل جلسات تسجيل الدخول..."})]}):de&&de.sessions&&de.sessions.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:de.successfulLogins}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"نجح"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:de.failedAttempts}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"فشل"})]}),e.jsxs("div",{className:"text-center md:col-span-1 col-span-2",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:de.totalCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"إجمالي المحاولات"})]})]}),e.jsx("div",{className:"space-y-2",children:de.sessions.map((ne,ke)=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${ne.success?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"font-medium text-sm",children:ne.success?"✅ تسجيل دخول ناجح":"❌ محاولة فاشلة"}),ne.isCurrent&&e.jsx(ie,{variant:"default",className:"text-xs",children:"الجلسة الحالية"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(ne.timestamp).toLocaleString("ar-EG")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"الموقع:"})," ",ne.location.city,", ",ne.location.country]}),e.jsxs("div",{children:[e.jsx("strong",{children:"عنوان IP:"})," ",ne.ipAddress]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("strong",{children:"الجهاز:"})," ",ne.device.platform||"غير معروف"]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 truncate",children:[e.jsx("strong",{children:"المتصفح:"}),e.jsx("span",{className:"text-xs ml-1",children:ne.device.userAgent.length>100?ne.device.userAgent.substring(0,100)+"...":ne.device.userAgent})]})]})]},ne.id||ke))}),de.lastLogin&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground pt-4 border-t",children:["آخر تسجيل دخول ناجح: ",new Date(de.lastLogin).toLocaleString("ar-EG")]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Zt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد جلسات تسجيل دخول بعد"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(M,{variant:"outline",onClick:()=>k(!1),children:"إغلاق"})})]})})]})}var Iw="Collapsible",[koe,_8]=Tn(Iw),[Loe,Aw]=koe(Iw),R8=u.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c=!1,d]=Yr({prop:r,defaultProp:a,onChange:l});return e.jsx(Loe,{scope:n,disabled:i,contentId:na(),open:c,onOpenToggle:u.useCallback(()=>d(f=>!f),[d]),children:e.jsx(it.div,{"data-state":Pw(c),"data-disabled":i?"":void 0,...o,ref:s})})});R8.displayName=Iw;var O8="CollapsibleTrigger",z8=u.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,a=Aw(O8,n);return e.jsx(it.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Pw(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:s,onClick:Ge(t.onClick,a.onOpenToggle)})});z8.displayName=O8;var Dw="CollapsibleContent",F8=u.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Aw(Dw,t.__scopeCollapsible);return e.jsx(Qn,{present:n||a.open,children:({present:i})=>e.jsx(Toe,{...r,ref:s,present:i})})});F8.displayName=Dw;var Toe=u.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=t,l=Aw(Dw,n),[o,c]=u.useState(r),d=u.useRef(null),f=Rt(s,d),x=u.useRef(0),h=x.current,j=u.useRef(0),v=j.current,p=l.open||o,b=u.useRef(p),y=u.useRef(void 0);return u.useEffect(()=>{const m=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(m)},[]),jn(()=>{const m=d.current;if(m){y.current=y.current||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const g=m.getBoundingClientRect();x.current=g.height,j.current=g.width,b.current||(m.style.transitionDuration=y.current.transitionDuration,m.style.animationName=y.current.animationName),c(r)}},[l.open,r]),e.jsx(it.div,{"data-state":Pw(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!p,...i,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:p&&a})});function Pw(t){return t?"open":"closed"}var Eoe=R8,Ioe=z8,Aoe=F8,wl="Accordion",Doe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[_w,Poe,_oe]=Pm(wl),[ag,Wce]=Tn(wl,[_oe,_8]),Rw=_8(),U8=gt.forwardRef((t,s)=>{const{type:n,...r}=t,a=r,i=r;return e.jsx(_w.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?e.jsx(Foe,{...i,ref:s}):e.jsx(zoe,{...a,ref:s})})});U8.displayName=wl;var[$8,Roe]=ag(wl),[B8,Ooe]=ag(wl,{collapsible:!1}),zoe=gt.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:i=!1,...l}=t,[o,c]=Yr({prop:n,defaultProp:r,onChange:a});return e.jsx($8,{scope:t.__scopeAccordion,value:o?[o]:[],onItemOpen:c,onItemClose:gt.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(B8,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(V8,{...l,ref:s})})})}),Foe=gt.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...i}=t,[l=[],o]=Yr({prop:n,defaultProp:r,onChange:a}),c=gt.useCallback(f=>o((x=[])=>[...x,f]),[o]),d=gt.useCallback(f=>o((x=[])=>x.filter(h=>h!==f)),[o]);return e.jsx($8,{scope:t.__scopeAccordion,value:l,onItemOpen:c,onItemClose:d,children:e.jsx(B8,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(V8,{...i,ref:s})})})}),[Uoe,ig]=ag(wl),V8=gt.forwardRef((t,s)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:i="vertical",...l}=t,o=gt.useRef(null),c=Rt(o,s),d=Poe(n),x=Lc(a)==="ltr",h=Ge(t.onKeyDown,j=>{var S;if(!Doe.includes(j.key))return;const v=j.target,p=d().filter(T=>{var E;return!((E=T.ref.current)!=null&&E.disabled)}),b=p.findIndex(T=>T.ref.current===v),y=p.length;if(b===-1)return;j.preventDefault();let m=b;const g=0,w=y-1,N=()=>{m=b+1,m>w&&(m=g)},k=()=>{m=b-1,m<g&&(m=w)};switch(j.key){case"Home":m=g;break;case"End":m=w;break;case"ArrowRight":i==="horizontal"&&(x?N():k());break;case"ArrowDown":i==="vertical"&&N();break;case"ArrowLeft":i==="horizontal"&&(x?k():N());break;case"ArrowUp":i==="vertical"&&k();break}const L=m%y;(S=p[L].ref.current)==null||S.focus()});return e.jsx(Uoe,{scope:n,disabled:r,direction:a,orientation:i,children:e.jsx(_w.Slot,{scope:n,children:e.jsx(it.div,{...l,"data-orientation":i,ref:c,onKeyDown:r?void 0:h})})})}),Yp="AccordionItem",[$oe,Ow]=ag(Yp),G8=gt.forwardRef((t,s)=>{const{__scopeAccordion:n,value:r,...a}=t,i=ig(Yp,n),l=Roe(Yp,n),o=Rw(n),c=na(),d=r&&l.value.includes(r)||!1,f=i.disabled||t.disabled;return e.jsx($oe,{scope:n,open:d,disabled:f,triggerId:c,children:e.jsx(Eoe,{"data-orientation":i.orientation,"data-state":J8(d),...o,...a,ref:s,disabled:f,open:d,onOpenChange:x=>{x?l.onItemOpen(r):l.onItemClose(r)}})})});G8.displayName=Yp;var Y8="AccordionHeader",Q8=gt.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=ig(wl,n),i=Ow(Y8,n);return e.jsx(it.h3,{"data-orientation":a.orientation,"data-state":J8(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:s})});Q8.displayName=Y8;var Ey="AccordionTrigger",H8=gt.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=ig(wl,n),i=Ow(Ey,n),l=Ooe(Ey,n),o=Rw(n);return e.jsx(_w.ItemSlot,{scope:n,children:e.jsx(Ioe,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...o,...r,ref:s})})});H8.displayName=Ey;var W8="AccordionContent",Z8=gt.forwardRef((t,s)=>{const{__scopeAccordion:n,...r}=t,a=ig(wl,n),i=Ow(W8,n),l=Rw(n);return e.jsx(Aoe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...l,...r,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Z8.displayName=W8;function J8(t){return t?"open":"closed"}var Boe=U8,Voe=G8,Goe=Q8,q8=H8,K8=Z8;const Ao=Boe,At=u.forwardRef(({className:t,...s},n)=>e.jsx(Voe,{ref:n,className:Te("border-b",t),...s}));At.displayName="AccordionItem";const Dt=u.forwardRef(({className:t,children:s,...n},r)=>e.jsx(Goe,{className:"flex",children:e.jsxs(q8,{ref:r,className:Te("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[s,e.jsx(m0,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Dt.displayName=q8.displayName;const Pt=u.forwardRef(({className:t,children:s,...n},r)=>e.jsx(K8,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:e.jsx("div",{className:Te("pb-4 pt-0",t),children:s})}));Pt.displayName=K8.displayName;const Yoe=R.object({name:R.string().min(2,"الاسم مطلوب"),email:R.string().email("البريد الإلكتروني غير صحيح"),subject:R.string().min(5,"الموضوع مطلوب"),message:R.string().min(20,"الرسالة يجب أن تكون أكثر من 20 حرف"),priority:R.enum(["low","medium","high"])});function Qoe(){return e.jsx(er,{page:"support",children:e.jsx(Hoe,{})})}function Hoe(){const{toast:t}=lt(),[s,n]=u.useState(!1),[r,a]=u.useState(null),i=xs({resolver:ps(Yoe),defaultValues:{name:"",email:"",subject:"",message:"",priority:"medium"}}),l=async o=>{n(!0);try{await new Promise(c=>setTimeout(c,1e3)),t({title:"تم إرسال طلب الدعم",description:"سنتواصل معك خلال 24 ساعة"}),i.reset()}catch{t({title:"خطأ في الإرسال",description:"حدث خطأ أثناء إرسال طلب الدعم",variant:"destructive"})}finally{n(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(yn,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"مركز المساعدة والدعم"}),e.jsx("p",{className:"text-muted-foreground",children:"نحن هنا لمساعدتك في جميع استفساراتك ومشاكلك التقنية"})]}),e.jsx("div",{})]}),e.jsxs(cr,{defaultValue:"faq",className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ot,{value:"faq",className:"flex items-center gap-2",children:[e.jsx(_l,{className:"h-4 w-4"}),"الأسئلة الشائعة"]}),e.jsxs(Ot,{value:"contact",className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),"تواصل معنا"]}),e.jsxs(Ot,{value:"guides",className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-4 w-4"}),"أدلة الاستخدام"]}),e.jsxs(Ot,{value:"status",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"حالة النظام"]})]}),e.jsx(Kt,{value:"faq",className:"mt-6",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-right",children:"الأسئلة الأكثر شيوعاً"}),e.jsx(Se,{className:"text-right",children:"إجابات للأسئلة التي يطرحها المستخدمون بكثرة"})]}),e.jsx(z,{children:e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"account",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"كيف أقوم بإنشاء حساب جديد؟"]})}),e.jsx(Pt,{className:"text-right",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:'1. اضغط على زر "إنشاء حساب" في الصفحة الرئيسية'}),e.jsx("p",{children:"2. أدخل بياناتك الشخصية (الاسم، البريد الإلكتروني، كلمة المرور)"}),e.jsx("p",{children:"3. تحقق من بريدك الإلكتروني وفعل الحساب"}),e.jsx("p",{children:"4. ابدأ باستخدام جميع خدمات المنصة"})]})})]}),e.jsxs(At,{value:"transfers",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-4 w-4"}),"كيف أقوم بإرسال حوالة؟"]})}),e.jsx(Pt,{className:"text-right",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"للتحويل الداخلي:"})}),e.jsx("p",{children:'1. اذهب إلى صفحة "التحويل الداخلي"'}),e.jsx("p",{children:"2. أدخل رقم حساب المستلم والمبلغ"}),e.jsx("p",{children:'3. تأكد من البيانات واضغط "إرسال"'}),e.jsx("p",{className:"mt-4",children:e.jsx("strong",{children:"لحوالات بين المكاتب:"})}),e.jsx("p",{children:'1. اذهب إلى "التحويل بين المكاتب"'}),e.jsx("p",{children:"2. اختر الدولة والمكتب المستلم"}),e.jsx("p",{children:"3. أدخل بيانات المستلم والمبلغ"}),e.jsx("p",{children:"4. احفظ رمز التحويل لإعطائه للمستلم"})]})})]}),e.jsxs(At,{value:"security",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),"كيف أضمن أمان حسابي؟"]})}),e.jsx(Pt,{className:"text-right",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"• استخدم كلمة مرور قوية ومعقدة"}),e.jsx("p",{children:"• لا تشارك بيانات دخولك مع أي شخص"}),e.jsx("p",{children:"• تأكد من تسجيل الخروج بعد الانتهاء"}),e.jsx("p",{children:"• راقب رصيدك ومعاملاتك بانتظام"}),e.jsx("p",{children:"• تواصل معنا فوراً في حالة أي نشاط مشبوه"})]})})]}),e.jsxs(At,{value:"fees",children:[e.jsx(Dt,{className:"text-right",children:"ما هي رسوم التحويلات؟"}),e.jsx(Pt,{className:"text-right",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"التحويل الداخلي:"})," 1% من المبلغ (الحد الأدنى 0.5 د.ل)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"التحويل بين المدن:"})," حسب شرائح المبلغ والمسافة"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"التحويل بين المكاتب:"})," حسب الدولة والمكتب المستلم"]}),e.jsx("p",{children:"يتم عرض الرسوم بوضوح قبل تأكيد أي معاملة"})]})})]}),e.jsxs(At,{value:"receive",children:[e.jsx(Dt,{className:"text-right",children:"كيف أستلم حوالة مرسلة إلي؟"}),e.jsx(Pt,{className:"text-right",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"للتحويل الداخلي:"})," يتم إضافة المبلغ تلقائياً لرصيدك"]}),e.jsx("p",{className:"mt-4",children:e.jsx("strong",{children:"لحوالات بين المكاتب:"})}),e.jsx("p",{children:"1. اذهب إلى أقرب مكتب معتمد"}),e.jsx("p",{children:"2. اعطِ رمز التحويل المرسل من قبل المرسل"}),e.jsx("p",{children:"3. أظهر هويتك الشخصية"}),e.jsx("p",{children:"4. استلم المبلغ بعد التحقق"})]})})]})]})})]})}),e.jsx(Kt,{value:"contact",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-right",children:"تواصل معنا"}),e.jsx(Se,{className:"text-right",children:"أرسل لنا رسالة وسنرد عليك في أقرب وقت"})]}),e.jsx(z,{children:e.jsx(Bs,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(_e,{control:i.control,name:"name",render:({field:o})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-right block",children:"الاسم الكامل"}),e.jsx(Re,{children:e.jsx(pe,{...o,className:"text-right"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"email",render:({field:o})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-right block",children:"البريد الإلكتروني"}),e.jsx(Re,{children:e.jsx(pe,{...o,type:"email",className:"text-right"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"priority",render:({field:o})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-right block",children:"أولوية الطلب"}),e.jsx(Re,{children:e.jsxs("select",{...o,className:"w-full p-2 border rounded-md text-right",children:[e.jsx("option",{value:"low",children:"منخفضة"}),e.jsx("option",{value:"medium",children:"متوسطة"}),e.jsx("option",{value:"high",children:"عالية"})]})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"subject",render:({field:o})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-right block",children:"الموضوع"}),e.jsx(Re,{children:e.jsx(pe,{...o,className:"text-right"})}),e.jsx(He,{})]})}),e.jsx(_e,{control:i.control,name:"message",render:({field:o})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-right block",children:"الرسالة"}),e.jsx(Re,{children:e.jsx(Un,{...o,className:"text-right min-h-[120px]",placeholder:"اكتب رسالتك هنا..."})}),e.jsx(He,{})]})}),e.jsx(M,{type:"submit",className:"w-full",disabled:s,children:s?"جاري الإرسال...":"إرسال الطلب"})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{className:"text-right",children:"معلومات التواصل"})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"الهاتف"}),e.jsx("p",{className:"text-muted-foreground",children:"+218 91 234 5678"})]}),e.jsx(h0,{className:"h-5 w-5 text-blue-600"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"البريد الإلكتروني"}),e.jsx("p",{className:"text-muted-foreground",children:"support@exchange.ly"})]}),e.jsx(Oj,{className:"h-5 w-5 text-blue-600"})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"ساعات العمل"}),e.jsx("p",{className:"text-muted-foreground",children:"الأحد - الخميس: 8:00 - 17:00"}),e.jsx("p",{className:"text-muted-foreground",children:"الجمعة - السبت: 9:00 - 15:00"})]}),e.jsx(la,{className:"h-5 w-5 text-blue-600"})]})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{className:"text-right",children:"أولوية الاستجابة"})}),e.jsxs(z,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{variant:"destructive",children:"عالية"}),e.jsx("span",{className:"text-sm",children:"خلال ساعتين"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{variant:"secondary",children:"متوسطة"}),e.jsx("span",{className:"text-sm",children:"خلال 8 ساعات"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{variant:"outline",children:"منخفضة"}),e.jsx("span",{className:"text-sm",children:"خلال 24 ساعة"})]})]})]})]})]})}),e.jsx(Kt,{value:"guides",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("beginner-guide"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"دليل المبتدئين"}),e.jsx(js,{className:"h-5 w-5 text-blue-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"تعلم كيفية استخدام المنصة من البداية"})})]}),e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("transfers"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"إدارة التحويلات"}),e.jsx(Vn,{className:"h-5 w-5 text-green-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"دليل شامل لجميع أنواع التحويلات"})})]}),e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("security"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"الأمان والحماية"}),e.jsx(Zt,{className:"h-5 w-5 text-red-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"كيفية حماية حسابك وبياناتك"})})]}),e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("account-settings"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"إعدادات الحساب"}),e.jsx(vs,{className:"h-5 w-5 text-purple-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"تخصيص حسابك وإعداداتك الشخصية"})})]}),e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("faq"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"الأسئلة الشائعة"}),e.jsx(_l,{className:"h-5 w-5 text-orange-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"إجابات للاستفسارات الأكثر شيوعاً"})})]}),e.jsxs(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a("troubleshooting"),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(X,{className:"text-right",children:"استكشاف الأخطاء"}),e.jsx(_s,{className:"h-5 w-5 text-yellow-600"})]})}),e.jsx(z,{children:e.jsx("p",{className:"text-right text-sm text-muted-foreground",children:"حل المشاكل الشائعة بنفسك"})})]})]})}),e.jsx(Kt,{value:"status",className:"mt-6",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-right",children:"حالة أنظمة المنصة"}),e.jsx(Se,{className:"text-right",children:"مراقبة حالة جميع الخدمات في الوقت الفعلي"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),e.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:"يعمل بشكل طبيعي"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"نظام التحويلات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر تحديث: منذ دقيقتين"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),e.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:"يعمل بشكل طبيعي"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"نظام المصادقة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر تحديث: منذ 5 دقائق"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),e.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:"يعمل بشكل طبيعي"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"نظام المحادثات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر تحديث: منذ دقيقة"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),e.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:"يعمل بشكل طبيعي"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:"قاعدة البيانات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر تحديث: منذ 3 دقائق"})]})]}),e.jsx(fs,{}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["جميع الأنظمة تعمل بكفاءة عالية • آخر فحص: ",new Date().toLocaleString("ar-LY")]})})]})]})})]}),r==="beginner-guide"&&e.jsxs(_,{className:"mt-6 border-2 border-blue-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"دليل المبتدئين"}),e.jsx(js,{className:"h-6 w-6 text-blue-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2 text-right",children:"مرحباً بك في مكتب الصرافة!"}),e.jsx("p",{className:"text-sm text-blue-800 text-right",children:"هذا الدليل سيساعدك على فهم كيفية استخدام المنصة خطوة بخطوة. نحن هنا لنجعل تجربتك سهلة وآمنة."})]}),e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"getting-started",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"البدء في استخدام المنصة"}),e.jsx(js,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"الخطوات الأولى:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"1. تم إنشاء حسابك وحصلت على رقم حساب فريد (يبدأ بـ 33003...)"}),e.jsx("li",{children:"2. تأكد من حفظ رقم حسابك في مكان آمن"}),e.jsx("li",{children:"3. استكشف لوحة التحكم الرئيسية لفهم الخيارات المتاحة"}),e.jsx("li",{children:"4. راجع رصيدك الحالي في العملات المختلفة"}),e.jsx("li",{children:"5. ابدأ بعملية تحويل تجريبية بسيطة"})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 نصيحة: احتفظ برقم حسابك آمناً - ستحتاجه لاستقبال التحويلات"})})]})})]}),e.jsxs(At,{value:"understanding-interface",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"فهم واجهة المستخدم"}),e.jsx(vs,{className:"h-4 w-4 text-purple-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"أجزاء الواجهة الرئيسية:"}),e.jsxs("div",{className:"space-y-2 text-sm text-purple-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"الشريط الجانبي:"}),e.jsx("span",{children:" يحتوي على جميع الصفحات والخدمات"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"الرصيد:"}),e.jsx("span",{children:" يعرض أرصدتك في العملات المختلفة"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"الإشعارات:"}),e.jsx("span",{children:" تنبهك للمعاملات والأحداث المهمة"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المحادثات:"}),e.jsx("span",{children:" للتواصل مع المستخدمين الآخرين"})]})]})]})})]}),e.jsxs(At,{value:"first-transfer",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"إجراء أول تحويل"}),e.jsx(Vn,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"خطوات التحويل الأول:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-green-800",children:[e.jsx("li",{children:'1. اذهب إلى "التحويلات الداخلية" للتحويل داخل المنصة'}),e.jsx("li",{children:"2. أدخل رقم حساب الشخص المراد التحويل له"}),e.jsx("li",{children:"3. اختر العملة (LYD, USD, EUR, إلخ)"}),e.jsx("li",{children:"4. أدخل المبلغ المراد تحويله"}),e.jsx("li",{children:"5. اختياري: أضف ملاحظة توضيحية"}),e.jsx("li",{children:"6. راجع التفاصيل بعناية قبل التأكيد"}),e.jsx("li",{children:'7. اضغط "تأكيد التحويل"'})]}),e.jsx("div",{className:"mt-3 p-2 bg-green-100 rounded",children:e.jsx("p",{className:"text-xs text-green-700",children:"💡 مهم: تأكد من صحة رقم الحساب قبل التحويل - العملية لا يمكن إلغاؤها"})})]})})]}),e.jsxs(At,{value:"understanding-currencies",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"فهم العملات المدعومة"}),e.jsx(Pn,{className:"h-4 w-4 text-indigo-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-indigo-900 mb-2",children:"العملات المتاحة:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"LYD"}),e.jsx("span",{children:"الدينار الليبي"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"USD"}),e.jsx("span",{children:"الدولار الأمريكي"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"EUR"}),e.jsx("span",{children:"اليورو الأوروبي"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"TRY"}),e.jsx("span",{children:"الليرة التركية"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"AED"}),e.jsx("span",{children:"الدرهم الإماراتي"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"EGP"}),e.jsx("span",{children:"الجنيه المصري"})]})]})]})})]}),e.jsxs(At,{value:"safety-tips",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"نصائح الأمان للمبتدئين"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"قواعد الأمان الأساسية:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-red-800",children:[e.jsx("li",{children:"• لا تشارك رقم حسابك إلا مع الأشخاص الذين تريد استقبال تحويلات منهم"}),e.jsx("li",{children:"• لا تشارك كلمة المرور أو بيانات تسجيل الدخول مع أي شخص"}),e.jsx("li",{children:"• تأكد من رقم الحساب قبل إرسال أي تحويل"}),e.jsx("li",{children:"• راجع تاريخ معاملاتك بانتظام"}),e.jsx("li",{children:"• أبلغ عن أي نشاط مشبوه فوراً"}),e.jsx("li",{children:"• استخدم كلمة مرور قوية ومعقدة"})]})]})})]}),e.jsxs(At,{value:"common-mistakes",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"أخطاء شائعة يجب تجنبها"}),e.jsx(_s,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"تجنب هذه الأخطاء:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-orange-800",children:[e.jsx("li",{children:"• إدخال رقم حساب خاطئ - تحقق دائماً من الرقم"}),e.jsx("li",{children:"• عدم حفظ أرقام المعاملات للمراجعة"}),e.jsx("li",{children:"• إهمال قراءة الإشعارات المهمة"}),e.jsx("li",{children:"• عدم التحقق من الرصيد قبل التحويل"}),e.jsx("li",{children:"• مشاركة بيانات الحساب مع أشخاص غير موثوقين"}),e.jsx("li",{children:"• عدم قراءة تفاصيل المعاملة قبل التأكيد"})]})]})})]}),e.jsxs(At,{value:"getting-help",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"كيفية طلب المساعدة"}),e.jsx(_l,{className:"h-4 w-4 text-teal-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-teal-900 mb-2",children:"طرق الحصول على المساعدة:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-teal-800",children:[e.jsx("li",{children:"• استخدم صفحة الدعم للبحث عن إجابات سريعة"}),e.jsx("li",{children:"• راجع قسم الأسئلة الشائعة"}),e.jsx("li",{children:"• استخدم نموذج التواصل لطلب المساعدة"}),e.jsx("li",{children:"• تحقق من حالة الأنظمة إذا واجهت مشاكل تقنية"}),e.jsx("li",{children:"• احتفظ برقم المعاملة عند التبليغ عن مشكلة"})]})]})})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(js,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-yellow-900",children:"خطوتك التالية"})]}),e.jsx("p",{className:"text-sm text-yellow-800 text-right",children:"الآن بعد قراءة هذا الدليل، ننصحك بتجربة إجراء تحويل تجريبي بمبلغ صغير للتأكد من فهمك لكيفية عمل النظام. لا تتردد في طلب المساعدة إذا احتجت لذلك!"})]})]})]}),r==="transfers"&&e.jsxs(_,{className:"mt-6 border-2 border-green-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"إدارة التحويلات"}),e.jsx(Vn,{className:"h-6 w-6 text-green-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"internal-transfers",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"التحويلات الداخلية"}),e.jsx(js,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"كيفية إجراء تحويل داخلي:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:'1. انتقل إلى صفحة "التحويلات الداخلية"'}),e.jsx("li",{children:"2. أدخل رقم حساب المستلم (مثال: 33003002)"}),e.jsx("li",{children:"3. اختر العملة والمبلغ المراد تحويله"}),e.jsx("li",{children:"4. أضف ملاحظة اختيارية"}),e.jsx("li",{children:'5. راجع التفاصيل واضغط "تأكيد التحويل"'})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 نصيحة: التحويلات الداخلية فورية ولا تحتاج رسوم إضافية"})})]})})]}),e.jsxs(At,{value:"city-transfers",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"التحويلات بين المدن"}),e.jsx(Vn,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"خطوات التحويل بين المدن:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-green-800",children:[e.jsx("li",{children:'1. اذهب إلى "التحويلات بين المدن"'}),e.jsx("li",{children:"2. اختر المدينة المرسل إليها"}),e.jsx("li",{children:"3. أدخل اسم المستلم ورقم هاتفه"}),e.jsx("li",{children:"4. حدد العملة والمبلغ"}),e.jsx("li",{children:"5. ستحصل على رمز تحقق من 6 أرقام"}),e.jsx("li",{children:"6. أرسل الرمز للمستلم لاستلام الحوالة"})]}),e.jsx("div",{className:"mt-3 p-2 bg-green-100 rounded",children:e.jsx("p",{className:"text-xs text-green-700",children:"💡 مهم: احتفظ برمز التحقق واحرص على إرساله للمستلم الصحيح"})})]})})]}),e.jsxs(At,{value:"commission-system",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"نظام العمولات"}),e.jsx(vs,{className:"h-4 w-4 text-purple-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"كيف تعمل العمولات:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-purple-800",children:[e.jsx("li",{children:"• عمولات التحويلات بين المدن تُحسب تلقائياً"}),e.jsx("li",{children:"• العمولة تُخصم من المرسل عند إرسال الحوالة"}),e.jsx("li",{children:"• يمكن للوكلاء رؤية عمولاتهم في لوحة التحكم"}),e.jsx("li",{children:"• العمولات تُضاف لحساب العمولات عند استلام الحوالة"}),e.jsx("li",{children:"• يمكن سحب العمولات المتاحة في أي وقت"})]})]})})]}),e.jsxs(At,{value:"transfer-status",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"تتبع حالة التحويل"}),e.jsx(_s,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"حالات التحويل:"}),e.jsxs("div",{className:"space-y-2 text-sm text-orange-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"قيد الانتظار"}),e.jsx("span",{children:"تم إرسال الحوالة ولم يتم استلامها بعد"})]}),e.jsxs("div",{className:"flex items-center justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"مكتملة"}),e.jsx("span",{children:"تم استلام الحوالة بنجاح"})]}),e.jsxs("div",{className:"flex items-center justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"ملغية"}),e.jsx("span",{children:"تم إلغاء الحوالة واسترداد المبلغ"})]})]})]})})]}),e.jsxs(At,{value:"transfer-limits",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"حدود التحويل"}),e.jsx(Xr,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"الحدود والقيود:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"• الحد الأدنى للتحويل: 10 وحدات من أي عملة"}),e.jsx("li",{children:"• الحد الأقصى للتحويل: يختلف حسب مستوى الحساب"}),e.jsx("li",{children:"• عدد التحويلات اليومية: بدون حد للحسابات المفعلة"}),e.jsx("li",{children:"• التحويلات الداخلية: بدون رسوم إضافية"}),e.jsx("li",{children:"• التحويلات بين المدن: رسوم حسب المسافة والمبلغ"})]})]})})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vn,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-yellow-900",children:"نصائح مهمة للتحويلات"})]}),e.jsxs("ul",{className:"text-sm text-yellow-800 text-right space-y-1",children:[e.jsx("li",{children:"• تأكد من صحة بيانات المستلم قبل الإرسال"}),e.jsx("li",{children:"• احتفظ برقم المعاملة لمراجعتها لاحقاً"}),e.jsx("li",{children:"• لا تشارك رمز التحقق مع أشخاص غير مخولين"}),e.jsx("li",{children:"• راجع رصيدك قبل إجراء أي تحويل"})]})]})]})]}),r==="security"&&e.jsxs(_,{className:"mt-6 border-2 border-red-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"الأمان والحماية"}),e.jsx(Zt,{className:"h-6 w-6 text-red-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"password-security",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"أمان كلمة المرور"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"قواعد كلمة المرور الآمنة:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-red-800",children:[e.jsx("li",{children:"• يجب أن تحتوي على 8 أحرف على الأقل"}),e.jsx("li",{children:"• استخدم مزيج من الأحرف الكبيرة والصغيرة"}),e.jsx("li",{children:"• أضف أرقام ورموز خاصة"}),e.jsx("li",{children:"• لا تستخدم معلومات شخصية"}),e.jsx("li",{children:"• غير كلمة المرور بانتظام"})]})]})})]}),e.jsxs(At,{value:"account-protection",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"حماية الحساب"}),e.jsx(js,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"نصائح حماية الحساب:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"• لا تشارك بيانات تسجيل الدخول مع أحد"}),e.jsx("li",{children:"• تأكد من تسجيل الخروج من الأجهزة العامة"}),e.jsx("li",{children:"• راجع نشاط حسابك بانتظام"}),e.jsx("li",{children:"• احتفظ برقم حسابك في مكان آمن"}),e.jsx("li",{children:"• أبلغ عن أي نشاط مشبوه فوراً"})]})]})})]}),e.jsxs(At,{value:"transaction-security",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"أمان المعاملات"}),e.jsx(Vn,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"إرشادات أمان المعاملات:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-green-800",children:[e.jsx("li",{children:"• تحقق من تفاصيل المعاملة قبل التأكيد"}),e.jsx("li",{children:"• استخدم شبكة إنترنت آمنة"}),e.jsx("li",{children:"• احتفظ بسجل لجميع معاملاتك"}),e.jsx("li",{children:"• أبلغ عن أي معاملات غير مصرح بها"}),e.jsx("li",{children:"• لا تجري معاملات من أجهزة مشتركة"})]})]})})]}),e.jsxs(At,{value:"suspicious-activity",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"التبليغ عن النشاط المشبوه"}),e.jsx(_s,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"ماذا تفعل عند الشك:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-orange-800",children:[e.jsx("li",{children:"• غير كلمة المرور فوراً"}),e.jsx("li",{children:"• تواصل مع فريق الدعم"}),e.jsx("li",{children:"• راجع تاريخ المعاملات"}),e.jsx("li",{children:"• احتفظ بلقطات شاشة للأدلة"}),e.jsx("li",{children:"• لا تشارك هذه المعلومات مع أحد"})]})]})})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xr,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-yellow-900",children:"تذكير مهم"})]}),e.jsx("p",{className:"text-sm text-yellow-800 text-right",children:"فريق مكتب الصرافة لن يطلب منك أبداً كلمة المرور أو رقم الحساب عبر الهاتف أو البريد الإلكتروني. إذا تلقيت مثل هذا الطلب، فهو محاولة احتيال."})]})]})]}),r==="troubleshooting"&&e.jsxs(_,{className:"mt-6 border-2 border-yellow-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"استكشاف الأخطاء"}),e.jsx(_s,{className:"h-6 w-6 text-yellow-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2 text-right",children:"حل المشاكل الشائعة"}),e.jsx("p",{className:"text-sm text-yellow-800 text-right",children:"هذا القسم يساعدك على حل المشاكل التقنية الأكثر شيوعاً بنفسك دون الحاجة للتواصل مع الدعم الفني."})]}),e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"login-issues",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"مشاكل تسجيل الدخول"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"الحلول الشائعة:"}),e.jsxs("div",{className:"space-y-3 text-sm text-red-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: كلمة المرور خاطئة"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تأكد من إدخال كلمة المرور بدقة"}),e.jsx("li",{children:"• تحقق من حالة الأحرف (كبيرة/صغيرة)"}),e.jsx("li",{children:"• تأكد من عدم تفعيل Caps Lock"}),e.jsx("li",{children:"• جرب نسخ ولصق كلمة المرور"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: نسيت كلمة المرور"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:'• استخدم خيار "نسيت كلمة المرور"'}),e.jsx("li",{children:"• تحقق من صندوق الوارد والرسائل المرفوضة"}),e.jsx("li",{children:"• تواصل مع الدعم إذا لم تصلك رسالة الاسترداد"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشكلة: رقم الحساب غير صحيح"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تأكد من إدخال رقم الحساب كاملاً (يبدأ بـ 33003)"}),e.jsx("li",{children:"• تحقق من عدم وجود مسافات إضافية"}),e.jsx("li",{children:"• راجع رقم الحساب من الرسائل السابقة"})]})]})]})]})})]}),e.jsxs(At,{value:"transfer-problems",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"مشاكل التحويلات"}),e.jsx(Vn,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"أخطاء التحويل الشائعة:"}),e.jsxs("div",{className:"space-y-3 text-sm text-green-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: رصيد غير كافي"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من رصيدك في العملة المطلوبة"}),e.jsx("li",{children:"• راجع المبلغ المطلوب تحويله"}),e.jsx("li",{children:"• تأكد من حساب العمولة ضمن المبلغ المتاح"}),e.jsx("li",{children:"• قم بإيداع أو تحويل المبلغ المطلوب"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: رقم حساب المستلم غير موجود"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تأكد من كتابة الرقم بشكل صحيح"}),e.jsx("li",{children:"• تحقق مع المستلم من رقم حسابه"}),e.jsx("li",{children:"• تأكد من أن الحساب مفعل"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشكلة: التحويل معلق أو لم يصل"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من حالة التحويل في تاريخ المعاملات"}),e.jsx("li",{children:"• انتظر بضع دقائق للتحويلات الداخلية"}),e.jsx("li",{children:"• للتحويلات بين المدن، تأكد من استلام رمز التحقق"}),e.jsx("li",{children:"• تواصل مع الدعم مع رقم المعاملة"})]})]})]})]})})]}),e.jsxs(At,{value:"balance-issues",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"مشاكل الرصيد"}),e.jsx(Pn,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"مشاكل عرض الرصيد:"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: الرصيد لا يظهر أو خاطئ"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• حدث الصفحة (F5 أو سحب للأسفل في الهاتف)"}),e.jsx("li",{children:"• تحقق من اتصال الإنترنت"}),e.jsx("li",{children:"• اخرج وادخل مرة أخرى للحساب"}),e.jsx("li",{children:"• امسح ذاكرة التخزين المؤقت للمتصفح"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: تحويل لم ينعكس على الرصيد"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• انتظر دقيقتين ثم حدث الصفحة"}),e.jsx("li",{children:"• تحقق من تاريخ المعاملات"}),e.jsx("li",{children:"• تأكد من اكتمال التحويل"}),e.jsx("li",{children:"• راجع حالة المعاملة"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشكلة: رصيد ناقص بعد معاملة"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• راجع تاريخ المعاملات للعمولات"}),e.jsx("li",{children:"• تحقق من جميع المعاملات الأخيرة"}),e.jsx("li",{children:"• تأكد من عدم وجود تحويلات غير مصرح بها"})]})]})]})]})})]}),e.jsxs(At,{value:"app-performance",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"مشاكل الأداء والتطبيق"}),e.jsx(vs,{className:"h-4 w-4 text-purple-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"تحسين الأداء:"}),e.jsxs("div",{className:"space-y-3 text-sm text-purple-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: التطبيق بطيء"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من سرعة اتصال الإنترنت"}),e.jsx("li",{children:"• أغلق التطبيقات الأخرى على الجهاز"}),e.jsx("li",{children:"• حدث المتصفح لآخر إصدار"}),e.jsx("li",{children:"• امسح ذاكرة التخزين المؤقت"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: التطبيق لا يحمل"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من اتصال الإنترنت"}),e.jsx("li",{children:"• جرب مستعرض آخر"}),e.jsx("li",{children:"• أعد تشغيل الجهاز"}),e.jsx("li",{children:'• تحقق من حالة الخدمة في قسم "حالة النظام"'})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشكلة: أخطاء في العرض"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• حدث الصفحة"}),e.jsx("li",{children:"• امسح الكوكيز وذاكرة التخزين"}),e.jsx("li",{children:"• جرب وضع التصفح الخاص"}),e.jsx("li",{children:"• تأكد من دعم المتصفح للتطبيق"})]})]})]})]})})]}),e.jsxs(At,{value:"notifications-messages",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"مشاكل الإشعارات والرسائل"}),e.jsx(ll,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"مشاكل التواصل:"}),e.jsxs("div",{className:"space-y-3 text-sm text-orange-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: لا تصل الإشعارات"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من إعدادات الإشعارات في المتصفح"}),e.jsx("li",{children:"• تأكد من السماح للموقع بإرسال الإشعارات"}),e.jsx("li",{children:"• راجع الإشعارات يدوياً في التطبيق"}),e.jsx("li",{children:"• تحقق من إعدادات عدم الإزعاج في الجهاز"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المشكلة: الرسائل لا ترسل"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحقق من اتصال الإنترنت"}),e.jsx("li",{children:"• تأكد من أن المحادثة نشطة"}),e.jsx("li",{children:"• جرب إرسال رسالة أقصر"}),e.jsx("li",{children:"• حدث الصفحة وأعد المحاولة"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشكلة: لا يمكن رؤية الرسائل"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• حدث المحادثة"}),e.jsx("li",{children:"• تحقق من إعدادات الخصوصية"}),e.jsx("li",{children:"• تأكد من عدم حظر المستخدم"})]})]})]})]})})]}),e.jsxs(At,{value:"general-troubleshooting",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"نصائح عامة لحل المشاكل"}),e.jsx(_l,{className:"h-4 w-4 text-teal-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-teal-900 mb-2",children:"خطوات عامة للحل:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-teal-800",children:[e.jsx("li",{children:"1. حدث الصفحة أو أعد تحميلها"}),e.jsx("li",{children:"2. تحقق من اتصال الإنترنت"}),e.jsx("li",{children:"3. امسح ذاكرة التخزين المؤقت للمتصفح"}),e.jsx("li",{children:"4. جرب مستعرض آخر أو وضع التصفح الخاص"}),e.jsx("li",{children:"5. أعد تسجيل الدخول للحساب"}),e.jsx("li",{children:"6. أعد تشغيل الجهاز إذا لزم الأمر"}),e.jsx("li",{children:"7. تحقق من حالة النظام في صفحة الدعم"}),e.jsx("li",{children:"8. إذا استمرت المشكلة، تواصل مع الدعم الفني"})]})]})})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_s,{className:"h-5 w-5 text-red-600"}),e.jsx("h4",{className:"font-semibold text-red-900",children:"متى تتواصل مع الدعم؟"})]}),e.jsxs("ul",{className:"text-sm text-red-800 text-right space-y-1",children:[e.jsx("li",{children:"• إذا لم تحل الحلول المذكورة المشكلة"}),e.jsx("li",{children:"• عند فقدان مبالغ أو معاملات مشبوهة"}),e.jsx("li",{children:"• مشاكل أمنية أو اختراق محتمل"}),e.jsx("li",{children:"• أخطاء تقنية متكررة"}),e.jsx("li",{children:"• احتفظ برقم المعاملة ولقطات الشاشة عند التواصل"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xr,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"معلومات مفيدة للدعم الفني"})]}),e.jsx("p",{className:"text-sm text-blue-800 text-right",children:"عند التواصل مع الدعم، شارك هذه المعلومات لحل أسرع: نوع المتصفح، نظام التشغيل، رقم المعاملة (إن وجد), وصف تفصيلي للمشكلة, لقطات شاشة للخطأ."})]})]})]}),r==="faq"&&e.jsxs(_,{className:"mt-6 border-2 border-orange-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"الأسئلة الشائعة"}),e.jsx(_l,{className:"h-6 w-6 text-orange-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2 text-right",children:"الأسئلة الأكثر شيوعاً"}),e.jsx("p",{className:"text-sm text-orange-800 text-right",children:"هنا تجد إجابات واضحة ومفصلة للأسئلة التي يطرحها المستخدمون بكثرة. إذا لم تجد إجابة لسؤالك، لا تتردد في التواصل معنا."})]}),e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"account-setup",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"كيف أحصل على رقم حساب؟"}),e.jsx(js,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"الحصول على رقم الحساب:"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("p",{children:"يتم إنشاء رقم حساب فريد لك تلقائياً عند التسجيل في المنصة. رقم الحساب يبدأ بـ 33003 ويتكون من 11 رقماً."}),e.jsx("p",{className:"font-medium",children:"مثال: 33003001, 33003002, 33003003"}),e.jsxs("div",{className:"bg-blue-100 p-2 rounded mt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"مهم جداً:"}),e.jsxs("ul",{className:"text-xs space-y-1 mt-1",children:[e.jsx("li",{children:"• احتفظ برقم حسابك في مكان آمن"}),e.jsx("li",{children:"• شاركه فقط مع الأشخاص الذين تريد استقبال تحويلات منهم"}),e.jsx("li",{children:"• لا يمكن تغيير رقم الحساب بعد إنشائه"})]})]})]})]})})]}),e.jsxs(At,{value:"forgotten-account",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"نسيت رقم حسابي، كيف أعرفه؟"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"طرق معرفة رقم الحساب:"}),e.jsxs("ol",{className:"space-y-1 text-sm text-red-800",children:[e.jsx("li",{children:"1. سجل دخولك للمنصة - رقم الحساب مكتوب في أعلى الصفحة"}),e.jsx("li",{children:"2. راجع إشعاراتك القديمة - رقم الحساب مذكور فيها"}),e.jsx("li",{children:"3. اطلب من شخص أرسل لك تحويلاً سابقاً - لديه رقم حسابك"}),e.jsx("li",{children:"4. تواصل مع الدعم الفني بحسابك المسجل"})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded mt-2",children:e.jsx("p",{className:"text-xs text-red-700",children:"💡 نصيحة: احفظ رقم حسابك في هاتفك أو دفتر ملاحظاتك لتجنب نسيانه"})})]})})]}),e.jsxs(At,{value:"transfer-fees",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ما هي رسوم التحويل؟"}),e.jsx(Vn,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"هيكل الرسوم:"}),e.jsxs("div",{className:"space-y-3 text-sm text-green-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"التحويلات الداخلية:"}),e.jsx("p",{children:"مجانية تماماً - بدون أي رسوم إضافية"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"التحويلات بين المدن:"}),e.jsx("p",{children:"رسوم متغيرة حسب المدينة والمبلغ"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• نفس المحافظة: 0.5% من المبلغ"}),e.jsx("li",{children:"• محافظات مختلفة: 1% من المبلغ"}),e.jsx("li",{children:"• الحد الأدنى: 5 دينار ليبي"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"العمولات للوكلاء:"}),e.jsx("p",{children:"يحصل الوكلاء على نسبة من رسوم التحويلات"})]})]})]})})]}),e.jsxs(At,{value:"transfer-time",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"كم من الوقت يستغرق التحويل؟"}),e.jsx(la,{className:"h-4 w-4 text-purple-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"أوقات التحويل:"}),e.jsxs("div",{className:"space-y-2 text-sm text-purple-800",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"التحويلات الداخلية"}),e.jsx("span",{children:"فوري (أقل من دقيقة)"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"التحويلات بين المدن"}),e.jsx("span",{children:"فوري عند الإرسال، يحتاج استلام من المكتب"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{className:"font-medium",children:"تحديث الرصيد"}),e.jsx("span",{children:"فوري في جميع الحالات"})]})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded mt-2",children:e.jsx("p",{className:"text-xs text-purple-700",children:"💡 ملاحظة: إذا تأخر التحويل أكثر من 5 دقائق، تواصل مع الدعم الفني"})})]})})]}),e.jsxs(At,{value:"verification-code",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ما هو رمز التحقق وكيف أستخدمه؟"}),e.jsx(vs,{className:"h-4 w-4 text-indigo-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-indigo-900 mb-2",children:"عن رمز التحقق:"}),e.jsxs("div",{className:"space-y-2 text-sm text-indigo-800",children:[e.jsx("p",{children:"رمز التحقق هو رقم من 6 أرقام يُنشأ تلقائياً عند إرسال تحويل بين المدن."}),e.jsxs("div",{className:"bg-indigo-100 p-3 rounded",children:[e.jsx("h5",{className:"font-medium mb-2",children:"كيفية الاستخدام:"}),e.jsxs("ol",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"1. أرسل التحويل للمدينة المطلوبة"}),e.jsx("li",{children:"2. احصل على رمز التحقق من 6 أرقام"}),e.jsx("li",{children:"3. أرسل الرمز للمستلم عبر الهاتف أو الرسائل"}),e.jsx("li",{children:"4. المستلم يذهب لأقرب مكتب ويعطي الرمز + بطاقة الهوية"}),e.jsx("li",{children:"5. يستلم المبلغ فوراً"})]})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded",children:e.jsx("p",{className:"text-xs text-red-700 font-medium",children:"تحذير: لا تشارك رمز التحقق مع أشخاص غير مخولين"})})]})]})})]}),e.jsxs(At,{value:"cancel-transfer",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"هل يمكن إلغاء التحويل بعد إرساله؟"}),e.jsx(_s,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"سياسة الإلغاء:"}),e.jsxs("div",{className:"space-y-3 text-sm text-orange-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"التحويلات الداخلية:"}),e.jsx("p",{children:"لا يمكن إلغاؤها - تتم فوراً وتكون نهائية"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"التحويلات بين المدن:"}),e.jsx("p",{children:"يمكن إلغاؤها قبل الاستلام فقط"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تواصل مع الدعم فوراً"}),e.jsx("li",{children:"• قدم رقم المعاملة ورمز التحقق"}),e.jsx("li",{children:"• سيتم استرداد المبلغ خلال 24 ساعة"}),e.jsx("li",{children:"• لا يمكن الإلغاء بعد الاستلام"})]})]})]}),e.jsx("div",{className:"bg-orange-100 p-2 rounded",children:e.jsx("p",{className:"text-xs text-orange-700",children:"💡 نصيحة: تأكد من صحة البيانات قبل الإرسال لتجنب الحاجة للإلغاء"})})]})})]}),e.jsxs(At,{value:"account-security",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"كيف أحمي حسابي من الاختراق؟"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"خطوات الحماية:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-red-800",children:[e.jsx("li",{children:"• استخدم كلمة مرور قوية (أحرف، أرقام، رموز)"}),e.jsx("li",{children:"• لا تشارك بيانات تسجيل الدخول مع أي شخص"}),e.jsx("li",{children:"• لا تستخدم شبكات Wi-Fi العامة للتطبيق"}),e.jsx("li",{children:"• سجل خروج من الحساب بعد كل استخدام"}),e.jsx("li",{children:"• راجع تاريخ المعاملات بانتظام"}),e.jsx("li",{children:"• أبلغ عن أي نشاط مشبوه فوراً"}),e.jsx("li",{children:"• لا تفتح روابط مشبوهة تطلب بيانات الحساب"})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded mt-2",children:e.jsx("p",{className:"text-xs text-red-700 font-medium",children:"تذكير: فريق الدعم لن يطلب منك كلمة المرور أبداً"})})]})})]}),e.jsxs(At,{value:"supported-currencies",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ما هي العملات المدعومة؟"}),e.jsx(Pn,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"العملات المتاحة:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-blue-800",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"LYD"}),e.jsx("span",{children:"الدينار الليبي"})]})}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"USD"}),e.jsx("span",{children:"الدولار الأمريكي"})]})}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"EUR"}),e.jsx("span",{children:"اليورو الأوروبي"})]})}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"TRY"}),e.jsx("span",{children:"الليرة التركية"})]})}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"AED"}),e.jsx("span",{children:"الدرهم الإماراتي"})]})}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"EGP"}),e.jsx("span",{children:"الجنيه المصري"})]})})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded mt-2",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 يمكنك التحويل بين أي من هذه العملات داخل المنصة"})})]})})]}),e.jsxs(At,{value:"agent-benefits",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ما هي مزايا أن أصبح وكيلاً؟"}),e.jsx(js,{className:"h-4 w-4 text-teal-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-teal-900 mb-2",children:"مزايا الوكلاء:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-teal-800",children:[e.jsx("li",{children:"• كسب عمولة من التحويلات التي تتم في منطقتك"}),e.jsx("li",{children:"• إمكانية سحب العمولات في أي وقت"}),e.jsx("li",{children:"• لوحة تحكم خاصة لمراقبة العمليات"}),e.jsx("li",{children:"• إشعارات فورية بالتحويلات الجديدة"}),e.jsx("li",{children:"• دعم فني مخصص للوكلاء"}),e.jsx("li",{children:"• إمكانية توسيع نطاق الخدمة"})]}),e.jsx("div",{className:"bg-teal-100 p-2 rounded mt-2",children:e.jsx("p",{className:"text-xs text-teal-700",children:"💡 للتقديم كوكيل، تواصل معنا عبر نموذج الاتصال في صفحة الدعم"})})]})})]}),e.jsxs(At,{value:"mobile-access",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"هل يمكن استخدام المنصة على الهاتف؟"}),e.jsx(vs,{className:"h-4 w-4 text-purple-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"الوصول عبر الهاتف:"}),e.jsxs("div",{className:"space-y-2 text-sm text-purple-800",children:[e.jsx("p",{children:"نعم! المنصة متوافقة تماماً مع جميع الأجهزة المحمولة."}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• تفتح في متصفح الهاتف بسهولة"}),e.jsx("li",{children:"• تصميم متجاوب يتكيف مع شاشة الهاتف"}),e.jsx("li",{children:"• نفس الميزات المتاحة على الكمبيوتر"}),e.jsx("li",{children:"• سرعة وأمان عاليين"}),e.jsx("li",{children:"• إشعارات فورية"})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded",children:e.jsx("p",{className:"text-xs text-purple-700",children:"💡 نصيحة: أضف المنصة لشاشة الهاتف الرئيسية للوصول السريع"})})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_l,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold text-orange-900",children:"لم تجد إجابة لسؤالك؟"})]}),e.jsxs("div",{className:"text-sm text-orange-800 text-right space-y-2",children:[e.jsx("p",{children:"لا تتردد في التواصل معنا! فريق الدعم جاهز لمساعدتك:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:'• استخدم نموذج التواصل في تبويب "التواصل"'}),e.jsx("li",{children:"• اختر مستوى الأولوية المناسب"}),e.jsx("li",{children:"• قدم أكبر قدر من التفاصيل"}),e.jsx("li",{children:"• احتفظ برقم المعاملة إن وجد"})]})]})]})]})]}),r==="account-settings"&&e.jsxs(_,{className:"mt-6 border-2 border-purple-200",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",onClick:()=>a(null),className:"text-sm",children:"← العودة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"text-right text-xl",children:"إعدادات الحساب"}),e.jsx(vs,{className:"h-6 w-6 text-purple-600"})]})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2 text-right",children:"تخصيص حسابك"}),e.jsx("p",{className:"text-sm text-purple-800 text-right",children:"هذا القسم يساعدك على إدارة وتخصيص إعدادات حسابك الشخصية لتحسين تجربة الاستخدام والأمان."})]}),e.jsxs(Ao,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(At,{value:"profile-management",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"إدارة الملف الشخصي"}),e.jsx(js,{className:"h-4 w-4 text-blue-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"بيانات الملف الشخصي:"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"الاسم الكامل:"}),e.jsx("p",{children:"يظهر في المعاملات والتحويلات"}),e.jsx("p",{className:"text-xs",children:"• لا يمكن تعديله إلا عبر الدعم الفني"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"البريد الإلكتروني:"}),e.jsx("p",{children:"يُستخدم لاستلام الإشعارات المهمة"}),e.jsx("p",{className:"text-xs",children:"• تأكد من صحته وإمكانية الوصول إليه"})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"رقم الهاتف:"}),e.jsx("p",{children:"مطلوب للتحقق من الهوية"}),e.jsx("p",{className:"text-xs",children:"• يُستخدم في التحويلات بين المدن"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"رقم الحساب:"}),e.jsx("p",{children:"رقم فريد لا يمكن تغييره (مثال: 33003001)"}),e.jsx("p",{className:"text-xs",children:"• شاركه مع من تريد استقبال تحويلات منهم"})]})]})]})})]}),e.jsxs(At,{value:"security-settings",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"إعدادات الأمان"}),e.jsx(Zt,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"إعدادات الحماية:"}),e.jsxs("div",{className:"space-y-3 text-sm text-red-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"تغيير كلمة المرور:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• استخدم كلمة مرور قوية (8 أحرف على الأقل)"}),e.jsx("li",{children:"• اجمع بين الأحرف والأرقام والرموز"}),e.jsx("li",{children:"• تجنب استخدام معلومات شخصية"}),e.jsx("li",{children:"• غير كلمة المرور كل 6 أشهر"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"مراقبة النشاط:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• راجع تاريخ تسجيل الدخول بانتظام"}),e.jsx("li",{children:"• تحقق من المعاملات غير المألوفة"}),e.jsx("li",{children:"• أبلغ عن أي نشاط مشبوه فوراً"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"الحماية من الاحتيال:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• لا تشارك بيانات تسجيل الدخول مع أحد"}),e.jsx("li",{children:"• تجنب الوصول للحساب من أجهزة عامة"}),e.jsx("li",{children:"• سجل خروج بعد كل استخدام"})]})]})]})]})})]}),e.jsxs(At,{value:"notification-preferences",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"تفضيلات الإشعارات"}),e.jsx(ll,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"أنواع الإشعارات:"}),e.jsxs("div",{className:"space-y-3 text-sm text-green-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"إشعارات المعاملات:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحويلات واردة وصادرة"}),e.jsx("li",{children:"• تأكيد إتمام المعاملات"}),e.jsx("li",{children:"• تحديثات حالة التحويل"}),e.jsx("li",{children:"• رموز التحقق للتحويلات بين المدن"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"إشعارات الأمان:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تسجيل دخول من جهاز جديد"}),e.jsx("li",{children:"• محاولات دخول مشبوهة"}),e.jsx("li",{children:"• تغييرات في إعدادات الحساب"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"إشعارات النظام:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحديثات المنصة"}),e.jsx("li",{children:"• صيانة مجدولة"}),e.jsx("li",{children:"• إعلانات مهمة"})]})]})]})]})})]}),e.jsxs(At,{value:"transfer-settings",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"إعدادات التحويل"}),e.jsx(Vn,{className:"h-4 w-4 text-orange-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"تخصيص التحويلات:"}),e.jsxs("div",{className:"space-y-3 text-sm text-orange-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"العملة المفضلة:"}),e.jsx("p",{children:"اختر العملة الافتراضية لسهولة التحويل"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تظهر كخيار افتراضي في نماذج التحويل"}),e.jsx("li",{children:"• يمكن تغييرها في أي وقت"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"حدود التحويل الشخصية:"}),e.jsx("p",{children:"ضع حدود إضافية لمزيد من الأمان"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• حد أقصى يومي اختياري"}),e.jsx("li",{children:"• تنبيهات عند تجاوز مبالغ معينة"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"قوائم المفضلة:"}),e.jsx("p",{children:"حفظ حسابات متكررة للتحويل السريع"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• إضافة أسماء مستعارة للحسابات"}),e.jsx("li",{children:"• وصول سريع للمستلمين المتكررين"})]})]})]})]})})]}),e.jsxs(At,{value:"privacy-settings",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"إعدادات الخصوصية"}),e.jsx(Xr,{className:"h-4 w-4 text-indigo-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-indigo-900 mb-2",children:"حماية خصوصيتك:"}),e.jsxs("div",{className:"space-y-3 text-sm text-indigo-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"عرض المعلومات:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• التحكم في ظهور اسمك في التحويلات"}),e.jsx("li",{children:"• إخفاء تفاصيل غير ضرورية"}),e.jsx("li",{children:"• عرض الاسم المختصر فقط"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"بيانات المعاملات:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• فترة الاحتفاظ بسجل المعاملات"}),e.jsx("li",{children:"• تحديد المعلومات المحفوظة"}),e.jsx("li",{children:"• طلب حذف البيانات القديمة"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"المشاركة مع الغير:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• عدم مشاركة بياناتك مع أطراف ثالثة"}),e.jsx("li",{children:"• استخدام البيانات لتحسين الخدمة فقط"}),e.jsx("li",{children:"• الحق في طلب نسخة من بياناتك"})]})]})]})]})})]}),e.jsxs(At,{value:"language-region",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"اللغة والمنطقة"}),e.jsx(vs,{className:"h-4 w-4 text-teal-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-teal-900 mb-2",children:"تخصيص المظهر:"}),e.jsxs("div",{className:"space-y-3 text-sm text-teal-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"لغة الواجهة:"}),e.jsx("p",{children:"العربية (افتراضي)"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• دعم كامل للغة العربية"}),e.jsx("li",{children:"• تخطيط من اليمين إلى اليسار"}),e.jsx("li",{children:"• أرقام عربية غربية (0-9)"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"المنطقة الزمنية:"}),e.jsx("p",{children:"توقيت ليبيا (UTC+2)"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• عرض الأوقات حسب التوقيت المحلي"}),e.jsx("li",{children:"• تواريخ المعاملات بالتوقيت الليبي"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"تنسيق العملة:"}),e.jsx("p",{children:"عرض واضح للمبالغ والأرصدة"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• فواصل الآلاف للوضوح"}),e.jsx("li",{children:"• رموز العملات الدولية"})]})]})]})]})})]}),e.jsxs(At,{value:"account-limits",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"حدود ومستوى الحساب"}),e.jsx(Pn,{className:"h-4 w-4 text-yellow-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"مستوى حسابك:"}),e.jsxs("div",{className:"space-y-3 text-sm text-yellow-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"الحساب الأساسي:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تحويلات داخلية غير محدودة"}),e.jsx("li",{children:"• تحويلات بين المدن (حسب المتاح)"}),e.jsx("li",{children:"• إشعارات فورية"}),e.jsx("li",{children:"• دعم فني أساسي"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"ترقية الحساب:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تقديم وثائق إضافية للتحقق"}),e.jsx("li",{children:"• زيادة حدود التحويل"}),e.jsx("li",{children:"• ميزات متقدمة إضافية"}),e.jsx("li",{children:"• أولوية في الدعم الفني"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"حسابات الوكلاء:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• إمكانية استلام التحويلات"}),e.jsx("li",{children:"• كسب عمولات من التحويلات"}),e.jsx("li",{children:"• لوحة تحكم متقدمة"}),e.jsx("li",{children:"• تدريب وإرشاد مخصص"})]})]})]})]})})]}),e.jsxs(At,{value:"backup-recovery",children:[e.jsx(Dt,{className:"text-right",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"النسخ الاحتياطي والاسترداد"}),e.jsx(_s,{className:"h-4 w-4 text-red-600"})]})}),e.jsx(Pt,{className:"text-right space-y-3",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"حماية بياناتك:"}),e.jsxs("div",{className:"space-y-3 text-sm text-red-800",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"نسخ احتياطية تلقائية:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• حفظ تلقائي لجميع المعاملات"}),e.jsx("li",{children:"• نسخ متعددة في خوادم منفصلة"}),e.jsx("li",{children:"• حماية من فقدان البيانات"})]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("span",{className:"font-medium",children:"استرداد الحساب:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• استرداد كلمة المرور عبر البريد الإلكتروني"}),e.jsx("li",{children:"• تحقق من الهوية للوصول"}),e.jsx("li",{children:"• استرداد البيانات المحفوظة"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"في حالة فقدان الوصول:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• تواصل مع الدعم الفني فوراً"}),e.jsx("li",{children:"• قدم وثائق إثبات الهوية"}),e.jsx("li",{children:"• إجراءات تحقق إضافية للحماية"})]})]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(vs,{className:"h-5 w-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-purple-900",children:"نصائح مهمة لإدارة الحساب"})]}),e.jsx("div",{className:"text-sm text-purple-800 text-right space-y-2",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• راجع إعداداتك بانتظام للتأكد من صحتها"}),e.jsx("li",{children:"• حدث معلومات الاتصال عند تغييرها"}),e.jsx("li",{children:"• استخدم كلمة مرور قوية وفريدة"}),e.jsx("li",{children:"• فعّل جميع الإشعارات الأمنية"}),e.jsx("li",{children:"• لا تشارك تفاصيل حسابك مع أي شخص"}),e.jsx("li",{children:"• تواصل مع الدعم عند الشك في أي نشاط"})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xr,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"تحديث الإعدادات"})]}),e.jsx("p",{className:"text-sm text-blue-800 text-right",children:"بعض الإعدادات تتطلب تأكيد إضافي لحماية حسابك. قد تحتاج لإدخال كلمة المرور أو التحقق عبر البريد الإلكتروني لحفظ التغييرات المهمة."})]})]})]})]})}function Woe(){const{user:t}=Mt(),{toast:s}=lt(),[n,r]=u.useState(""),[a,i]=u.useState(null),l=(t==null?void 0:t.type)==="admin",o=(t==null?void 0:t.type)==="agent";console.log("User type:",t==null?void 0:t.type,"isAdmin:",l,"isAgent:",o);const c=Ze({mutationFn:async x=>await(await ce("/api/receive-international-transfer","POST",x)).json(),onSuccess:x=>{i(x),s({title:"نجح الاستلام",description:"تم استلام الحوالة الدولية بنجاح",variant:"default"}),r("")},onError:x=>{s({title:"خطأ في الاستلام",description:x.message||"حدث خطأ أثناء محاولة استلام الحوالة",variant:"destructive"})}}),d=x=>{if(x.preventDefault(),!n.trim()){s({title:"خطأ في البيانات",description:l?"يرجى إدخال رمز التحويل":"يرجى إدخال رمز المستلم",variant:"destructive"});return}if(o&&n.length!==6){s({title:"خطأ في رمز المستلم",description:"رمز المستلم يجب أن يكون 6 أرقام بالضبط",variant:"destructive"});return}if(l&&n.length<10){s({title:"خطأ في رمز التحويل",description:"رمز التحويل يبدو غير صحيح، يرجى التأكد من الرمز",variant:"destructive"});return}c.mutate({transferCode:n})},f=x=>parseFloat(x).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-right mb-2",children:"استلام حوالة دولية"}),e.jsx("p",{className:"text-muted-foreground text-right",children:l?"أدخل رمز التحويل الكامل لاستلام الحوالة":"أدخل رمز المستلم (6 أرقام) لاستلام الحوالة"}),(t==null?void 0:t.type)==="admin"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"استلام سريع للمدراء"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:"مدير"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"استخدم الرمز التالي للاختبار السريع"}),e.jsx(M,{type:"button",variant:"outline",className:"w-full border-blue-300 text-blue-800 hover:bg-blue-100",onClick:()=>r("IOT1751132752991564"),children:"استلام حوالة بالرمز: IOT1751132752991564"})]}),(t==null?void 0:t.type)==="agent"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"استلام سريع للوكلاء"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"وكيل"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"استخدم رمز المستلم التالي للاختبار السريع"}),e.jsx(M,{type:"button",variant:"outline",className:"w-full border-green-300 text-green-800 hover:bg-green-100",onClick:()=>r("797683"),children:"استلام حوالة برمز المستلم: 797683"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"text-right flex items-center gap-2",children:[e.jsx(Fj,{className:"h-5 w-5"}),"استلام الحوالة"]}),e.jsx(Se,{className:"text-right",children:"أدخل بيانات الحوالة المطلوب استلامها"})]}),e.jsx(z,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"transferCode",className:"text-right block",children:l?"رمز التحويل الكامل":"رمز المستلم"}),e.jsx(pe,{id:"transferCode",type:"text",value:n,onChange:x=>r(x.target.value),placeholder:l?"IOT1751132752991564":"797683",className:"text-center font-mono text-lg",maxLength:l?void 0:6,required:!0})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري الاستلام..."]}):"استلام الحوالة"})]})})]}),a&&e.jsxs(_,{className:"border-green-200 bg-green-50",children:[e.jsxs(q,{children:[e.jsxs(X,{className:"text-right flex items-center gap-2 text-green-700",children:[e.jsx(ks,{className:"h-5 w-5"}),"تم الاستلام بنجاح"]}),e.jsx(Se,{className:"text-right text-green-600",children:"تفاصيل الحوالة المستلمة"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"رقم الحوالة:"}),e.jsx("p",{className:"font-mono",children:a.transfer.id})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"المرسل:"}),e.jsx("p",{children:a.transfer.senderName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"المستلم:"}),e.jsx("p",{children:a.transfer.receiverName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"الدولة المرسلة:"}),e.jsx("p",{children:a.transfer.originCountry})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"المبلغ الإجمالي:"}),e.jsxs("p",{className:"font-mono text-lg",children:[f(a.transfer.amount)," ",a.transfer.currencyCode]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-700",children:"العمولة:"}),e.jsxs("p",{className:"font-mono",children:[f(a.transfer.commissionAmount)," ",a.transfer.currencyCode]})]}),e.jsxs("div",{className:"text-right col-span-2",children:[e.jsx("p",{className:"font-semibold text-green-700 text-lg",children:"المبلغ المستلم:"}),e.jsxs("p",{className:"font-mono text-2xl font-bold text-green-800",children:[f(a.transfer.netAmount)," ",a.transfer.currencyCode]})]})]})})]}),e.jsxs(_,{className:"lg:col-span-2",children:[e.jsx(q,{children:e.jsx(X,{className:"text-right",children:"معلومات مهمة"})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-3 text-right text-sm text-muted-foreground",children:[e.jsx("p",{children:"• رمز التحويل مكون من 8 أرقام يحصل عليه المرسل عند إنشاء الحوالة"}),e.jsx("p",{children:"• رمز المستلم مكون من 6 أرقام يتم إرساله للمستلم من قبل المرسل"}),e.jsx("p",{children:"• يجب التأكد من صحة الرمزين قبل إجراء عملية الاستلام"}),e.jsx("p",{children:"• بعد الاستلام الناجح، سيتم إضافة المبلغ إلى رصيد المكتب"}),e.jsx("p",{children:"• العمولة محسوبة حسب إعدادات المكتب والنظام"})]})})]})]})]})}const v1=[{code:"LYD",name:"الدينار الليبي",symbol:"د.ل"},{code:"USD",name:"الدولار الأمريكي",symbol:"$"},{code:"EUR",name:"اليورو",symbol:"€"},{code:"TRY",name:"الليرة التركية",symbol:"₺"},{code:"AED",name:"الدرهم الإماراتي",symbol:"د.إ"},{code:"EGP",name:"الجنيه المصري",symbol:"ج.م"},{code:"TND",name:"الدينار التونسي",symbol:"د.ت"},{code:"GBP",name:"الجنيه الإسترليني",symbol:"£"}],Zoe=R.object({type:R.enum(["percentage","fixed"],{errorMap:()=>({message:"نوع العمولة يجب أن يكون نسبة مئوية أو ثابت"})}),value:R.string().or(R.number()).transform(t=>Number(t)).refine(t=>t>0,{message:"يجب أن تكون قيمة العمولة أكبر من صفر"}),currency:R.enum(["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"],{errorMap:()=>({message:"يجب اختيار عملة صحيحة"})})});function Joe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(null),[i,l]=u.useState(!1);u.useEffect(()=>{t&&t.type!=="admin"&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمدراء فقط",variant:"destructive"}),s("/"))},[t,s,n]);const o=xs({resolver:ps(Zoe),defaultValues:{type:"percentage",value:1,currency:"LYD"}}),{data:c,isLoading:d,refetch:f}=$e({queryKey:["/api/admin/system-commission-rates"],queryFn:async()=>{try{console.log("🔍 محاولة جلب جميع إعدادات العمولة...");const m=await ce("/api/admin/system-commission-rates","GET");if(console.log("📊 حالة الاستجابة:",m.status),m.status===404)return console.log("⚠️ لا توجد إعدادات في قاعدة البيانات"),[];if(!m.ok){const w=await m.json();throw console.error("❌ خطأ في API:",w),new Error(w.message||"فشل في جلب الإعدادات")}const g=await m.json();return console.log("✅ تم جلب إعدادات العمولة:",g),console.log("📝 عدد الإعدادات المجلبة:",g.length),g}catch(m){return console.error("🔥 خطأ في جلب إعدادات العمولة:",m),[]}}}),x=Ze({mutationFn:async m=>{const g=m.id?`/api/admin/system-commission-rates/${m.id}`:"/api/admin/system-commission-rates",w=m.id?"PUT":"POST",N=await ce(g,w,m);if(!N.ok){const k=await N.json();throw new Error(k.message||"فشل في تحديث الإعدادات")}return await N.json()},onSuccess:()=>{n({title:"تم التحديث بنجاح",description:"تم تحديث إعدادات عمولة سوق العملة"}),a(null),l(!1),o.reset(),f(),Qe.invalidateQueries({queryKey:["/api/admin/system-commission-rates"]})},onError:m=>{n({title:"خطأ في التحديث",description:m.message||"فشل في تحديث الإعدادات",variant:"destructive"})}}),h=Ze({mutationFn:async m=>{const g=await ce(`/api/admin/system-commission-rates/${m}`,"DELETE");if(!g.ok){const w=await g.json();throw new Error(w.message||"فشل في حذف الإعدادات")}return await g.json()},onSuccess:()=>{n({title:"تم الحذف بنجاح",description:"تم حذف إعدادات العمولة للعملة المحددة"}),f(),Qe.invalidateQueries({queryKey:["/api/admin/system-commission-rates"]})},onError:m=>{n({title:"خطأ في الحذف",description:m.message||"فشل في حذف الإعدادات",variant:"destructive"})}}),j=m=>{x.mutate(r?{...m,id:r}:m)},v=m=>{a(m.id),o.reset({type:m.type,value:parseFloat(m.value),currency:m.currency}),l(!0)},p=()=>{a(null),o.reset({type:"percentage",value:1,currency:"LYD"}),l(!0)},b=m=>v1.find(g=>g.code===m)||{code:m,name:m,symbol:m},y=()=>{const m=(c==null?void 0:c.map(g=>g.currency))||[];return v1.filter(g=>{var w;return!m.includes(g.code)||r&&((w=c==null?void 0:c.find(N=>N.id===r))==null?void 0:w.currency)===g.code})};return d?e.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin text-border"}),e.jsx("span",{className:"mr-2",children:"جاري تحميل الإعدادات..."})]}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(yn,{variant:"ghost",size:"sm",className:"text-slate-600 hover:text-slate-800"}),e.jsx("div",{className:"h-6 w-px bg-slate-300"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"إعدادات عمولة متعددة العملات"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v1.map(m=>{const g=c==null?void 0:c.find(w=>w.currency===m.code);return e.jsxs(_,{className:"relative",children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:m.symbol}),e.jsxs("div",{children:[e.jsx(X,{className:"text-lg",children:m.code}),e.jsx(Se,{className:"text-sm",children:m.name})]})]}),g?e.jsx(ie,{variant:"default",className:"bg-green-100 text-green-800",children:"محدد"}):e.jsx(ie,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"غير محدد"})]})}),e.jsx(z,{children:g?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"النوع:"}),e.jsx(ie,{variant:g.type==="percentage"?"default":"secondary",children:g.type==="percentage"?"نسبة مئوية":"مبلغ ثابت"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"القيمة:"}),e.jsxs("span",{className:"font-bold",children:[g.value,g.type==="percentage"?"%":` ${m.symbol}`]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"آخر تحديث:"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(g.updatedAt).toLocaleDateString("ar-EG")})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"لم يتم تحديد إعدادات العمولة لهذه العملة"})})]},m.code)})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"إعدادات العمولة حسب العملة"]}),e.jsx(Se,{children:"إدارة إعدادات العمولة لكل عملة مدعومة"})]}),e.jsxs(M,{onClick:p,className:"flex items-center gap-2",children:[e.jsx(kn,{className:"h-4 w-4"}),"إضافة عملة جديدة"]})]})}),e.jsx(z,{children:c&&c.length>0?e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-right",children:"العملة"}),e.jsx(ae,{className:"text-right",children:"نوع العمولة"}),e.jsx(ae,{className:"text-right",children:"القيمة"}),e.jsx(ae,{className:"text-right",children:"مثال على 1000 وحدة"}),e.jsx(ae,{className:"text-right",children:"آخر تحديث"}),e.jsx(ae,{className:"text-right",children:"الإجراءات"})]})}),e.jsx(Qs,{children:c.map(m=>{const g=b(m.currency),w=m.type==="percentage"?(1e3*parseFloat(m.value)/100).toFixed(2):m.value;return e.jsxs(kt,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-lg",children:g.symbol}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsx(ie,{variant:"outline",className:"text-xs",children:g.code})]})]})}),e.jsx(se,{children:e.jsx(ie,{variant:m.type==="percentage"?"default":"secondary",children:m.type==="percentage"?"نسبة مئوية":"مبلغ ثابت"})}),e.jsxs(se,{className:"font-bold",children:[m.value,m.type==="percentage"?"%":` ${g.symbol}`]}),e.jsxs(se,{className:"text-primary font-medium",children:[w," ",g.symbol]}),e.jsx(se,{className:"text-sm text-muted-foreground",children:new Date(m.updatedAt).toLocaleDateString("ar-EG")}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>v(m),children:e.jsx(pc,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h.mutate(m.id),disabled:h.isPending,children:e.jsx(is,{className:"h-4 w-4 text-destructive"})})]})})]},m.id)})})]}):e.jsxs(os,{children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx(cs,{children:'لا توجد إعدادات عمولة محددة بعد. انقر على "إضافة عملة جديدة" لبدء إضافة الإعدادات.'})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(qU,{className:"h-5 w-5"}),"ملاحظات مهمة"]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"عملة واحدة فقط:"})," يمكن تحديد إعدادات عمولة واحدة فقط لكل عملة."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"تطبيق فوري:"})," الإعدادات الجديدة تُطبق فوراً على جميع الصفقات القادمة."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"حساب التجميع:"})," العمولات تُحول تلقائياً إلى حساب تجميع العمولات حسب العملة."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"عمولة افتراضية:"})," إذا لم تكن هناك إعدادات لعملة معينة، لن يتم خصم عمولة."]})]})]})})]})]}),e.jsx(Ht,{open:i,onOpenChange:l,children:e.jsxs($t,{className:"sm:max-w-[500px]",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:r?"تعديل إعدادات العمولة":"إضافة إعدادات عمولة جديدة"}),e.jsx(ls,{children:"تحديد نوع وقيمة العمولة للعملة المحددة"})]}),e.jsx(Bs,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(j),className:"space-y-6",children:[e.jsx(_e,{control:o.control,name:"type",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نوع العمولة"}),e.jsx(Re,{children:e.jsxs(th,{value:m.value,onValueChange:m.onChange,className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"percentage",id:"percentage"}),e.jsxs(Ce,{htmlFor:"percentage",className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-4 w-4"}),"نسبة مئوية"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"fixed",id:"fixed"}),e.jsxs(Ce,{htmlFor:"fixed",className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"مبلغ ثابت"]})]})]})}),e.jsx(He,{})]})}),e.jsx(_e,{control:o.control,name:"value",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:o.watch("type")==="percentage"?"النسبة المئوية":"المبلغ الثابت"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",min:"0",placeholder:o.watch("type")==="percentage"?"1.5":"10",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),e.jsx(Kr,{children:o.watch("type")==="percentage"?"النسبة المئوية من قيمة الصفقة (مثال: 1.5 = 1.5%)":"المبلغ الثابت الذي يُخصم من كل صفقة"}),e.jsx(He,{})]})}),e.jsx(_e,{control:o.control,name:"currency",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة"}),e.jsxs(Nt,{value:m.value,onValueChange:m.onChange,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:y().map(g=>e.jsx(te,{value:g.code,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:g.symbol}),e.jsx("span",{children:g.name}),e.jsx(ie,{variant:"outline",children:g.code})]})},g.code))})]}),e.jsx(Kr,{children:"العملة التي ستُحسب بها العمولة وتُحول إلى حساب التجميع"}),e.jsx(He,{})]})}),e.jsxs(_n,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>l(!1),children:"إلغاء"}),e.jsx(M,{type:"submit",disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pu,{className:"h-4 w-4 ml-2"}),r?"تحديث":"إضافة"]})})]})]})})]})})]})}const b1=[{code:"LYD",name:"الدينار الليبي",symbol:"د.ل"},{code:"USD",name:"الدولار الأمريكي",symbol:"$"},{code:"EUR",name:"اليورو",symbol:"€"},{code:"TRY",name:"الليرة التركية",symbol:"₺"},{code:"AED",name:"الدرهم الإماراتي",symbol:"د.إ"},{code:"EGP",name:"الجنيه المصري",symbol:"ج.م"},{code:"TND",name:"الدينار التونسي",symbol:"د.ت"},{code:"GBP",name:"الجنيه الإسترليني",symbol:"£"}],qoe=R.object({currency:R.enum(["LYD","USD","EUR","TRY","AED","EGP","TND","GBP"],{errorMap:()=>({message:"يجب اختيار عملة صحيحة"})}),type:R.enum(["PERCENT","FIXED"],{errorMap:()=>({message:"نوع العمولة يجب أن يكون نسبة مئوية أو مبلغ ثابت"})}),value:R.number().min(0,{message:"القيمة يجب أن تكون أكبر من أو تساوي صفر"}).max(100,{message:"النسبة المئوية يجب أن تكون أقل من أو تساوي 100"})}).refine(t=>!(t.type==="PERCENT"&&t.value>100),{message:"النسبة المئوية يجب أن تكون بين 0 و 100",path:["value"]});function Koe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState([]),[i,l]=u.useState(100);u.useEffect(()=>{t&&t.type!=="admin"&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمدراء فقط",variant:"destructive"}),s("/"))},[t,s,n]);const o=xs({resolver:ps(qoe),defaultValues:{currency:"LYD",type:"PERCENT",value:1}}),{data:c,isLoading:d}=$e({queryKey:["/api/market/commission"],queryFn:async()=>{try{const m=await ce("GET","/api/market/commission");if(m.status===404)return{currencies:[]};if(!m.ok)throw new Error("فشل في جلب الإعدادات");return await m.json()}catch(m){return console.error("خطأ في جلب إعدادات العمولة:",m),{currencies:[]}}}});u.useEffect(()=>{c!=null&&c.currencies&&a(c.currencies)},[c]);const f=Ze({mutationFn:async m=>{const g=await ce("PUT","/api/market/commission",m);if(!g.ok){const w=await g.json();throw new Error(w.message||"فشل في حفظ الإعدادات")}return await g.json()},onSuccess:()=>{n({title:"تم الحفظ بنجاح",description:"تم حفظ إعدادات العمولة بنجاح"}),Qe.invalidateQueries({queryKey:["/api/market/commission"]})},onError:m=>{n({title:"خطأ في الحفظ",description:m.message,variant:"destructive"})}}),x=m=>{a(g=>{const w=g.findIndex(N=>N.currency===m.currency);if(w>=0){const N=[...g];return N[w]={currency:m.currency,type:m.type,value:m.value},N}else return[...g,{currency:m.currency,type:m.type,value:m.value}]})},h=m=>{a(g=>g.filter(w=>w.currency!==m))},j=(m,g,w)=>g==="PERCENT"?Math.round(m*(w/100)*1e3)/1e3:w,v=m=>b1.find(g=>g.code===m)||b1[0],p=b1.filter(m=>!r.some(g=>g.currency===m.code)),b=m=>{x(m),o.reset({currency:p.length>1?p[1].code:"LYD",type:"PERCENT",value:1})},y=()=>{if(r.length===0){n({title:"تحذير",description:"يجب إضافة عملة واحدة على الأقل",variant:"destructive"});return}f.mutate({currencies:r})};return d?e.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin text-border"}),e.jsx("span",{className:"mr-2",children:"جاري تحميل الإعدادات..."})]}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(yn,{variant:"ghost",size:"sm",className:"text-slate-600 hover:text-slate-800"}),e.jsx("div",{className:"h-6 w-px bg-slate-300"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"إعدادات عمولة السوق - معاينة فورية"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(kn,{className:"h-5 w-5"}),"إضافة عملة جديدة"]}),e.jsx(Se,{children:"أضف عملة مع نسبة العمولة الخاصة بها"})]}),e.jsx(z,{children:e.jsx(Bs,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(b),className:"space-y-4",children:[e.jsx(_e,{control:o.control,name:"currency",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"العملة"}),e.jsxs(Nt,{value:m.value,onValueChange:m.onChange,children:[e.jsx(Re,{children:e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})})}),e.jsx(wt,{children:p.map(g=>e.jsx(te,{value:g.code,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:g.symbol}),e.jsx("span",{children:g.name}),e.jsx(ie,{variant:"outline",children:g.code})]})},g.code))})]}),e.jsx(He,{})]})}),e.jsx(_e,{control:o.control,name:"type",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:"نوع العمولة"}),e.jsx(Re,{children:e.jsxs(th,{value:m.value,onValueChange:m.onChange,className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"PERCENT",id:"percent"}),e.jsxs(Ce,{htmlFor:"percent",className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-4 w-4"}),"نسبة مئوية"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(jl,{value:"FIXED",id:"fixed"}),e.jsxs(Ce,{htmlFor:"fixed",className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"مبلغ ثابت"]})]})]})}),e.jsx(He,{})]})}),e.jsx(_e,{control:o.control,name:"value",render:({field:m})=>e.jsxs(De,{children:[e.jsx(Pe,{children:o.watch("type")==="PERCENT"?"النسبة المئوية":"المبلغ الثابت"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",step:"0.01",min:"0",max:o.watch("type")==="PERCENT"?"100":void 0,placeholder:o.watch("type")==="PERCENT"?"1.5":"10",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),e.jsx(Kr,{children:o.watch("type")==="PERCENT"?"النسبة المئوية من قيمة الصفقة (0-100%)":"المبلغ الثابت الذي يُخصم من كل صفقة"}),e.jsx(He,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",disabled:p.length===0,children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"إضافة للمعاينة"]})]})})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Uv,{className:"h-5 w-5"}),"معاينة الإعدادات الحالية"]}),e.jsx(Se,{children:"عرض فوري لجميع العملات والعمولات المحددة"})]}),r.length>0&&e.jsx(M,{onClick:y,disabled:f.isPending,children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 animate-spin ml-2"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pu,{className:"h-4 w-4 ml-2"}),"حفظ جميع الإعدادات"]})})]})}),e.jsxs(z,{children:[e.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[e.jsx(Ce,{htmlFor:"testAmount",children:"المبلغ التجريبي للحساب:"}),e.jsx(pe,{id:"testAmount",type:"number",min:"1",step:"0.01",value:i,onChange:m=>l(parseFloat(m.target.value)||100),className:"mt-2 max-w-xs"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"سيتم حساب العمولة على هذا المبلغ لجميع العملات"})]}),r.length>0?e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-right",children:"العملة"}),e.jsx(ae,{className:"text-right",children:"نوع العمولة"}),e.jsx(ae,{className:"text-right",children:"القيمة"}),e.jsx(ae,{className:"text-right",children:"العمولة المحسوبة"}),e.jsx(ae,{className:"text-right",children:"الصافي"}),e.jsx(ae,{className:"text-right",children:"الإجراءات"})]})}),e.jsx(Qs,{children:r.map(m=>{const g=v(m.currency),w=j(i,m.type,m.value),N=i-w;return e.jsxs(kt,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-lg",children:g.symbol}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsx(ie,{variant:"outline",className:"text-xs",children:g.code})]})]})}),e.jsx(se,{children:e.jsx(ie,{variant:m.type==="PERCENT"?"default":"secondary",children:m.type==="PERCENT"?"نسبة مئوية":"مبلغ ثابت"})}),e.jsxs(se,{className:"font-bold",children:[m.value,m.type==="PERCENT"?"%":` ${g.symbol}`]}),e.jsxs(se,{className:"text-destructive font-medium",children:[w.toFixed(3)," ",g.symbol]}),e.jsxs(se,{className:"text-primary font-medium",children:[N.toFixed(3)," ",g.symbol]}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{o.setValue("currency",m.currency),o.setValue("type",m.type),o.setValue("value",m.value)},children:e.jsx(pc,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h(m.currency),children:e.jsx(is,{className:"h-4 w-4 text-destructive"})})]})})]},m.currency)})})]}):e.jsxs(os,{children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx(cs,{children:"لم يتم تحديد أي إعدادات عمولة بعد. أضف عملة من النموذج المجاور لبدء المعاينة."})]})]})]})]}),r.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Xr,{className:"h-5 w-5"}),"ملخص المعاينة"]})}),e.jsx(z,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(m=>{const g=v(m.currency),w=j(i,m.type,m.value),N=i-w;return e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:g.code}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i," ",g.symbol," → عمولة ",m.value,m.type==="PERCENT"?"%":g.symbol]}),e.jsxs("div",{className:"text-sm font-medium text-primary",children:["= ",w.toFixed(3)," ",g.symbol]}),e.jsxs("div",{className:"text-sm font-medium",children:["الصافي: ",N.toFixed(3)," ",g.symbol]})]})},m.currency)})})})]})]})}const w1=[{code:"LYD",name:"الدينار الليبي",symbol:"د.ل"},{code:"USD",name:"الدولار الأمريكي",symbol:"$"},{code:"EUR",name:"اليورو",symbol:"€"},{code:"TRY",name:"الليرة التركية",symbol:"₺"},{code:"AED",name:"الدرهم الإماراتي",symbol:"د.إ"},{code:"EGP",name:"الجنيه المصري",symbol:"ج.م"},{code:"TND",name:"الدينار التونسي",symbol:"د.ت"},{code:"GBP",name:"الجنيه الإسترليني",symbol:"£"}];function Xoe(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState([]),[i,l]=u.useState("LYD"),[o,c]=u.useState("PERCENT"),[d,f]=u.useState(""),[x,h]=u.useState(100);u.useEffect(()=>{t&&t.type!=="admin"&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمدراء فقط",variant:"destructive"}),s("/"))},[t,s,n]);const j=()=>{const m=parseFloat(d);if(!m||m<0){n({title:"خطأ",description:"يرجى إدخال قيمة صحيحة",variant:"destructive"});return}if(o==="PERCENT"&&m>100){n({title:"خطأ",description:"النسبة المئوية لا يمكن أن تتجاوز 100%",variant:"destructive"});return}const g=r.findIndex(w=>w.currency===i);if(g>=0){const w=[...r];w[g]={currency:i,type:o,value:m},a(w)}else a([...r,{currency:i,type:o,value:m}]);f(""),n({title:"تم الإضافة",description:`تم إضافة عمولة ${i} بنجاح`})},v=m=>{a(r.filter(g=>g.currency!==m)),n({title:"تم الحذف",description:`تم حذف عمولة ${m}`})},p=(m,g,w)=>g==="PERCENT"?m*w/100:w,b=m=>w1.find(g=>g.code===m)||w1[0],y=w1.filter(m=>!r.some(g=>g.currency===m.code));return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"نظام العمولة المبسط - معاينة فورية"}),e.jsx("p",{className:"text-slate-600",children:"أضف وأدر عمولات العملات مع معاينة فورية للحساب"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(kn,{className:"h-5 w-5"}),"إضافة عملة جديدة"]}),e.jsx(Se,{children:"أضف عملة مع نسبة العمولة الخاصة بها"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"العملة"}),e.jsxs(Nt,{value:i,onValueChange:l,children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsx(wt,{children:y.map(m=>e.jsx(te,{value:m.code,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:m.symbol}),e.jsx("span",{children:m.name}),e.jsx(ie,{variant:"outline",children:m.code})]})},m.code))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"نوع العمولة"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(M,{variant:o==="PERCENT"?"default":"outline",onClick:()=>c("PERCENT"),className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-4 w-4"}),"نسبة مئوية"]}),e.jsxs(M,{variant:o==="FIXED"?"default":"outline",onClick:()=>c("FIXED"),className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"مبلغ ثابت"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:o==="PERCENT"?"النسبة المئوية":"المبلغ الثابت"}),e.jsx(pe,{type:"number",step:"0.01",min:"0",max:o==="PERCENT"?"100":void 0,placeholder:o==="PERCENT"?"1.5":"10",value:d,onChange:m=>f(m.target.value)})]}),e.jsxs(M,{onClick:j,className:"w-full",disabled:!d||y.length===0,children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"إضافة للقائمة"]})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Uv,{className:"h-5 w-5"}),"معاينة العمولات"]}),e.jsx(Se,{children:"عرض فوري للعمولات مع حساب تجريبي"})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"المبلغ التجريبي:"}),e.jsx(pe,{type:"number",min:"1",step:"0.01",value:x,onChange:m=>h(parseFloat(m.target.value)||100),className:"max-w-xs"})]}),r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(m=>{const g=b(m.currency),w=p(x,m.type,m.value),N=x-w;return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-lg",children:g.symbol}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsx(ie,{variant:"outline",className:"text-xs",children:g.code})]})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>v(m.currency),children:e.jsx(is,{className:"h-4 w-4 text-destructive"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"نوع العمولة:"}),e.jsx("div",{children:e.jsx(ie,{variant:m.type==="PERCENT"?"default":"secondary",children:m.type==="PERCENT"?"نسبة مئوية":"مبلغ ثابت"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"القيمة:"}),e.jsxs("div",{className:"font-bold",children:[m.value,m.type==="PERCENT"?"%":` ${g.symbol}`]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العمولة:"}),e.jsxs("div",{className:"text-destructive font-medium",children:[w.toFixed(3)," ",g.symbol]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"الصافي:"}),e.jsxs("div",{className:"text-primary font-medium",children:[N.toFixed(3)," ",g.symbol]})]})]})]},m.currency)})}):e.jsxs(os,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(cs,{children:"لم يتم إضافة أي عمولات بعد. أضف عملة من النموذج المجاور لبدء المعاينة."})]})]})]})]}),r.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"ملخص سريع للعمولات"})}),e.jsx(z,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(m=>{const g=b(m.currency),w=p(x,m.type,m.value);return e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold",children:g.code}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.value,m.type==="PERCENT"?"%":` ${g.symbol}`]}),e.jsxs("div",{className:"text-sm font-medium text-primary",children:["العمولة: ",w.toFixed(3)," ",g.symbol]})]},m.currency)})})})]})]})}function ece(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(1);t&&t.type!=="admin"&&(n({title:"غير مصرح",description:"هذه الصفحة متاحة للمدراء فقط",variant:"destructive"}),s("/"));const{data:i,isLoading:l,error:o}=$e({queryKey:["/api/admin/commission-logs",r],queryFn:xd({on401:"throw"}),enabled:(t==null?void 0:t.type)==="admin"}),c=f=>{switch(f){case"deduct":return e.jsx(ie,{variant:"destructive",children:"خصم"});case"refund":return e.jsx(ie,{variant:"secondary",children:"استرداد"});default:return e.jsx(ie,{variant:"outline",children:f})}},d=f=>{switch(f){case"sell":return e.jsx(ie,{variant:"default",className:"bg-red-500",children:"بيع"});case"buy":return e.jsx(ie,{variant:"default",className:"bg-green-500",children:"شراء"});default:return e.jsx(ie,{variant:"outline",children:f})}};return l?e.jsx("div",{className:"container mx-auto p-4 rtl",children:e.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"mr-2",children:"جاري تحميل سجلات العمولة..."})]})}):o?e.jsx("div",{className:"container mx-auto p-4 rtl",children:e.jsx(_,{children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"text-center text-red-500",children:[e.jsx(Pn,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{children:"حدث خطأ في تحميل سجلات العمولة"})]})})})}):e.jsxs("div",{className:"container mx-auto p-4 rtl",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(M,{variant:"ghost",onClick:()=>s("/admin"),className:"flex items-center gap-2",children:[e.jsx(Br,{className:"h-4 w-4"}),"العودة للإدارة"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-l from-primary to-primary/70 text-transparent bg-clip-text",children:["سجلات العمولة ",e.jsx(Pn,{className:"inline-block ml-2"})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"عرض جميع عمليات خصم واسترداد العمولة في سوق العملة"})]})]})}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"سجل عمليات العمولة"]}),e.jsxs(Se,{children:["عرض تفصيلي لجميع عمليات خصم واسترداد العمولة",i&&e.jsxs("span",{className:"text-primary font-medium",children:[" ","(",i.total," عملية إجمالي)"]})]})]}),e.jsx(z,{children:i&&i.logs.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-right",children:"المستخدم"}),e.jsx(ae,{className:"text-right",children:"نوع العرض"}),e.jsx(ae,{className:"text-right",children:"مبلغ العمولة"}),e.jsx(ae,{className:"text-right",children:"العملة"}),e.jsx(ae,{className:"text-right",children:"العملية"}),e.jsx(ae,{className:"text-right",children:"التاريخ"}),e.jsx(ae,{className:"text-right",children:"الوصف"})]})}),e.jsx(Qs,{children:i.logs.map(f=>e.jsxs(kt,{children:[e.jsxs(se,{className:"font-medium",children:[f.userName,e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",f.userId]})]}),e.jsx(se,{children:d(f.offerType)}),e.jsx(se,{className:"font-mono",children:e.jsxs("span",{className:f.action==="deduct"?"text-red-600":"text-green-600",children:[f.action==="deduct"?"-":"+",Zs(parseFloat(f.commissionAmount),"LYD")]})}),e.jsx(se,{children:e.jsx(ie,{variant:"outline",children:f.commissionCurrency})}),e.jsx(se,{children:c(f.action)}),e.jsx(se,{className:"text-sm",children:Bn(new Date(f.createdAt),"dd/MM/yyyy HH:mm",{locale:ol})}),e.jsxs(se,{className:"max-w-xs",children:[e.jsx("div",{className:"truncate text-sm text-muted-foreground",title:f.description,children:f.description}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["عرض #",f.sourceId]})]})]},f.id))})]})}),i.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["عرض ",(r-1)*20+1," - ",Math.min(r*20,i.total)," من ",i.total," سجل"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>a(Math.max(1,r-1)),disabled:r<=1,children:[e.jsx(Zd,{className:"h-4 w-4"}),"السابق"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,i.totalPages)},(f,x)=>{let h;return i.totalPages<=5||r<=3?h=x+1:r>=i.totalPages-2?h=i.totalPages-4+x:h=r-2+x,e.jsx(M,{variant:r===h?"default":"outline",size:"sm",onClick:()=>a(h),className:"w-10",children:h},h)})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>a(Math.min(i.totalPages,r+1)),disabled:r>=i.totalPages,children:["التالي",e.jsx(Bv,{className:"h-4 w-4"})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pn,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"لا توجد سجلات عمولة"}),e.jsx("p",{className:"text-muted-foreground",children:"لم يتم العثور على أي سجلات عمولة حتى الآن"})]})})]})]})}function tce(){const{user:t}=Mt(),{toast:s}=lt(),[n,r]=u.useState(""),[a,i]=u.useState(null),[l,o]=u.useState(new Set),[c,d]=u.useState(""),[f,x]=u.useState(""),[h,j]=u.useState(!1),[v,p]=u.useState(!1),[b,y]=u.useState(!1),[m,g]=u.useState(!1),[w,N]=u.useState(!1),[k,L]=u.useState(null),[S,T]=u.useState(""),[E,$]=u.useState(""),[F,Z]=u.useState(null),[G,D]=u.useState(!1),[B,de]=u.useState(0),[U,W]=u.useState([]),re=I=>new Date(I).toLocaleString("ar-LY"),we=async I=>{if(I){D(!0);try{const ye=localStorage.getItem("auth_token");if(!ye){console.error("المصادقة: لا يوجد JWT token في auth_token"),s({title:"خطأ في المصادقة",description:"لم يتم العثور على رمز المصادقة. يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}const Le=await fetch(`/api/security/image/${I}`,{headers:{Authorization:`Bearer ${ye}`}});if(Le.ok){const We=await Le.blob(),ct=URL.createObjectURL(We);Z(ct),console.log("✅ تم تحميل الصورة الأمنية بنجاح")}else console.error("فشل في تحميل الصورة:",Le.status,Le.statusText),s({title:"خطأ",description:"فشل في تحميل الصورة الأمنية",variant:"destructive"})}catch(ye){console.error("خطأ في تحميل الصورة:",ye),s({title:"خطأ",description:"حدث خطأ أثناء تحميل الصورة",variant:"destructive"})}finally{D(!1)}}};if(u.useEffect(()=>{a&&a.imageFileName?(F&&(URL.revokeObjectURL(F),Z(null)),we(a.imageFileName)):F&&(URL.revokeObjectURL(F),Z(null))},[a]),u.useEffect(()=>()=>{F&&URL.revokeObjectURL(F)},[F]),!t||t.email!=="ss73ss73ss73@gmail.com")return e.jsx("div",{className:"container py-10",children:e.jsxs(os,{variant:"destructive",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"غير مصرح"}),e.jsx(cs,{children:"ليس لديك صلاحية الوصول إلى نظام الأمان. هذا النظام محمي ومخصص للمدير الأعلى فقط."})]})});const{data:be,isLoading:J,refetch:Fe}=$e({queryKey:["security-logs",B],queryFn:async()=>{var Le;console.log("🔄 Fetching security logs...");const ye=await(await ce("/api/security/logs")).json();return console.log("📊 Received logs:",((Le=ye.logs)==null?void 0:Le.length)||0),ye},refetchInterval:1e4,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),Oe=Ze({mutationFn:async({fingerprint:I,reason:ye})=>(await ce("/api/security/block","POST",{fingerprint:I,reason:ye})).json(),onSuccess:()=>{s({title:"تم حظر الجهاز",description:"تم حظر بصمة الجهاز بنجاح"}),Qe.invalidateQueries({queryKey:["security-logs"]}),j(!1)},onError:I=>{s({title:"خطأ",description:I.message||"فشل في حظر الجهاز",variant:"destructive"})}}),Ve=Ze({mutationFn:async I=>(await ce("/api/security/unblock","POST",{fingerprint:I})).json(),onSuccess:async()=>{s({title:"تم إلغاء الحظر",description:"تم إلغاء حظر بصمة الجهاز بنجاح"}),await Qe.invalidateQueries({queryKey:["security-logs"]}),await Fe()},onError:I=>{s({title:"خطأ",description:I.message||"فشل في إلغاء حظر الجهاز",variant:"destructive"})}}),Ne=Ze({mutationFn:async I=>{const ye=await ce(`/api/security/logs/${I}`,"DELETE");if(!ye.ok){const Le=await ye.json();throw new Error(Le.message||"فشل في حذف السجل")}return ye.json()},onSuccess:async()=>{s({title:"تم حذف السجل",description:"تم حذف السجل الأمني بنجاح"}),k&&(ke(!0),W(I=>{const ye=I.filter(Le=>Le.id!==k.id);return console.log("🗑️ Local log deleted:",k.id,"remaining:",ye.length),ye}),setTimeout(()=>{ke(!1),console.log("🔄 Auto-sync re-enabled after individual delete")},1e4)),y(!1),L(null)},onError:I=>{s({title:"خطأ",description:I.message||"فشل في حذف السجل",variant:"destructive"}),y(!1),L(null)}}),qe=Ze({mutationFn:async()=>{const I=await ce("/api/security/logs","DELETE");if(!I.ok){const ye=await I.json();throw new Error(ye.message||"فشل في مسح السجلات")}return I.json()},onSuccess:async I=>{s({title:"تم مسح جميع السجلات",description:`تم مسح جميع السجلات الأمنية بنجاح (${I.deletedCount||"جميع"} سجل)`}),ke(!0),W([]),console.log("🗑️ All local logs cleared"),setTimeout(()=>{ke(!1),console.log("🔄 Auto-sync re-enabled after clear all")},15e3),g(!1)},onError:I=>{s({title:"خطأ",description:I.message||"فشل في مسح السجلات",variant:"destructive"}),g(!1)}}),ve=Ze({mutationFn:async()=>{const I=await ce("/api/security/logs?complete=true","DELETE");if(!I.ok){const ye=await I.json();throw new Error(ye.message||"فشل في المسح الكامل")}return I.json()},onSuccess:async I=>{s({title:"تم المسح الكامل",description:`تم مسح جميع السجلات الأمنية نهائياً (${I.deletedCount} سجل)`,variant:"default"}),ke(!0),W([]),console.log("🗑️ Complete wipe - all local logs cleared"),setTimeout(()=>{ke(!1),console.log("🔄 Auto-sync re-enabled after complete wipe")},2e4),N(!1)},onError:I=>{s({title:"خطأ",description:I.message||"فشل في المسح الكامل",variant:"destructive"}),N(!1)}}),Ee=(be==null?void 0:be.logs)||[],[ne,ke]=gt.useState(!1);gt.useEffect(()=>{!J&&!ne&&(W(Ee),console.log("📱 Local logs synced with server:",Ee.length)),ne&&console.log("🚫 Sync suppressed - using local state")},[Ee.length,B,J,ne]);const tt=async()=>{ke(!1),W([]),await Qe.invalidateQueries({queryKey:["security-logs"]}),Fe(),console.log("🔄 Force refresh from server executed")},xt=U,Q=xt.filter(I=>{var ye,Le;if(c&&new Date(I.timestamp).toISOString().split("T")[0]!==c)return!1;if(f){const We=f.toLowerCase();if(!((ye=I.username)!=null&&ye.toLowerCase().includes(We)))return!1}if(n){const We=n.toLowerCase(),ct=re(I.timestamp).toLowerCase();if(!(I.ip.includes(n)||I.country.toLowerCase().includes(We)||I.fingerprint.includes(n)||((Le=I.username)==null?void 0:Le.toLowerCase().includes(We))||ct.includes(We)||I.reportType.toLowerCase().includes(We)||I.city&&I.city.toLowerCase().includes(We)))return!1}return!0}),oe=async()=>{console.log("🔄 Force refresh triggered"),Qe.clear(),Qe.removeQueries(),de(I=>I+1),await Qe.invalidateQueries({queryKey:["security-logs"]}),console.log("✅ Force refresh completed")},Ae=I=>{o(ye=>{const Le=new Set(ye);return Le.has(I)?Le.delete(I):Le.add(I),Le})},jt=()=>{o(new Set(Q.map(I=>I.id)))},O=()=>{o(new Set)},P=()=>{const I=new Date;I.setHours(0,0,0,0);const ye=Q.filter(Le=>{const We=new Date(Le.timestamp);return We.setHours(0,0,0,0),We.getTime()===I.getTime()});o(new Set(ye.map(Le=>Le.id)))},ee=I=>{const ye=Q.filter(Le=>Le.username===I);o(new Set(ye.map(Le=>Le.id)))},C=Ze({mutationFn:async I=>{let ye=0,Le=0;const We=await Promise.allSettled(I.map(async ct=>{try{const qt=await ce(`/api/security/logs/${ct}`,"DELETE");return qt.ok?(ye++,{success:!0,id:ct}):qt.status===404?(console.log(`⚠️ Log ${ct} already deleted or doesn't exist`),ye++,{success:!0,id:ct,alreadyDeleted:!0}):(Le++,{success:!1,id:ct,error:await qt.text()})}catch(qt){return Le++,{success:!1,id:ct,error:qt.message}}}));return{successCount:ye,errorCount:Le,total:I.length,results:We}},onSuccess:async I=>{I.successCount>0&&s({title:"تم حذف السجلات",description:I.errorCount>0?`تم حذف ${I.successCount} من ${I.total} سجل`:`تم حذف ${I.successCount} سجل بنجاح`,variant:(I.errorCount>0,"default")}),I.errorCount>0&&s({title:"تحذير",description:`فشل في حذف ${I.errorCount} سجل`,variant:"destructive"}),ke(!0),W(ye=>{const Le=ye.filter(We=>!l.has(We.id));return console.log("🗑️ Selected logs removed from UI:",l.size,"remaining:",Le.length),Le}),o(new Set),setTimeout(()=>{ke(!1),console.log("🔄 Auto-sync re-enabled after bulk delete")},1e4)},onError:I=>{s({title:"خطأ",description:I.message||"فشل في حذف السجلات المحددة",variant:"destructive"})}}),fe=I=>{L(I),y(!0)},le=()=>{l.size>0&&C.mutate(Array.from(l))},xe=()=>{k&&Ne.mutate(k.id)},Ye=()=>{g(!0)},Ft=()=>{qe.mutate()},Ut=()=>{N(!0)},Ds=()=>{ve.mutate()},dr=I=>{switch(I){case"failed_login":return e.jsx(ie,{variant:"destructive",children:"محاولة دخول فاشلة"});case"suspicious_activity":return e.jsx(ie,{variant:"secondary",children:"نشاط مشبوه"});case"manual_report":return e.jsx(ie,{variant:"default",children:"حظر يدوي"});case"admin_action":return e.jsx(ie,{variant:"outline",className:"text-blue-600 border-blue-200",children:"إجراء إداري"});default:return e.jsx(ie,{variant:"outline",children:I})}},En=(I,ye)=>{T(I),$(ye||""),j(!0)},ur=(I,ye)=>{T(I),$(ye||""),p(!0)},Qr=()=>{Oe.mutate({fingerprint:S,reason:"حظر يدوي من المسؤول"},{onSuccess:async()=>{s({title:"تم حظر الجهاز",description:"تم حظر بصمة الجهاز بنجاح"}),j(!1),await oe()}})},Ia=()=>{Ve.mutate(S,{onSuccess:async()=>{s({title:"تم رفع الحظر",description:`تم رفع الحظر عن الجهاز بنجاح${E?" للمستخدم: "+E:""}`,variant:"default"}),p(!1),await oe()}})};return e.jsx(Nc,{children:e.jsxs("div",{className:"container py-1 sm:py-6 space-y-1 sm:space-y-6 px-1 sm:px-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[e.jsx(Zt,{className:"h-4 w-4 sm:h-8 sm:w-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs sm:text-2xl font-bold",children:"نظام الأمان المتقدم"}),e.jsx("p",{className:"text-[8px] sm:text-sm text-muted-foreground",children:"مراقبة ومتابعة محاولات الدخول المشبوهة"})]})]}),e.jsxs(M,{onClick:tt,className:"font-bold h-5 sm:h-10 text-[8px] sm:text-sm",size:"sm",children:[e.jsx(ys,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"تحديث"]})]}),e.jsxs("div",{className:"grid gap-1 sm:gap-4 grid-cols-2 md:grid-cols-4",children:[e.jsxs(_,{className:"min-w-0",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-0.5 sm:pb-2 px-0.5 sm:px-6 pt-0.5 sm:pt-6",children:[e.jsx(X,{className:"text-[7px] sm:text-sm font-medium truncate",children:"إجمالي السجلات"}),e.jsx(wr,{className:"h-1.5 w-1.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]}),e.jsx(z,{className:"px-0.5 sm:px-6 pb-0.5 sm:pb-6",children:e.jsx("div",{className:"text-xs sm:text-2xl font-bold",children:xt.length})})]}),e.jsxs(_,{className:"min-w-0",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-0.5 sm:pb-2 px-0.5 sm:px-6 pt-0.5 sm:pt-6",children:[e.jsx(X,{className:"text-[7px] sm:text-sm font-medium truncate",children:"الأجهزة المحظورة"}),e.jsx(Pj,{className:"h-1.5 w-1.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]}),e.jsx(z,{className:"px-0.5 sm:px-6 pb-0.5 sm:pb-6",children:e.jsx("div",{className:"text-xs sm:text-2xl font-bold text-red-600",children:xt.filter(I=>I.blocked).length})})]}),e.jsxs(_,{className:"min-w-0",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-0.5 sm:pb-2 px-0.5 sm:px-6 pt-0.5 sm:pt-6",children:[e.jsx(X,{className:"text-[7px] sm:text-sm font-medium truncate",children:"نشاط مشبوه"}),e.jsx(Gr,{className:"h-1.5 w-1.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]}),e.jsx(z,{className:"px-0.5 sm:px-6 pb-0.5 sm:pb-6",children:e.jsx("div",{className:"text-xs sm:text-2xl font-bold text-orange-600",children:xt.filter(I=>I.reportType==="suspicious_activity").length})})]}),e.jsxs(_,{className:"min-w-0",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-0.5 sm:pb-2 px-0.5 sm:px-6 pt-0.5 sm:pt-6",children:[e.jsx(X,{className:"text-[7px] sm:text-sm font-medium truncate",children:"صور أمنية"}),e.jsx(il,{className:"h-1.5 w-1.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]}),e.jsx(z,{className:"px-0.5 sm:px-6 pb-0.5 sm:pb-6",children:e.jsx("div",{className:"text-xs sm:text-2xl font-bold text-blue-600",children:xt.filter(I=>I.imageFileName).length})})]})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"px-1 sm:px-6 py-1 sm:py-6",children:[e.jsx(X,{className:"text-xs sm:text-lg",children:"البحث والتصفية وإدارة السجلات"}),e.jsx(Se,{className:"text-[8px] sm:text-sm",children:"ابحث في السجلات أو قم بإدارة البيانات الأمنية (للمدير الأعلى فقط)"})]}),e.jsxs(z,{className:"px-1 sm:px-6 pb-1 sm:pb-6",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1 sm:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute left-1 sm:left-3 top-1/2 transform -translate-y-1/2 h-2 w-2 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"البحث العام (IP، الدولة، المستخدم...)",value:n,onChange:I=>r(I.target.value),className:"pl-6 sm:pl-10 h-5 sm:h-10 text-[8px] sm:text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_j,{className:"absolute left-1 sm:left-3 top-1/2 transform -translate-y-1/2 h-2 w-2 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(pe,{type:"date",placeholder:"فلترة بالتاريخ",value:c,onChange:I=>d(I.target.value),className:"pl-6 sm:pl-10 h-5 sm:h-10 text-[8px] sm:text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_i,{className:"absolute left-1 sm:left-3 top-1/2 transform -translate-y-1/2 h-2 w-2 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"فلترة بالبريد الإلكتروني/المستخدم",value:f,onChange:I=>x(I.target.value),className:"pl-6 sm:pl-10 h-5 sm:h-10 text-[8px] sm:text-sm"})]})]}),(n||c||f)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"المرشحات النشطة:"}),n&&e.jsxs(ie,{variant:"secondary",className:"cursor-pointer",onClick:()=>r(""),children:["البحث: ",n," ✕"]}),c&&e.jsxs(ie,{variant:"secondary",className:"cursor-pointer",onClick:()=>d(""),children:["التاريخ: ",c," ✕"]}),f&&e.jsxs(ie,{variant:"secondary",className:"cursor-pointer",onClick:()=>x(""),children:["المستخدم: ",f," ✕"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{r(""),d(""),x("")},className:"h-3 sm:h-6 text-[8px] sm:text-xs",children:"مسح الكل"})]}),e.jsx("div",{className:"flex gap-4 items-center",children:(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsxs("div",{className:"flex gap-1 sm:gap-2 flex-wrap",children:[e.jsxs(M,{variant:"destructive",size:"sm",onClick:Ye,disabled:qe.isPending||xt.length===0,className:"bg-orange-600 hover:bg-orange-700 h-5 sm:h-10 text-[8px] sm:text-sm",children:[e.jsx(mx,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"حذف جميع السجلات (مع التسجيل)"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:Ut,disabled:ve.isPending||xt.length===0,className:"bg-red-700 hover:bg-red-800 h-5 sm:h-10 text-[8px] sm:text-sm",children:[e.jsx(is,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1 sm:ml-2"}),"مسح كامل نهائي"]})]})})]}),(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsxs("div",{className:"mt-1 sm:mt-4 p-1 sm:p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-[8px] sm:text-sm",children:"أدوات التحديد والحذف المتعدد"}),e.jsx("div",{className:"text-[8px] sm:text-sm text-gray-600",children:l.size>0?e.jsxs("span",{className:"font-medium text-blue-600",children:["(",l.size," سجل محدد)"]}):e.jsx("span",{className:"text-gray-500",children:"اختر السجلات من الجدول أدناه"})})]}),l.size===0&&e.jsx("div",{className:"mb-1 sm:mb-3 p-1 sm:p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"text-blue-500 mt-0.5",children:"ℹ️"}),e.jsxs("div",{className:"text-[8px] sm:text-sm text-blue-700",children:[e.jsx("div",{className:"font-medium mb-1 text-[8px] sm:text-sm",children:"كيفية استخدام التحديد المتعدد:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-[6px] sm:text-xs",children:[e.jsx("li",{children:"استخدم أزرار التحديد السريع أدناه"}),e.jsx("li",{children:"أو حدد مربعات الاختيار بجانب السجلات في الجدول"}),e.jsx("li",{children:'ثم اضغط على "حذف المحدد" لحذف السجلات المختارة'})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-1 sm:gap-3",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("p",{className:"text-[8px] sm:text-xs font-medium text-gray-700",children:"التحديد العام"}),e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:jt,disabled:Q.length===0,className:"text-[8px] sm:text-xs h-5 sm:h-8",children:"تحديد الكل"}),e.jsx(M,{variant:"outline",size:"sm",onClick:O,disabled:l.size===0,className:"text-[8px] sm:text-xs h-5 sm:h-8",children:"إلغاء التحديد"})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:"التحديد بالتاريخ"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:P,disabled:Q.length===0,className:"text-[10px] sm:text-xs w-full h-6 sm:h-8",children:[e.jsx(_j,{className:"h-2 w-2 sm:h-3 sm:w-3 ml-1"}),"سجلات اليوم"]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:"التحديد بالمستخدم"}),e.jsxs("select",{className:"w-full text-[10px] sm:text-xs p-1 border rounded h-6 sm:h-8",onChange:I=>I.target.value&&ee(I.target.value),defaultValue:"",children:[e.jsx("option",{value:"",children:"اختر مستخدم..."}),Array.from(new Set(Q.filter(I=>I.username).map(I=>I.username))).map(I=>e.jsx("option",{value:I,children:I},I))]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:"الإجراءات"}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:le,disabled:l.size===0||C.isPending,className:`text-[10px] sm:text-xs w-full h-6 sm:h-8 ${l.size===0?"bg-gray-400 hover:bg-gray-400 cursor-not-allowed opacity-50":"bg-red-600 hover:bg-red-700"}`,title:l.size===0?"حدد سجلات أولاً للحذف":`حذف ${l.size} سجل محدد`,children:[e.jsx(is,{className:"h-2 w-2 sm:h-3 sm:w-3 ml-1"}),l.size===0?"حدد سجلات للحذف":`حذف المحدد (${l.size})`]})]})]})]})]})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"px-2 sm:px-6 py-2 sm:py-6",children:[e.jsx(X,{className:"text-sm sm:text-lg",children:"سجلات الأمان"}),e.jsx(Se,{className:"text-[10px] sm:text-sm",children:"عرض جميع محاولات الدخول والأنشطة المشبوهة المسجلة"})]}),e.jsxs(z,{className:"px-1 sm:px-6 pb-1 sm:pb-6",children:[J?e.jsx("div",{className:"flex justify-center items-center py-4 sm:py-10",children:e.jsx(ys,{className:"h-4 w-4 sm:h-8 sm:w-8 animate-spin"})}):e.jsx("div",{className:"overflow-x-auto -mx-1 sm:mx-0",children:e.jsxs(Gs,{className:"min-w-full",children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsx(ae,{className:"text-center w-6 sm:w-12 text-[8px] sm:text-sm px-1",children:e.jsx(Di,{checked:l.size===Q.length&&Q.length>0,onCheckedChange:I=>{I?jt():O()},className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[60px]",children:"التاريخ"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[80px]",children:"IP"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[70px]",children:"الموقع"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[70px]",children:"المستخدم"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[50px]",children:"المحاولات"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[60px] hidden sm:table-cell",children:"النوع"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[50px]",children:"الصورة"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[50px]",children:"الحالة"}),e.jsx(ae,{className:"text-right text-[8px] sm:text-sm px-1 min-w-[80px]",children:"الإجراءات"})]})}),e.jsx(Qs,{children:Q.map(I=>e.jsxs(kt,{className:I.blocked?"bg-red-50":"",children:[(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsx(se,{className:"text-center px-1",children:e.jsx(Di,{checked:l.has(I.id),onCheckedChange:()=>Ae(I.id),className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(se,{className:"px-1",children:e.jsx("div",{className:"text-[8px] sm:text-sm",children:re(I.timestamp)})}),e.jsx(se,{className:"px-1",children:e.jsx("code",{className:"text-[8px] sm:text-sm",children:I.ip})}),e.jsx(se,{className:"px-1",children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(xc,{className:"h-2 w-2 sm:h-3 sm:w-3"}),e.jsx("span",{className:"text-[8px] sm:text-sm",children:I.country}),I.city!=="Unknown"&&e.jsxs("span",{className:"text-[8px] sm:text-sm text-muted-foreground hidden sm:inline",children:[", ",I.city]})]})}),e.jsxs(se,{className:"px-1",children:[e.jsx("div",{className:"text-[8px] sm:text-sm",children:I.username||"غير محدد"}),e.jsxs("div",{className:"text-[6px] sm:text-xs text-muted-foreground hidden sm:block",children:[I.fingerprint.substring(0,8),"..."]})]}),e.jsx(se,{className:"px-1",children:e.jsx(ie,{variant:I.attempts>=3?"destructive":"secondary",className:"text-[8px] px-1 py-0",children:I.attempts})}),e.jsx(se,{className:"px-1 hidden sm:table-cell",children:dr(I.reportType)}),e.jsx(se,{className:"px-1",children:I.imageFileName?e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>i(I),className:"h-5 sm:h-8 w-5 sm:w-8 p-0",children:e.jsx(il,{className:"h-2 w-2 sm:h-4 sm:w-4"})}):e.jsx("span",{className:"text-muted-foreground text-[8px] sm:text-sm",children:"لا توجد"})}),e.jsx(se,{className:"px-1",children:I.blocked?e.jsx(ie,{variant:"destructive",className:"text-[8px] px-1 py-0",children:"محظور"}):e.jsx(ie,{variant:"default",className:"text-[8px] px-1 py-0",children:"مسموح"})}),e.jsx(se,{className:"px-1",children:e.jsxs("div",{className:"flex gap-0.5 sm:gap-2 flex-wrap",children:[I.blocked?e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ur(I.fingerprint,I.username),disabled:Ve.isPending,className:"text-green-600 hover:text-green-700 border-green-200 hover:border-green-300 h-5 sm:h-8 text-[8px] sm:text-sm px-1 sm:px-3",children:[e.jsx(ks,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-0.5 sm:ml-1"}),e.jsx("span",{className:"hidden sm:inline",children:"رفع الحظر"}),e.jsx("span",{className:"sm:hidden",children:"رفع"})]}):e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>En(I.fingerprint,I.username),disabled:Oe.isPending,className:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 h-5 sm:h-8 text-[8px] sm:text-sm px-1 sm:px-3",children:[e.jsx(Pj,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-0.5 sm:ml-1"}),e.jsx("span",{className:"hidden sm:inline",children:"حظر"}),e.jsx("span",{className:"sm:hidden",children:"حظر"})]}),(t==null?void 0:t.email)==="ss73ss73ss73@gmail.com"&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>fe(I),disabled:Ne.isPending,className:"text-orange-600 hover:text-orange-700 border-orange-200 hover:border-orange-300 h-5 sm:h-8 text-[8px] sm:text-sm px-1 sm:px-3",children:[e.jsx(is,{className:"h-2 w-2 sm:h-4 sm:w-4 ml-0.5 sm:ml-1"}),e.jsx("span",{className:"hidden sm:inline",children:"حذف"}),e.jsx("span",{className:"sm:hidden",children:"حذف"})]})]})})]},I.id))})]})}),!J&&Q.length===0&&e.jsx("div",{className:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm",children:"لا توجد سجلات أمان للعرض"})]})]}),e.jsx(Ht,{open:!!a,onOpenChange:I=>!I&&i(null),children:e.jsxs($t,{className:"max-w-2xl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"الصورة الأمنية"}),e.jsx(ls,{children:"صورة تم التقاطها تلقائيًا عند اكتشاف نشاط مشبوه"})]}),a&&a.imageFileName&&e.jsxs("div",{className:"space-y-4",children:[G?e.jsxs("div",{className:"flex justify-center items-center h-64 bg-gray-100 rounded-lg",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"mr-2 text-gray-600",children:"جاري تحميل الصورة..."})]}):F?e.jsx("img",{src:F,alt:"Security Capture",className:"w-full rounded-lg border"}):e.jsx("div",{className:"flex justify-center items-center h-64 bg-red-50 rounded-lg border border-red-200",children:e.jsx("span",{className:"text-red-600",children:"فشل في تحميل الصورة الأمنية"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"التاريخ:"})," ",re(a.timestamp)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"IP:"})," ",a.ip]}),e.jsxs("div",{children:[e.jsx("strong",{children:"الموقع:"})," ",a.country,", ",a.city]}),e.jsxs("div",{children:[e.jsx("strong",{children:"المحاولات:"})," ",a.attempts]})]})]})]})}),e.jsx(Ht,{open:h,onOpenChange:j,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"تأكيد حظر الجهاز"}),e.jsx(ls,{children:"هل أنت متأكد من حظر هذا الجهاز؟ سيتم منعه من الوصول للنظام نهائياً."})]}),e.jsxs(_n,{children:[e.jsx(M,{variant:"outline",onClick:()=>j(!1),children:"إلغاء"}),e.jsx(M,{variant:"destructive",onClick:Qr,disabled:Oe.isPending,children:"تأكيد الحظر"})]})]})}),e.jsx(Ht,{open:v,onOpenChange:p,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-green-600"}),"تأكيد رفع الحظر"]}),e.jsxs(ls,{children:["هل أنت متأكد من رفع الحظر عن هذا الجهاز؟",E&&e.jsxs("span",{className:"block mt-2 font-medium",children:["المستخدم: ",E]}),e.jsxs("span",{className:"block mt-1 text-xs text-muted-foreground",children:["بصمة الجهاز: ",S.substring(0,16),"..."]})]})]}),e.jsxs(_n,{children:[e.jsx(M,{variant:"outline",onClick:()=>p(!1),children:"إلغاء"}),e.jsx(M,{onClick:Ia,disabled:Ve.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:Ve.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري رفع الحظر..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ks,{className:"h-4 w-4 ml-1"}),"تأكيد رفع الحظر"]})})]})]})}),e.jsx(Ht,{open:b,onOpenChange:y,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-orange-600"}),"تأكيد حذف السجل"]}),e.jsxs(ls,{children:["هل أنت متأكد من حذف هذا السجل الأمني؟ هذا الإجراء لا يمكن التراجع عنه.",k&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded border",children:[e.jsx("div",{className:"text-sm font-medium",children:"تفاصيل السجل:"}),e.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[e.jsxs("div",{children:["التاريخ: ",k.timestamp]}),e.jsxs("div",{children:["IP: ",k.ip]}),e.jsxs("div",{children:["المستخدم: ",k.username||"غير محدد"]}),e.jsxs("div",{children:["النوع: ",k.reportType]})]})]})]})]}),e.jsxs(_n,{children:[e.jsx(M,{variant:"outline",onClick:()=>y(!1),children:"إلغاء"}),e.jsx(M,{variant:"destructive",onClick:xe,disabled:Ne.isPending,children:Ne.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري الحذف..."]}):e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"تأكيد الحذف"]})})]})]})}),e.jsx(Ht,{open:m,onOpenChange:g,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(mx,{className:"h-5 w-5 text-orange-600"}),"تأكيد حذف جميع السجلات الأمنية"]}),e.jsx(ls,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-800 font-medium mb-2",children:[e.jsx(Gr,{className:"h-5 w-5"}),"تحذير مهم"]}),e.jsxs("div",{className:"text-orange-700 text-sm",children:["سيتم حذف جميع السجلات الأمنية (",xt.length," سجل) مع تسجيل إجراء الحذف في النظام."]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"font-medium",children:"ما سيحدث:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600 mr-4",children:[e.jsx("li",{children:"حذف جميع سجلات الأمان الحالية"}),e.jsx("li",{children:"إنشاء سجل جديد يوثق عملية الحذف"}),e.jsx("li",{children:"الاحتفاظ بأثر العملية للمراجعة المستقبلية"}),e.jsx("li",{children:"إمكانية تتبع من قام بالحذف ومتى"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:"صلاحية المدير الأعلى فقط"}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["المستخدم الحالي: ",t==null?void 0:t.email]})]})]})})]}),e.jsxs(_n,{children:[e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"إلغاء"}),e.jsx(M,{variant:"destructive",onClick:Ft,disabled:qe.isPending,className:"bg-orange-600 hover:bg-orange-700",children:qe.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري الحذف..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mx,{className:"h-4 w-4 ml-1"}),"تأكيد حذف جميع السجلات"]})})]})]})}),e.jsx(Ht,{open:w,onOpenChange:N,children:e.jsxs($t,{children:[e.jsxs(Bt,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-red-700"}),"تأكيد المسح الكامل النهائي"]}),e.jsx(ls,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-red-700 font-bold text-lg",children:"تحذير خطير: مسح كامل وشامل!"}),e.jsxs("div",{className:"bg-red-100 border-2 border-red-300 rounded-lg p-4",children:[e.jsxs("div",{className:"text-red-800 font-medium",children:["⚠️ هذا الإجراء سيحذف جميع السجلات الأمنية (",xt.length," سجل) نهائياً"]}),e.jsxs("div",{className:"text-red-700 text-sm mt-2",children:["• لن يتم تسجيل أي أثر لعملية الحذف هذه",e.jsx("br",{}),"• لا يمكن التراجع عن هذا الإجراء أبداً",e.jsx("br",{}),"• سيتم فقدان جميع البيانات الأمنية التاريخية",e.jsx("br",{}),"• سيصبح النظام كأنه جديد تماماً"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:"عملية مقتصرة على المدير الأعلى فقط"}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["البريد الإلكتروني: ",t==null?void 0:t.email]})]})]})})]}),e.jsxs(_n,{children:[e.jsx(M,{variant:"outline",onClick:()=>N(!1),children:"إلغاء"}),e.jsx(M,{variant:"destructive",onClick:Ds,disabled:ve.isPending,className:"bg-red-700 hover:bg-red-800",children:ve.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري المسح الكامل..."]}):e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"h-4 w-4 ml-1"}),"مسح كامل نهائي"]})})]})]})})]})})}function sce(){const[t,s]=u.useState([]),[n,r]=u.useState(!1),[a,i]=u.useState(null),[l,o]=u.useState("sale5mjeddi@gmail.com"),c=h=>{s(j=>[...j,`${new Date().toLocaleTimeString()}: ${h}`])},d=async()=>{r(!0),c("🚨 بدء اختبار التقاط الصورة الأمنية...");try{const h=await ds.requestCameraPermission();if(c(`📋 إذن الكاميرا: ${h?"مُمنوح":"مرفوض"}`),!h){c("❌ لا يمكن التقاط الصورة بدون إذن الكاميرا"),r(!1);return}const j=await ds.captureSecurityImage();c(`📸 نتيجة التقاط الصورة: ${j?"نجح":"فشل"}`),j?(i(j),c("✅ تم التقاط صورة أمنية بنجاح"),await ds.reportSuspiciousActivity({username:l,error:"اختبار نظام الأمان",attempts:1,securityImage:j}),c("📝 تم إرسال تقرير النشاط المشبوه")):c("❌ فشل في التقاط الصورة الأمنية")}catch(h){c(`❌ خطأ في الاختبار: ${h.message}`),console.error("Security test error:",h)}r(!1)},f=async()=>{c("🔐 بدء اختبار محاولة دخول فاشلة...");try{const h=await ds.getDeviceInfo();c("📱 معلومات الجهاز: بصمة الجهاز مُستخرجة");const j=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:"wrong_password_test",...h})}),v=await j.json();if(c(`🚫 نتيجة محاولة الدخول: ${v.message}`),!j.ok){c("✅ تم تسجيل محاولة الدخول الفاشلة");const p=ds.incrementAttempts();if(c(`🔢 عدد المحاولات: ${p}`),p===1){c("📸 بدء التقاط صورة أمنية تلقائية...");const b=await ds.captureSecurityImage();b&&(i(b),c("✅ تم التقاط صورة أمنية تلقائية"))}}}catch(h){c(`❌ خطأ في اختبار محاولة الدخول: ${h.message}`),console.error("Failed login test error:",h)}},x=()=>{s([]),i(null),ds.resetAttempts(),c("🧹 تم مسح النتائج وإعادة تعيين المحاولات")};return e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"اختبار نظام الأمان"}),e.jsx("p",{className:"text-muted-foreground",children:"اختبار التقاط الصور والأنظمة الأمنية"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(il,{className:"h-5 w-5"}),"عناصر التحكم في الاختبار"]}),e.jsx(Se,{children:"اختبار مكونات النظام الأمني المختلفة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"البريد الإلكتروني للاختبار"}),e.jsx(as,{value:l,onChange:h=>o(h.target.value),placeholder:"أدخل البريد الإلكتروني",className:"mb-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{onClick:d,disabled:n,className:"w-full",children:[e.jsx(il,{className:"h-4 w-4 ml-2"}),n?"جاري التقاط الصورة...":"اختبار التقاط الصورة"]}),e.jsxs(M,{onClick:f,variant:"outline",className:"w-full",children:[e.jsx(Gr,{className:"h-4 w-4 ml-2"}),"اختبار محاولة دخول فاشلة"]}),e.jsx(M,{onClick:x,variant:"destructive",className:"w-full",children:"مسح النتائج"})]})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"آخر صورة مُلتقطة"})}),e.jsx(z,{children:a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:a,alt:"Security Capture",className:"w-full rounded-lg border"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"تم التقاط الصورة بنجاح مع الطابع الزمني"})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد صور مُلتقطة بعد"})})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"نتائج الاختبار"]})}),e.jsx(z,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto",children:t.length>0?e.jsx("div",{className:"space-y-1 text-sm font-mono",children:t.map((h,j)=>e.jsx("div",{className:"text-right",children:h},j))}):e.jsx("p",{className:"text-muted-foreground text-center",children:"لا توجد نتائج اختبار بعد. انقر على أحد أزرار الاختبار أعلاه."})})})]}),e.jsxs(os,{children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"ملاحظة مهمة"}),e.jsx(cs,{children:"هذه الصفحة مخصصة للاختبار فقط. نظام التقاط الصور يحتاج إذن الوصول للكاميرا من المتصفح. تأكد من السماح بالوصول للكاميرا عندما يطلب المتصفح ذلك."})]})]})}function nce(){const[t,s]=u.useState(""),[n,r]=u.useState(""),[a,i]=u.useState(null),[l,o]=u.useState(!1),c=async()=>{o(!0),i(null);try{const d=`demo_test_${Date.now()}`,x=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t||"demo@security-test.com",password:n||"wrong_password",fingerprint:d,userAgent:"Security Demo Browser",ipAddress:"192.168.1.100"})})).json(),j=await(await fetch("/api/security/check-block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fingerprint:d})})).json();i({loginResponse:x,blocked:j.blocked,fingerprint:d,timestamp:new Date().toISOString()})}catch{i({error:"خطأ في الاتصال بالخادم",timestamp:new Date().toISOString()})}o(!1)};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center justify-center gap-2",children:[e.jsx(Zt,{className:"text-red-500"}),"عرض توضيحي لنظام الأمان"]}),e.jsx("p",{className:"text-muted-foreground",children:"تجربة عملية لنظام الأمان الذكي مع التقاط الصور وتسجيل المحاولات المشبوهة"})]}),e.jsxs(cr,{defaultValue:"demo",className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ot,{value:"demo",children:"تجربة النظام"}),e.jsx(Ot,{value:"features",children:"المميزات"}),e.jsx(Ot,{value:"logs",children:"السجلات"})]}),e.jsx(Kt,{value:"demo",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(il,{className:"text-blue-500"}),"اختبار النظام الأمني"]}),e.jsx(Se,{children:"قم بإدخال بيانات خاطئة لتجربة كيفية عمل نظام الأمان في التقاط الصور وتسجيل المحاولات المشبوهة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"demo-email",children:"البريد الإلكتروني"}),e.jsx(as,{id:"demo-email",type:"email",placeholder:"demo@security-test.com",value:t,onChange:d=>s(d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"demo-password",children:"كلمة المرور"}),e.jsx(as,{id:"demo-password",type:"password",placeholder:"wrong_password",value:n,onChange:d=>r(d.target.value)})]})]}),e.jsxs(os,{children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx(zn,{children:"تحذير"}),e.jsx(cs,{children:"هذا اختبار للنظام الأمني. استخدم بيانات وهمية فقط. بعد 3 محاولات فاشلة، سيتم حظر جهازك مؤقتاً."})]}),e.jsx(M,{onClick:c,disabled:l,className:"w-full",variant:"destructive",children:l?"جارٍ الاختبار...":"اختبار محاولة دخول فاشلة"}),a&&e.jsxs(_,{className:"mt-4",children:[e.jsx(q,{children:e.jsx(X,{className:"flex items-center gap-2 text-sm",children:a.error?e.jsxs(e.Fragment,{children:[e.jsx(Jd,{className:"text-red-500 h-4 w-4"}),"نتيجة الاختبار - خطأ"]}):e.jsxs(e.Fragment,{children:[e.jsx(ks,{className:"text-green-500 h-4 w-4"}),"نتيجة الاختبار - نجح"]})})}),e.jsx(z,{className:"space-y-2",children:a.error?e.jsx(os,{variant:"destructive",children:e.jsx(cs,{children:a.error})}):e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"رد الخادم:"}),e.jsx("span",{children:a.loginResponse.message})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"حالة الحظر:"}),e.jsx("span",{className:a.blocked?"text-red-500":"text-green-500",children:a.blocked?"محظور":"غير محظور"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"بصمة الجهاز:"}),e.jsxs("span",{className:"font-mono text-xs",children:[a.fingerprint.substring(0,16),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"وقت الاختبار:"}),e.jsx("span",{children:new Date(a.timestamp).toLocaleString("ar-EG")})]}),e.jsxs(os,{className:"mt-3",children:[e.jsx(il,{className:"h-4 w-4"}),e.jsx(zn,{children:"تم تفعيل النظام الأمني"}),e.jsx(cs,{children:"تم تسجيل هذه المحاولة في السجلات الأمنية وتم إنتاج صورة أمنية تلقائياً. يمكن للمسؤولين مراجعة السجلات والصور في لوحة الإدارة."})]})]})})]})]})]})}),e.jsx(Kt,{value:"features",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(il,{className:"text-blue-500"}),"التقاط الصور التلقائي"]})}),e.jsx(z,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• التقاط صور أمنية عند كل محاولة دخول فاشلة"}),e.jsx("li",{children:"• حفظ الصور مع طوابع زمنية وبصمات الأجهزة"}),e.jsx("li",{children:"• إنتاج صور بديلة عند عدم توفر الكاميرا"}),e.jsx("li",{children:"• عرض تحذيرات أمنية في الصور المولدة"})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Zt,{className:"text-green-500"}),"الحماية المتقدمة"]})}),e.jsx(z,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• حظر تلقائي بعد 3 محاولات فاشلة"}),e.jsx("li",{children:"• تتبع بصمات الأجهزة الفريدة"}),e.jsx("li",{children:"• تسجيل عناوين IP والموقع الجغرافي"}),e.jsx("li",{children:"• منع الوصول للأجهزة المحظورة"})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(wr,{className:"text-purple-500"}),"المراقبة الذكية"]})}),e.jsx(z,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• تسجيل شامل لجميع المحاولات"}),e.jsx("li",{children:"• معلومات تفصيلية عن كل محاولة"}),e.jsx("li",{children:"• تصنيف مستويات الخطر"}),e.jsx("li",{children:"• إشعارات فورية للمسؤولين"})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Pj,{className:"text-red-500"}),"إدارة الحظر"]})}),e.jsx(z,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• حظر وإلغاء حظر الأجهزة يدوياً"}),e.jsx("li",{children:"• سجلات إلغاء الحظر للتدقيق"}),e.jsx("li",{children:"• واجهة إدارة سهلة الاستخدام"}),e.jsx("li",{children:"• تتبع حالة الحظر في الوقت الفعلي"})]})})]})]})}),e.jsx(Kt,{value:"logs",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"الوصول لسجلات الأمان"}),e.jsx(Se,{children:"يمكن للمسؤولين الوصول لسجلات الأمان الكاملة من خلال لوحة الإدارة"})]}),e.jsx(z,{children:e.jsxs(os,{children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx(zn,{children:"ملاحظة هامة"}),e.jsx(cs,{children:"السجلات الأمنية والصور متاحة فقط للمسؤولين المخولين. يتم حفظ جميع الأحداث الأمنية مع تفاصيل كاملة للمراجعة والتدقيق."})]})})]})})]})]})}function rce(){var k;const[t,s]=u.useState(1),[n,r]=u.useState(""),[a,i]=u.useState("all"),[l,o]=u.useState("all"),[c,d]=u.useState(""),[f,x]=u.useState(""),[h,j]=u.useState(null);u.useEffect(()=>{document.title="سجلات التحويلات الداخلية - لوحة تحكم المدير"},[]);const{data:v,isLoading:p,refetch:b}=$e({queryKey:["/api/admin/internal-transfer-logs",t,n,a,l,c,f],queryFn:async()=>{const L=new URLSearchParams({page:t.toString(),limit:"50",...n&&{search:n},...a&&a!=="all"&&{currency:a},...l&&l!=="all"&&{status:l},...c&&{dateFrom:c},...f&&{dateTo:f}}),S=localStorage.getItem("auth_token"),T=await fetch(`/api/admin/internal-transfer-logs?${L}`,{headers:{...S&&{Authorization:`Bearer ${S}`}}});if(T.status===401){localStorage.removeItem("auth_token"),window.location.href="/auth";return}if(!T.ok)throw new Error("فشل في جلب سجلات التحويلات");return T.json()}}),{data:y}=$e({queryKey:["/api/admin/internal-transfer-logs",h],queryFn:async()=>{if(!h)return null;const L=localStorage.getItem("auth_token"),S=await fetch(`/api/admin/internal-transfer-logs/${h}`,{headers:{...L&&{Authorization:`Bearer ${L}`}}});if(S.status===401){localStorage.removeItem("auth_token"),window.location.href="/auth";return}if(!S.ok)throw new Error("فشل في جلب تفاصيل السجل");return S.json()},enabled:!!h}),m=()=>{s(1),b()},g=()=>{r(""),i("all"),o("all"),d(""),x(""),s(1),b()},w=(L,S)=>`${parseFloat(L).toLocaleString("ar-EG",{minimumFractionDigits:2})} ${S}`,N=L=>{switch(L){case"completed":return e.jsx(ie,{variant:"default",className:"bg-green-100 text-green-800",children:"مكتمل"});case"failed":return e.jsx(ie,{variant:"destructive",children:"فاشل"});default:return e.jsx(ie,{variant:"secondary",children:L})}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"سجلات التحويلات الداخلية"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"مراقبة جميع التحويلات الداخلية بين المستخدمين"})]})}),(v==null?void 0:v.statistics)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إجمالي التحويلات"}),e.jsx(js,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:v.statistics.totalTransfers.toLocaleString("ar-EG")})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إجمالي المبالغ"}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:parseFloat(v.statistics.totalAmount).toLocaleString("ar-EG",{minimumFractionDigits:2})})})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(X,{className:"text-sm font-medium",children:"إجمالي العمولات"}),e.jsx(x0,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:parseFloat(v.statistics.totalCommission).toLocaleString("ar-EG",{minimumFractionDigits:2})})})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Fn,{className:"h-5 w-5"}),"البحث والترشيح"]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"البحث"}),e.jsx(as,{placeholder:"ابحث بالاسم أو رقم الحساب...",value:n,onChange:L=>r(L.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"العملة"}),e.jsxs(Nt,{value:a,onValueChange:i,children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر العملة"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع العملات"}),e.jsx(te,{value:"LYD",children:"دينار ليبي"}),e.jsx(te,{value:"USD",children:"دولار أمريكي"}),e.jsx(te,{value:"EUR",children:"يورو"}),e.jsx(te,{value:"TRY",children:"ليرة تركية"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"الحالة"}),e.jsxs(Nt,{value:l,onValueChange:o,children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر الحالة"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الحالات"}),e.jsx(te,{value:"completed",children:"مكتمل"}),e.jsx(te,{value:"failed",children:"فاشل"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"من تاريخ"}),e.jsx(as,{type:"date",value:c,onChange:L=>d(L.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"إلى تاريخ"}),e.jsx(as,{type:"date",value:f,onChange:L=>x(L.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ns,{onClick:m,children:[e.jsx(Fn,{className:"h-4 w-4 ml-2"}),"بحث"]}),e.jsx(Ns,{variant:"outline",onClick:g,children:"مسح الفلاتر"})]})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-5 w-5"}),"سجلات التحويلات"]}),(v==null?void 0:v.pagination)&&e.jsxs(Se,{children:["عرض ",v.logs.length," من ",v.pagination.totalCount," سجل (الصفحة ",v.pagination.currentPage," من ",v.pagination.totalPages,")"]})]}),e.jsxs(z,{children:[p?e.jsx("div",{className:"text-center py-8",children:"جاري التحميل..."}):(k=v==null?void 0:v.logs)!=null&&k.length?e.jsx("div",{className:"rounded-md border",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"رقم السجل"}),e.jsx(ae,{children:"المرسل"}),e.jsx(ae,{children:"المستلم"}),e.jsx(ae,{children:"المبلغ"}),e.jsx(ae,{children:"العمولة"}),e.jsx(ae,{children:"العملة"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"التاريخ"}),e.jsx(ae,{children:"الإجراءات"})]})}),e.jsx(Qs,{children:v.logs.map(L=>e.jsxs(kt,{children:[e.jsxs(se,{className:"font-medium",children:["#",L.id]}),e.jsx(se,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.senderName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:L.senderAccountNumber})]})}),e.jsx(se,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.receiverName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:L.receiverAccountNumber})]})}),e.jsx(se,{children:w(L.amount,L.currency)}),e.jsx(se,{children:w(L.commission,L.currency)}),e.jsx(se,{children:L.currency}),e.jsx(se,{children:N(L.status)}),e.jsx(se,{children:Bn(new Date(L.createdAt),"dd MMM yyyy HH:mm",{locale:ol})}),e.jsx(se,{children:e.jsxs(Ht,{children:[e.jsx(si,{asChild:!0,children:e.jsx(Ns,{variant:"ghost",size:"sm",onClick:()=>j(L.id),children:e.jsx(wr,{className:"h-4 w-4"})})}),e.jsxs($t,{className:"max-w-2xl",children:[e.jsx(Bt,{children:e.jsxs(Vt,{children:["تفاصيل التحويل #",L.id]})}),y&&e.jsx(mm,{className:"max-h-[60vh]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"المعلومات الأساسية"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"رقم السجل"}),e.jsxs("p",{className:"text-sm",children:["#",y.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"رقم التحويل الأصلي"}),e.jsxs("p",{className:"text-sm",children:["#",y.transferId]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"المبلغ"}),e.jsx("p",{className:"text-sm",children:w(y.amount,y.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"العمولة"}),e.jsx("p",{className:"text-sm",children:w(y.commission,y.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"الحالة"}),e.jsx("p",{className:"text-sm",children:N(y.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"التاريخ"}),e.jsx("p",{className:"text-sm",children:Bn(new Date(y.createdAt),"dd MMM yyyy HH:mm:ss",{locale:ol})})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"أطراف التحويل"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"المرسل"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"الاسم:"})," ",y.senderName]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"رقم الحساب:"})," ",y.senderAccountNumber]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"المستلم"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"الاسم:"})," ",y.receiverName]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"رقم الحساب:"})," ",y.receiverAccountNumber]})]})]})]})]}),(y.note||y.originalTransferNote)&&e.jsxs(e.Fragment,{children:[e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"الملاحظات"}),y.note&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ملاحظة السجل"}),e.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:y.note})]}),y.originalTransferNote&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ملاحظة التحويل الأصلي"}),e.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:y.originalTransferNote})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"المعلومات التقنية"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"عنوان IP"}),e.jsx("p",{className:"text-sm font-mono",children:y.ipAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"معرف المتصفح"}),e.jsx("p",{className:"text-xs font-mono bg-muted p-2 rounded break-all",children:y.userAgent})]})]})]})]})})]})]})})]},L.id))})]})}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد سجلات متاحة"}),(v==null?void 0:v.pagination)&&v.pagination.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["الصفحة ",v.pagination.currentPage," من ",v.pagination.totalPages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ns,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t<=1,children:"السابق"}),e.jsx(Ns,{variant:"outline",size:"sm",onClick:()=>s(Math.min(v.pagination.totalPages,t+1)),disabled:t>=v.pagination.totalPages,children:"التالي"})]})]})]})]})]})}function DC(){const{toast:t}=lt(),[s,n]=u.useState({dateFrom:"",dateTo:"",useExecutedAt:!1,type:"",status:"",currency:"",amountMin:"",amountMax:"",ref_no:"",user_id:"",office_id:"",city:"",channel:"",kyc_level:"",risk_min:"",risk_max:"",q:"",page:1,pageSize:50,sortBy:"created_at",sortOrder:"desc"}),[r,a]=u.useState([]),[i,l]=u.useState(!1),[o,c]=u.useState(null),d=()=>{const S=new URLSearchParams;return s.dateFrom&&S.append("dateFrom",s.dateFrom),s.dateTo&&S.append("dateTo",s.dateTo),s.q&&S.append("q",s.q),s.type&&S.append("type",s.type),s.status&&S.append("status",s.status),s.currency&&S.append("currency",s.currency),s.amountMin&&S.append("amountMin",s.amountMin),s.amountMax&&S.append("amountMax",s.amountMax),s.ref_no&&S.append("ref_no",s.ref_no),s.user_id&&S.append("user_id",s.user_id),s.office_id&&S.append("office_id",s.office_id),s.city&&S.append("city",s.city),s.channel&&S.append("channel",s.channel),s.kyc_level&&S.append("kyc_level",s.kyc_level),s.risk_min&&S.append("risk_min",s.risk_min),s.risk_max&&S.append("risk_max",s.risk_max),S.append("page",s.page.toString()),S.append("pageSize",s.pageSize.toString()),S.append("sortBy",s.sortBy),S.append("sortOrder",s.sortOrder),`/api/admin/transactions?${S.toString()}`},{data:f,isLoading:x,refetch:h}=$e({queryKey:[d()],enabled:!0});$e({queryKey:["/api/admin/transactions/stats","day"]}),Ze({mutationFn:async S=>ce("PATCH",`/api/admin/transactions/${S.id}`,S.updates),onSuccess:()=>{t({title:"تم تحديث المعاملة بنجاح"}),Qe.invalidateQueries({queryKey:["/api/admin/transactions"]})},onError:S=>{t({title:"خطأ في تحديث المعاملة",description:S.message,variant:"destructive"})}});const j=Ze({mutationFn:async S=>{try{const T=localStorage.getItem("auth_token");if(console.log("🔑 التوكن المستخدم للتصدير:",T?"موجود":"غير موجود"),console.log("🔑 أول 50 حرف من التوكن:",T?T.substring(0,50)+"...":"N/A"),!T)throw new Error("لم يتم العثور على توكن المصادقة. يرجى تسجيل الدخول مرة أخرى.");const E=await fetch("/api/admin/transactions/export",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify(S)});if(!E.ok){const G=await E.json().catch(()=>({message:"فشل في تصدير المعاملات"}));throw console.error("❌ خطأ في الاستجابة:",E.status,G),new Error(G.message||`خطأ ${E.status}: فشل في تصدير المعاملات`)}const $=await E.blob(),F=window.URL.createObjectURL($),Z=document.createElement("a");Z.style.display="none",Z.href=F,Z.download=`transactions-${Date.now()}.${S.format}`,document.body.appendChild(Z),Z.click(),window.URL.revokeObjectURL(F),document.body.removeChild(Z),console.log("✅ تم تصدير المعاملات بنجاح")}catch(T){throw console.error("❌ خطأ في عملية التصدير:",T),T}},onSuccess:()=>{t({title:"تم تصدير المعاملات بنجاح",description:"تم تحميل الملف على جهازك"})},onError:S=>{console.error("❌ خطأ في mutation التصدير:",S),t({title:"خطأ في تصدير المعاملات",description:S.message||"حدث خطأ غير معروف",variant:"destructive"})}}),v=Ze({mutationFn:async S=>ce("/api/admin/transactions/delete","DELETE",{transactionIds:S}),onSuccess:(S,T)=>{t({title:"تم حذف المعاملات بنجاح",description:`تم حذف ${T.length} معاملة`}),Qe.invalidateQueries({queryKey:["/api/admin/transactions"]}),a([])},onError:S=>{t({title:"خطأ في حذف المعاملات",description:S.message||"حدث خطأ أثناء حذف المعاملات",variant:"destructive"})}}),p=S=>{const E={completed:{label:"مكتملة",variant:"default"},pending:{label:"معلقة",variant:"secondary"},failed:{label:"فاشلة",variant:"destructive"},cancelled:{label:"ملغاة",variant:"outline"}}[S]||{label:S,variant:"outline"};return e.jsx(ie,{variant:E.variant,children:E.label})},b=S=>{const T={internal_transfer_in:"تحويل داخلي واردة",internal_transfer_out:"تحويل داخلي صادرة",exchange:"صرافة",market_trade:"سوق العملات",commission_withdrawal:"سحب عمولة",international_transfer:"تحويل دولي",city_transfer:"تحويل بين المدن",office_remit:"حوالة مكتبية",market_trade_buy:"شراء عملة",market_trade_sell:"بيع عملة",external_payment:"دفع خارجي",fee:"عمولة"};return e.jsx(ie,{variant:"outline",children:T[S]||S})},y=(S,T)=>!S||S==="undefined"?"0":`${parseFloat(S.toString()).toLocaleString("ar-LY")} ${T}`,m=S=>S?new Date(S).toLocaleString("ar-LY"):"-",g=(S,T)=>{const E=T==="all"?"":T;n($=>({...$,[S]:E,page:1}))},w=()=>{n({dateFrom:"",dateTo:"",useExecutedAt:!1,type:"",status:"",currency:"",amountMin:"",amountMax:"",ref_no:"",user_id:"",office_id:"",city:"",channel:"",kyc_level:"",risk_min:"",risk_max:"",q:"",page:1,pageSize:50,sortBy:"created_at",sortOrder:"desc"})},N=S=>{r.length>0?j.mutate({format:S,selectedIds:r}):j.mutate({format:S,filters:s})},k=S=>{a(T=>T.includes(S)?T.filter(E=>E!==S):[...T,S])},L=()=>{r.length===(f==null?void 0:f.rows.length)?a([]):a((f==null?void 0:f.rows.map(S=>S.id))||[])};return e.jsxs("div",{className:"space-y-6 p-6",dir:"rtl",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsx(Mn,{to:"/dashboard",children:e.jsxs(M,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(hl,{className:"h-4 w-4"}),"العودة إلى لوحة التحكم"]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة المعاملات الموحدة"}),e.jsx("p",{className:"text-muted-foreground",children:"عرض وإدارة جميع معاملات النظام في مكان واحد"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(M,{onClick:()=>h(),disabled:x,variant:"outline",size:"sm",children:[e.jsx(ys,{className:`h-4 w-4 ml-2 ${x?"animate-spin":""}`}),"تحديث"]})})]}),(f==null?void 0:f.summary)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي المعاملات"}),e.jsx("p",{className:"text-2xl font-bold",children:f.summary.totalCount.toLocaleString("ar")})]}),e.jsx(mc,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي المبالغ"}),e.jsx("p",{className:"text-2xl font-bold",children:parseFloat(f.summary.totalAmount).toLocaleString("ar-LY")})]}),e.jsx(As,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"العملات"}),e.jsx("p",{className:"text-2xl font-bold",children:Object.keys(f.summary.byCurrency).length})]}),e.jsx(x0,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"الصفحة الحالية"}),e.jsxs("p",{className:"text-2xl font-bold",children:[f.pagination.page," / ",f.pagination.totalPages]})]}),e.jsx(ks,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{className:"text-lg",children:"البحث والفلترة"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>l(!i),variant:"outline",size:"sm",children:[e.jsx(Om,{className:"h-4 w-4 ml-2"}),"فلاتر متقدمة"]}),e.jsx(M,{onClick:w,variant:"outline",size:"sm",children:"مسح الفلاتر"})]})]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"ابحث بالرقم المرجعي، اسم المستخدم، رقم الحساب...",value:s.q,onChange:S=>g("q",S.target.value),className:"pr-10"})]})}),e.jsxs(Nt,{value:s.status||"all",onValueChange:S=>g("status",S),children:[e.jsx(bt,{className:"w-[200px]",children:e.jsx(Ct,{placeholder:"كل الحالات"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل الحالات"}),e.jsx(te,{value:"SUCCESS",children:"نجحت"}),e.jsx(te,{value:"PENDING",children:"معلقة"}),e.jsx(te,{value:"FAILED",children:"فشلت"}),e.jsx(te,{value:"CANCELLED",children:"ملغاة"}),e.jsx(te,{value:"REVERSED",children:"معكوسة"}),e.jsx(te,{value:"ON_HOLD",children:"محجوزة"}),e.jsx(te,{value:"COMPLETED",children:"مكتملة"}),e.jsx(te,{value:"PROCESSING",children:"قيد المعالجة"}),e.jsx(te,{value:"CONFIRMED",children:"مؤكدة"}),e.jsx(te,{value:"PAID",children:"مدفوعة"}),e.jsx(te,{value:"APPROVED",children:"مقبولة"}),e.jsx(te,{value:"REJECTED",children:"مرفوضة"}),e.jsx(te,{value:"EXPIRED",children:"منتهية الصلاحية"}),e.jsx(te,{value:"DISPUTED",children:"متنازع عليها"}),e.jsx(te,{value:"PARTIAL",children:"جزئية"}),e.jsx(te,{value:"OPEN",children:"مفتوحة"}),e.jsx(te,{value:"FILLED",children:"ممتلئة"}),e.jsx(te,{value:"ACTIVE",children:"نشطة"}),e.jsx(te,{value:"USED",children:"مُستخدمة"}),e.jsx(te,{value:"READY",children:"جاهزة"})]})]}),e.jsxs(Nt,{value:s.type||"all",onValueChange:S=>g("type",S),children:[e.jsx(bt,{className:"w-[200px]",children:e.jsx(Ct,{placeholder:"كل الأنواع"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل الأنواع"}),e.jsx(te,{value:"INTERNAL_TRANSFER",children:"تحويل داخلي"}),e.jsx(te,{value:"SALE",children:"بيع"}),e.jsx(te,{value:"PURCHASE",children:"شراء"}),e.jsx(te,{value:"EXTERNAL_REMIT",children:"حوالة خارجية"}),e.jsx(te,{value:"OFFICE_REMIT",children:"حوالة مكتبية"}),e.jsx(te,{value:"DEPOSIT",children:"إيداع"}),e.jsx(te,{value:"WITHDRAW",children:"سحب"}),e.jsx(te,{value:"FEE",children:"عمولة"}),e.jsx(te,{value:"ADJUSTMENT",children:"تسوية"})]})]})]}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"dateFrom",children:"من تاريخ"}),e.jsx(pe,{id:"dateFrom",type:"datetime-local",value:s.dateFrom,onChange:S=>g("dateFrom",S.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"dateTo",children:"إلى تاريخ"}),e.jsx(pe,{id:"dateTo",type:"datetime-local",value:s.dateTo,onChange:S=>g("dateTo",S.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"currency",children:"العملة"}),e.jsxs(Nt,{value:s.currency||"all",onValueChange:S=>g("currency",S),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"كل العملات"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل العملات"}),e.jsx(te,{value:"LYD",children:"دينار ليبي"}),e.jsx(te,{value:"USD",children:"دولار أمريكي"}),e.jsx(te,{value:"EUR",children:"يورو"}),e.jsx(te,{value:"TRY",children:"ليرة تركية"}),e.jsx(te,{value:"AED",children:"درهم إماراتي"}),e.jsx(te,{value:"EGP",children:"جنيه مصري"}),e.jsx(te,{value:"TND",children:"دينار تونسي"}),e.jsx(te,{value:"GBP",children:"جنيه إسترليني"})]})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"channel",children:"القناة"}),e.jsxs(Nt,{value:s.channel||"all",onValueChange:S=>g("channel",S),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"كل القنوات"})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"كل القنوات"}),e.jsx(te,{value:"WEB",children:"ويب"}),e.jsx(te,{value:"MOBILE",children:"موبايل"}),e.jsx(te,{value:"DESKTOP",children:"سطح المكتب"}),e.jsx(te,{value:"API",children:"API"})]})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"amountMin",children:"أقل مبلغ"}),e.jsx(pe,{id:"amountMin",type:"number",placeholder:"0",value:s.amountMin,onChange:S=>g("amountMin",S.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"amountMax",children:"أكبر مبلغ"}),e.jsx(pe,{id:"amountMax",type:"number",placeholder:"∞",value:s.amountMax,onChange:S=>g("amountMax",S.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"refNo",children:"الرقم المرجعي"}),e.jsx(pe,{id:"refNo",placeholder:"INT-1234...",value:s.ref_no,onChange:S=>g("ref_no",S.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"userId",children:"معرف المستخدم"}),e.jsx(pe,{id:"userId",type:"number",placeholder:"123",value:s.user_id,onChange:S=>g("user_id",S.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Di,{id:"useExecutedAt",checked:s.useExecutedAt,onCheckedChange:S=>g("useExecutedAt",S)}),e.jsx(Ce,{htmlFor:"useExecutedAt",className:"text-sm",children:"استخدام تاريخ التنفيذ"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{variant:"secondary",children:[r.length," معاملة محددة"]}),e.jsx(M,{onClick:()=>a([]),variant:"outline",size:"sm",children:"إلغاء التحديد"})]})}),e.jsxs("div",{className:"flex gap-2",children:[r.length>0&&e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsxs(M,{disabled:v.isPending,variant:"destructive",size:"sm",children:[e.jsx(is,{className:"h-4 w-4 ml-2"}),"حذف (",r.length,")"]})}),e.jsxs(yi,{dir:"rtl",children:[e.jsxs(vi,{children:[e.jsxs(wi,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Gr,{className:"h-5 w-5"}),"تأكيد حذف المعاملات"]}),e.jsx(Ni,{className:"text-right",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"font-medium",children:["هل أنت متأكد من حذف ",r.length," معاملة؟"]}),e.jsx("div",{className:"bg-destructive/10 p-3 rounded-lg border border-destructive/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gr,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"تحذير: هذا الإجراء لا يمكن التراجع عنه!"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-muted-foreground",children:[e.jsx("li",{children:"سيتم حذف المعاملات نهائياً من النظام"}),e.jsx("li",{children:"لن يكون بالإمكان استرجاعها مرة أخرى"}),e.jsx("li",{children:"قد يؤثر هذا على التقارير المالية"})]})]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يرجى التأكد من أن هذه المعاملات خاطئة أو غير مرغوب فيها قبل المتابعة."})]})})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>v.mutate(r),className:"bg-destructive hover:bg-destructive/90",children:v.isPending?"جاري الحذف...":"تأكيد الحذف"})]})]})]}),e.jsxs(M,{onClick:()=>N("csv"),disabled:j.isPending,variant:"outline",size:"sm",children:[e.jsx(Cr,{className:"h-4 w-4 ml-2"}),"تصدير CSV"]}),e.jsxs(M,{onClick:()=>N("pdf"),disabled:j.isPending,variant:"outline",size:"sm",children:[e.jsx(Pn,{className:"h-4 w-4 ml-2"}),"تصدير PDF"]})]})]}),e.jsx(_,{children:e.jsx(z,{className:"p-0",children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"w-[50px]",children:e.jsx(Di,{checked:(f==null?void 0:f.rows)&&f.rows.length>0&&r.length===f.rows.length,onCheckedChange:L})}),e.jsx(ae,{children:"الرقم المرجعي"}),e.jsx(ae,{children:"النوع"}),e.jsx(ae,{children:"الحالة"}),e.jsx(ae,{children:"المستخدم"}),e.jsx(ae,{children:"رقم الحساب"}),e.jsx(ae,{children:"المبلغ"}),e.jsx(ae,{children:"العملة"}),e.jsx(ae,{children:"التاريخ"}),e.jsx(ae,{children:"الإجراءات"})]})}),e.jsx(Qs,{children:x?e.jsx(kt,{children:e.jsx(se,{colSpan:10,className:"text-center py-8",children:"جاري تحميل البيانات..."})}):(f==null?void 0:f.rows.length)===0?e.jsx(kt,{children:e.jsx(se,{colSpan:10,className:"text-center py-8",children:"لا توجد معاملات مطابقة للفلاتر"})}):f==null?void 0:f.rows.map((S,T)=>e.jsxs(kt,{children:[e.jsx(se,{children:e.jsx(Di,{checked:r.includes(S.id),onCheckedChange:()=>k(S.id)})}),e.jsx(se,{className:"font-mono text-sm",children:S.refNo}),e.jsx(se,{children:b(S.type)}),e.jsx(se,{children:p(S.status)}),e.jsx(se,{children:e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:S.userName})})}),e.jsx(se,{children:e.jsx("div",{className:"font-mono text-sm",children:S.userAccountNumber})}),e.jsx(se,{className:"font-mono",children:parseFloat(S.amount).toLocaleString("ar-LY")}),e.jsx(se,{children:e.jsx(ie,{variant:"outline",children:S.currency})}),e.jsx(se,{className:"text-sm text-muted-foreground",children:new Date(S.createdAt).toLocaleDateString("ar-LY")}),e.jsx(se,{children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(M,{onClick:()=>c(S),variant:"ghost",size:"sm",children:e.jsx(wr,{className:"h-4 w-4"})})})})]},`${S.type}-${S.id}-${T}`))})]})})})}),f&&f.pagination.total>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["عرض ",(s.page-1)*s.pageSize+1," إلى ",Math.min(s.page*s.pageSize,f.pagination.total)," من أصل ",f.pagination.total," معاملة"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{onClick:()=>g("page",s.page-1),disabled:s.page<=1,variant:"outline",size:"sm",children:"السابق"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,f.pagination.totalPages)},(S,T)=>{const E=s.page-2+T;return E>0&&E<=f.pagination.totalPages?e.jsx(M,{onClick:()=>g("page",E),variant:E===s.page?"default":"outline",size:"sm",children:E},E):null})}),e.jsx(M,{onClick:()=>g("page",s.page+1),disabled:s.page>=f.pagination.totalPages,variant:"outline",size:"sm",children:"التالي"})]})]}),o&&e.jsx(Ht,{open:!!o,onOpenChange:()=>c(null),children:e.jsxs($t,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",dir:"rtl",children:[e.jsx(Bt,{children:e.jsxs(Vt,{children:["تفاصيل المعاملة - ",o.refNo]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{className:"text-lg",children:"المعلومات الأساسية"})}),e.jsxs(z,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"الرقم المرجعي:"}),e.jsx("span",{className:"font-mono",children:o.refNo})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"النوع:"}),b(o.type)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"الحالة:"}),p(o.status)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"المستخدم:"}),e.jsx("span",{children:o.userName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"رقم الحساب:"}),e.jsx("span",{className:"font-mono",children:o.userAccountNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"المصدر:"}),e.jsx(ie,{variant:o.source==="admin"?"default":"secondary",children:o.source==="admin"?"إداري":"عادي"})]})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{className:"text-lg",children:"التفاصيل المالية"})}),e.jsxs(z,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"المبلغ:"}),e.jsx("span",{className:"font-mono",children:y(o.amount,o.currency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"العملة:"}),e.jsx(ie,{variant:"outline",children:o.currency})]}),o.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"الوصف:"}),e.jsx("p",{className:"mt-1 text-sm bg-muted p-2 rounded",children:o.description})]})]})]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{className:"text-lg",children:"التوقيت"})}),e.jsx(z,{className:"space-y-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"تاريخ المعاملة:"}),e.jsx("span",{children:m(o.createdAt)})]})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(M,{onClick:()=>c(null),children:"إغلاق"})})]})]})})]})}const ace={deposit:"إيداع",withdrawal:"سحب",internal_transfer_in:"تحويل داخلي وارد",internal_transfer_out:"تحويل داخلي صادر",office_remit:"حوالة مكتبية",market_trade_buy:"شراء عملة",market_trade_sell:"بيع عملة",exchange:"صرافة",commission_withdrawal:"سحب عمولة",external_payment:"دفع خارجي",fee:"عمولة",referral_reward_received:"مكافأة إحالة مستلمة",referral_balance_withdrawal:"سحب رصيد مكافآت",referral_balance_deposit:"إيداع مكافآت للرصيد الرئيسي"};function ice(){return e.jsx(er,{page:"statement",children:e.jsx(lce,{})})}function lce(){const{toast:t}=lt();$n();const[,s]=_t(),[n,r]=u.useState({start:Bn(Bh(new Date,1),"yyyy-MM-dd"),end:Bn(new Date,"yyyy-MM-dd"),currency:"all",type:"all",status:"all",q:"",reference:""}),{data:a,isLoading:i,error:l,refetch:o}=$e({queryKey:["/api/statements",n],enabled:!1,queryFn:async()=>{console.log("🔍 إرسال طلب كشف الحساب مع الفلاتر:",n);const p=new URLSearchParams;Object.entries(n).forEach(([y,m])=>{m&&m!=="all"&&p.append(y,m)});const b=await fetch(`/api/statements?${p.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!b.ok)throw new Error("فشل في جلب كشف الحساب");return b.json()}}),c=Ze({mutationFn:async p=>{console.log("بدء التصدير الفوري:",{format:p,filters:n});try{const b=await fetch("/api/statements/export",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({format:p,...n})});if(!b.ok){const N=await b.json();throw new Error(N.message||"فشل في التصدير")}const y=await b.blob(),m=`كشف_حساب_${Date.now()}.csv`,g=window.URL.createObjectURL(y),w=document.createElement("a");return w.style.display="none",w.href=g,w.download=m,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(g),"success"}catch(b){throw console.error("فشل التصدير الفوري:",b),b}},onSuccess:()=>{t({title:"تم التصدير بنجاح",description:"تم تحميل ملف كشف الحساب"})},onError:p=>{console.error("خطأ في التصدير:",p),t({title:"خطأ",description:`فشل في التصدير: ${p.message||"خطأ غير معروف"}`,variant:"destructive"})}}),d=(p,b)=>{r(y=>({...y,[p]:b}))};u.useEffect(()=>{o()},[]);const f=()=>{console.log("🔍 تطبيق الفلاتر:",n),o()},x=async p=>{try{console.log("🖨️ بدء طباعة الإيصال الحراري للمعاملة:",p);const b=a==null?void 0:a.rows.find(S=>S.id===p);if(!b){t({title:"خطأ",description:"لم يتم العثور على بيانات المعاملة",variant:"destructive"});return}if(b.type==="exchange"||b.description.includes("بيع")||b.description.includes("شراء")||b.description.includes("سعر")||b.description.includes("استلام")&&b.description.includes("USD")){console.log("🔍 معاملة سوق عملات مكتشفة:",b.type,b.description);const T=((F,Z,G)=>{const D={soldAmount:"غير محدد",purchaseValue:"غير محدد",exchangeRate:"غير محدد",operationType:"غير محدد",sellerAccount:G||String(Z),buyerAccount:G||String(Z),systemAccount:"1000"},B=F.match(/(\d+(?:\.\d+)?)\s*USD/);B&&(D.soldAmount=B[1]+" USD");const de=F.match(/(\d+(?:\.\d+)?)\s*LYD/);if(de)D.purchaseValue=de[1]+" LYD";else if(F.includes("استلام")&&B){const W=F.match(/بسعر\s+(\d+(?:\.\d+)?)/);if(W){const re=parseFloat(B[1]),we=parseFloat(W[1]);D.purchaseValue=(re*we).toFixed(2)+" LYD"}}const U=F.match(/بسعر\s+(\d+(?:\.\d+)?)/);return U&&(D.exchangeRate="1 USD = "+U[1]+" LYD"),F.includes("بيع")?(D.operationType="بيع عملة",D.sellerAccount=G||String(Z),D.buyerAccount="النظام"):F.includes("شراء")?(D.operationType="شراء عملة",D.sellerAccount="النظام",D.buyerAccount=G||String(Z)):F.includes("استلام")?(D.operationType="استلام من بيع",D.sellerAccount="المشتري",D.buyerAccount=G||String(Z)):F.includes("تعليق")&&(D.operationType="تعليق عرض بيع",D.sellerAccount=G||String(Z),D.buyerAccount="معلق"),D})(b.description,b.userId||0,b.userAccountNumber||""),E=`<!DOCTYPE html>
        <html dir="rtl" lang="ar">
        <head>
            <meta charset="UTF-8">
            <title>إيصال سوق العملات - ${p}</title>
            <style>
                @media print {
                    @page {
                        size: 80mm 120mm;
                        margin: 0;
                    }
                    body {
                        font-family: 'Arial', sans-serif;
                        direction: rtl;
                        text-align: right;
                        font-size: 8px;
                        line-height: 1.1;
                        margin: 0;
                        padding: 2mm;
                        width: 76mm;
                        overflow: hidden;
                    }
                }
                
                body {
                    font-family: 'Arial', sans-serif;
                    direction: rtl;
                    text-align: right;
                    font-size: 10px;
                    line-height: 1.2;
                    margin: 0;
                    padding: 3mm;
                    width: 74mm;
                    max-width: 74mm;
                }
                
                .header {
                    text-align: center;
                    margin-bottom: 2mm;
                    border-bottom: 1px solid #000;
                    padding-bottom: 1mm;
                }
                
                .company-name {
                    font-weight: bold;
                    font-size: 11px;
                    margin-bottom: 0.5mm;
                }
                
                .info-row {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 0.8mm;
                    font-size: 9px;
                }
                
                .separator {
                    border-top: 1px dashed #000;
                    margin: 1mm 0;
                }
                
                .amount {
                    font-size: 12px;
                    font-weight: bold;
                    text-align: center;
                    margin: 1mm 0;
                    border: 1px solid #000;
                    padding: 1mm;
                }
                
                .footer {
                    font-size: 8px;
                    text-align: center;
                    margin-top: 2mm;
                }
            </style>
        </head>
        <body>
            <div class="header">
                <div class="company-name">منصة الصرافة الليبية</div>
                <div style="font-size: 8px;">طرابلس - ليبيا</div>
                <div style="font-size: 10px; font-weight: bold;">إيصال سوق العملات</div>
            </div>
            
            <div class="info-row">
                <span>رقم العملية:</span>
                <span>${p}</span>
            </div>
            
            <div class="info-row">
                <span>المرجع:</span>
                <span>${b.referenceNumber||"غير محدد"}</span>
            </div>
            
            <div class="separator"></div>
            
            <div class="info-row">
                <span>حساب البائع:</span>
                <span>${T.sellerAccount}</span>
            </div>
            
            <div class="info-row">
                <span>حساب المشتري:</span>
                <span>${T.buyerAccount}</span>
            </div>
            
            <div class="info-row">
                <span>حساب النظام:</span>
                <span>${T.systemAccount}</span>
            </div>
            
            <div class="separator"></div>
            
            <div class="info-row" style="font-weight: bold;">
                <span>تفاصيل الحسابات:</span>
                <span></span>
            </div>
            
            <div class="info-row">
                <span>رقم حساب العميل:</span>
                <span>${b.userAccountNumber||"ACC-"+String(b.userId).padStart(6,"0")}</span>
            </div>
            
            <div class="info-row">
                <span>اسم العميل:</span>
                <span>${b.fullName||b.userName||"عميل رقم "+b.userId}</span>
            </div>
            
            <div class="separator"></div>
            
            <div class="info-row">
                <span>نوع العملية:</span>
                <span>${T.operationType}</span>
            </div>
            
            <div class="info-row">
                <span>المبلغ المباع:</span>
                <span>${T.soldAmount}</span>
            </div>
            
            <div class="info-row">
                <span>القيمة المشتراة:</span>
                <span>${T.purchaseValue}</span>
            </div>
            
            <div class="info-row">
                <span>سعر الصرف:</span>
                <span>${T.exchangeRate}</span>
            </div>
            
            <div class="separator"></div>
            
            <div class="amount">
                <div>إجمالي المعاملة</div>
                <div style="font-size: 11px; font-weight: bold; margin-top: 1mm;">
                    ${Math.abs(parseFloat(b.amount)).toFixed(2)} ${b.currency}
                </div>
            </div>
            
            <div class="separator"></div>
            
            <div class="info-row">
                <span>التاريخ:</span>
                <span>${new Date(b.date).toLocaleDateString("ar-LY")}</span>
            </div>
            
            <div class="info-row">
                <span>الوقت:</span>
                <span>${new Date(b.date).toLocaleTimeString("ar-LY",{hour12:!1})}</span>
            </div>
            
            <div class="info-row">
                <span>الحالة:</span>
                <span>مكتمل ✓</span>
            </div>
            
            <div class="footer">
                شكراً لاستخدام منصة الصرافة - سوق العملات
            </div>
        </body>
        </html>`,$=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if($){const F=new Blob([E],{type:"text/html"}),Z=URL.createObjectURL(F),G=document.createElement("a");G.href=Z,G.download=`receipt-market-${p}.html`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(Z)}else{const F=window.open("","_blank");F&&(F.document.write(E),F.document.close(),F.focus(),setTimeout(()=>{F.print(),F.close()},250))}t({title:$?"تم تحميل الإيصال":"تم فتح إيصال سوق العملات",description:$?"تم تحميل إيصال سوق العملات، يمكنك فتحه وطباعته":"تم فتح إيصال سوق العملات المخصص للطباعة"});return}let m="",g="",w=parseFloat(b.amount);const N=b.description.split(" ");if(b.type==="internal_transfer_out"){m="4";const S=b.description.match(/إلى\s+(\w+)/);g=S?S[1]:"غير محدد"}else if(b.type==="internal_transfer_in"){g="4";const S=b.description.match(/من\s+(\w+)/);m=S?S[1]:"غير محدد"}const k=`
      <!DOCTYPE html>
      <html dir="rtl" lang="ar">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>إيصال حراري</title>
          <style>
              @page {
                  size: 72mm 96mm;
                  margin: 0;
              }
              
              * {
                  margin: 0;
                  padding: 0;
                  box-sizing: border-box;
              }
              
              body {
                  font-family: 'Courier New', monospace;
                  font-size: 12px;
                  line-height: 1.2;
                  background: white;
                  color: black;
                  width: 72mm;
                  min-height: 96mm;
                  padding: 4mm;
                  direction: rtl;
                  text-align: center;
              }
              
              .header {
                  text-align: center;
                  margin-bottom: 3mm;
                  border-bottom: 1px solid #000;
                  padding-bottom: 2mm;
              }
              
              .company-name {
                  font-size: 14px;
                  font-weight: bold;
                  margin-bottom: 1mm;
              }
              
              .info-row {
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 1mm;
                  font-size: 11px;
              }
              
              .separator {
                  border-top: 1px dashed #000;
                  margin: 2mm 0;
              }
              
              .amount {
                  font-size: 14px;
                  font-weight: bold;
                  text-align: center;
                  margin: 2mm 0;
                  border: 1px solid #000;
                  padding: 2mm;
              }
              
              .footer {
                  font-size: 10px;
                  text-align: center;
                  margin-top: 3mm;
              }
          </style>
      </head>
      <body>
          <div class="header">
              <div class="company-name">منصة الصرافة الليبية</div>
              <div style="font-size: 10px; margin-bottom: 2mm;">طرابلس - ليبيا</div>
              <div style="font-size: 12px; font-weight: bold;">إيصال حوالة داخلية</div>
          </div>
          
          <div class="info-row">
              <span>رقم العملية:</span>
              <span>${p}</span>
          </div>
          
          <div class="info-row">
              <span>المرجع:</span>
              <span>${b.referenceNumber||"غير محدد"}</span>
          </div>
          
          <div class="separator"></div>
          
          <div class="info-row">
              <span>من حساب:</span>
              <span>${m}</span>
          </div>
          
          <div class="info-row">
              <span>إلى حساب:</span>
              <span>${g}</span>
          </div>
          
          <div class="separator"></div>
          
          <div class="amount">
              <div>المبلغ المحول</div>
              <div style="font-size: 16px; font-weight: bold; margin-top: 2mm;">
                  ${w.toFixed(2)} ${b.currency}
              </div>
          </div>
          
          <div class="separator"></div>
          
          <div class="info-row">
              <span>التاريخ:</span>
              <span style="font-size: 10px;">${new Date(b.date).toLocaleDateString("ar-LY")}</span>
          </div>
          
          <div class="info-row">
              <span>الوقت:</span>
              <span>${new Date(b.date).toLocaleTimeString("ar-LY",{hour12:!1})}</span>
          </div>
          
          <div class="info-row">
              <span>الحالة:</span>
              <span>مكتمل</span>
          </div>
          
          <div class="separator"></div>
          <div class="footer">
              شكراً لاستخدام منصة الصرافة الليبية
          </div>
      </body>
      </html>`,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(L){const S=new Blob([k],{type:"text/html"}),T=URL.createObjectURL(S),E=document.createElement("a");E.href=T,E.download=`receipt-${p}.html`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(T)}else{const S=window.open("","_blank");S&&(S.document.write(k),S.document.close(),S.focus(),setTimeout(()=>{S.print(),S.close()},250))}t({title:L?"تم تحميل الإيصال":"تم فتح الإيصال الحراري للطباعة",description:L?"تم تحميل الإيصال الحراري، يمكنك فتحه وطباعته":"تم فتح الإيصال الحراري 72mm × 96mm للطباعة"})}catch(b){console.error("خطأ في طباعة الإيصال:",b),t({title:"خطأ",description:"فشل في طباعة الإيصال",variant:"destructive"})}},h=p=>{const b=new Date;let y="";switch(p){case"today":y=Bn(b,"yyyy-MM-dd");break;case"yesterday":y=Bn(d1(b,1),"yyyy-MM-dd");break;case"week":y=Bn(d1(b,7),"yyyy-MM-dd");break;case"month":y=Bn(Bh(b,1),"yyyy-MM-dd");break;case"quarter":y=Bn(Bh(b,3),"yyyy-MM-dd");break;case"year":y=Bn(Bh(b,12),"yyyy-MM-dd");break;default:return}r(m=>({...m,start:y,end:Bn(b,"yyyy-MM-dd")}))},j=(p,b)=>`${parseFloat(p).toLocaleString("ar-LY",{minimumFractionDigits:2,maximumFractionDigits:4})} ${b}`,v=p=>Bn(new Date(p),"dd/MM/yyyy HH:mm",{locale:ol});return e.jsxs("div",{className:"container mx-auto px-2 sm:px-6 py-2 sm:py-6 space-y-2 sm:space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>s("/dashboard"),className:"flex items-center gap-1 sm:gap-2 self-start text-xs sm:text-sm h-6 sm:h-9 px-2 sm:px-3",children:[e.jsx(hl,{className:"h-2 w-2 sm:h-4 sm:w-4"}),"العودة إلى لوحة التحكم"]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("h1",{className:"text-sm sm:text-3xl font-bold",children:"كشف الحساب"}),e.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm",children:"عرض وتصدير جميع المعاملات المالية"})]})]}),e.jsx(Pn,{className:"h-4 w-4 sm:h-8 sm:w-8 text-primary self-end sm:self-auto"})]}),e.jsxs(_,{children:[e.jsxs(q,{className:"pb-2 sm:pb-6 px-2 sm:px-6 pt-2 sm:pt-6",children:[e.jsxs(X,{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-base",children:[e.jsx(Om,{className:"h-3 w-3 sm:h-5 sm:w-5"}),"فلاتر البحث"]}),e.jsx(Se,{className:"text-xs sm:text-sm",children:"اختر النطاق الزمني وإعدادات العرض"})]}),e.jsxs(z,{className:"space-y-2 sm:space-y-4 px-2 sm:px-6 pb-2 sm:pb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 sm:flex sm:flex-wrap gap-1 sm:gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("today"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"اليوم"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("yesterday"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"أمس"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("week"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"آخر أسبوع"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("month"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"آخر شهر"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("quarter"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"آخر ربع"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>h("year"),className:"text-xs sm:text-sm h-6 sm:h-9 px-1 sm:px-3",children:"آخر سنة"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"من تاريخ"}),e.jsx(pe,{type:"date",value:n.start,onChange:p=>d("start",p.target.value),className:"text-xs sm:text-sm h-6 sm:h-10"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"إلى تاريخ"}),e.jsx(pe,{type:"date",value:n.end,onChange:p=>d("end",p.target.value),className:"text-xs sm:text-sm h-6 sm:h-10"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"العملة"}),e.jsxs(Nt,{value:n.currency,onValueChange:p=>d("currency",p),children:[e.jsx(bt,{className:"text-xs sm:text-sm h-6 sm:h-10",children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع العملات"}),e.jsx(te,{value:"LYD",children:"دينار ليبي (LYD)"}),e.jsx(te,{value:"USD",children:"دولار أمريكي (USD)"}),e.jsx(te,{value:"EUR",children:"يورو (EUR)"}),e.jsx(te,{value:"GBP",children:"جنيه إسترليني (GBP)"}),e.jsx(te,{value:"TRY",children:"ليرة تركية (TRY)"}),e.jsx(te,{value:"AED",children:"درهم إماراتي (AED)"}),e.jsx(te,{value:"EGP",children:"جنيه مصري (EGP)"}),e.jsx(te,{value:"TND",children:"دينار تونسي (TND)"})]})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"نوع المعاملة"}),e.jsxs(Nt,{value:n.type,onValueChange:p=>d("type",p),children:[e.jsx(bt,{className:"text-xs sm:text-sm h-6 sm:h-10",children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الأنواع"}),e.jsx(te,{value:"deposit",children:"إيداع"}),e.jsx(te,{value:"withdrawal",children:"سحب"}),e.jsx(te,{value:"internal_transfer_sent",children:"تحويل داخلي - مرسل"}),e.jsx(te,{value:"internal_transfer_received",children:"تحويل داخلي - مستلم"}),e.jsx(te,{value:"office_remit",children:"حوالة مكتبية"}),e.jsx(te,{value:"market_trade_buy",children:"شراء عملة"}),e.jsx(te,{value:"market_trade_sell",children:"بيع عملة"}),e.jsx(te,{value:"external_payment",children:"دفع خارجي"}),e.jsx(te,{value:"fee",children:"عمولة"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"البحث بالرقم المرجعي أو الوصف"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"ابحث بالرقم المرجعي أو الوصف...",value:n.q||"",onChange:p=>d("q",p.target.value),className:"pl-8 sm:pl-10 text-xs sm:text-sm h-8 sm:h-10"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"الحالة"}),e.jsxs(Nt,{value:n.status,onValueChange:p=>d("status",p),children:[e.jsx(bt,{className:"text-xs sm:text-sm h-8 sm:h-10",children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"all",children:"جميع الحالات"}),e.jsx(te,{value:"completed",children:"مكتمل"}),e.jsx(te,{value:"pending",children:"قيد الانتظار"}),e.jsx(te,{value:"failed",children:"فاشل"})]})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx(Ce,{className:"text-xs sm:text-sm",children:"الرقم المرجعي"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"REF-489...",value:n.reference,onChange:p=>d("reference",p.target.value),className:"pr-8 sm:pr-10 text-xs sm:text-sm h-8 sm:h-10"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"أمثلة: REF-489, REF-565, REF-579 (أو جزء من الرقم مثل: 489)"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 pt-3 sm:pt-4",children:[e.jsxs(M,{onClick:f,disabled:i,className:"flex items-center gap-2 text-xs sm:text-sm h-8 sm:h-10",children:[e.jsx(Fn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),i?"جاري البحث...":"بحث"]}),e.jsxs(M,{variant:"outline",onClick:()=>{r({start:Bn(d1(new Date,30),"yyyy-MM-dd"),end:Bn(new Date,"yyyy-MM-dd"),currency:"all",type:"all",status:"all",q:"",reference:""}),f()},className:"flex items-center gap-2 text-xs sm:text-sm h-8 sm:h-10",children:[e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"إعادة تعيين"]}),e.jsxs(M,{variant:"outline",onClick:()=>c.mutate("pdf"),disabled:c.isPending,className:"text-xs sm:text-sm h-8 sm:h-10",children:[e.jsx(Cr,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"PDF"]}),e.jsxs(M,{variant:"outline",onClick:()=>c.mutate("excel"),disabled:c.isPending,className:"text-xs sm:text-sm h-8 sm:h-10",children:[e.jsx(Cr,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"Excel"]})]})]})]}),l&&e.jsx(_,{children:e.jsx(z,{className:"pt-3 sm:pt-6 px-3 sm:px-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(_s,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"حدث خطأ في جلب البيانات"})]})})}),a&&e.jsxs(_,{children:[e.jsxs(q,{className:"pb-3 sm:pb-6 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsx(X,{className:"text-sm sm:text-base",children:"كشف الحساب"}),e.jsxs(Se,{className:"text-xs sm:text-sm",children:["الرصيد الافتتاحي: ",e.jsx("span",{className:"font-semibold",children:a.openingBalance})]})]}),e.jsxs(z,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{className:"text-xs sm:text-sm",children:"التاريخ"}),e.jsx(ae,{className:"text-xs sm:text-sm",children:"النوع"}),e.jsx(ae,{className:"text-xs sm:text-sm hidden sm:table-cell",children:"الرقم المرجعي"}),e.jsx(ae,{className:"text-xs sm:text-sm hidden md:table-cell",children:"الوصف"}),e.jsx(ae,{className:"text-xs sm:text-sm hidden lg:table-cell",children:"العملة"}),e.jsx(ae,{className:"text-xs sm:text-sm",children:"مدين"}),e.jsx(ae,{className:"text-xs sm:text-sm",children:"دائن"}),e.jsx(ae,{className:"text-xs sm:text-sm hidden sm:table-cell",children:"الرصيد الجاري"}),e.jsx(ae,{className:"text-xs sm:text-sm",children:"الإجراءات"})]})}),e.jsx(Qs,{children:a.rows.length>0?a.rows.map(p=>e.jsxs(kt,{children:[e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4",children:v(p.date)}),e.jsx(se,{className:"py-2 sm:py-4",children:e.jsx(ie,{variant:"outline",className:"text-xs px-1 py-0.5 sm:px-2 sm:py-1",children:ace[p.type]||p.type})}),e.jsx(se,{className:"text-xs sm:text-sm font-mono py-2 sm:py-4 hidden sm:table-cell",children:e.jsx("span",{className:n.reference&&p.referenceNumber&&p.referenceNumber.toLowerCase().includes(n.reference.toLowerCase())?"bg-yellow-200 dark:bg-yellow-800 px-1 py-0.5 rounded font-semibold":"",children:p.referenceNumber||"-"})}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4 hidden md:table-cell",children:e.jsx("div",{className:"max-w-20 sm:max-w-none truncate",children:p.description||"-"})}),e.jsx(se,{className:"text-xs sm:text-sm py-2 sm:py-4 hidden lg:table-cell",children:p.currency}),e.jsx(se,{className:"text-right text-xs sm:text-sm py-2 sm:py-4",children:p.direction==="debit"?j(p.amount,p.currency):"-"}),e.jsx(se,{className:"text-right text-xs sm:text-sm py-2 sm:py-4",children:p.direction==="credit"?j(p.amount,p.currency):"-"}),e.jsx(se,{className:"text-right font-medium text-xs sm:text-sm py-2 sm:py-4 hidden sm:table-cell",children:j(p.runningBalance,p.currency)}),e.jsx(se,{className:"py-2 sm:py-4",children:e.jsx(M,{size:"sm",variant:"outline",onClick:()=>x(p.id),className:"mr-1 sm:mr-2 text-xs sm:text-sm h-6 sm:h-8 px-1 sm:px-2",children:e.jsx(Hf,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},p.id)):e.jsx(kt,{children:e.jsx(se,{colSpan:9,className:"text-center py-8",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[e.jsx(_s,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"لا يوجد هذا الرقم المرجعي"})]}),n.reference&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["الرقم المرجعي المطلوب: ",e.jsxs("span",{className:"font-mono bg-red-100 dark:bg-red-800 px-1 rounded",children:['"',n.reference,'"']})]}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"تأكد من صحة الرقم المرجعي أو جرب البحث بجزء منه"})]}),!n.reference&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد معاملات تطابق معايير البحث المحددة"})]})}),n.q&&e.jsxs("p",{className:"text-sm text-orange-600",children:['تم البحث عن النص: "',n.q,'"']}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"أمثلة على الأرقام المرجعية الموجودة:"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["REF-489","REF-565","REF-579","REF-573"].map(p=>e.jsx("button",{onClick:()=>{d("reference",p),setTimeout(()=>f(),100)},className:"text-xs bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40 px-2 py-1 rounded border border-blue-200 dark:border-blue-800 transition-colors",children:p},p))})]})]})})})})]})}),a.rows.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"my-3 sm:my-6"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[e.jsxs(_,{children:[e.jsx(q,{className:"pb-1 sm:pb-2 p-2 sm:p-6",children:e.jsx(X,{className:"text-xs sm:text-sm",children:"إجمالي المدين"})}),e.jsx(z,{className:"p-2 sm:p-6 pt-0",children:e.jsx("p",{className:"text-sm sm:text-2xl font-bold text-destructive",children:a.totals.debits})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-1 sm:pb-2 p-2 sm:p-6",children:e.jsx(X,{className:"text-xs sm:text-sm",children:"إجمالي الدائن"})}),e.jsx(z,{className:"p-2 sm:p-6 pt-0",children:e.jsx("p",{className:"text-sm sm:text-2xl font-bold text-green-600",children:a.totals.credits})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-1 sm:pb-2 p-2 sm:p-6",children:e.jsx(X,{className:"text-xs sm:text-sm",children:"صافي الحركة"})}),e.jsx(z,{className:"p-2 sm:p-6 pt-0",children:e.jsx("p",{className:`text-sm sm:text-2xl font-bold ${parseFloat(a.totals.net)>=0?"text-green-600":"text-destructive"}`,children:a.totals.net})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-1 sm:pb-2 p-2 sm:p-6",children:e.jsx(X,{className:"text-xs sm:text-sm",children:"إجمالي العمولات"})}),e.jsx(z,{className:"p-2 sm:p-6 pt-0",children:e.jsx("p",{className:"text-sm sm:text-2xl font-bold text-yellow-600",children:a.totals.fees})})]})]})]})]})]})]})}function oce(){const{user:t}=Mt(),[s,n]=u.useState([]),[r,a]=u.useState({total:0,revoked:0,active:0,recent24h:0}),[i,l]=u.useState([]),[o,c]=u.useState(""),[d,f]=u.useState(""),[x,h]=u.useState(""),[j,v]=u.useState(!1);u.useEffect(()=>{if(t&&t.type!=="admin"){li({title:"غير مصرح لك",description:"يجب تسجيل الدخول كمدير للوصول إلى هذه الصفحة",variant:"destructive"});return}t&&t.type==="admin"&&(p(),b())},[t]);const p=async()=>{try{const g=await ce("/api/receipts/admin/stats");if(!g.ok){const N=await g.json();console.error("خطأ API في الإحصائيات:",N),li({title:"خطأ في التحقق من الصلاحيات",description:N.message||"فشل في تحميل إحصائيات الإيصالات",variant:"destructive"});return}const w=await g.json();a(w)}catch(g){console.error("خطأ في تحميل الإحصائيات:",g),li({title:"خطأ في الاتصال",description:"فشل في الاتصال بالخادم لتحميل الإحصائيات",variant:"destructive"})}},b=async()=>{try{v(!0);const g=await ce("/api/receipts/admin/all?limit=50&offset=0");if(!g.ok){const N=await g.json();console.error("خطأ API في الإيصالات:",N),li({title:"خطأ في التحقق من الصلاحيات",description:N.message||"فشل في تحميل قائمة الإيصالات",variant:"destructive"});return}const w=await g.json();n(w)}catch(g){console.error("خطأ في تحميل الإيصالات:",g),li({title:"خطأ في الاتصال",description:"فشل في الاتصال بالخادم لتحميل الإيصالات",variant:"destructive"})}finally{v(!1)}},y=async g=>{try{const N=await(await ce(`/api/receipts/admin/audit/${g}`)).json();l(N)}catch(w){console.error("خطأ في تحميل سجل التدقيق:",w),li({title:"خطأ",description:"فشل في تحميل سجل التدقيق",variant:"destructive"})}},m=async()=>{if(!d||x===""){li({title:"خطأ",description:"يرجى إدخال المفتاح والقيمة",variant:"destructive"});return}try{await ce("/api/receipts/admin/settings","POST",{key:d,value:x}),li({title:"تم بنجاح",description:"تم تحديث الإعداد بنجاح"}),f(""),h("")}catch(g){console.error("خطأ في تحديث الإعداد:",g),li({title:"خطأ",description:"فشل في تحديث الإعداد",variant:"destructive"})}};return u.useEffect(()=>{p(),b()},[]),t?t.type!=="admin"?e.jsx("div",{className:"container mx-auto p-6 text-center",dir:"rtl",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8",children:[e.jsx(Zt,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-2",children:"غير مصرح لك"}),e.jsx("p",{className:"text-red-600 mb-4",children:"هذه الصفحة متاحة للمديرين فقط. يجب تسجيل الدخول بحساب المدير للوصول إلى إدارة نظام الإيصالات الرقمية."}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-yellow-800 font-medium",children:"حساب المدير المطلوب:"}),e.jsx("p",{className:"text-yellow-700",children:"ss73ss73ss73@gmail.com"})]}),e.jsxs("p",{className:"text-sm text-red-500 mt-2",children:["المستخدم الحالي: ",t.fullName," (",t.type,") - ",t.email]}),e.jsx(M,{onClick:()=>window.location.href="/login",className:"mt-4",variant:"outline",children:"تسجيل دخول بحساب المدير"})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Pn,{className:"h-8 w-8 text-blue-600"}),"إدارة نظام الإيصالات الرقمية"]}),e.jsxs(M,{onClick:()=>{p(),b()},variant:"outline",children:[e.jsx(ys,{className:"h-4 w-4 ml-2"}),"تحديث"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الإيصالات"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.total})]}),e.jsx(Pn,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"الإيصالات النشطة"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.active})]}),e.jsx(Zt,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"الإيصالات الملغية"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.revoked})]}),e.jsx(mc,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"آخر 24 ساعة"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.recent24h})]}),e.jsx(mc,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(cr,{defaultValue:"receipts",className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ot,{value:"receipts",children:"قائمة الإيصالات"}),e.jsx(Ot,{value:"audit",children:"سجل التدقيق"}),e.jsx(Ot,{value:"settings",children:"الإعدادات"})]}),e.jsx(Kt,{value:"receipts",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"قائمة الإيصالات الرقمية"})}),e.jsx(z,{children:j?e.jsx("div",{className:"text-center py-8",children:"جاري التحميل..."}):e.jsxs("div",{className:"space-y-3",children:[s.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:g.id}),e.jsx(ie,{variant:g.revoked?"destructive":"default",children:g.revoked?"ملغي":"نشط"}),e.jsxs(ie,{variant:"outline",children:["v",g.version]}),e.jsx(ie,{variant:"secondary",children:g.locale})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["المعاملة: ",g.txnId," | تاريخ الإنشاء: ",new Date(g.createdAt).toLocaleDateString("ar-SA")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{c(g.id),y(g.id)},children:[e.jsx(wr,{className:"h-4 w-4 ml-1"}),"عرض التدقيق"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>window.open(`/api/receipts/${g.id}/file`,"_blank"),children:[e.jsx(Cr,{className:"h-4 w-4 ml-1"}),"تحميل"]})]})]},g.id)),s.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد إيصالات متاحة"})]})})]})}),e.jsx(Kt,{value:"audit",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"سجل التدقيق"}),o&&e.jsxs("p",{className:"text-sm text-gray-600",children:["الإيصال المحدد: ",o]})]}),e.jsx(z,{children:o?e.jsxs("div",{className:"space-y-3",children:[i.map(g=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{variant:"outline",children:g.action}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(g.timestamp).toLocaleString("ar-SA")})]}),g.userId&&e.jsxs("span",{className:"text-sm text-gray-600",children:["المستخدم: ",g.userId]})]}),g.metadata&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx("strong",{children:"تفاصيل إضافية:"})," ",g.metadata]}),g.ipAddress&&e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["IP: ",g.ipAddress]})]},g.id)),i.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد سجلات تدقيق متاحة"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"يرجى اختيار إيصال لعرض سجل التدقيق الخاص به"})})]})}),e.jsx(Kt,{value:"settings",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"إعدادات نظام الإيصالات"})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"settingKey",children:"مفتاح الإعداد"}),e.jsx(pe,{id:"settingKey",value:d,onChange:g=>f(g.target.value),placeholder:"مثال: receipt_template_header"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"settingValue",children:"قيمة الإعداد"}),e.jsx(pe,{id:"settingValue",value:x,onChange:g=>h(g.target.value),placeholder:"قيمة الإعداد"})]})]}),e.jsxs(M,{onClick:m,className:"w-full",children:[e.jsx(vs,{className:"h-4 w-4 ml-2"}),"تحديث الإعداد"]})]})]})})]})]}):e.jsx("div",{className:"container mx-auto p-6 text-center",dir:"rtl",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"جاري التحقق من الهوية..."})})}function cce(){const{user:t}=Mt(),{toast:s}=lt(),{data:n,isLoading:r}=Cu("international_transfers"),[a,i]=u.useState(""),[l,o]=u.useState(null),[c,d]=u.useState(!1),f=Ze({mutationFn:async b=>await(await ce("/api/international-transfer/search","POST",{transferCode:b})).json(),onSuccess:b=>{o(b),s({title:"تم العثور على الحوالة",description:`حوالة بمبلغ ${b.amountPending} ${b.currencyCode}`,variant:"default"})},onError:b=>{s({title:"لم يتم العثور على الحوالة",description:b.message,variant:"destructive"}),o(null)}}),x=Ze({mutationFn:async b=>await(await ce("/api/international-transfer/receive","POST",{transferCode:b})).json(),onSuccess:b=>{s({title:"تم استلام الحوالة بنجاح",description:`تم إضافة ${b.amountReceived} ${b.currencyCode} إلى رصيدك`,variant:"default"}),Qe.invalidateQueries({queryKey:["/api/balance"]}),o(null),i(""),d(!1)},onError:b=>{s({title:"فشل في استلام الحوالة",description:b.message,variant:"destructive"})}}),h=()=>{if(!a.trim()){s({title:"رمز التحويل مطلوب",description:"يرجى إدخال رمز التحويل للبحث",variant:"destructive"});return}f.mutate(a)},j=()=>{l&&x.mutate(l.transferCode)},v={USD:"$",EUR:"€",LYD:"د.ل",TRY:"₺",AED:"د.إ",EGP:"ج.م",TND:"د.ت",GBP:"£"},p=b=>new Date(b).toLocaleString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحقق من الصلاحيات..."})]})}):n!=null&&n.isBlocked?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(_,{className:"w-full max-w-md mx-4",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-destructive",children:"تم تقييد الوصول"}),e.jsx(Se,{children:"لا يمكنك الوصول إلى صفحة التحويلات الدولية"})]}),e.jsxs(z,{className:"text-center space-y-4",children:[n.reason&&e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"السبب:"}),e.jsx("p",{className:"font-medium",children:n.reason})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع الإدارة"})]}),e.jsx(Os,{children:e.jsx(Mn,{href:"/dashboard",className:"w-full",children:e.jsx(M,{className:"w-full",variant:"outline",children:"العودة للوحة التحكم"})})})]})}):t?e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"استلام حوالة دولية"}),e.jsx("p",{className:"text-muted-foreground",children:"أدخل رمز التحويل لاستلام الحوالة الدولية"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Fn,{className:"h-5 w-5"}),"البحث عن الحوالة"]}),e.jsx(Se,{children:"أدخل رمز التحويل للبحث عن الحوالة المطلوب استلامها"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"transferCode",children:"رمز التحويل"}),e.jsx(pe,{id:"transferCode",type:"text",placeholder:"أدخل رمز التحويل (مثال: INT1234567890)",value:a,onChange:b=>i(b.target.value),onKeyPress:b=>b.key==="Enter"&&h()})]}),e.jsxs(M,{onClick:h,disabled:f.isPending,className:"w-full",children:[f.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Fn,{className:"h-4 w-4 mr-2"}),"البحث عن الحوالة"]}),(t==null?void 0:t.type)==="admin"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"استلام سريع للمدراء"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:"مدير"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"استخدم الرمز التالي للاختبار السريع"}),e.jsx(M,{type:"button",variant:"outline",className:"w-full border-blue-300 text-blue-800 hover:bg-blue-100",onClick:()=>i("INT1751194000000"),children:"تجربة رمز: INT1751194000000"})]}),(t==null?void 0:t.type)==="agent"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"استلام سريع للوكلاء"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"وكيل"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"استخدم رمز المستلم التالي للاختبار السريع"}),e.jsx(M,{type:"button",variant:"outline",className:"w-full border-green-300 text-green-800 hover:bg-green-100",onClick:()=>i("123456"),children:"تجربة رمز المستلم: 123456"})]})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Fj,{className:"h-5 w-5"}),"تفاصيل الحوالة"]}),e.jsx(Se,{children:"مراجعة تفاصيل الحوالة قبل الاستلام"})]}),e.jsx(z,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"رمز التحويل:"}),e.jsx("span",{className:"font-mono",children:l.transferCode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"المرسل:"}),e.jsx("span",{children:l.senderName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"المبلغ الأصلي:"}),e.jsxs("span",{children:[l.amountOriginal," ",v[l.currencyCode]]})]}),e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{children:"عمولة النظام:"}),e.jsxs("span",{children:["-",l.commissionSystem," ",v[l.currencyCode]]})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"عمولة المكتب:"}),e.jsxs("span",{children:["-",l.commissionRecipient," ",v[l.currencyCode]]})]}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold border-t pt-2",children:[e.jsx("span",{children:"المبلغ المستلم:"}),e.jsxs("span",{children:[l.amountPending," ",v[l.currencyCode]]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الإنشاء:"}),e.jsx("span",{children:p(l.createdAt)})]}),l.note&&e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"ملاحظة:"}),e.jsx("p",{className:"text-sm mt-1",children:l.note})]})]}),e.jsxs(os,{children:[e.jsx(Cr,{className:"h-4 w-4"}),e.jsxs(cs,{children:["سيتم إضافة ",l.amountPending," ",v[l.currencyCode]," إلى رصيدك عند تأكيد الاستلام"]})]}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsxs(os,{className:"border-yellow-500 bg-yellow-50",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx(cs,{className:"font-semibold",children:"هل أنت متأكد من استلام هذه الحوالة؟"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:j,disabled:x.isPending,className:"flex-1 bg-green-600 hover:bg-green-700",children:[x.isPending?e.jsx(ft,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(ks,{className:"h-4 w-4 mr-2"}),"تأكيد الاستلام"]}),e.jsx(M,{onClick:()=>d(!1),variant:"outline",className:"flex-1",children:"إلغاء"})]})]}):e.jsxs(M,{onClick:()=>d(!0),className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(Cr,{className:"h-4 w-4 mr-2"}),"استلام الحوالة"]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Fj,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"أدخل رمز التحويل للبحث عن الحوالة"})]})})]})]})]}):e.jsx("div",{children:"جاري التحميل..."})}function dce({onVoiceRecorded:t,onCancel:s,maxDurationSeconds:n=120,className:r,mode:a="desktop"}){const[i,l]=u.useState(!1),[o,c]=u.useState(!1),[d,f]=u.useState(!1),[x,h]=u.useState(0),[j,v]=u.useState(0),[p,b]=u.useState(null),[y,m]=u.useState(null),[g,w]=u.useState([]),[N,k]=u.useState(0),L=u.useRef(null),S=u.useRef(null),T=u.useRef(null),E=u.useRef(null),$=u.useRef(null),F=u.useRef(null),Z=u.useRef([]),{toast:G}=lt(),D=()=>{$.current&&clearInterval($.current),F.current&&clearInterval(F.current),L.current&&L.current.state!=="inactive"&&L.current.stop(),S.current&&S.current.close(),y&&URL.revokeObjectURL(y)};u.useEffect(()=>D,[]);const B=async()=>{try{const ve=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});S.current=new AudioContext,T.current=S.current.createAnalyser(),S.current.createMediaStreamSource(ve).connect(T.current),T.current.fftSize=256;const ne=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")?"audio/ogg;codecs=opus":"audio/webm";L.current=new MediaRecorder(ve,{mimeType:ne}),Z.current=[],L.current.ondataavailable=ke=>{ke.data.size>0&&Z.current.push(ke.data)},L.current.onstop=()=>{const ke=new Blob(Z.current,{type:ne});b(ke);const tt=URL.createObjectURL(ke);m(tt),re(ke),ve.getTracks().forEach(xt=>xt.stop())},L.current.start(100),l(!0),h(0),U(),W()}catch(ve){console.error("خطأ في الوصول للميكروفون:",ve),G({title:"خطأ في الميكروفون",description:"تعذر الوصول للميكروفون. تأكد من منح الإذن.",variant:"destructive"})}},de=()=>{L.current&&L.current.state!=="inactive"&&L.current.stop(),l(!1),c(!1),$.current&&clearInterval($.current)},U=()=>{$.current=setInterval(()=>{h(ve=>ve>=n?(de(),G({title:"انتهت مدة التسجيل",description:`تم الوصول للحد الأقصى ${n} ثانية`}),ve):ve+.1)},100)},W=()=>{if(!T.current)return;const ve=T.current.frequencyBinCount,Ee=new Uint8Array(ve),ne=()=>{if(!T.current||!i)return;T.current.getByteFrequencyData(Ee);const ke=Ee.reduce((tt,xt)=>tt+xt,0)/ve;k(ke/255*100),requestAnimationFrame(ne)};ne()},re=async ve=>{try{const Ee=await ve.arrayBuffer(),tt=(await new AudioContext().decodeAudioData(Ee)).getChannelData(0),xt=50,Q=Math.floor(tt.length/xt),oe=[];for(let Ae=0;Ae<xt;Ae++){const jt=Ae*Q,O=Math.min(jt+Q,tt.length);let P=0;for(let ee=jt;ee<O;ee++)P=Math.max(P,Math.abs(tt[ee]));oe.push(P)}w(oe)}catch(Ee){console.error("خطأ في توليد الموجة الصوتية:",Ee);const ne=Array.from({length:50},()=>Math.random()*.8+.1);w(ne)}},we=()=>{y&&(E.current&&(E.current.pause(),E.current=null),E.current=new Audio(y),E.current.addEventListener("loadedmetadata",()=>{E.current&&(E.current.play(),f(!0),J())}),E.current.addEventListener("ended",()=>{f(!1),v(0),F.current&&clearInterval(F.current)}))},be=()=>{E.current&&(E.current.pause(),f(!1),F.current&&clearInterval(F.current))},J=()=>{F.current=setInterval(()=>{E.current&&v(E.current.currentTime)},100)},Fe=()=>{p&&(t(p,x),Ve())},Oe=()=>{y&&URL.revokeObjectURL(y),Ve()},Ve=()=>{b(null),m(null),w([]),h(0),v(0),f(!1),k(0),F.current&&clearInterval(F.current)},Ne=()=>{D(),Ve(),s==null||s()},qe=ve=>{const Ee=Math.floor(ve/60),ne=Math.floor(ve%60);return`${Ee}:${ne.toString().padStart(2,"0")}`};return e.jsxs("div",{className:Te("bg-background border rounded-lg p-4 space-y-4",r),children:[e.jsx("div",{className:"flex items-center gap-4",children:p?e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:d?be:we,variant:"default",size:"lg",className:"h-12 w-12 rounded-full p-0",children:d?e.jsx(Vv,{className:"h-6 w-6"}):e.jsx(Gv,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"معاينة التسجيل"}),e.jsxs("div",{className:"text-lg font-mono",children:[qe(j)," / ",qe(x)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:Fe,variant:"default",size:"sm",className:"gap-2",children:[e.jsx(Vr,{className:"h-4 w-4"}),"إرسال"]}),e.jsxs(M,{onClick:Oe,variant:"ghost",size:"sm",className:"gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"حذف"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:i?de:B,variant:i?"destructive":"default",size:"lg",className:"h-12 w-12 rounded-full p-0",children:i?e.jsx(zm,{className:"h-6 w-6"}):e.jsx(qd,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:i?"جاري التسجيل...":"اضغط للتسجيل"}),e.jsxs("div",{className:"text-lg font-mono",children:[qe(x)," / ",qe(n)]})]}),i&&e.jsx(M,{onClick:Ne,variant:"ghost",size:"sm",children:"إلغاء"})]})}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(p0,{className:"h-4 w-4"}),"مستوى الصوت"]}),e.jsx(zp,{value:N,className:"h-2"})]}),g.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"الموجة الصوتية"}),e.jsx("div",{className:"flex items-end gap-1 h-16 bg-muted rounded p-2",children:g.map((ve,Ee)=>e.jsx("div",{className:"bg-primary rounded-sm flex-1 min-w-[2px] transition-all duration-200",style:{height:`${Math.max(ve*100,5)}%`,opacity:d&&j>0?Ee/g.length<=j/x?1:.3:1}},Ee))})]}),x>0&&e.jsx(zp,{value:x/n*100,className:"h-1"})]})}function uce({roomId:t,privateRoomId:s,messageId:n,privateMessageId:r,onVoiceSent:a,disabled:i=!1,className:l}){const[o,c]=u.useState(!1),[d,f]=u.useState(!1),{toast:x}=lt(),h=$n(),j=Ze({mutationFn:async({audioBlob:b,duration:y})=>{const m=new FormData;m.append("voice",b,"voice-message.webm"),m.append("durationSeconds",y.toString()),t&&m.append("roomId",t.toString()),s&&m.append("privateRoomId",s.toString()),n&&m.append("messageId",n.toString()),r&&m.append("privateMessageId",r.toString());const g=localStorage.getItem("auth_token"),w=await fetch("/api/voice/upload",{method:"POST",headers:{Authorization:`Bearer ${g}`},body:m});if(!w.ok){const N=await w.json();throw new Error(N.message||"فشل في رفع الرسالة الصوتية")}return w.json()},onSuccess:b=>{x({title:"تم الإرسال",description:"تم إرسال الرسالة الصوتية بنجاح"}),c(!1),f(!1),a&&a(b.voiceId),h.invalidateQueries({queryKey:["/api/chat/messages"]}),h.invalidateQueries({queryKey:["/api/private/messages"]})},onError:b=>{x({title:"خطأ في الإرسال",description:b.message,variant:"destructive"}),f(!1)}}),v=async(b,y)=>{f(!0),j.mutate({audioBlob:b,duration:y})},p=()=>{c(!1),f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:()=>c(!0),disabled:i||d,variant:"ghost",size:"sm",className:l,children:e.jsx(qd,{className:"h-4 w-4"})}),e.jsx(Ht,{open:o,onOpenChange:c,children:e.jsxs($t,{className:"sm:max-w-md",children:[e.jsx(Bt,{children:e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(qd,{className:"h-5 w-5"}),"تسجيل رسالة صوتية"]})}),e.jsx(gR,{onVoiceRecorded:v,onCancel:p,maxDuration:120,className:"border-0"}),d&&e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),"جاري رفع الرسالة الصوتية..."]})})]})})]})}function fce(){const[t,s]=u.useState(!1),[n,r]=u.useState(""),[a,i]=u.useState([]),{toast:l}=lt();$n();const{data:o}=$e({queryKey:["/api/voice/stats"],queryFn:()=>ce("/api/voice/stats").then(p=>p.json())}),{data:c}=$e({queryKey:["/api/admin/voice/settings"],queryFn:()=>ce("/api/admin/voice/settings").then(p=>p.json())}),d=Ze({mutationFn:async p=>(await ce(`/api/voice/search?q=${encodeURIComponent(p)}&limit=10`)).json(),onSuccess:p=>{console.log("نتائج البحث:",p)},onError:p=>{l({title:"خطأ في البحث",description:p.message,variant:"destructive"})}}),f=async(p,b)=>{try{const y=new FormData;y.append("voice",p,"test-voice.webm"),y.append("durationSeconds",b.toString()),y.append("roomId","1");const m=localStorage.getItem("token"),g=await fetch("/api/voice/upload",{method:"POST",headers:{Authorization:`Bearer ${m}`},body:y}),w=await g.json();if(g.ok){l({title:"تم الرفع بنجاح",description:`تم رفع الرسالة الصوتية: ${w.voiceId}`});const N={id:w.voiceId,durationSeconds:b,waveformPeaks:Array.from({length:50},()=>Math.random()*.8+.1),transcript:"هذا اختبار للرسائل الصوتية في النظام",senderName:"المستخدم الحالي",createdAt:new Date().toISOString(),isOwn:!0};i(k=>[N,...k]),s(!1)}else throw new Error(w.message||"خطأ في الرفع")}catch(y){console.error("خطأ في رفع الرسالة الصوتية:",y),l({title:"خطأ في الرفع",description:y instanceof Error?y.message:"حدث خطأ غير متوقع",variant:"destructive"})}},x=async p=>{try{const b=localStorage.getItem("token"),y=await fetch(`/api/voice/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(y.ok)l({title:"تم الحذف",description:"تم حذف الرسالة الصوتية بنجاح"}),i(m=>m.filter(g=>g.id!==p));else{const m=await y.json();throw new Error(m.message||"خطأ في الحذف")}}catch(b){l({title:"خطأ في الحذف",description:b instanceof Error?b.message:"حدث خطأ غير متوقع",variant:"destructive"})}},h=()=>{n.trim()&&d.mutate(n)},j=p=>{if(p===0)return"0 B";const b=1024,y=["B","KB","MB","GB"],m=Math.floor(Math.log(p)/Math.log(b));return parseFloat((p/Math.pow(b,m)).toFixed(2))+" "+y[m]},v=p=>{const b=Math.floor(p/3600),y=Math.floor(p%3600/60),m=Math.floor(p%60);return b>0?`${b}:${y.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`:`${y}:${m.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center justify-center gap-2",children:[e.jsx(p0,{className:"h-8 w-8 text-primary"}),"اختبار نظام الرسائل الصوتية"]}),e.jsx("p",{className:"text-muted-foreground",children:"اختبار جميع ميزات الرسائل الصوتية: التسجيل، التشغيل، النسخ النصي، والبحث"})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(Se,{children:"إجمالي الرسائل"})}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalMessages})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(Se,{children:"إجمالي المدة"})}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:v(o.totalDuration)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(Se,{children:"إجمالي الحجم"})}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:j(o.totalSize)})})]}),e.jsxs(_,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(Se,{children:"هذا الأسبوع"})}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.messagesThisWeek})})]})]}),c&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"إعدادات النظام"]})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"الحد الأقصى للمدة"}),e.jsxs("div",{className:"font-semibold",children:[c.maxDurationSeconds," ثانية"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"الحد الأقصى للحجم"}),e.jsxs("div",{className:"font-semibold",children:[c.maxFileSizeMb," MB"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"حالة النظام"}),e.jsx(ie,{variant:c.enabled?"default":"secondary",children:c.enabled?"مفعل":"معطل"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"النسخ النصي"}),e.jsx(ie,{variant:c.transcriptionEnabled?"default":"secondary",children:c.transcriptionEnabled?"مفعل":"معطل"})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs(M,{onClick:()=>s(!0),size:"lg",className:"gap-2",children:[e.jsx(qd,{className:"h-5 w-5"}),"تسجيل رسالة جديدة"]}),e.jsx(uce,{roomId:1,onVoiceSent:p=>{console.log("تم إرسال الرسالة الصوتية:",p)},className:"gap-2"})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Fn,{className:"h-5 w-5"}),"البحث في الرسائل الصوتية"]}),e.jsx(Se,{children:"ابحث في النصوص المنسوخة من الرسائل الصوتية"})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pe,{placeholder:"ابحث في المحتوى الصوتي...",value:n,onChange:p=>r(p.target.value),onKeyPress:p=>{p.key==="Enter"&&h()}}),e.jsx(M,{onClick:h,disabled:d.isPending||!n.trim(),children:d.isPending?"جاري البحث...":"بحث"})]}),d.data&&d.data.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("h3",{className:"font-semibold",children:["نتائج البحث (",d.data.length,")"]}),e.jsx("div",{className:"space-y-2",children:d.data.map(p=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:p.senderName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[v(p.durationSeconds)," • ",new Date(p.createdAt).toLocaleDateString("ar-EG")]}),e.jsxs("div",{className:"mt-1 text-sm",children:['"',p.transcript,'"']})]})})},p.id))})]})]})]}),t&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"تسجيل رسالة صوتية"})}),e.jsx(z,{children:e.jsx(dce,{onVoiceRecorded:f,onCancel:()=>s(!1),maxDurationSeconds:120})})]}),a.length>0&&e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"الرسائل الصوتية المسجلة"}),e.jsx(Se,{children:"الرسائل الصوتية التي تم تسجيلها في هذه الجلسة"})]}),e.jsx(z,{children:e.jsx("div",{className:"space-y-4",children:a.map(p=>e.jsx(pR,{voiceId:p.id,durationSeconds:p.durationSeconds,waveformPeaks:p.waveformPeaks,transcript:p.transcript,senderName:p.senderName,createdAt:p.createdAt,isOwn:p.isOwn,onDelete:x},p.id))})})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsx(X,{children:"كيفية الاستخدام"}),e.jsx(Se,{children:"دليل سريع لاستخدام نظام الرسائل الصوتية"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"📹 التسجيل"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• اضغط على زر الميكروفون لبدء التسجيل"}),e.jsx("li",{children:"• الحد الأقصى: 120 ثانية"}),e.jsx("li",{children:"• مراقبة مستوى الصوت أثناء التسجيل"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"🎧 التشغيل"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• تحكم في السرعة (0.5x - 2x)"}),e.jsx("li",{children:"• القفز للأمام/الخلف 10 ثوان"}),e.jsx("li",{children:"• النقر على الموجة للانتقال"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"🔍 البحث"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• البحث في النصوص المنسوخة"}),e.jsx("li",{children:"• فهرسة تلقائية للمحتوى"}),e.jsx("li",{children:"• نتائج سريعة ودقيقة"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"📊 الميزات"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• نسخ نصي تلقائي"}),e.jsx("li",{children:"• موجات صوتية مرئية"}),e.jsx("li",{children:"• إحصائيات الاستخدام"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ملاحظة هامة"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"لاستخدام ميزة التسجيل الصوتي، يجب منح الموقع إذن الوصول للميكروفون عند الطلب. كما يُفضل استخدام متصفح حديث يدعم HTML5 Audio API للحصول على أفضل تجربة."})]})]})})]})]})}function mce(){const{user:t}=Mt(),[,s]=_t(),[n,r]=u.useState("");u.useState("all");const[a,i]=u.useState("private");if(!t||t.email!=="ss73ss73ss73@gmail.com")return e.jsx(Nc,{children:e.jsx("div",{className:"min-h-screen bg-neutral-100 flex items-center justify-center",dir:"rtl",children:e.jsxs(_,{className:"max-w-md w-full",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(r$,{className:"mx-auto h-12 w-12 text-red-600 mb-4"}),e.jsx(X,{className:"text-2xl text-red-600",children:"غير مصرح بالوصول"}),e.jsx(Se,{children:"هذه الصفحة مخصصة للمشرف العام فقط"})]}),e.jsx(z,{className:"text-center",children:e.jsxs(M,{onClick:()=>s("/"),className:"w-full",variant:"outline",children:[e.jsx(Br,{className:"ml-2 h-4 w-4"}),"العودة إلى لوحة التحكم"]})})]})})});const{data:l,isLoading:o,refetch:c}=$e({queryKey:["/api/chat/private-messages-all"],refetchInterval:1e4}),{data:d,isLoading:f,refetch:x}=$e({queryKey:["/api/chat/messages"],refetchInterval:1e4}),h=async y=>{try{const m=await fetch(`/api/admin/export-messages?type=${y}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(m.ok){const g=await m.blob(),w=window.URL.createObjectURL(g),N=document.createElement("a");N.style.display="none",N.href=w,N.download=`${y}-messages-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(w)}}catch(m){console.error("خطأ في تصدير البيانات:",m)}},j=y=>{try{return new Date(y).toLocaleString("ar-SA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return y}},v=(y,m)=>!y||!Array.isArray(y)?[]:y.filter(g=>g.content&&g.content.toLowerCase().includes(m.toLowerCase())||g.senderName&&g.senderName.toLowerCase().includes(m.toLowerCase())||g.senderEmail&&g.senderEmail.toLowerCase().includes(m.toLowerCase())||g.receiverName&&g.receiverName.toLowerCase().includes(m.toLowerCase())||g.receiverEmail&&g.receiverEmail.toLowerCase().includes(m.toLowerCase())||g.roomName&&g.roomName.toLowerCase().includes(m.toLowerCase())),p=v(l,n),b=v(d,n);return e.jsx(Nc,{children:e.jsx("div",{className:"min-h-screen bg-neutral-100",dir:"rtl",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jn,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"مراقبة الرسائل"}),e.jsx("p",{className:"text-muted-foreground",children:"نظام مراقبة شامل للمحادثات الخاصة والعامة"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",onClick:()=>{c(),x()},children:[e.jsx(ys,{className:"h-4 w-4 ml-2"}),"تحديث"]}),e.jsxs(M,{onClick:()=>s("/"),variant:"outline",children:[e.jsx(Br,{className:"ml-2 h-4 w-4"}),"العودة للوحة التحكم"]})]})]}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"البحث في الرسائل، أسماء المرسلين، البريد الإلكتروني...",value:n,onChange:y=>r(y.target.value),className:"pr-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",onClick:()=>h("private"),children:[e.jsx(Cr,{className:"h-4 w-4 ml-2"}),"تصدير الخاصة"]}),e.jsxs(M,{variant:"outline",onClick:()=>h("group"),children:[e.jsx(Cr,{className:"h-4 w-4 ml-2"}),"تصدير العامة"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Jn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"الرسائل الخاصة"}),e.jsx("p",{className:"text-2xl font-bold",children:Array.isArray(l)?l.length:0})]})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(js,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"رسائل المجموعات"}),e.jsx("p",{className:"text-2xl font-bold",children:Array.isArray(d)?d.length:0})]})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(wr,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي الرسائل"}),e.jsx("p",{className:"text-2xl font-bold",children:(Array.isArray(l)?l.length:0)+(Array.isArray(d)?d.length:0)})]})]})})})]}),e.jsxs(cr,{value:a,onValueChange:i,children:[e.jsxs(Xn,{className:"grid w-full grid-cols-2",children:[e.jsx(Ot,{value:"private",children:"المحادثات الخاصة"}),e.jsx(Ot,{value:"group",children:"المجموعات العامة"})]}),e.jsx(Kt,{value:"private",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"المحادثات الخاصة (",p.length,")"]}),e.jsx(Se,{children:"مراقبة الرسائل الخاصة بين المستخدمين"})]}),e.jsx(z,{children:o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),e.jsx("p",{children:"جاري تحميل الرسائل..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Jn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsxs("p",{children:["لا توجد رسائل خاصة",n&&" مطابقة للبحث"]}),n&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(""),className:"mt-2",children:"مسح البحث"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:p.map(y=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ie,{variant:"secondary",children:["#",y.id]}),e.jsx("span",{className:"font-medium",children:y.senderName||"مستخدم"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",y.senderEmail||"غير محدد",")"]}),e.jsx("span",{className:"text-sm",children:"←"}),e.jsx("span",{className:"font-medium",children:y.receiverName||"مستخدم"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",y.receiverEmail||"غير محدد",")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(la,{className:"h-4 w-4"}),j(y.createdAt)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsx("p",{className:"text-sm",children:y.content||"محتوى محذوف"}),y.fileUrl&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["📎 مرفق: ",y.fileType]})]}),(y.isEdited||y.isDeleted)&&e.jsxs("div",{className:"flex gap-2",children:[y.isEdited&&e.jsx(ie,{variant:"outline",children:"معدلة"}),y.isDeleted&&e.jsx(ie,{variant:"destructive",children:"محذوفة"})]})]},y.id))})})]})}),e.jsx(Kt,{value:"group",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"المجموعات العامة (",b.length,")"]}),e.jsx(Se,{children:"مراقبة رسائل المجموعات والغرف العامة"})]}),e.jsx(z,{children:f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),e.jsx("p",{children:"جاري تحميل الرسائل..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(js,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsxs("p",{children:["لا توجد رسائل في المجموعات",n&&" مطابقة للبحث"]}),n&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(""),className:"mt-2",children:"مسح البحث"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b.map(y=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ie,{variant:"secondary",children:["#",y.id]}),e.jsx("span",{className:"font-medium",children:y.senderName||"مستخدم"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",y.senderEmail||"غير محدد",")"]}),e.jsx("span",{className:"text-sm",children:"في"}),e.jsx(ie,{variant:"outline",children:"الغرفة العامة"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(la,{className:"h-4 w-4"}),j(y.createdAt)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsx("p",{className:"text-sm",children:y.content||"محتوى محذوف"}),y.fileUrl&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["📎 مرفق: ",y.fileType]})]}),(y.isEdited||y.isDeleted)&&e.jsxs("div",{className:"flex gap-2",children:[y.isEdited&&e.jsx(ie,{variant:"outline",children:"معدلة"}),y.isDeleted&&e.jsx(ie,{variant:"destructive",children:"محذوفة"})]})]},y.id))})})]})})]})]})})})})}const hce=[{value:"USD",label:"دولار أمريكي (USD)"},{value:"EUR",label:"يورو (EUR)"},{value:"GBP",label:"جنيه إسترليني (GBP)"},{value:"TRY",label:"ليرة تركية (TRY)"},{value:"AED",label:"درهم إماراتي (AED)"},{value:"EGP",label:"جنيه مصري (EGP)"},{value:"TND",label:"دينار تونسي (TND)"}],xce=R.object({countryId:R.number().min(1,"اختيار الدولة مطلوب"),cityId:R.number().optional(),cityNameManual:R.string().optional(),message:R.string().optional(),requestedLimits:R.object({daily:R.number().min(100,"الحد اليومي يجب أن يكون 100 على الأقل").max(1e5,"الحد اليومي لا يمكن أن يتجاوز 100,000"),monthly:R.number().min(1e3,"الحد الشهري يجب أن يكون 1,000 على الأقل").max(1e6,"الحد الشهري لا يمكن أن يتجاوز 1,000,000"),currencies:R.array(R.string()).min(1,"يجب اختيار عملة واحدة على الأقل")})}).refine(t=>t.cityId||t.cityNameManual&&t.cityNameManual.trim().length>0,{message:"يجب اختيار مدينة من القائمة أو إدخال اسم المدينة يدوياً",path:["cityId"]});function pce(){const[,t]=_t(),{toast:s}=lt(),n=$n(),r=xs({resolver:ps(xce),defaultValues:{countryId:void 0,cityId:void 0,cityNameManual:"",message:"",requestedLimits:{daily:5e3,monthly:5e4,currencies:["USD"]}}}),{data:a}=$e({queryKey:["/api/user"]});u.useEffect(()=>{a!=null&&a.countryId&&r.setValue("countryId",a.countryId),(a!=null&&a.cityName||a!=null&&a.city)&&r.setValue("cityNameManual",a.cityName||a.city)},[a,r]);const{data:i=[]}=$e({queryKey:["/api/upgrade/external-transfer/my-requests"]}),{data:l=[]}=$e({queryKey:["/api/agent-offices","all"],queryFn:async()=>(await ce("/api/agent-offices?all=true","GET")).json()}),o=i.some(v=>v.requestType==="external_transfer"&&v.status==="pending"),c=i.some(v=>v.requestType==="external_transfer"&&v.status==="approved")||(a==null?void 0:a.extTransferEnabled)===!0,d=i.find(v=>v.requestType==="external_transfer"&&v.status==="pending");u.useEffect(()=>{a!=null&&a.countryId&&x(!0)},[a]);const[f,x]=u.useState(!0),h=Ze({mutationFn:async v=>(await ce("/api/upgrade/external-transfer/request","POST",v)).json(),onSuccess:()=>{s({title:"تم تقديم الطلب بنجاح",description:"سيتم مراجعة طلبك خلال 24-48 ساعة"}),n.invalidateQueries({queryKey:["/api/upgrade/external-transfer/my-requests"]}),t("/dashboard")},onError:v=>{s({title:"خطأ في تقديم الطلب",description:v.message||"حدث خطأ غير متوقع",variant:"destructive"})}}),j=v=>{h.mutate(v)};return c?e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-4xl",dir:"rtl",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs(M,{variant:"outline",onClick:()=>t("/Dashboard"),className:"flex items-center gap-2 hover:bg-blue-50 dark:hover:bg-gray-700 text-sm sm:text-base",children:[e.jsx(Br,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"العودة للوحة التحكم"]})}),e.jsxs(_,{children:[e.jsx(q,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:e.jsxs(X,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-500"}),"التحويل الخارجي مُفعل"]})}),e.jsx(z,{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:e.jsxs(os,{className:"border-green-200 bg-green-50",children:[e.jsx(ks,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-600"}),e.jsxs(cs,{className:"text-green-800 text-sm sm:text-base",children:[e.jsx("strong",{children:"تهانينا!"}),e.jsx("br",{}),"خدمة التحويل الخارجي مُفعلة في حسابك. يمكنك الآن إجراء تحويلات خارجية بناءً على الحدود المعتمدة لحسابك."]})]})})]})]}):o?e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-4xl",dir:"rtl",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs(M,{variant:"outline",onClick:()=>t("/Dashboard"),className:"flex items-center gap-2 hover:bg-blue-50 dark:hover:bg-gray-700 text-sm sm:text-base",children:[e.jsx(Br,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"العودة للوحة التحكم"]})}),e.jsxs(_,{children:[e.jsx(q,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:e.jsxs(X,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(la,{className:"h-5 w-5 sm:h-6 sm:w-6 text-amber-500"}),"طلب قيد المراجعة"]})}),e.jsxs(z,{className:"space-y-3 sm:space-y-4 px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsxs(os,{className:"border-amber-200 bg-amber-50",children:[e.jsx(_s,{className:"h-3 w-3 sm:h-4 sm:w-4 text-amber-600"}),e.jsxs(cs,{className:"text-amber-800 text-sm sm:text-base",children:[e.jsx("strong",{children:"طلبك تحت المراجعة"}),e.jsx("br",{}),"سيتم مراجعة طلبك خلال 24-48 ساعة من قبل الإدارة.",e.jsx("br",{}),"لا يمكنك تقديم طلب جديد حتى يتم البت في الطلب الحالي."]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"تفاصيل الطلب الحالي:"}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-gray-600",children:[e.jsxs("div",{children:["📅 ",e.jsx("strong",{children:"تاريخ التقديم:"})," ",d!=null&&d.createdAt?new Date(d.createdAt).toLocaleDateString("ar-EG"):"غير محدد"]}),e.jsxs("div",{children:["🌍 ",e.jsx("strong",{children:"الموقع المطلوب:"})," ",(d==null?void 0:d.city)||"غير محدد"]}),e.jsxs("div",{className:"flex items-center gap-2",children:["⏳ ",e.jsx("strong",{children:"الحالة:"})," ",e.jsx(ie,{variant:"secondary",className:"bg-amber-100 text-amber-800 text-xs",children:"قيد المراجعة"})]}),(d==null?void 0:d.message)&&e.jsxs("div",{children:["💬 ",e.jsx("strong",{children:"الرسالة:"})," ",d.message]})]})]})]})]})]}):e.jsxs("div",{className:"container mx-auto px-0.5 sm:px-4 py-1 sm:py-8 max-w-4xl",dir:"rtl",children:[e.jsx("div",{className:"mb-1 sm:mb-6",children:e.jsxs(M,{variant:"outline",onClick:()=>t("/Dashboard"),className:"flex items-center gap-0.5 sm:gap-2 hover:bg-blue-50 dark:hover:bg-gray-700 text-[10px] sm:text-base h-5 sm:h-10 px-1.5 sm:px-4",children:[e.jsx(Br,{className:"h-2 w-2 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"العودة للوحة التحكم"}),e.jsx("span",{className:"sm:hidden",children:"عودة"})]})}),e.jsxs(_,{children:[e.jsxs(q,{className:"px-1.5 sm:px-6 pt-1.5 sm:pt-6 pb-1.5 sm:pb-4",children:[e.jsxs(X,{className:"flex items-center gap-0.5 sm:gap-2 text-xs sm:text-xl",children:[e.jsx(On,{className:"h-2.5 w-2.5 sm:h-6 sm:w-6 text-blue-500"}),e.jsx("span",{className:"hidden sm:inline",children:"طلب تفعيل التحويل الخارجي"}),e.jsx("span",{className:"sm:hidden",children:"طلب تحويل خارجي"})]}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground mt-0.5 sm:mt-2 hidden sm:block",children:"قم بتقديم طلب لتفعيل خدمة التحويل الخارجي وتحديد حدود التحويل والدول المسموحة"})]}),e.jsx(z,{className:"px-1.5 sm:px-6 pb-1.5 sm:pb-6",children:e.jsx(Bs,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(j),className:"space-y-2 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsx("h3",{className:"text-xs sm:text-lg font-semibold",children:"معلومات الحساب"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:"رقم الحساب"}),e.jsx(pe,{value:(a==null?void 0:a.accountNumber)||"لم يتم تحديد رقم الحساب",disabled:!0,className:"bg-gray-50 text-[10px] sm:text-xs h-6 sm:h-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:"رقم الهاتف"}),e.jsx(pe,{value:(a==null?void 0:a.phone)||(a==null?void 0:a.email)||"غير محدد",disabled:!0,className:"bg-gray-50 text-[10px] sm:text-xs h-6 sm:h-10"})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsxs("h3",{className:"text-xs sm:text-lg font-semibold flex items-center gap-0.5 sm:gap-1",children:[e.jsx(xc,{className:"h-2.5 w-2.5 sm:h-5 sm:w-5"}),"معلومات الموقع"]}),e.jsx(_e,{control:r.control,name:"countryId",render:({field:v})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"الدولة المعتمدة"}),e.jsx(Re,{children:e.jsx(pe,{value:(a==null?void 0:a.countryName)||"لم يتم تحديد الدولة",disabled:!0,className:"bg-gray-50 h-6 sm:h-10 text-[10px] sm:text-xs"})}),e.jsx(Kr,{className:"text-xs hidden sm:block",children:"هذه هي الدولة المختارة عند التسجيل"}),e.jsx(He,{})]})}),e.jsx(_e,{control:r.control,name:"cityNameManual",render:({field:v})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"المدينة المعتمدة"}),e.jsx(Re,{children:e.jsx(pe,{value:(a==null?void 0:a.cityName)||(a==null?void 0:a.city)||"لم يتم تحديد المدينة",disabled:!0,className:"bg-gray-50 h-6 sm:h-10 text-[10px] sm:text-xs"})}),e.jsx(Kr,{className:"text-xs hidden sm:block",children:"هذه هي المدينة المختارة عند التسجيل"}),e.jsx(He,{})]})})]}),e.jsx(fs,{}),e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsx("h3",{className:"text-xs sm:text-lg font-semibold",children:"حدود التحويل"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-4",children:[e.jsx(_e,{control:r.control,name:"requestedLimits.daily",render:({field:v})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"الحد اليومي"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",min:"100",max:"100000",...v,onChange:p=>v.onChange(parseInt(p.target.value)||0),className:"h-6 sm:h-10 text-[10px] sm:text-xs",placeholder:"5000"})}),e.jsx(Kr,{className:"text-xs hidden sm:block",children:"100 - 100,000 دولار"}),e.jsx(He,{})]})}),e.jsx(_e,{control:r.control,name:"requestedLimits.monthly",render:({field:v})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"الحد الشهري"}),e.jsx(Re,{children:e.jsx(pe,{type:"number",min:"1000",max:"1000000",...v,onChange:p=>v.onChange(parseInt(p.target.value)||0),className:"h-6 sm:h-10 text-[10px] sm:text-xs",placeholder:"50000"})}),e.jsx(Kr,{className:"text-xs hidden sm:block",children:"1,000 - 1,000,000 دولار"}),e.jsx(He,{})]})})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsx("h3",{className:"text-xs sm:text-lg font-semibold",children:"العملات"}),e.jsx(_e,{control:r.control,name:"requestedLimits.currencies",render:()=>e.jsxs(De,{children:[e.jsxs("div",{className:"mb-1 sm:mb-4",children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"اختر العملات"}),e.jsx(Kr,{className:"text-[10px] sm:text-xs hidden sm:block",children:"يجب اختيار عملة واحدة على الأقل"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-0.5 sm:gap-4",children:hce.map(v=>e.jsx(_e,{control:r.control,name:"requestedLimits.currencies",render:({field:p})=>{var b;return e.jsxs(De,{className:"flex flex-row items-center space-x-0.5 space-y-0 py-0.25",children:[e.jsx(Re,{children:e.jsx(Di,{checked:(b=p.value)==null?void 0:b.includes(v.value),onCheckedChange:y=>{const m=y?[...p.value||[],v.value]:(p.value||[]).filter(g=>g!==v.value);p.onChange(m)},className:"scale-50 sm:scale-100 h-2 w-2 sm:h-4 sm:w-4"})}),e.jsx("div",{className:"leading-none",children:e.jsx(Pe,{className:"cursor-pointer text-[10px] sm:text-xs leading-none",children:v.value})})]})}},v.value))}),e.jsx(He,{})]})})]}),e.jsx(fs,{}),e.jsxs("div",{className:"space-y-1 sm:space-y-4",children:[e.jsxs("h3",{className:"text-xs sm:text-lg font-semibold flex items-center gap-0.5 sm:gap-1",children:[e.jsx(On,{className:"h-2.5 w-2.5 sm:h-5 sm:w-5"}),"المكاتب المعتمدة"]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground hidden sm:block",children:"عرض المكاتب المعتمدة للتحويلات الدولية"}),l.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1 sm:gap-4",children:l.map(v=>e.jsx(_,{className:"border-gray-200",children:e.jsx(z,{className:"p-1.5 sm:p-4",children:e.jsxs("div",{className:"space-y-0.5 sm:space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{variant:"outline",className:"bg-blue-50 text-blue-700 text-[10px] sm:text-xs px-0.5 py-0.25 sm:px-1 sm:py-0.5",children:v.countryCode}),e.jsx("span",{className:"text-[10px] sm:text-xs text-green-600",children:"متاح"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-[10px] sm:text-xs",children:v.officeName}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 hidden sm:block",children:v.address})]})]})})},v.id))}):e.jsxs("div",{className:"text-center py-2 sm:py-8 text-gray-500",children:[e.jsx(On,{className:"h-4 w-4 sm:h-12 sm:w-12 mx-auto mb-0.5 sm:mb-3 text-gray-300"}),e.jsx("p",{className:"text-[10px] sm:text-xs",children:"لا توجد مكاتب متاحة حالياً"})]})]}),e.jsx(fs,{}),e.jsx(_e,{control:r.control,name:"message",render:({field:v})=>e.jsxs(De,{children:[e.jsx(Pe,{className:"text-[10px] sm:text-xs",children:"رسالة إضافية"}),e.jsx(Re,{children:e.jsx(Un,{placeholder:"تفاصيل إضافية...",className:"resize-none h-12 sm:h-24 text-[10px] sm:text-xs",...v})}),e.jsx(Kr,{className:"text-xs hidden sm:block",children:"معلومات إضافية تساعد في المراجعة"}),e.jsx(He,{})]})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-1 sm:gap-4 pt-1.5 sm:pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>t("/dashboard"),className:"w-full sm:w-auto text-[10px] sm:text-base py-1 h-6 sm:h-10",children:"إلغاء"}),e.jsx(M,{type:"submit",disabled:h.isPending,className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto text-[10px] sm:text-base py-1 h-6 sm:h-10",children:h.isPending?"جاري التقديم...":"تقديم الطلب"})]})]})})})]})]})}function gce(){return e.jsx(er,{page:"referrals",children:e.jsx(jce,{})})}function jce(){const{user:t}=Mt(),{toast:s}=lt(),[n,r]=u.useState("overview"),{data:a,isLoading:i,error:l}=$e({queryKey:["/api/referral/stats"],enabled:!!t,retry:3,refetchOnWindowFocus:!1}),{data:o=[],isLoading:c}=$e({queryKey:["/api/referral/rewards"],enabled:!!t&&n==="rewards"}),{data:d=[],isLoading:f,refetch:x}=$e({queryKey:["/api/referral/balances"],enabled:!!t&&n==="rewards"}),{data:h=[],isLoading:j}=$e({queryKey:["/api/referral/my-referrals"],enabled:!!t&&n==="referrals"}),v=()=>{a!=null&&a.referralCode&&(navigator.clipboard.writeText(a.referralCode),s({title:"تم نسخ الرمز",description:"تم نسخ رمز الإحالة إلى الحافظة"}))},p=()=>{if(a!=null&&a.referralCode){const g=`${window.location.origin}/auth?ref=${a.referralCode}`;navigator.clipboard.writeText(g),s({title:"تم نسخ الرابط",description:"تم نسخ رابط الإحالة إلى الحافظة"})}},b=async()=>{if(a!=null&&a.referralCode){const g=`${window.location.origin}/auth?ref=${a.referralCode}`,w=`انضم إلى صرافة الخليج واحصل على مكافآت مميزة! استخدم رمز الإحالة: ${a.referralCode}`;if(navigator.share)try{await navigator.share({title:"دعوة للانضمام إلى صرافة الخليج",text:w,url:g})}catch{p()}else p()}},y=Ze({mutationFn:async({currency:g,amount:w})=>(await ce("/api/referral/transfer-balance","POST",{currency:g,amount:w})).json(),onSuccess:()=>{s({title:"تم السحب بنجاح",description:"تم إضافة المبلغ لرصيدك الرئيسي"}),x(),Qe.invalidateQueries({queryKey:["/api/balance"]})},onError:g=>{s({variant:"destructive",title:"خطأ في السحب",description:g.message||"حدث خطأ أثناء سحب الرصيد"})}}),m=(g,w)=>{const N=parseFloat(w);if(N<=0){s({variant:"destructive",title:"مبلغ غير صالح",description:"لا يوجد رصيد للسحب"});return}y.mutate({currency:g,amount:N})};return u.useEffect(()=>{document.title="إدارة الإحالات - صرافة الخليج"},[]),t?e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-4 space-y-3 sm:space-y-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(yn,{})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"نظام الإحالة"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"احصل على مكافآت عند دعوة أصدقائك للانضمام"})]}),e.jsx("div",{className:"flex items-center gap-2 self-start sm:self-auto",children:e.jsx($g,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})})]}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg w-full sm:w-fit",children:[e.jsxs(Ns,{variant:n==="overview"?"default":"ghost",size:"sm",onClick:()=>r("overview"),className:"flex-1 sm:flex-none px-2 sm:px-4 text-xs sm:text-sm",children:[e.jsx(x0,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1 sm:ml-2"}),"نظرة عامة"]}),e.jsxs(Ns,{variant:n==="rewards"?"default":"ghost",size:"sm",onClick:()=>r("rewards"),className:"flex-1 sm:flex-none px-2 sm:px-4 text-xs sm:text-sm",children:[e.jsx(As,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1 sm:ml-2"}),"المكافآت"]}),e.jsxs(Ns,{variant:n==="referrals"?"default":"ghost",size:"sm",onClick:()=>r("referrals"),className:"flex-1 sm:flex-none px-2 sm:px-4 text-xs sm:text-sm",children:[e.jsx(js,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1 sm:ml-2"}),"إحالاتي"]})]})}),n==="overview"&&e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"رمز الإحالة الخاص بك"]}),e.jsx(Se,{children:"شارك هذا الرمز مع أصدقائك للحصول على مكافآت"})]}),e.jsx(z,{className:"space-y-3 sm:space-y-4",children:i?e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-12 bg-muted rounded"})}):l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-500",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"جاري المحاولة مرة أخرى..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{value:(a==null?void 0:a.referralCode)||"لم يتم العثور على الرمز",readOnly:!0,className:"font-mono text-center text-sm sm:text-lg bg-primary/5 border-primary/20",placeholder:"رمز الإحالة..."}),e.jsx(Ns,{onClick:v,size:"sm",variant:"outline",className:"shrink-0",children:e.jsx(hc,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(Ns,{onClick:p,variant:"outline",className:"flex-1",size:"sm",children:[e.jsx(hc,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"نسخ الرابط"})]}),e.jsxs(Ns,{onClick:b,className:"flex-1",size:"sm",children:[e.jsx(Nf,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1 sm:ml-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"مشاركة"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx(_,{children:e.jsx(z,{className:"p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي الإحالات"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:i?"...":(a==null?void 0:a.totalReferrals)||0})]}),e.jsx(Yv,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي المكافآت"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:i?"...":`${(a==null?void 0:a.totalRewards)||0} LYD`})]}),e.jsx(As,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إحالات هذا الشهر"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:i?"...":(a==null?void 0:a.monthlyReferrals)||0})]}),e.jsx(_j,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500"})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"مكافآت معلقة"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:i?"...":`${(a==null?void 0:a.pendingRewards)||0} LYD`})]}),e.jsx($U,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-500"})]})})})]})]}),n==="rewards"&&e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"أرصدة المكافآت المتاحة"]}),e.jsx(Se,{children:"الأرصدة المكتسبة من مكافآت الإحالات"})]}),e.jsx(z,{children:f?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(8)].map((g,w)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-muted rounded-lg"})},w))}):d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(As,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد أرصدة مكافآت"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ستظهر أرصدة مكافآتك هنا بعد حصولك على مكافآت من الإحالات"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:d.map(g=>e.jsx(_,{className:"relative",children:e.jsxs(z,{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base sm:text-xl font-bold text-green-600",children:parseFloat(g.amount).toFixed(2)}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:g.currency})]}),e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:e.jsx(As,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})})]}),e.jsx(Ns,{onClick:()=>m(g.currency,g.amount),disabled:parseFloat(g.amount)<=0||y.isPending,className:"w-full text-xs sm:text-sm",size:"sm",children:y.isPending?"جاري السحب...":"سحب إلى الرصيد الرئيسي"})]})},g.currency))})})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx($g,{className:"h-5 w-5"}),"سجل المكافآت"]}),e.jsx(Se,{children:"جميع المكافآت التي حصلت عليها من الإحالات"})]}),e.jsx(z,{children:c?e.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(3)].map((g,w)=>e.jsx("div",{className:"h-12 bg-muted rounded"},w))}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد مكافآت بعد"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ادع أصدقائك للانضمام للحصول على مكافآت"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"المبلغ"}),e.jsx(ae,{children:"من المستخدم"}),e.jsx(ae,{children:"نوع المكافأة"}),e.jsx(ae,{children:"التاريخ"})]})}),e.jsx(Qs,{children:o.map(g=>e.jsxs(kt,{children:[e.jsx(se,{className:"font-medium",children:e.jsxs("span",{className:"text-green-600",children:["+",parseFloat(g.amount.toString()).toFixed(2)," ",g.currency]})}),e.jsx(se,{children:g.fromUser}),e.jsx(se,{children:e.jsx(ie,{variant:"secondary",children:g.rewardType==="direct"?"إحالة مباشرة":"إحالة فرعية"})}),e.jsx(se,{children:new Date(g.createdAt).toLocaleDateString("ar")})]},g.id))})]})})})]})]}),n==="referrals"&&e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"الأشخاص الذين أحلتهم"]}),e.jsx(Se,{children:"قائمة بجميع الأشخاص الذين انضموا باستخدام رمز الإحالة الخاص بك"})]}),e.jsx(z,{children:j?e.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(3)].map((g,w)=>e.jsx("div",{className:"h-12 bg-muted rounded"},w))}):h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(js,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد إحالات بعد"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"شارك رمز الإحالة مع أصدقائك ليظهروا هنا"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Gs,{children:[e.jsx(Ys,{children:e.jsxs(kt,{children:[e.jsx(ae,{children:"الاسم"}),e.jsx(ae,{children:"البريد الإلكتروني"}),e.jsx(ae,{children:"تاريخ الانضمام"}),e.jsx(ae,{children:"الحالة"})]})}),e.jsx(Qs,{children:h.map(g=>e.jsxs(kt,{children:[e.jsx(se,{className:"font-medium",children:g.referredUserName}),e.jsx(se,{className:"text-muted-foreground",children:g.referredUserEmail}),e.jsx(se,{children:new Date(g.joinedAt).toLocaleDateString("ar")}),e.jsx(se,{children:e.jsxs(ie,{variant:g.status==="active"?"default":"secondary",children:[e.jsx(ks,{className:"w-3 h-3 ml-1"}),g.status==="active"?"نشط":"غير نشط"]})})]},g.id))})]})})})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"يجب تسجيل الدخول للوصول إلى هذه الصفحة"})})})}function yce(){const{toast:t}=lt(),s=$n(),[n,r]=u.useState(!1),{data:a,isLoading:i}=$e({queryKey:["/api/admin/referral/settings"]}),l=Ze({mutationFn:async d=>(console.log("محاولة حفظ الإعدادات:",d),await(await ce("/api/admin/referral/settings","POST",d)).json()),onSuccess:d=>{console.log("نجح الحفظ:",d),t({title:"تم الحفظ",description:"تم تحديث إعدادات الإحالة بنجاح"}),s.invalidateQueries({queryKey:["/api/admin/referral/settings"]})},onError:d=>{console.error("خطأ في الحفظ:",d),t({title:"خطأ",description:`فشل في حفظ الإعدادات: ${d.message||"خطأ غير محدد"}`,variant:"destructive"})}}),o=async()=>{r(!0);try{const f=await(await ce("/api/admin/referral/generate-codes","POST",{})).json();t({title:"تم بنجاح",description:`تم توليد ${f.generated} رمز إحالة جديد`})}catch{t({title:"خطأ",description:"فشل في توليد رموز الإحالة",variant:"destructive"})}finally{r(!1)}},c=d=>{d.preventDefault();const f=new FormData(d.currentTarget),x={referralCommissionPercentage:Number(f.get("referralCommissionPercentage")),referralSignupBonus:Number(f.get("referralSignupBonus")),maxReferralLevels:Number(f.get("maxReferralLevels")),minReferralAmount:Number(f.get("minReferralAmount"))};l.mutate(x)};return i?e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"جاري تحميل الإعدادات..."})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vs,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إعدادات نظام الإحالة"}),e.jsx("p",{className:"text-muted-foreground",children:"إدارة نسب المكافآت وإعدادات الإحالة"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-5 w-5"}),"إعدادات المكافآت"]}),e.jsx(Se,{children:"تحديد نسب المكافآت والمبالغ في نظام الإحالة"})]}),e.jsx(z,{children:e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"referralCommissionPercentage",children:"نسبة مكافأة الإحالة (%)"}),e.jsx(as,{id:"referralCommissionPercentage",name:"referralCommissionPercentage",type:"number",step:"0.01",min:"0",max:"100",defaultValue:(a==null?void 0:a.referralCommissionPercentage)||5,placeholder:"5.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"النسبة من عمولات النظام التي يحصل عليها المُحيل"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"referralSignupBonus",children:"مكافأة التسجيل (دينار ليبي)"}),e.jsx(as,{id:"referralSignupBonus",name:"referralSignupBonus",type:"number",step:"0.01",min:"0",defaultValue:(a==null?void 0:a.referralSignupBonus)||10,placeholder:"10.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"المكافأة الثابتة عند تسجيل مستخدم جديد بالإحالة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"maxReferralLevels",children:"عدد مستويات الإحالة"}),e.jsx(as,{id:"maxReferralLevels",name:"maxReferralLevels",type:"number",min:"1",max:"5",defaultValue:(a==null?void 0:a.maxReferralLevels)||2,placeholder:"2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"عدد المستويات في شجرة الإحالة (1 = مباشر فقط)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"minReferralAmount",children:"الحد الأدنى للمكافأة (دينار ليبي)"}),e.jsx(as,{id:"minReferralAmount",name:"minReferralAmount",type:"number",step:"0.01",min:"0",defaultValue:(a==null?void 0:a.minReferralAmount)||1,placeholder:"1.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"الحد الأدنى للمعاملة لتحصيل مكافأة الإحالة"})]})]}),e.jsx(Ns,{type:"submit",disabled:l.isPending,className:"w-full md:w-auto",children:l.isPending?"جاري الحفظ...":"حفظ الإعدادات"})]})})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"أدوات الإدارة"]}),e.jsx(Se,{children:"أدوات لإدارة وصيانة نظام الإحالة"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"توليد رموز الإحالة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إنشاء رموز إحالة للمستخدمين الذين لا يملكون رموز بعد"})]}),e.jsxs(Ns,{onClick:o,disabled:n,variant:"outline",size:"sm",children:[e.jsx(ys,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),n?"جاري التوليد...":"توليد الرموز"]})]})})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"كيف يعمل نظام المكافآت؟"})}),e.jsxs(z,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"مكافأة التسجيل الثابتة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يحصل المُحيل على مكافأة ثابتة فور تسجيل المستخدم المُحال"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"مكافآت العمولة النسبية"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يحصل المُحيل على نسبة من عمولات النظام عند استخدام المُحال للخدمات"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500 text-white flex items-center justify-center text-sm font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"مستويات الإحالة المتعددة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يمكن الحصول على مكافآت من عدة مستويات في شجرة الإحالة"})]})]})]})]})]})}function vce(){const{toast:t}=lt(),s=$n(),[n,r]=u.useState({lydReward:{amount:1},usdReward:{amount:.5},marketReward:{amount:.005},systemFeeRate:{rate:.1}}),{data:a,isLoading:i}=$e({queryKey:["/api/admin/referral/fixed-rewards"],enabled:!0});u.useEffect(()=>{a&&r(a)},[a]);const l=Ze({mutationFn:async d=>(await ce("/api/admin/referral/fixed-rewards","PUT",d)).json(),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/referral/fixed-rewards"]}),t({title:"تم التحديث",description:"تم حفظ إعدادات المكافآت الثابتة بنجاح"})},onError:d=>{t({title:"خطأ",description:d.message||"فشل في حفظ الإعدادات",variant:"destructive"})}}),o=(d,f)=>{r(x=>({...x,[d]:typeof f=="number"?{amount:f}:f}))},c=()=>{l.mutate(n)};return i?e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((d,f)=>e.jsx("div",{className:"h-48 bg-muted rounded"},f))})]})}):e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vs,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إعدادات المكافآت الثابتة"}),e.jsx("p",{className:"text-muted-foreground",children:"إدارة مبالغ المكافآت الثابتة لنظام الإحالة"})]})]}),e.jsxs(os,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsxs(cs,{children:[e.jsx("strong",{children:"تنبيه مهم:"})," هذه المبالغ تُخصم من عمولة النظام لكل عملية. إذا كانت عمولة النظام أقل من المكافأة المحددة، سيتم صرف المتاح فقط."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-green-600"}),"تحويل الدينار الليبي"]}),e.jsx(Se,{children:"مكافأة ثابتة لكل تحويل داخلي بعملة LYD"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"lyd-reward",children:"المبلغ (دينار ليبي)"}),e.jsx(pe,{id:"lyd-reward",type:"number",step:"0.01",min:"0",value:n.lydReward.amount,onChange:d=>o("lydReward",parseFloat(d.target.value)||0),placeholder:"1.00"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"المبلغ الافتراضي: 1.00 LYD"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-blue-600"}),"تحويل الدولار الأمريكي"]}),e.jsx(Se,{children:"مكافأة ثابتة لكل تحويل داخلي بعملة USD"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"usd-reward",children:"المبلغ (دولار أمريكي)"}),e.jsx(pe,{id:"usd-reward",type:"number",step:"0.01",min:"0",value:n.usdReward.amount,onChange:d=>o("usdReward",parseFloat(d.target.value)||0),placeholder:"0.50"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"المبلغ الافتراضي: 0.50 USD"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-purple-600"}),"بيع السوق"]}),e.jsx(Se,{children:"مكافأة ثابتة لكل عملية بيع منفذة في سوق العملة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"market-reward",children:"المبلغ (دولار أمريكي)"}),e.jsx(pe,{id:"market-reward",type:"number",step:"0.001",min:"0",value:n.marketReward.amount,onChange:d=>o("marketReward",parseFloat(d.target.value)||0),placeholder:"0.005"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"المبلغ الافتراضي: 0.005 USD (نصف سنت)"})]})]}),e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5 text-orange-600"}),"رسوم النظام على المكافآت"]}),e.jsx(Se,{children:"نسبة الرسوم التي يخصمها النظام من كل مكافأة إحالة"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"system-fee-rate",children:"النسبة المئوية (%)"}),e.jsx(pe,{id:"system-fee-rate",type:"number",step:"0.01",min:"0",max:"100",value:n.systemFeeRate.rate*100,onChange:d=>o("systemFeeRate",{rate:(parseFloat(d.target.value)||0)/100}),placeholder:"10.00"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"النسبة الافتراضية: 10% (يتم خصم 10% من كل مكافأة كرسوم نظام)"})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"سيتم تطبيق هذه الإعدادات على جميع العمليات الجديدة فوراً"}),e.jsxs(M,{onClick:c,disabled:l.isPending,className:"flex items-center gap-2",children:[e.jsx(pu,{className:"h-4 w-4"}),l.isPending?"جاري الحفظ...":"حفظ الإعدادات"]})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"كيف يعمل النظام؟"})}),e.jsx(z,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-600 mb-2",children:"تحويل LYD"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["عند كل تحويل داخلي بالدينار الليبي، يحصل المُحيل على ",n.lydReward.amount," LYD"]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:"تحويل USD"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["عند كل تحويل داخلي بالدولار الأمريكي، يحصل المُحيل على ",n.usdReward.amount," USD"]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-600 mb-2",children:"بيع السوق"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["عند كل عملية بيع منفذة في السوق، يحصل المُحيل على ",n.marketReward.amount," USD"]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-orange-50 dark:bg-orange-950",children:[e.jsx("h4",{className:"font-semibold text-orange-600 mb-2",children:"رسوم النظام"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["يتم خصم ",(n.systemFeeRate.rate*100).toFixed(1),"% من كل مكافأة إحالة كرسوم نظام"]})]})]})})]})]})}const Ku=[{value:"market",label:"السوق"},{value:"send",label:"الإرسال"},{value:"receive",label:"الاستقبال"},{value:"wallet",label:"المحفظة"},{value:"balance",label:"الأرصدة"},{value:"transfers",label:"التحويلات"},{value:"statement",label:"كشف الحساب"},{value:"notifications",label:"الإشعارات"},{value:"dashboard",label:"لوحة التحكم"},{value:"kyc",label:"التوثيق"},{value:"chat",label:"الدردشة العامة"},{value:"private_chat",label:"الدردشة الخاصة"},{value:"group_chats",label:"مجموعات الدردشة"},{value:"referrals",label:"الإحالات"},{value:"agent_dashboard",label:"لوحة الوكيل"},{value:"city_transfers",label:"التحويلات بين المدن"},{value:"office_management",label:"دولي فقط"},{value:"inter_office_receive",label:"استلام الحوالات"},{value:"inter_office",label:"التحويل بين المكاتب"},{value:"international",label:"التحويل الدولي"},{value:"user_settings",label:"إعدادات المستخدم"},{value:"support",label:"الدعم"},{value:"reports",label:"التقارير"},{value:"settings",label:"الإعدادات"},{value:"all",label:"تعطيل شامل"}];function PC(){var ve,Ee,ne,ke,tt,xt;const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt();if($n(),!t||t.email!=="ss73ss73ss73@gmail.com")return s("/"),null;const[r,a]=u.useState(""),[i,l]=u.useState(null),[o,c]=u.useState(!1),[d,f]=u.useState("individual"),[x,h]=u.useState(!1);u.useState("");const[j,v]=u.useState({pageKey:"",scope:"page",reason:"",isActive:!0,duration:"",durationType:"hours"}),[p,b]=u.useState({pageKey:"",reason:"",isActive:!0,duration:"",durationType:"hours",allowedUsers:[]}),[y,m]=u.useState(""),[g,w]=u.useState(!1),[N,k]=u.useState(""),[L,S]=u.useState(""),[T,E]=u.useState(null),$=Ze({mutationFn:async Q=>{try{return await(await ce(`/api/restrictions/${Q}`,"GET")).json()}catch(oe){throw oe}},onSuccess:Q=>{l(Q),c(!1)},onError:Q=>{n({title:"خطأ في البحث",description:Q.message||"لم يتم العثور على المستخدم",variant:"destructive"}),l(null)}}),F=Ze({mutationFn:async Q=>{if(!Q.pageKey)throw new Error("يجب تحديد نوع الصفحة");if(!Q.scope)throw new Error("يجب تحديد النطاق");if(!(i!=null&&i.user))throw new Error("لا يوجد مستخدم محدد");let oe=null;if(Q.duration&&Q.durationType){const Ae=parseInt(Q.duration);if(isNaN(Ae)||Ae<=0)throw new Error("مدة القيد يجب أن تكون رقماً موجباً");const jt=new Date;Q.durationType==="hours"?oe=new Date(jt.getTime()+Ae*60*60*1e3).toISOString():Q.durationType==="days"&&(oe=new Date(jt.getTime()+Ae*24*60*60*1e3).toISOString())}return ce("/api/restrictions","POST",{userIdentifier:i.user.accountNumber||i.user.email,pageKey:Q.pageKey,scope:Q.scope,reason:Q.reason||"",isActive:Q.isActive,expiresAt:oe})},onSuccess:()=>{n({title:"تم حفظ القيد",description:"تم تطبيق القيد بنجاح"}),v({pageKey:"",scope:"page",reason:"",isActive:!0,duration:"",durationType:"hours"}),c(!1),i!=null&&i.user&&$.mutate(i.user.accountNumber||i.user.email)},onError:Q=>{n({title:"خطأ في حفظ القيد",description:Q.message||"حدث خطأ أثناء حفظ القيد",variant:"destructive"})}}),Z=Ze({mutationFn:async Q=>ce(`/api/restrictions/${Q}`,"DELETE"),onSuccess:()=>{n({title:"تم إزالة القيد",description:"تم إزالة القيد بنجاح"}),i!=null&&i.user&&$.mutate(i.user.accountNumber||i.user.email)},onError:Q=>{n({title:"خطأ في إزالة القيد",description:Q.message||"حدث خطأ أثناء إزالة القيد",variant:"destructive"})}}),{data:G,refetch:D}=$e({queryKey:["/api/restrictions/global"],staleTime:30*1e3}),B=Ze({mutationFn:async Q=>{if(!Q.pageKey)throw new Error("يجب تحديد نوع الصفحة");let oe=null;if(Q.duration&&Q.durationType){const Ae=parseInt(Q.duration);if(isNaN(Ae)||Ae<=0)throw new Error("مدة القيد يجب أن تكون رقماً موجباً");const jt=new Date;Q.durationType==="hours"?oe=new Date(jt.getTime()+Ae*60*60*1e3).toISOString():Q.durationType==="days"&&(oe=new Date(jt.getTime()+Ae*24*60*60*1e3).toISOString())}return ce("/api/restrictions/global","POST",{pageKey:Q.pageKey,reason:Q.reason||"",isActive:Q.isActive,expiresAt:oe,allowedUsers:Q.allowedUsers||[]})},onSuccess:()=>{n({title:"تم إنشاء القيد الشامل",description:"تم تطبيق القيد على جميع المستخدمين بنجاح"}),b({pageKey:"",reason:"",isActive:!0,duration:"",durationType:"hours",allowedUsers:[]}),h(!1),D()},onError:Q=>{n({title:"خطأ في إنشاء القيد الشامل",description:Q.message||"حدث خطأ أثناء إنشاء القيد الشامل",variant:"destructive"})}}),de=Ze({mutationFn:async Q=>ce(`/api/restrictions/global/${Q}`,"DELETE"),onSuccess:()=>{n({title:"تم إزالة القيد الشامل",description:"تم إزالة القيد الشامل وجميع استثناءاته بنجاح"}),D()},onError:Q=>{n({title:"خطأ في إزالة القيد الشامل",description:Q.message||"حدث خطأ أثناء إزالة القيد الشامل",variant:"destructive"})}});Ze({mutationFn:async({pageKey:Q,userIdentifier:oe})=>ce(`/api/restrictions/global/${Q}/exceptions`,"POST",{userIdentifier:oe}),onSuccess:()=>{n({title:"تم إضافة الاستثناء",description:"تم إضافة الاستثناء بنجاح"}),m(""),D()},onError:Q=>{n({title:"خطأ في إضافة الاستثناء",description:Q.message||"حدث خطأ أثناء إضافة الاستثناء",variant:"destructive"})}});const U=Ze({mutationFn:async({pageKey:Q,userId:oe})=>ce(`/api/restrictions/global/${Q}/exceptions/${oe}`,"DELETE"),onSuccess:()=>{n({title:"تم إزالة الاستثناء",description:"تم إزالة الاستثناء بنجاح"}),D()},onError:Q=>{n({title:"خطأ في إزالة الاستثناء",description:Q.message||"حدث خطأ أثناء إزالة الاستثناء",variant:"destructive"})}}),W=Ze({mutationFn:async({pageKey:Q,identifiers:oe})=>(await ce(`/api/restrictions/global/${Q}/exceptions/bulk`,"POST",{identifiers:oe,reason:"استثناء إدخال متعدد"})).json(),onSuccess:Q=>{E(Q),n({title:"تمت معالجة العملية",description:Q.message||"تم إضافة الاستثناءات بنجاح"}),D()},onError:Q=>{n({title:"خطأ في إضافة الاستثناءات",description:Q.message||"حدث خطأ أثناء إضافة الاستثناءات المتعددة",variant:"destructive"})}}),{data:re}=$e({queryKey:["/api/audit-logs"],staleTime:30*1e3}),we=()=>{if(!r.trim()){n({title:"خطأ",description:"يرجى إدخال رقم الحساب أو البريد الإلكتروني",variant:"destructive"});return}$.mutate(r.trim())},be=Q=>{var jt;if(!i)return;const Ae={disable_market:{pageKey:"market",reason:"تعطيل مؤقت للسوق"},disable_all:{pageKey:"all",reason:"تعطيل شامل للحساب"},remove_all:"remove_all"}[Q];Q==="remove_all"?(jt=i.restrictions)==null||jt.filter(O=>O.isActive).forEach(O=>{Z.mutate(O.id)}):(v({pageKey:Ae.pageKey,scope:"page",reason:Ae.reason,isActive:!0,duration:"",durationType:"hours"}),c(!0))},J=Q=>new Date(Q).toLocaleString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Fe=()=>{y.trim()&&(p.allowedUsers.includes(y.trim())||(b({...p,allowedUsers:[...p.allowedUsers,y.trim()]}),m("")))},Oe=Q=>{b({...p,allowedUsers:p.allowedUsers.filter(oe=>oe!==Q)})},Ve=Q=>Q.trim()?Q.split(/[\n,;،؛\s]+/).map(oe=>oe.trim()).filter(oe=>oe.length>0):[],Ne=()=>{S(""),E(null),w(!1),k("")},qe=()=>{const Q=Ve(L);if(Q.length===0){n({title:"لا يوجد معرفات",description:"يرجى إدخال أرقام حساب أو عناوين بريد إلكتروني",variant:"destructive"});return}if(Q.length>100){n({title:"عدد كبير جداً",description:"يمكن إضافة حد أقصى 100 حساب في المرة الواحدة",variant:"destructive"});return}W.mutate({pageKey:N,identifiers:Q})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إدارة قيود الوصول"}),e.jsx("p",{className:"text-muted-foreground",children:"تحكم في وصول المستخدمين للصفحات والميزات المختلفة"})]})]}),e.jsxs(cr,{value:d,onValueChange:f,className:"w-full",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ot,{value:"individual",className:"flex items-center gap-2",children:[e.jsx(k2,{className:"w-4 h-4"}),"قيود المستخدمين"]}),e.jsxs(Ot,{value:"global",className:"flex items-center gap-2",children:[e.jsx(On,{className:"w-4 h-4"}),"قيود شاملة"]})]}),e.jsxs(Kt,{value:"individual",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(Fn,{className:"w-5 h-5"}),"البحث عن مستخدم"]}),e.jsx(Se,{children:"ابحث برقم الحساب (مثل: 33003002) أو البريد الإلكتروني"})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(pe,{placeholder:"رقم الحساب أو البريد الإلكتروني...",value:r,onChange:Q=>a(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&we(),className:"flex-1"}),e.jsx(M,{onClick:we,disabled:$.isPending,children:$.isPending?"جاري البحث...":"بحث"})]})})]}),i&&i.user&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(X,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k2,{className:"w-5 h-5"}),"معلومات المستخدم"]}),((ve=i.restrictions)==null?void 0:ve.some(Q=>Q.pageKey==="all"&&Q.isActive))&&e.jsxs(ie,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(Gr,{className:"w-3 h-3"}),"تعطيل شامل"]})]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"الاسم"}),e.jsx("p",{className:"font-medium",children:i.user.fullName})]}),e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"البريد الإلكتروني"}),e.jsx("p",{className:"font-medium",children:i.user.email})]}),e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"رقم الحساب"}),e.jsx("p",{className:"font-medium font-mono text-lg bg-muted px-2 py-1 rounded",children:i.user.accountNumber})]}),e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"حالة الحساب"}),e.jsx(ie,{variant:i.user.active?"default":"destructive",children:i.user.active?"نشط":"معطل"})]})]}),e.jsx(fs,{}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>be("disable_market"),children:"تعطيل السوق"}),e.jsx(M,{variant:"destructive",size:"sm",onClick:()=>be("disable_all"),children:"تعطيل شامل"}),e.jsx(M,{variant:"secondary",size:"sm",onClick:()=>be("remove_all"),children:"إلغاء كل القيود"}),e.jsxs(M,{variant:"default",size:"sm",onClick:()=>c(!0),children:[e.jsx(kn,{className:"w-4 h-4 mr-1"}),"إضافة قيد جديد"]})]})]})]}),o&&i&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"إضافة قيد جديد"})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"pageKey",children:"الصفحة أو الميزة"}),e.jsxs(Nt,{value:j.pageKey,onValueChange:Q=>v({...j,pageKey:Q}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر الصفحة..."})}),e.jsx(wt,{children:Ku.map(Q=>e.jsx(te,{value:Q.value,children:Q.label},Q.value))})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"scope",children:"نطاق القيد"}),e.jsxs(Nt,{value:j.scope,onValueChange:Q=>v({...j,scope:Q}),children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"page",children:"صفحة"}),e.jsx(te,{value:"section",children:"قسم"}),e.jsx(te,{value:"global",children:"شامل"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"reason",children:"سبب القيد"}),e.jsx(Un,{placeholder:"اكتب سبب تطبيق هذا القيد...",value:j.reason,onChange:Q=>v({...j,reason:Q.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"duration",children:"مدة القيد (اختياري)"}),e.jsx(pe,{type:"number",placeholder:"عدد...",value:j.duration,onChange:Q=>v({...j,duration:Q.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"durationType",children:"نوع المدة"}),e.jsxs(Nt,{value:j.durationType,onValueChange:Q=>v({...j,durationType:Q}),children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"hours",children:"ساعات"}),e.jsx(te,{value:"days",children:"أيام"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(ji,{checked:j.isActive,onCheckedChange:Q=>v({...j,isActive:Q})}),e.jsx(Ce,{className:j.isActive?"text-destructive font-medium":"text-muted-foreground",children:j.isActive?"🚫 حظر المستخدم":"✅ السماح للمستخدم"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{disabled:!j.pageKey||!j.scope||F.isPending,children:F.isPending?"جاري الحفظ...":"حفظ القيد"})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد تطبيق القيد"}),e.jsx(Ni,{children:"هل أنت متأكد من تطبيق هذا القيد على المستخدم؟ سيتم منعه فوراً من الوصول للصفحة المحددة."})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>F.mutate(j),children:"تأكيد"})]})]})]}),e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"إلغاء"})]})]})]}),i&&i.restrictions&&i.restrictions.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"القيود الحالية"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-3",children:i.restrictions.map(Q=>{var oe;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{variant:Q.isActive?"destructive":"secondary",children:((oe=Ku.find(Ae=>Ae.value===Q.pageKey))==null?void 0:oe.label)||Q.pageKey}),e.jsx(ie,{variant:"outline",children:Q.scope}),Q.expiresAt&&e.jsxs(ie,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(la,{className:"w-3 h-3"}),"ينتهي ",J(Q.expiresAt)]})]}),Q.reason&&e.jsx("p",{className:"text-sm text-muted-foreground",children:Q.reason}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["أضيف بواسطة: ",Q.createdByName," • ",J(Q.createdAt)]})]}),e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(is,{className:"w-4 h-4"})})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد إزالة القيد"}),e.jsx(Ni,{children:"هل أنت متأكد من إزالة هذا القيد؟ سيتمكن المستخدم من الوصول للصفحة فوراً."})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>Z.mutate(Q.id),children:"إزالة"})]})]})]})]},Q.id)})})})]}),re&&Array.isArray(re)&&re.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"سجل التدقيق (آخر 100 عملية)"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Array.isArray(re)&&re.map(Q=>{var oe;return e.jsxs("div",{className:"flex items-center justify-between p-2 border-b text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:Q.actorName})," ",e.jsx("span",{children:Q.action==="upsert_restriction"?"أضاف/حدث قيد":"أزال قيد"}),((oe=Q.data)==null?void 0:oe.pageKey)&&e.jsxs("span",{children:[" على صفحة ",e.jsx(ie,{variant:"outline",className:"text-xs",children:Q.data.pageKey})]})]}),e.jsx("span",{className:"text-muted-foreground",children:J(Q.createdAt)})]},Q.id)})})})]})]}),e.jsxs(Kt,{value:"global",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(On,{className:"w-5 h-5"}),"إضافة قيد شامل جديد"]}),e.jsx(Se,{children:"القيود الشاملة تطبق على جميع المستخدمين بشكل افتراضي"})]}),e.jsxs(z,{children:[e.jsx(M,{onClick:()=>h(!x),children:x?"إلغاء":"إضافة قيد شامل"}),x&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"globalPageKey",children:"نوع الصفحة"}),e.jsxs(Nt,{value:p.pageKey,onValueChange:Q=>b({...p,pageKey:Q}),children:[e.jsx(bt,{children:e.jsx(Ct,{placeholder:"اختر نوع الصفحة"})}),e.jsx(wt,{children:Ku.map(Q=>e.jsx(te,{value:Q.value,children:Q.label},Q.value))})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"globalReason",children:"سبب القيد"}),e.jsx(Un,{placeholder:"اكتب سبب تطبيق هذا القيد الشامل...",value:p.reason,onChange:Q=>b({...p,reason:Q.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"globalDuration",children:"مدة القيد (اختياري)"}),e.jsx(pe,{type:"number",placeholder:"عدد...",value:p.duration,onChange:Q=>b({...p,duration:Q.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"globalDurationType",children:"نوع المدة"}),e.jsxs(Nt,{value:p.durationType,onValueChange:Q=>b({...p,durationType:Q}),children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"hours",children:"ساعات"}),e.jsx(te,{value:"days",children:"أيام"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ji,{checked:p.isActive,onCheckedChange:Q=>b({...p,isActive:Q})}),e.jsx(Ce,{children:"مفعل"})]})]}),e.jsxs("div",{children:[e.jsx(Ce,{children:"المستخدمون المستثنون من هذا القيد"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(pe,{placeholder:"رقم الحساب أو البريد الإلكتروني...",value:y,onChange:Q=>m(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&Fe()}),e.jsx(M,{onClick:Fe,children:"إضافة"})]}),p.allowedUsers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:p.allowedUsers.map((Q,oe)=>e.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[Q,e.jsx(M,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>Oe(Q),children:e.jsx(Xs,{className:"h-3 w-3"})})]},oe))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{disabled:!p.pageKey||B.isPending,children:B.isPending?"جاري الحفظ...":"حفظ القيد الشامل"})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد تطبيق القيد الشامل"}),e.jsx(Ni,{children:"هل أنت متأكد من تطبيق هذا القيد على جميع المستخدمين؟ سيتم منعهم فوراً من الوصول للصفحة المحددة."})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>B.mutate(p),children:"تأكيد"})]})]})]}),e.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"إلغاء"})]})]})]})]}),G&&Array.isArray(G)&&G.length>0&&e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"القيود الشاملة الحالية"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-4",children:G.map(Q=>{var oe;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{variant:Q.isActive?"destructive":"secondary",children:((oe=Ku.find(Ae=>Ae.value===Q.pageKey))==null?void 0:oe.label)||Q.pageKey}),Q.expiresAt&&e.jsxs(ie,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(la,{className:"w-3 h-3"}),"ينتهي ",J(Q.expiresAt)]})]}),e.jsxs(rl,{children:[e.jsx(Vo,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(is,{className:"w-4 h-4"})})}),e.jsxs(yi,{children:[e.jsxs(vi,{children:[e.jsx(wi,{children:"تأكيد إزالة القيد الشامل"}),e.jsx(Ni,{children:"هل أنت متأكد من إزالة هذا القيد الشامل؟ سيتمكن جميع المستخدمين من الوصول للصفحة فوراً."})]}),e.jsxs(bi,{children:[e.jsx(Mi,{children:"إلغاء"}),e.jsx(Ci,{onClick:()=>de.mutate(Q.pageKey),children:"إزالة"})]})]})]})]}),Q.reason&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:Q.reason}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["أضيف بواسطة: ",Q.createdByName," • ",J(Q.createdAt)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:"المستخدمون المستثنون:"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>{k(Q.pageKey),w(!0)},"data-testid":"button-add-multiple-exceptions",children:[e.jsx(Yv,{className:"w-3 h-3 ml-1"}),"إضافة عدة حسابات"]})})]}),Q.exceptions&&Q.exceptions.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:Q.exceptions.map(Ae=>e.jsxs(ie,{variant:"outline",className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-xs font-medium",children:Ae.fullName||"مستخدم غير معروف"}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:Ae.accountNumber||Ae.email})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>U.mutate({pageKey:Q.pageKey,userId:Ae.userId}),children:e.jsx(Xs,{className:"h-3 w-3"})})]},Ae.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"لا يوجد مستخدمون مستثنون"})]})]},Q.id)})})})]})]})]}),e.jsx(Ht,{open:g,onOpenChange:Q=>{Q||Ne()},children:e.jsxs($t,{className:"max-w-2xl",dir:"rtl",children:[e.jsxs(Bt,{children:[e.jsx(Vt,{children:"إضافة عدة حسابات للاستثناءات"}),e.jsxs(ls,{children:["يمكنك إضافة عدة أرقام حساب أو عناوين بريد إلكتروني مفصولة بفواصل أو أسطر جديدة",e.jsx("br",{}),"الصفحة المحددة: ",e.jsx("strong",{children:(Ee=Ku.find(Q=>Q.value===N))==null?void 0:Ee.label})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"bulk-identifiers",children:"أرقام الحساب أو عناوين البريد الإلكتروني"}),e.jsx(Un,{id:"bulk-identifiers",placeholder:`مثال:
33003001
33003002
user@example.com
أو
33003001, 33003002, user@example.com`,value:L,onChange:Q=>S(Q.target.value),className:"min-h-32 text-left font-mono text-sm","data-testid":"textarea-bulk-identifiers",disabled:W.isPending})]}),L.trim()&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ce,{className:"text-sm font-medium",children:"المعرفات المُعتَبَرة:"}),e.jsxs(ie,{variant:"secondary",children:[Ve(L).length," معرف"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:Ve(L).map((Q,oe)=>e.jsx(ie,{variant:"outline",className:"text-xs",children:Q},oe))}),Ve(L).length>100&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"تحذير: العدد أكبر من الحد الأقصى (100)"})]}),T&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{className:"text-sm font-medium",children:"نتائج العملية"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>E(null),children:e.jsx(Xs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-950 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((ne=T.summary)==null?void 0:ne.addedCount)||0}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"تم إضافتها"})]}),e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:((ke=T.summary)==null?void 0:ke.existsCount)||0}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"موجودة مسبقاً"})]}),e.jsxs("div",{className:"p-2 bg-orange-50 dark:bg-orange-950 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:((tt=T.summary)==null?void 0:tt.notFoundCount)||0}),e.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"غير موجودة"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-950 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:((xt=T.summary)==null?void 0:xt.errorCount)||0}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"أخطاء"})]})]}),T.results&&T.results.length>0&&e.jsxs("details",{className:"mt-3",children:[e.jsxs("summary",{className:"cursor-pointer text-sm font-medium hover:text-primary",children:["عرض التفاصيل المفصلة (",T.results.length," عنصر)"]}),e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:T.results.map((Q,oe)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded bg-background",children:[e.jsx("span",{className:"font-mono",children:Q.identifier}),e.jsxs(ie,{variant:Q.status==="added"?"default":Q.status==="exists"?"secondary":Q.status==="not_found"?"outline":"destructive",className:"text-[10px]",children:[Q.status==="added"&&"✅ تم إضافته",Q.status==="exists"&&"🔄 موجود مسبقاً",Q.status==="not_found"&&"❌ غير موجود",Q.status==="error"&&"⚠️ خطأ"]})]},oe))})]})]})]}),e.jsxs(_n,{className:"gap-2",children:[e.jsx(M,{variant:"outline",onClick:Ne,disabled:W.isPending,children:"إلغاء"}),e.jsx(M,{onClick:qe,disabled:W.isPending||!L.trim()||Ve(L).length===0||Ve(L).length>100,"data-testid":"button-submit-bulk-exceptions",children:W.isPending?"جاري المعالجة...":`إضافة ${Ve(L).length} حساب`})]})]})})]})}const _C="ss73ss73ss73@gmail.com";function bce(){const{user:t}=Mt(),[,s]=_t();if(u.useEffect(()=>{if(t&&t.email!==_C){s("/");return}},[t,s]),!t||t.email!==_C)return null;const n=[{id:"pages",title:"الصفحات",description:"إنشاء وتحرير صفحات جديدة",icon:rp,color:"bg-blue-500",route:"/admin/dev-studio/pages"},{id:"components",title:"المكونات",description:"مكتبة المكونات القابلة للإعادة",icon:np,color:"bg-green-500",route:"/admin/dev-studio/components"},{id:"functions",title:"الدوال",description:"دوال قاعدة البيانات والمنطق",icon:C2,color:"bg-purple-500",route:"/admin/dev-studio/functions"},{id:"themes",title:"السمات",description:"الألوان والأشكال والخطوط",icon:e$,color:"bg-pink-500",route:"/admin/dev-studio/themes"},{id:"features",title:"الميزات",description:"تفعيل/تعطيل ميزات النظام",icon:vs,color:"bg-orange-500",route:"/admin/dev-studio/features"},{id:"preview",title:"المعاينة",description:"معاينة التغييرات قبل النشر",icon:wr,color:"bg-teal-500",route:"/admin/dev-studio/preview"},{id:"releases",title:"الإصدارات",description:"إدارة النشر والتراجع",icon:ZU,color:"bg-indigo-500",route:"/admin/dev-studio/releases"},{id:"audit",title:"السجلات",description:"سجل جميع العمليات",icon:mc,color:"bg-red-500",route:"/admin/dev-studio/audit"}];return e.jsxs("div",{className:"space-y-6 p-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dev Studio"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"بيئة التطوير المتكاملة - حصرية للمطور الرئيسي"})]}),e.jsxs(ie,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"نشط"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(rp,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"الصفحات"})]})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(np,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"المكونات"})]})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(C2,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"الدوال"})]})]})})}),e.jsx(_,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(vs,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"الميزات"})]})]})})})]}),e.jsxs(cr,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-2",children:[e.jsx(Ot,{value:"overview",children:"نظرة عامة"}),e.jsx(Ot,{value:"tools",children:"الأدوات"})]}),e.jsx(Kt,{value:"overview",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"أحدث النشاطات"})}),e.jsx(z,{children:e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد نشاطات حديثة"})})]})}),e.jsx(Kt,{value:"tools",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(r=>{const a=r.icon;return e.jsxs(_,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s(r.route),children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.color}`,children:e.jsx(a,{className:"h-5 w-5 text-white"})}),e.jsx(X,{className:"text-lg",children:r.title})]})}),e.jsxs(z,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:r.description}),e.jsx(M,{size:"sm",variant:"outline",className:"w-full",children:"فتح"})]})]},r.id)})})})]}),e.jsx(_,{className:"border-amber-200 bg-amber-50",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white font-bold",children:"!"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800",children:"تنبيه أمني"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"هذه البيئة محمية بمستوى أمان عالي. جميع العمليات مُسجلة ومُراقبة. الوصول محصور على البريد الإلكتروني المصرح له فقط."})]})]})})})]})}const RC="ss73ss73ss73@gmail.com",Xu=[{key:"Card",displayName:"بطاقة",category:"layout",icon:"📋",description:"بطاقة بسيطة لعرض المحتوى",schema:{type:"object",properties:{title:{type:"string",title:"العنوان"},content:{type:"string",title:"المحتوى"},variant:{type:"string",title:"النوع",enum:["default","destructive","outline"],default:"default"}},required:["title"]}},{key:"DataTable",displayName:"جدول البيانات",category:"data",icon:"📊",description:"جدول لعرض البيانات مع بحث وترتيب",schema:{type:"object",properties:{title:{type:"string",title:"عنوان الجدول"},dataSource:{type:"string",title:"مصدر البيانات"},columns:{type:"array",title:"الأعمدة",items:{type:"object",properties:{key:{type:"string",title:"المفتاح"},label:{type:"string",title:"التسمية"},type:{type:"string",title:"النوع",enum:["text","number","date","badge"]}}}}},required:["title","dataSource"]}},{key:"Form",displayName:"نموذج",category:"forms",icon:"📝",description:"نموذج لإدخال البيانات",schema:{type:"object",properties:{title:{type:"string",title:"عنوان النموذج"},submitText:{type:"string",title:"نص زر الإرسال",default:"حفظ"},fields:{type:"array",title:"الحقول",items:{type:"object",properties:{name:{type:"string",title:"اسم الحقل"},label:{type:"string",title:"تسمية الحقل"},type:{type:"string",title:"نوع الحقل",enum:["text","email","number","select","textarea"]},required:{type:"boolean",title:"مطلوب"}}}}},required:["title","fields"]}},{key:"Chart",displayName:"مخطط بياني",category:"charts",icon:"📈",description:"مخطط بياني تفاعلي",schema:{type:"object",properties:{title:{type:"string",title:"عنوان المخطط"},type:{type:"string",title:"نوع المخطط",enum:["line","bar","pie","area"],default:"bar"},dataSource:{type:"string",title:"مصدر البيانات"},height:{type:"number",title:"الارتفاع",default:300}},required:["title","dataSource"]}}];function wce(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState([]),[i,l]=u.useState(null),[o,c]=u.useState(!1),[d,f]=u.useState({route:"",titleAr:"",layout:"default",status:"draft",visibility:"public",allowedRoles:[]});if(u.useEffect(()=>{if(t&&t.email!==RC){s("/");return}},[t,s]),!t||t.email!==RC)return null;const x=()=>{const p={id:Date.now().toString(),route:d.route||"",titleAr:d.titleAr||"",layout:d.layout||"default",status:"draft",visibility:d.visibility||"public",allowedRoles:d.allowedRoles||[],blocks:[]};a([...r,p]),l(p),c(!1),f({route:"",titleAr:"",layout:"default",status:"draft",visibility:"public",allowedRoles:[]}),n({title:"تم إنشاء الصفحة",description:"تم إنشاء الصفحة بنجاح كمسودة"})},h=(p,b="main")=>{var w;if(!i||!Xu.find(N=>N.key===p))return;const m={id:Date.now().toString(),slot:b,componentKey:p,props:{},orderIndex:((w=i.blocks)==null?void 0:w.length)||0},g={...i,blocks:[...i.blocks||[],m]};l(g),a(r.map(N=>N.id===i.id?g:N))},j=p=>{var y;if(!i)return;const b={...i,blocks:((y=i.blocks)==null?void 0:y.filter(m=>m.id!==p))||[]};l(b),a(r.map(m=>m.id===i.id?b:m))},v=p=>{const b=Xu.find(y=>y.key===p.componentKey);return b?e.jsxs("div",{className:"border-2 border-dashed border-blue-300 p-4 rounded-lg bg-blue-50 relative group",children:[e.jsx("div",{className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",children:e.jsx(vs,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500",onClick:()=>j(p.id),children:e.jsx(is,{className:"h-3 w-3"})})]})}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-2xl mb-2",children:b.icon}),e.jsx("div",{className:"font-medium text-sm",children:b.displayName}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:b.description})]})]}):null};return e.jsxs("div",{className:"h-screen flex",dir:"rtl",children:[e.jsxs("div",{className:"w-80 border-l bg-card",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>s("/admin/dev-studio"),children:[e.jsx(Br,{className:"h-4 w-4 ml-2"}),"عودة"]}),e.jsx("h2",{className:"font-bold",children:"مُحرر الصفحات"})]}),e.jsxs(Ht,{children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{className:"w-full",children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"صفحة جديدة"]})}),e.jsxs($t,{children:[e.jsx(Bt,{children:e.jsx(Vt,{children:"إنشاء صفحة جديدة"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"route",children:"المسار"}),e.jsx(pe,{id:"route",placeholder:"/my-new-page",value:d.route,onChange:p=>f({...d,route:p.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"title",children:"العنوان العربي"}),e.jsx(pe,{id:"title",placeholder:"الصفحة الجديدة",value:d.titleAr,onChange:p=>f({...d,titleAr:p.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"visibility",children:"الرؤية"}),e.jsxs(Nt,{value:d.visibility,onValueChange:p=>f({...d,visibility:p}),children:[e.jsx(bt,{children:e.jsx(Ct,{})}),e.jsxs(wt,{children:[e.jsx(te,{value:"public",children:"عامة"}),e.jsx(te,{value:"auth",children:"للمسجلين فقط"}),e.jsx(te,{value:"role_based",children:"حسب الدور"})]})]})]}),e.jsx(M,{onClick:x,className:"w-full",children:"إنشاء الصفحة"})]})]})]})]}),e.jsx("div",{className:"p-4 space-y-2",children:r.map(p=>e.jsx(_,{className:`cursor-pointer transition-colors ${(i==null?void 0:i.id)===p.id?"ring-2 ring-primary":""}`,onClick:()=>l(p),children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:p.titleAr}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.route})]}),e.jsx(ie,{variant:p.status==="published"?"default":"secondary",children:p.status==="published"?"منشور":"مسودة"})]})})},p.id))})]}),e.jsx("div",{className:"flex-1 flex",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 p-6 bg-gray-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border min-h-full",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:i.titleAr}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.route})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(wr,{className:"h-4 w-4 ml-2"}),"معاينة"]}),e.jsxs(M,{size:"sm",children:[e.jsx(pu,{className:"h-4 w-4 ml-2"}),"حفظ"]})]})]})}),e.jsx("div",{className:"p-6",children:i.blocks&&i.blocks.length>0?e.jsx("div",{className:"space-y-4",children:i.blocks.map(p=>e.jsx("div",{children:v(p)},p.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(rp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"اسحب المكونات من الشريط الجانبي لبناء الصفحة"})]})})]})}),e.jsxs("div",{className:"w-80 border-r bg-card",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-bold",children:"المكونات المتاحة"})}),e.jsxs(cr,{defaultValue:"all",className:"p-4",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ot,{value:"all",children:"الكل"}),e.jsx(Ot,{value:"data",children:"بيانات"}),e.jsx(Ot,{value:"forms",children:"نماذج"})]}),e.jsx(Kt,{value:"all",className:"space-y-2 mt-4",children:Xu.map(p=>e.jsx(_,{className:"cursor-pointer hover:bg-accent transition-colors",onClick:()=>h(p.key),children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"text-lg",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:p.displayName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})})},p.key))}),e.jsx(Kt,{value:"data",className:"space-y-2 mt-4",children:Xu.filter(p=>p.category==="data").map(p=>e.jsx(_,{className:"cursor-pointer hover:bg-accent transition-colors",onClick:()=>h(p.key),children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"text-lg",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:p.displayName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})})},p.key))}),e.jsx(Kt,{value:"forms",className:"space-y-2 mt-4",children:Xu.filter(p=>p.category==="forms").map(p=>e.jsx(_,{className:"cursor-pointer hover:bg-accent transition-colors",onClick:()=>h(p.key),children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"text-lg",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:p.displayName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})})},p.key))})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(rp,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"اختر صفحة من القائمة أو أنشئ صفحة جديدة"})]})})})]})}const N1="ss73ss73ss73@gmail.com",OC={colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",foreground:"#0f172a",muted:"#f8fafc",border:"#e2e8f0",destructive:"#ef4444",success:"#10b981",warning:"#f59e0b"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem"},typography:{fontFamily:"'Tajawal', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"}},borderRadius:{sm:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem"}};function Nce(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState(OC);u.useState(!1);const[i,l]=u.useState([]);u.useEffect(()=>{if(t&&t.email!==N1){s("/");return}},[t,s]),u.useEffect(()=>{t&&t.email===N1&&o()},[t]);const o=async()=>{try{const v=await(await ce("/api/dev-studio/themes","GET")).json();l(v);const p=v.find(b=>b.isActive);p&&p.tokens&&a(p.tokens)}catch(j){console.error("Error loading themes:",j)}};if(!t||t.email!==N1)return null;const c=(j,v)=>{a(p=>{const b={...p,colors:{...p.colors,[j]:v}};return setTimeout(()=>{const y=document.documentElement;y.style.setProperty(`--${j}`,v),y.style.setProperty(`--color-${j}`,v),j==="primary"&&(y.style.setProperty("--primary",v),y.style.setProperty("--primary-foreground","#ffffff"),document.querySelectorAll('button[class*="bg-primary"], .bg-primary, [class*="btn-primary"]').forEach(g=>{g.style.backgroundColor=v,g.style.color="#ffffff"})),j==="secondary"&&(y.style.setProperty("--secondary",v),document.querySelectorAll('button[variant="outline"], .bg-secondary, [class*="btn-secondary"]').forEach(g=>{g.style.borderColor=v,g.style.color=v})),j==="destructive"&&(y.style.setProperty("--destructive",v),y.style.setProperty("--destructive-foreground","#ffffff"),document.querySelectorAll('button[variant="destructive"], .bg-destructive, [class*="btn-destructive"]').forEach(g=>{g.style.backgroundColor=v,g.style.color="#ffffff"})),j==="background"&&(y.style.setProperty("--background",v),document.body.style.backgroundColor=v,document.querySelectorAll('.bg-background, [class*="bg-background"]').forEach(g=>{g.style.backgroundColor=v})),j==="foreground"&&(y.style.setProperty("--foreground",v),document.body.style.color=v),j==="muted"&&y.style.setProperty("--muted",v)},0),b})},d=()=>{const j=document.documentElement;Object.entries(r.colors).forEach(([w,N])=>{j.style.setProperty(`--${w}`,N),j.style.setProperty(`--color-${w}`,N)}),j.style.setProperty("--primary",r.colors.primary),j.style.setProperty("--primary-foreground","#ffffff"),j.style.setProperty("--secondary",r.colors.secondary),j.style.setProperty("--secondary-foreground",r.colors.foreground),j.style.setProperty("--destructive",r.colors.destructive),j.style.setProperty("--destructive-foreground","#ffffff"),document.body.style.backgroundColor=r.colors.background,document.body.style.color=r.colors.foreground,document.querySelectorAll('.bg-background, [class*="bg-background"]').forEach(w=>{w.style.backgroundColor=r.colors.background}),document.querySelectorAll('.bg-muted, [class*="bg-muted"]').forEach(w=>{w.style.backgroundColor=r.colors.muted}),document.querySelectorAll('button[class*="bg-primary"], .bg-primary, [class*="btn-primary"], button:not([variant]):not([class*="outline"]):not([class*="destructive"]):not([class*="ghost"]):not([class*="link"])').forEach(w=>{w.style.backgroundColor=r.colors.primary,w.style.color="#ffffff",w.style.borderColor=r.colors.primary}),document.querySelectorAll('button[variant="outline"], [class*="outline"], button[class*="btn-outline"]').forEach(w=>{w.style.backgroundColor="transparent",w.style.borderColor=r.colors.secondary,w.style.color=r.colors.secondary}),document.querySelectorAll('button[variant="destructive"], .bg-destructive, [class*="btn-destructive"]').forEach(w=>{w.style.backgroundColor=r.colors.destructive,w.style.color="#ffffff",w.style.borderColor=r.colors.destructive}),Object.entries(r.spacing).forEach(([w,N])=>{j.style.setProperty(`--spacing-${w}`,N)}),Object.entries(r.borderRadius).forEach(([w,N])=>{j.style.setProperty(`--radius-${w}`,N)}),j.style.setProperty("--font-family",r.typography.fontFamily),document.querySelectorAll("button").forEach(w=>{const N=w,k=N.className;k.includes("destructive")||N.getAttribute("variant")==="destructive"?(N.style.backgroundColor=r.colors.destructive,N.style.color="#ffffff",N.style.borderColor=r.colors.destructive):k.includes("outline")||N.getAttribute("variant")==="outline"?(N.style.backgroundColor="transparent",N.style.borderColor=r.colors.secondary,N.style.color=r.colors.secondary):k.includes("ghost")||N.getAttribute("variant")==="ghost"?(N.style.backgroundColor="transparent",N.style.color=r.colors.foreground,N.style.border="none"):k.includes("link")||(N.style.backgroundColor=r.colors.primary,N.style.color="#ffffff",N.style.borderColor=r.colors.primary)}),n({title:"تم تطبيق السمة",description:"تم تطبيق السمة الجديدة بنجاح على جميع الأزرار والعناصر والخلفيات"})},f=()=>{a(OC),n({title:"تم إعادة تعيين السمة",description:"تم إعادة السمة إلى الإعدادات الافتراضية"})},x=async()=>{try{const j=new Date().toLocaleString("ar-SA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),p=await(await ce("/api/dev-studio/themes","POST",{name:`سمة مخصصة - ${j}`,tokens:r,isActive:!0})).json();await o(),n({title:"تم حفظ السمة",description:"تم حفظ السمة بنجاح في قاعدة البيانات"})}catch(j){console.error("Error saving theme:",j),n({title:"خطأ في الحفظ",description:"حدث خطأ أثناء حفظ السمة",variant:"destructive"})}},h=({label:j,value:v,onChange:p})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{className:"text-sm font-medium",children:j}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 rounded-md border-2 border-gray-200 cursor-pointer",style:{backgroundColor:v},onClick:()=>{const b=document.createElement("input");b.type="color",b.value=v,b.onchange=y=>p(y.target.value),b.click()}}),e.jsx(pe,{type:"text",value:v,onChange:b=>p(b.target.value),className:"flex-1 font-mono text-sm",placeholder:"#000000"})]})]});return e.jsxs("div",{className:"h-screen flex",dir:"rtl",children:[e.jsxs("div",{className:"w-80 border-l bg-card",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>s("/admin/dev-studio"),children:[e.jsx(Br,{className:"h-4 w-4 ml-2"}),"عودة"]}),e.jsx("h2",{className:"font-bold",children:"مُحرر السمات"})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:d,style:{borderColor:r.colors.secondary,color:r.colors.secondary},children:[e.jsx(wr,{className:"h-4 w-4 ml-2"}),"معاينة"]}),e.jsxs(M,{size:"sm",onClick:x,style:{backgroundColor:r.colors.primary,color:"#ffffff"},children:[e.jsx(pu,{className:"h-4 w-4 ml-2"}),"حفظ"]}),e.jsx(M,{variant:"destructive",size:"sm",onClick:f,style:{backgroundColor:r.colors.destructive,color:"#ffffff"},children:"إعادة تعيين"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs(cr,{defaultValue:"colors",className:"space-y-4",children:[e.jsxs(Xn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ot,{value:"colors",children:"الألوان"}),e.jsx(Ot,{value:"typography",children:"النصوص"}),e.jsx(Ot,{value:"spacing",children:"المسافات"})]}),e.jsxs(Kt,{value:"colors",className:"space-y-4",children:[i.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"السمات المحفوظة"}),e.jsx("div",{className:"space-y-2",children:i.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm",children:j.name}),j.isActive&&e.jsx("span",{className:"text-xs text-green-600 mr-2",children:"(نشطة)"})]}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>{j.tokens&&(a(j.tokens),n({title:"تم تحميل السمة",description:`تم تحميل سمة "${j.name}"`}))},children:"تحميل"})]},j.id))}),e.jsx(fs,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"الألوان الأساسية"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{label:"اللون الأساسي",value:r.colors.primary,onChange:j=>c("primary",j)}),e.jsx(h,{label:"اللون الثانوي",value:r.colors.secondary,onChange:j=>c("secondary",j)}),e.jsx(h,{label:"لون التمييز",value:r.colors.accent,onChange:j=>c("accent",j)})]})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"ألوان الخلفية"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{label:"خلفية رئيسية",value:r.colors.background,onChange:j=>c("background",j)}),e.jsx(h,{label:"خلفية مخففة",value:r.colors.muted,onChange:j=>c("muted",j)}),e.jsx(h,{label:"النص الأساسي",value:r.colors.foreground,onChange:j=>c("foreground",j)})]}),e.jsxs("div",{className:"mt-4 p-3 border rounded",style:{backgroundColor:r.colors.background,color:r.colors.foreground},children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"معاينة الخلفية:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-2 rounded",style:{backgroundColor:r.colors.muted},children:"خلفية مخففة"}),e.jsx("div",{className:"text-sm",children:"هذا نص بلون النص الأساسي على الخلفية الرئيسية"})]})]})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"ألوان الحالة"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{label:"نجاح",value:r.colors.success,onChange:j=>c("success",j)}),e.jsx(h,{label:"تحذير",value:r.colors.warning,onChange:j=>c("warning",j)}),e.jsx(h,{label:"خطر",value:r.colors.destructive,onChange:j=>c("destructive",j)})]})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"ألوان الأزرار"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{label:"زر أساسي",value:r.colors.primary,onChange:j=>c("primary",j)}),e.jsx(h,{label:"زر ثانوي",value:r.colors.secondary,onChange:j=>c("secondary",j)}),e.jsx(h,{label:"زر التأكيد",value:r.colors.success,onChange:j=>c("success",j)}),e.jsx(h,{label:"زر الإلغاء",value:r.colors.destructive,onChange:j=>c("destructive",j)})]}),e.jsxs("div",{className:"mt-4 p-3 border rounded bg-muted/50",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"معاينة الأزرار:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{className:"px-3 py-1 rounded text-sm text-white",style:{backgroundColor:r.colors.primary},children:"زر أساسي"}),e.jsx("button",{className:"px-3 py-1 rounded text-sm border",style:{borderColor:r.colors.secondary,color:r.colors.secondary},children:"زر ثانوي"}),e.jsx("button",{className:"px-3 py-1 rounded text-sm text-white",style:{backgroundColor:r.colors.success},children:"تأكيد"}),e.jsx("button",{className:"px-3 py-1 rounded text-sm text-white",style:{backgroundColor:r.colors.destructive},children:"إلغاء"})]})]})]})]})]}),e.jsx(Kt,{value:"typography",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"fontFamily",children:"خط الكتابة"}),e.jsx(pe,{id:"fontFamily",value:r.typography.fontFamily,onChange:j=>a(v=>({...v,typography:{...v.typography,fontFamily:j.target.value}})),placeholder:"'Tajawal', sans-serif"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"أحجام الخط"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.typography.fontSize).map(([j,v])=>e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm",children:j}),e.jsx(pe,{type:"text",value:v,onChange:p=>a(b=>({...b,typography:{...b.typography,fontSize:{...b.typography.fontSize,[j]:p.target.value}}})),className:"mt-1"})]},j))})]})]})}),e.jsx(Kt,{value:"spacing",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"المسافات"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.spacing).map(([j,v])=>e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm",children:j}),e.jsx(pe,{type:"text",value:v,onChange:p=>a(b=>({...b,spacing:{...b.spacing,[j]:p.target.value}})),className:"mt-1"})]},j))})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"زوايا الحدود"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.borderRadius).map(([j,v])=>e.jsxs("div",{children:[e.jsx(Ce,{className:"text-sm",children:j}),e.jsx(pe,{type:"text",value:v,onChange:p=>a(b=>({...b,borderRadius:{...b.borderRadius,[j]:p.target.value}})),className:"mt-1"})]},j))}),e.jsxs("div",{className:"mt-4 p-3 border rounded bg-muted/50",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"معاينة أشكال الأزرار:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{className:"px-4 py-2 text-sm text-white",style:{backgroundColor:r.colors.primary,borderRadius:r.borderRadius.default},children:["زر عادي (",r.borderRadius.default,")"]}),e.jsxs("button",{className:"px-4 py-2 text-sm text-white",style:{backgroundColor:r.colors.success,borderRadius:r.borderRadius.small},children:["زر صغير (",r.borderRadius.small,")"]}),e.jsxs("button",{className:"px-4 py-2 text-sm text-white",style:{backgroundColor:r.colors.secondary,borderRadius:r.borderRadius.large},children:["زر كبير (",r.borderRadius.large,")"]})]})]})]})]})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:f,className:"flex-1",children:[e.jsx(aE,{className:"h-4 w-4 ml-2"}),"إعادة تعيين"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Cr,{className:"h-4 w-4 ml-2"}),"تصدير"]})]})})]})]}),e.jsx("div",{className:"flex-1 p-6 bg-gray-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border min-h-full",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:"معاينة السمة"}),e.jsx(ie,{children:"معاينة مباشرة"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"لوحة الألوان"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:Object.entries(r.colors).map(([j,v])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm mb-2",style:{backgroundColor:v}}),e.jsx("div",{className:"text-xs font-medium",children:j}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:v})]},j))})]}),e.jsx(fs,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"عرض المكونات"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(M,{children:"زر أساسي"}),e.jsx(M,{variant:"outline",children:"زر فرعي"}),e.jsx(M,{variant:"destructive",children:"زر خطر"})]}),e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(X,{children:"بطاقة تجريبية"})}),e.jsx(z,{children:e.jsx("p",{className:"text-muted-foreground",children:"هذا مثال على بطاقة بالسمة الجديدة. يمكنك رؤية كيف تبدو الألوان والخطوط."})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium",children:"أحجام النصوص"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{style:{fontSize:r.typography.fontSize.xs},children:"نص صغير جداً"}),e.jsx("div",{style:{fontSize:r.typography.fontSize.sm},children:"نص صغير"}),e.jsx("div",{style:{fontSize:r.typography.fontSize.base},children:"نص عادي"}),e.jsx("div",{style:{fontSize:r.typography.fontSize.lg},children:"نص كبير"}),e.jsx("div",{style:{fontSize:r.typography.fontSize.xl},children:"نص كبير جداً"})]})]})]})]})]})]})})]})}const zC="ss73ss73ss73@gmail.com",Cce=[{key:"market_pro",description:"ميزات السوق المتقدمة - عرض تفاصيل إضافية وإحصائيات",category:"market"},{key:"advanced_charts",description:"المخططات البيانية المتقدمة في التقارير",category:"reports"},{key:"voice_messages",description:"الرسائل الصوتية في الدردشة",category:"chat"},{key:"bulk_transfers",description:"التحويلات المجمعة للمكاتب",category:"transfers"},{key:"multi_currency_wallet",description:"محفظة متعددة العملات",category:"wallet"},{key:"automated_reports",description:"التقارير التلقائية المجدولة",category:"reports"},{key:"commission_calculator",description:"حاسبة العمولة المتقدمة",category:"commissions"},{key:"kyc_verification",description:"نظام التحقق من الهوية المطور",category:"verification"}];function Mce(){const{user:t}=Mt(),[,s]=_t(),{toast:n}=lt(),[r,a]=u.useState([]);u.useState(null);const[i,l]=u.useState({key:"",description:"",enabled:!1}),[o,c]=u.useState(""),[d,f]=u.useState(!1);if(u.useEffect(()=>{if(t&&t.email!==zC){s("/");return}},[t,s]),u.useEffect(()=>{a([{key:"market_pro",description:"ميزات السوق المتقدمة",enabled:!0,perAccount:{33003002:!0}},{key:"voice_messages",description:"الرسائل الصوتية في الدردشة",enabled:!1,perAccount:{}}])},[]),!t||t.email!==zC)return null;const x=y=>{var m;a(g=>g.map(w=>w.key===y?{...w,enabled:!w.enabled}:w)),n({title:"تم تحديث العلم",description:`تم ${(m=r.find(g=>g.key===y))!=null&&m.enabled?"تعطيل":"تفعيل"} الميزة على مستوى النظام`})},h=y=>{o.trim()&&(a(m=>m.map(g=>g.key===y?{...g,perAccount:{...g.perAccount,[o]:d}}:g)),c(""),f(!1),n({title:"تم إضافة استثناء",description:`تم تطبيق إعداد خاص للحساب ${o}`}))},j=(y,m)=>{a(g=>g.map(w=>w.key===y?{...w,perAccount:Object.fromEntries(Object.entries(w.perAccount).filter(([N])=>N!==m))}:w))},v=()=>{if(!i.key||!i.description)return;const y={key:i.key,description:i.description,enabled:i.enabled,perAccount:{},createdAt:new Date().toISOString()};a(m=>[...m,y]),l({key:"",description:"",enabled:!1}),n({title:"تم إنشاء العلم",description:"تم إنشاء علم ميزة جديد"})},p=()=>{console.log("Saving all flags:",r),n({title:"تم الحفظ",description:"تم حفظ جميع أعلام الميزات بنجاح"})},b=y=>({market:"bg-blue-500",reports:"bg-green-500",chat:"bg-purple-500",transfers:"bg-orange-500",wallet:"bg-teal-500",commissions:"bg-pink-500",verification:"bg-indigo-500"})[y]||"bg-gray-500";return e.jsxs("div",{className:"h-screen flex",dir:"rtl",children:[e.jsxs("div",{className:"w-80 border-l bg-card",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>s("/admin/dev-studio"),children:[e.jsx(Br,{className:"h-4 w-4 ml-2"}),"عودة"]}),e.jsx("h2",{className:"font-bold",children:"أعلام الميزات"})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(Ht,{children:[e.jsx(si,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(kn,{className:"h-4 w-4 ml-2"}),"علم جديد"]})}),e.jsxs($t,{children:[e.jsx(Bt,{children:e.jsx(Vt,{children:"إنشاء علم ميزة جديد"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"key",children:"مفتاح الميزة"}),e.jsx(pe,{id:"key",placeholder:"my_new_feature",value:i.key,onChange:y=>l({...i,key:y.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ce,{htmlFor:"description",children:"الوصف"}),e.jsx(Un,{id:"description",placeholder:"وصف الميزة الجديدة",value:i.description,onChange:y=>l({...i,description:y.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ji,{checked:i.enabled,onCheckedChange:y=>l({...i,enabled:y})}),e.jsx(Ce,{children:"مفعل افتراضياً"})]}),e.jsx(M,{onClick:v,className:"w-full",children:"إنشاء العلم"})]})]})]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:p,children:[e.jsx(pu,{className:"h-4 w-4 ml-2"}),"حفظ الكل"]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"ميزات النظام المتاحة"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Cce.filter(y=>!r.some(m=>m.key===y.key)).map(y=>e.jsx(_,{className:"cursor-pointer hover:bg-accent transition-colors",onClick:()=>{const m={key:y.key,description:y.description,enabled:!1,perAccount:{}};a(g=>[...g,m])},children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${b(y.category)}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:y.key}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]})]})})},y.key))})]})]}),e.jsx("div",{className:"flex-1 p-6 bg-gray-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border min-h-full",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:"إدارة أعلام الميزات"}),e.jsxs(ie,{variant:"outline",children:[r.filter(y=>y.enabled).length," / ",r.length," مفعل"]})]})}),e.jsx("div",{className:"p-6",children:r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(y=>e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{className:"text-base",children:y.key}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.description})]}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ie,{variant:y.enabled?"default":"secondary",children:y.enabled?"مفعل":"معطل"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>x(y.key),children:y.enabled?e.jsx(c$,{className:"h-5 w-5 text-green-500"}):e.jsx(o$,{className:"h-5 w-5 text-gray-400"})})]})]})}),e.jsx(z,{children:e.jsxs(cr,{defaultValue:"global",className:"w-full",children:[e.jsxs(Xn,{children:[e.jsxs(Ot,{value:"global",children:[e.jsx(js,{className:"h-4 w-4 ml-2"}),"إعداد عام"]}),e.jsxs(Ot,{value:"accounts",children:[e.jsx(_i,{className:"h-4 w-4 ml-2"}),"حسابات محددة"]})]}),e.jsx(Kt,{value:"global",className:"mt-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ji,{checked:y.enabled,onCheckedChange:()=>x(y.key)}),e.jsx(Ce,{children:"تفعيل هذه الميزة لجميع المستخدمين"})]})}),e.jsxs(Kt,{value:"accounts",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(pe,{placeholder:"رقم الحساب",value:o,onChange:m=>c(m.target.value),className:"flex-1"}),e.jsx(ji,{checked:d,onCheckedChange:f}),e.jsx(M,{size:"sm",onClick:()=>h(y.key),children:"إضافة"})]}),Object.entries(y.perAccount).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{className:"text-sm font-medium",children:"الاستثناءات المُعرّفة:"}),Object.entries(y.perAccount).map(([m,g])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ie,{variant:g?"default":"secondary",children:m}),e.jsx("span",{className:"text-sm",children:g?"مفعل":"معطل"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>j(y.key,m),children:"إزالة"})]},m))]})]})]})})]},y.key))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(vs,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"لا توجد أعلام ميزات"}),e.jsx("p",{children:"اختر ميزة من الشريط الجانبي أو أنشئ علم جديد"})]})})]})})]})}function Sce(){const{user:t}=Mt(),[,s]=_t(),n=(t==null?void 0:t.type)==="agent",r=(t==null?void 0:t.type)==="admin",i=[{title:"التحويل الدولي",description:"إدارة التحويلات الدولية بين المكاتب مع تتبع العمولات والأرصدة",icon:e.jsx(uo,{className:"h-8 w-8 text-blue-600"}),path:"/office-management",available:n||r,color:"border-blue-200 hover:border-blue-300"},{title:"إعدادات العمولة",description:"إدارة معدلات العمولة للتحويلات الدولية والمحلية",icon:e.jsx(Li,{className:"h-8 w-8 text-green-600"}),path:"/agent/commission-settings",available:n,color:"border-green-200 hover:border-green-300"},{title:"استلام حوالة مكتب",description:"استلام وتأكيد الحوالات الواردة من المكاتب الأخرى",icon:e.jsx(GU,{className:"h-8 w-8 text-purple-600"}),path:"/inter-office-receive",available:n,color:"border-purple-200 hover:border-purple-300"}].filter(l=>l.available);return e.jsx(__,{pageKey:"international",pageName:"الخدمات الدولية",children:e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",dir:"rtl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(On,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"الخدمات الدولية"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"إدارة شاملة للتحويلات والخدمات الدولية"})]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map((l,o)=>e.jsxs(_,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg ${l.color}`,children:[e.jsxs(q,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:l.icon}),e.jsx(X,{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.title}),e.jsx(Se,{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:l.description})]}),e.jsx(z,{className:"pt-0",children:e.jsxs(M,{onClick:()=>s(l.path),className:"w-full group hover:bg-blue-600 hover:text-white transition-colors",variant:"outline",children:["الدخول إلى الخدمة",e.jsx(hl,{className:"h-4 w-4 mr-2 group-hover:translate-x-1 transition-transform"})]})})]},o))}),!n&&!r&&e.jsxs(_,{className:"mt-8 border-amber-200 bg-amber-50 dark:bg-amber-900/20",children:[e.jsx(q,{children:e.jsxs(X,{className:"text-amber-800 dark:text-amber-200 flex items-center gap-2",children:[e.jsx(On,{className:"h-5 w-5"}),"معلومة هامة"]})}),e.jsx(z,{children:e.jsx("p",{className:"text-amber-700 dark:text-amber-300",children:"الخدمات الدولية متاحة للوكلاء المعتمدين فقط. يرجى طلب ترقية الحساب للوصول إلى هذه الخدمات."})})]}),i.length===0&&(n||r)&&e.jsx(_,{className:"mt-8 border-gray-200",children:e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-gray-600 dark:text-gray-400",children:"لا توجد خدمات متاحة حالياً"}),e.jsx(Se,{children:"يتم تحديث الخدمات المتاحة بناءً على نوع الحساب والصلاحيات"})]})})]})})}function kce(){const[,t]=_t(),{user:s}=Mt(),n=new URLSearchParams(window.location.search),r=n.get("reason")||"تم تقييد وصولك لهذه الصفحة",a=n.get("page")||"غير محدد",i=l=>({market:"السوق",send:"الإرسال",receive:"الاستقبال",wallet:"المحفظة",dashboard:"لوحة التحكم",kyc:"التوثيق",chat:"المحادثات",inter_office:"التحويل بين المكاتب",international:"التحويل الدولي",reports:"التقارير",settings:"الإعدادات",admin:"الإدارة",all:"جميع الصفحات"})[l]||l;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs(_,{className:"border-red-200 dark:border-red-800",children:[e.jsxs(q,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(Gr,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx(X,{className:"text-xl text-red-800 dark:text-red-200",children:"تم تقييد الوصول"}),e.jsx(Se,{className:"text-red-600 dark:text-red-300",children:"لا يمكنك الوصول إلى هذه الصفحة حالياً"})]}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-2",children:"تفاصيل القيد:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"الصفحة المقيدة:"})," ",e.jsx("span",{className:"text-red-700 dark:text-red-300",children:i(a)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"السبب:"})," ",e.jsx("span",{className:"text-red-700 dark:text-red-300",children:r})]}),s&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"رقم الحساب:"})," ",e.jsx("span",{className:"text-red-700 dark:text-red-300",children:s.accountNumber||s.email})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"ماذا يمكنني فعله؟"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"• تواصل مع فريق الدعم لمراجعة حالة حسابك"}),e.jsx("li",{children:"• تأكد من التزامك بشروط وأحكام الخدمة"}),e.jsx("li",{children:"• يمكنك الوصول للصفحات الأخرى غير المقيدة"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(M,{onClick:()=>t("/"),className:"flex-1",variant:"outline",children:[e.jsx(sE,{className:"w-4 h-4 mr-2"}),"العودة للرئيسية"]}),e.jsxs(M,{onClick:()=>t("/support"),className:"flex-1",children:[e.jsx(_l,{className:"w-4 h-4 mr-2"}),"تواصل مع الدعم"]})]}),e.jsx("div",{className:"text-xs text-center text-muted-foreground",children:"إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع فريق الدعم"})]})]})})})}function et({path:t,component:s}){const{user:n,isLoading:r}=Mt();return r?e.jsx(di,{path:t,children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ft,{className:"h-8 w-8 animate-spin text-border"})})}):n?e.jsx(di,{path:t,component:s}):e.jsx(di,{path:t,children:e.jsx(s7,{to:"/auth"})})}function Lce({children:t}){const[s,n]=_t();Mt();const{isAndroidAppMode:r}=Mu(),a=[{id:"home",label:"الرئيسية",icon:sE,path:"/dashboard",active:s==="/dashboard"||s==="/"},{id:"internal-transfer",label:"تحويل داخلي",icon:ec,path:"/internal-transfer",active:s==="/internal-transfer"},{id:"city-transfers",label:"المدن",icon:uo,path:"/city-transfers",active:s==="/city-transfers"},{id:"inter-office-transfer",label:"دولي",icon:On,path:"/office-management",active:s==="/office-management"},{id:"market",label:"السوق",icon:Cf,path:"/market",active:s==="/market"},{id:"wallet",label:"المحفظة",icon:wa,path:"/balance",active:s==="/balance"}];return r?e.jsxs("div",{className:"android-app-container h-screen flex flex-col bg-background",children:[e.jsx("main",{className:"flex-1 pb-12 sm:pb-20 overflow-auto scrollbar-hide",children:e.jsx("div",{className:"safe-area-content min-h-full px-0.5 sm:px-2 py-0.5 sm:py-2 bg-[000000]",children:t})}),e.jsx("nav",{className:"bottom-nav bg-background/98 backdrop-blur-md border-t border-border/40 fixed bottom-0 left-0 right-0 z-50 flex items-center justify-around h-12 sm:h-20 px-0.5 safe-area-bottom shadow-xl",children:a.map(i=>{const l=i.icon;return e.jsxs(M,{variant:"ghost",className:"whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 flex flex-col items-center justify-center gap-0.5 sm:gap-1 h-full min-w-0 flex-1 rounded-lg mx-0.5 py-0.5 sm:py-1.5 px-0.5 transition-all duration-300 active:scale-95 touch-manipulation text-muted-foreground hover:text-foreground hover:bg-muted/50 active:bg-muted/70 bg-[#ff9900]",onClick:()=>n(i.path),children:[e.jsx(l,{className:`${i.active?"h-2.5 w-2.5 sm:h-4 sm:w-4":"h-2 w-2 sm:h-3.5 sm:w-3.5"} transition-all duration-300`}),e.jsx("span",{className:`text-[7px] sm:text-[10px] font-medium truncate leading-tight max-w-full text-center ${i.active?"font-bold":"font-medium"}`,children:i.label})]},i.id)})})]}):e.jsx(e.Fragment,{children:t})}function Tce(){return e.jsxs(t7,{children:[e.jsx(di,{path:"/",component:jW}),e.jsx(di,{path:"/auth",component:AJ}),e.jsx(di,{path:"/auth-old",component:LJ}),e.jsx(et,{path:"/dashboard",component:fq}),e.jsx(et,{path:"/balance",component:Ise}),e.jsx(et,{path:"/transfers",component:pq}),e.jsx(et,{path:"/internal-transfer",component:one}),e.jsx(et,{path:"/statement",component:ice}),e.jsx(et,{path:"/notifications",component:fre}),e.jsx(et,{path:"/chat",component:Zle}),e.jsx(et,{path:"/private-chat/:userId",component:kC}),e.jsx(et,{path:"/private-chat",component:kC}),e.jsx(et,{path:"/group-chats",component:qle}),e.jsx(et,{path:"/group-chats/:groupId",component:toe}),e.jsx(et,{path:"/market/direct",component:()=>(window.location.href="/market",null)}),e.jsx(et,{path:"/market",component:Lse}),e.jsx(et,{path:"/upgrade-request",component:bq}),e.jsx(et,{path:"/external-transfer-request",component:pce}),e.jsx(et,{path:"/verify-account",component:Dse}),e.jsx(et,{path:"/city-transfers",component:Pse}),e.jsx(et,{path:"/receive-city-transfer",component:Use}),e.jsx(et,{path:"/office-commission",component:zse}),e.jsx(et,{path:"/simple-commissions",component:Fse}),e.jsx(et,{path:"/verification",component:sne}),e.jsx(et,{path:"/verification-form",component:nne}),e.jsx(et,{path:"/user-dashboard",component:ane}),e.jsx(et,{path:"/admin",component:Jq}),e.jsx(et,{path:"/admin-transactions",component:DC}),e.jsx(et,{path:"/admin/transactions",component:DC}),e.jsx(et,{path:"/admin-upgrade-requests",component:E4}),e.jsx(et,{path:"/admin/upgrade-requests",component:E4}),e.jsx(et,{path:"/admin-simple-transfers",component:$se}),e.jsx(et,{path:"/admin-transfers-dashboard",component:tne}),e.jsx(et,{path:"/admin-verification",component:rne}),e.jsx(et,{path:"/admin-users",component:q4}),e.jsx(et,{path:"/admin/users",component:q4}),e.jsx(et,{path:"/admin-notifications",component:xne}),e.jsx(et,{path:"/office-management",component:moe}),e.jsx(et,{path:"/agent/commission-settings",component:LC}),e.jsx(et,{path:"/inter-office-transfer",component:()=>(window.location.href="/office-management",null)}),e.jsx(et,{path:"/inter-office-commissions",component:()=>(window.location.href="/office-management",null)}),e.jsx(et,{path:"/agent-commission-settings",component:soe}),e.jsx(et,{path:"/commission-settings",component:LC}),e.jsx(et,{path:"/commission-pool",component:EC}),e.jsx(et,{path:"/admin/commission-pool",component:EC}),e.jsx(et,{path:"/system-commission-rates",component:IC}),e.jsx(et,{path:"/admin/system-commission-rates",component:IC}),e.jsx(et,{path:"/admin-countries",component:coe}),e.jsx(et,{path:"/admin/multi-currency-commission-settings",component:Joe}),e.jsx(et,{path:"/admin/enhanced-commission-settings",component:Koe}),e.jsx(et,{path:"/simple-commission-settings",component:Xoe}),e.jsx(et,{path:"/admin/commission-logs",component:ece}),e.jsx(et,{path:"/admin/internal-transfer-logs",component:rce}),e.jsx(et,{path:"/receipts-management",component:oce}),e.jsx(et,{path:"/security-admin",component:tce}),e.jsx(di,{path:"/security-test",component:sce}),e.jsx(di,{path:"/security-demo",component:nce}),e.jsx(et,{path:"/inter-office-receive",component:AC}),e.jsx(et,{path:"/transfers/inter-office",component:AC}),e.jsx(et,{path:"/user-receive-settings",component:poe}),e.jsx(et,{path:"/settings",component:Zh}),e.jsx(et,{path:"/dashboard/settings",component:Zh}),e.jsx(et,{path:"/user-settings",component:Zh}),e.jsx(et,{path:"/account-settings",component:Zh}),e.jsx(et,{path:"/support",component:Qoe}),e.jsx(et,{path:"/receive-international-transfer",component:Woe}),e.jsx(et,{path:"/referrals",component:gce}),e.jsx(et,{path:"/admin/referral-settings",component:yce}),e.jsx(et,{path:"/admin/fixed-rewards",component:vce}),e.jsx(et,{path:"/admin/restrictions",component:PC}),e.jsx(et,{path:"/admin/access-restrictions",component:PC}),e.jsx(et,{path:"/admin/dev-studio",component:bce}),e.jsx(et,{path:"/admin/dev-studio/pages",component:wce}),e.jsx(et,{path:"/admin/dev-studio/themes",component:Nce}),e.jsx(et,{path:"/admin/dev-studio/features",component:Mce}),e.jsx(et,{path:"/international",component:Sce}),e.jsx(di,{path:"/blocked",component:kce}),e.jsx(et,{path:"/international-transfer-receive",component:cce}),e.jsx(et,{path:"/voice-test",component:fce}),e.jsx(et,{path:"/admin/message-monitoring",component:mce}),e.jsx(di,{component:UY})]})}function Ece(){return e.jsx(cW,{defaultTheme:"dark",storageKey:"exchange-theme",children:e.jsx(N7,{client:Qe,children:e.jsx(RY,{children:e.jsx(YY,{children:e.jsx(dre,{children:e.jsx(yoe,{children:e.jsxs(GE,{children:[e.jsx(Z$,{}),e.jsx(FY,{}),e.jsx(Lce,{children:e.jsx(Tce,{})})]})})})})})})})}document.documentElement.dir="rtl";document.documentElement.lang="ar";"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>console.log("✅ PWA: Service Worker registered")).catch(t=>console.error("❌ PWA: SW registration failed:",t));qL(document.getElementById("root")).render(e.jsx(Ece,{}));
